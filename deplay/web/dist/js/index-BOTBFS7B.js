import{r as e,j as o}from"./vendor-react-BvY5jkjb.js";import{e4 as g}from"./vendor-common-DvYBgWFG.js";import{f as m}from"./index-BO69pAs_.js";import{Y as h,k as y,w as v,x,a5 as b,a6 as H}from"./vendor-antd-VwCNQJi5.js";import"./route-login-BWcqE1fc.js";import"./route-layout-33ldzD5l.js";import"./vendor-redux-D__shqzO.js";import"./vendor-router-C3iwmVt3.js";const R=()=>{const[d,s]=e.useState(0),[c,r]=e.useState(0),[n,u]=e.useState([]),[t,f]=e.useState(!0);return e.useEffect(()=>{f(!0),m().then(l=>{if(l.data){s(l.data.lastHour.inbound||0),r(l.data.lastHour.outbound||0);const j=Object.entries(l.data.intervals).map(([a,i])=>({hour:a,inbound:Number(i.inbound),outbound:Number(i.outbound)})).sort((a,i)=>i.hour.localeCompare(a.hour)),p=[];j.forEach(a=>{p.push({hour:a.hour,count:a.inbound,type:"入库"}),p.push({hour:a.hour,count:a.outbound,type:"出库"})}),u(p)}}).catch(()=>{s(0),r(0),u([])}).finally(()=>f(!1))},[]),{lastHourInbound:d,lastHourOutbound:c,chartData:n,loading:t}};g.locale("zh-cn");const w=()=>{const{lastHourInbound:d,lastHourOutbound:s,chartData:c,loading:r}=R(),n=c.map(t=>({hour:t.hour,type:t.type,value:t.count})),u={data:n,isGroup:!0,xField:"hour",yField:"value",seriesField:"type",group:{padding:0},color:({type:t})=>t==="入库"?"#5B8FF9":"#5AD8A6",xAxis:{label:{autoHide:!0,autoRotate:!1,formatter:t=>typeof t=="string"?t.slice(11,13):t}},tooltip:!1,label:{position:"top",style:{fill:"#333",fontWeight:500},formatter:t=>typeof t.value=="number"&&t.value!==0?t.value:""},legend:{position:"top"},height:300};return o.jsx(h,{style:{width:"100%"},children:o.jsxs(y,{spinning:r,children:[o.jsxs(v,{gutter:16,children:[o.jsx(x,{span:12,children:o.jsx(h,{children:o.jsx(b,{title:"最近1小时入库数量",value:d})})}),o.jsx(x,{span:12,children:o.jsx(h,{children:o.jsx(b,{title:"最近1小时出库数量",value:s})})})]}),o.jsxs("div",{style:{marginTop:20},children:[o.jsx("h3",{children:"最近24小时出入库数量（小时统计）"}),n.length>0?o.jsx("div",{style:{height:"320px"},children:o.jsx(H,{...u})}):o.jsx("p",{children:"暂无数据"})]})]})})};export{w as default};
