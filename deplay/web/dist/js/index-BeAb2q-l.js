import{r as a,h6 as b,j as e,Y as k,hk as M,hb as I,ha as x,l as i,V as D,hl as g,gU as f}from"./vendor-core-BL9Phd6R.js";import{q as N,t as A,v as R,w as C}from"./route-login-p179xrQD.js";import{A as d}from"./index-CGF89V7j.js";import{a as l}from"./route-layout-De7MC9tK.js";const Y=()=>{const[s]=b(),[h,j]=a.useState([]),[y,r]=a.useState(!1),[u,m]=a.useState(!1),[o,c]=a.useState(),p=async()=>{const t=await N();j(t.data)},T=[{title:"部门名称",dataIndex:"departmentName",key:"departmentName"},{title:"排序",align:"center",dataIndex:"departmentOrder",key:"departmentOrder"},{title:"部门描述",align:"center",dataIndex:"departmentDescription",key:"departmentDescription"},{title:"创建时间",align:"center",dataIndex:"createTime",key:"createTime",render:t=>f(t).format("YYYY-MM-DD HH:mm:ss")},{title:"更新时间",align:"center",dataIndex:"updateTime",key:"updateTime",render:t=>f(t).format("YYYY-MM-DD HH:mm:ss")},{title:"操作",dataIndex:"operation",align:"center",key:"operation",render:(t,n)=>e.jsxs("div",{className:"text-[#00b0f0] flex gap-2 items-center justify-center cursor-pointer",children:[e.jsx(d,{permission:l.permissionDicMap.UPDATE_DEPARTMENT,children:e.jsx("span",{onClick:()=>{c(n),m(!0),r(!0),s.setFieldsValue(n)},children:"编辑"})}),e.jsx(d,{permission:l.permissionDicMap.ADD_DEPARTMENT,children:e.jsx("span",{onClick:()=>{c(n),m(!1),r(!0),s.resetFields()},children:"新增部门"})}),e.jsx(d,{permission:l.permissionDicMap.DELETE_DEPARTMENT,children:e.jsx("span",{className:"text-red-500",onClick:()=>{x.confirm({title:"确认删除",content:"确定要删除该部门吗？",okText:"确定",cancelText:"取消",onOk:async()=>{await A(n.id),await p()}})},children:"删除"})})]})}],E=()=>{s.validateFields().then(async t=>{if(u){if(!o?.id)return;await R(o?.id,t)}else await C({...t,parentDepartment:o?.id});r(!1),p().then()})};return a.useEffect(()=>{p().then()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center app-card-flat p-4",children:[e.jsx("span",{className:"font-bold",children:"部门列表"}),e.jsx(d,{permission:l.permissionDicMap.ADD_DEPARTMENT,children:e.jsx(k,{type:"primary",icon:e.jsx(M,{}),onClick:()=>{c(void 0),s.resetFields(),m(!1),r(!0)},children:"新增"})})]}),e.jsx(I,{columns:T,dataSource:h,bordered:!0,rowKey:"id"},"departmentTable"),e.jsx(x,{open:y,onCancel:()=>r(!1),title:u?"编辑":"新增",onOk:E,children:e.jsxs(i,{form:s,labelAlign:"left",labelCol:{span:6},autoComplete:"off",children:[e.jsx(i.Item,{name:"departmentName",label:"部门名称",rules:[{required:!0}],children:e.jsx(D,{placeholder:"请输入"})}),e.jsx(i.Item,{name:"departmentDescription",label:"部门描述",rules:[{required:!0}],children:e.jsx(D,{placeholder:"请输入"})}),e.jsx(i.Item,{name:"departmentOrder",label:"排序",rules:[{required:!0}],children:e.jsx(g,{style:{width:"100%"},type:"number",placeholder:"请输入"})})]})})]})},P=a.memo(Y);export{P as default};
