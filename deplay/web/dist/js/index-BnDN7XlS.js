import{r as s,j as t}from"./vendor-react-BvY5jkjb.js";import{e4 as j}from"./vendor-common-DvYBgWFG.js";import{A as S}from"./route-login-BWcqE1fc.js";import{F as i,s as F,a0 as k,o as w,a4 as M,O as b}from"./vendor-antd-VwCNQJi5.js";import"./route-layout-33ldzD5l.js";import"./vendor-redux-D__shqzO.js";import"./vendor-router-C3iwmVt3.js";const A={1:"入库",2:"出库"},L=a=>S.post({url:"/asset/exception/lost",data:a}),N=()=>{const[a]=i.useForm(),[l,p]=F.useMessage(),[d,m]=s.useState(!1),[h,x]=s.useState([]),[y,f]=s.useState(0),[c,g]=s.useState(1),[r,I]=s.useState(10),u=async()=>{const e=a.getFieldsValue();m(!0);try{const o={limit:r,offset:(c-1)*r,...e.hours&&{hours:e.hours}},n=await L(o);n?.code===200?(console.log(n.data),x(n.data.list),f(n.data.total)):l.error("获取异常资产列表失败")}catch(o){console.error("查询失败:",o),l.error("查询失败")}finally{m(!1)}},T=[{title:"资产ID",dataIndex:"assetId",key:"assetId"},{title:"操作类型",dataIndex:"actionType",key:"actionType",render:e=>A[e]||e},{title:"起始场库",dataIndex:"storeFrom",key:"storeFrom"},{title:"目标场库",dataIndex:"storeTo",key:"storeTo"},{title:"操作时间",dataIndex:"actionTime",key:"actionTime",render:e=>e?j(e).format("YYYY-MM-DD HH:mm:ss"):"-"}];return s.useEffect(()=>{a.setFieldsValue({hours:24}),u()},[c,r]),t.jsxs("div",{className:"p-6",children:[p,t.jsxs(i,{form:a,onFinish:u,layout:"inline",children:[t.jsx(i.Item,{name:"hours",label:"往前推多少小时",initialValue:24,children:t.jsx(k,{min:1,precision:0})}),t.jsx(i.Item,{children:t.jsx(w,{type:"primary",htmlType:"submit",loading:d,icon:t.jsx(M,{}),children:"查询"})})]}),t.jsx(b,{columns:T,dataSource:h,rowKey:"assetId",loading:d,className:"mt-4",pagination:{current:c,pageSize:r,total:y,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`,onChange:(e,o)=>{g(e),I(o||10)}}})]})};export{N as default};
