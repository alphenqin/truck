import{r as e,j as o,hh as p,K as g,h2 as y,h3 as f,hq as x,gU as m}from"./vendor-core-BL9Phd6R.js";import{f as v}from"./index-CIatPsxy.js";import{C as H}from"./vendor-charts-CmHNSbmT.js";import"./route-login-r9SQJoz-.js";import"./route-layout-BrOgEPTf.js";const C=()=>{const[d,s]=e.useState(0),[c,n]=e.useState(0),[r,u]=e.useState([]),[t,b]=e.useState(!0);return e.useEffect(()=>{b(!0),v().then(l=>{if(l.data){s(l.data.lastHour.inbound||0),n(l.data.lastHour.outbound||0);const j=Object.entries(l.data.intervals).map(([a,i])=>({hour:a,inbound:Number(i.inbound),outbound:Number(i.outbound)})).sort((a,i)=>i.hour.localeCompare(a.hour)),h=[];j.forEach(a=>{h.push({hour:a.hour,count:a.inbound,type:"入库"}),h.push({hour:a.hour,count:a.outbound,type:"出库"})}),u(h)}}).catch(()=>{s(0),n(0),u([])}).finally(()=>b(!1))},[]),{lastHourInbound:d,lastHourOutbound:c,chartData:r,loading:t}};m.locale("zh-cn");const A=()=>{const{lastHourInbound:d,lastHourOutbound:s,chartData:c,loading:n}=C(),r=c.map(t=>({hour:t.hour,type:t.type,value:t.count})),u={data:r,isGroup:!0,xField:"hour",yField:"value",seriesField:"type",group:{padding:0},color:({type:t})=>t==="入库"?"#5B8FF9":"#5AD8A6",xAxis:{label:{autoHide:!0,autoRotate:!1,formatter:t=>typeof t=="string"?t.slice(11,13):t}},tooltip:!1,label:{position:"top",style:{fill:"#333",fontWeight:500},formatter:t=>typeof t.value=="number"&&t.value!==0?t.value:""},legend:{position:"top"},height:300};return o.jsx(p,{style:{width:"100%"},children:o.jsxs(g,{spinning:n,children:[o.jsxs(y,{gutter:16,children:[o.jsx(f,{span:12,children:o.jsx(p,{children:o.jsx(x,{title:"最近1小时入库数量",value:d})})}),o.jsx(f,{span:12,children:o.jsx(p,{children:o.jsx(x,{title:"最近1小时出库数量",value:s})})})]}),o.jsxs("div",{style:{marginTop:20},children:[o.jsx("h3",{children:"最近24小时出入库数量（小时统计）"}),r.length>0?o.jsx("div",{style:{height:"320px"},children:o.jsx(H,{...u})}):o.jsx("p",{children:"暂无数据"})]})]})})};export{A as default};
