import{r as i,j as s,hh as d,K as u,hr as f,hs as x,ht as m,hu as j,hv as p,hw as y}from"./vendor-core-BL9Phd6R.js";import{A as g}from"./route-login-p179xrQD.js";import"./route-layout-De7MC9tK.js";const l={1:"正常在库",2:"正常出库",3:"异常待修",4:"维修中",5:"报废",6:"呆滞",7:"疑似丢失"},S=()=>g.get({url:"/asset/status"}),n=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ffc658"],v=()=>{const[o,c]=i.useState(!0),[a,r]=i.useState([]);return i.useEffect(()=>{(async()=>{c(!0);try{const t=await S();t&&t.data&&Array.isArray(t.data.list)?r(t.data.list):(r([]),console.error("获取资产状态统计数据格式不正确:",t))}catch(t){console.error("获取资产状态统计失败:",t),r([])}finally{c(!1)}})()},[]),s.jsx("div",{className:"p-6",children:s.jsx(d,{title:"资产状态统计",className:"h-full",children:o?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx(u,{size:"large"})}):a.length>0?s.jsx(f,{width:"100%",height:400,children:s.jsxs(x,{children:[s.jsx(m,{data:a,dataKey:"count",nameKey:"status",cx:"50%",cy:"50%",outerRadius:150,fill:"#8884d8",label:({status:e,percent:t})=>`${l[e]||e}: ${(t*100).toFixed(1)}%`,children:a.map((e,t)=>s.jsx(j,{fill:n[t%n.length]},`cell-${t}`))}),s.jsx(p,{formatter:(e,t,h)=>[`${e}个`,l[h.payload.status]||t]}),s.jsx(y,{formatter:e=>l[parseInt(e)]||e})]})}):s.jsx("div",{className:"flex justify-center items-center h-full",children:"暂无数据"})})})};export{v as default};
