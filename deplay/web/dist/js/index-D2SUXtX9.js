import{r as a,j as e}from"./vendor-react-BvY5jkjb.js";import{q as b,t as M,v as k,w as I}from"./route-login-BWcqE1fc.js";import{e4 as x}from"./vendor-common-DvYBgWFG.js";import{G as N,o as g,$ as A,O as R,N as f,F as i,l as D,a0 as C}from"./vendor-antd-VwCNQJi5.js";import{A as d}from"./index-BXJhWmd9.js";import{a as l}from"./route-layout-33ldzD5l.js";import"./vendor-router-C3iwmVt3.js";import"./vendor-redux-D__shqzO.js";const F=()=>{const[r]=N(),[j,h]=a.useState([]),[y,s]=a.useState(!1),[u,m]=a.useState(!1),[o,p]=a.useState(),c=async()=>{const t=await b();h(t.data)},T=[{title:"部门名称",dataIndex:"departmentName",key:"departmentName"},{title:"排序",align:"center",dataIndex:"departmentOrder",key:"departmentOrder"},{title:"部门描述",align:"center",dataIndex:"departmentDescription",key:"departmentDescription"},{title:"创建时间",align:"center",dataIndex:"createTime",key:"createTime",render:t=>x(t).format("YYYY-MM-DD HH:mm:ss")},{title:"更新时间",align:"center",dataIndex:"updateTime",key:"updateTime",render:t=>x(t).format("YYYY-MM-DD HH:mm:ss")},{title:"操作",dataIndex:"operation",align:"center",key:"operation",render:(t,n)=>e.jsxs("div",{className:"text-[#00b0f0] flex gap-2 items-center justify-center cursor-pointer",children:[e.jsx(d,{permission:l.permissionDicMap.UPDATE_DEPARTMENT,children:e.jsx("span",{onClick:()=>{p(n),m(!0),s(!0),r.setFieldsValue(n)},children:"编辑"})}),e.jsx(d,{permission:l.permissionDicMap.ADD_DEPARTMENT,children:e.jsx("span",{onClick:()=>{p(n),m(!1),s(!0),r.resetFields()},children:"新增部门"})}),e.jsx(d,{permission:l.permissionDicMap.DELETE_DEPARTMENT,children:e.jsx("span",{className:"text-red-500",onClick:()=>{f.confirm({title:"确认删除",content:"确定要删除该部门吗？",okText:"确定",cancelText:"取消",onOk:async()=>{await M(n.id),await c()}})},children:"删除"})})]})}],E=()=>{r.validateFields().then(async t=>{if(u){if(!o?.id)return;await k(o?.id,t)}else await I({...t,parentDepartment:o?.id});s(!1),c().then()})};return a.useEffect(()=>{c().then()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-3 flex justify-between items-center app-card-flat p-4",children:[e.jsx("span",{className:"font-bold",children:"部门列表"}),e.jsx(d,{permission:l.permissionDicMap.ADD_DEPARTMENT,children:e.jsx(g,{type:"primary",icon:e.jsx(A,{}),onClick:()=>{p(void 0),r.resetFields(),m(!1),s(!0)},children:"新增"})})]}),e.jsx(R,{columns:T,dataSource:j,bordered:!0,rowKey:"id"},"departmentTable"),e.jsx(f,{open:y,onCancel:()=>s(!1),title:u?"编辑":"新增",onOk:E,children:e.jsxs(i,{form:r,labelAlign:"left",labelCol:{span:6},autoComplete:"off",children:[e.jsx(i.Item,{name:"departmentName",label:"部门名称",rules:[{required:!0}],children:e.jsx(D,{placeholder:"请输入"})}),e.jsx(i.Item,{name:"departmentDescription",label:"部门描述",rules:[{required:!0}],children:e.jsx(D,{placeholder:"请输入"})}),e.jsx(i.Item,{name:"departmentOrder",label:"排序",rules:[{required:!0}],children:e.jsx(C,{style:{width:"100%"},type:"number",placeholder:"请输入"})})]})})]})},H=a.memo(F);export{H as default};
