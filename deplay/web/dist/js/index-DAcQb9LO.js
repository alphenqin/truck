import{r as a,j as t}from"./vendor-react-BvY5jkjb.js";import{A as R}from"./route-login-BWcqE1fc.js";import{e4 as h}from"./vendor-common-DvYBgWFG.js";import{w as k,x as d,l as Y,J as D,o as P,a4 as M,O as v}from"./vendor-antd-VwCNQJi5.js";import"./route-layout-33ldzD5l.js";import"./vendor-redux-D__shqzO.js";import"./vendor-router-C3iwmVt3.js";const A={1:"入库",2:"出库"},F=o=>R.post({url:"/io-record/flow",data:o}),{RangePicker:H}=D,B=()=>{const[o,x]=a.useState([h().subtract(30,"days"),h()]),[r,g]=a.useState(""),[f,n]=a.useState([]),[m,u]=a.useState(!1),[p,w]=a.useState(1),[i,y]=a.useState(10),[j,c]=a.useState(0),T=async()=>{if(!r){n([]),c(0);return}u(!0);try{const[e,s]=o,I={assetCode:r,startTime:e.format("YYYY-MM-DD HH:mm:ss"),endTime:s.format("YYYY-MM-DD HH:mm:ss"),limit:i,offset:(p-1)*i},l=await F(I);console.log("records",l),n(l.data.list),c(l.data.total)}catch(e){console.error("获取工装车记录失败:",e),n([]),c(0)}finally{u(!1)}},C=(e,s)=>{w(e),s&&y(s)},S=[{title:"资产ID",dataIndex:"assetId",key:"assetId",width:100},{title:"操作时间",dataIndex:"actionTime",key:"actionTime",width:180},{title:"操作类型",dataIndex:"actionType",key:"actionType",width:100,render:e=>t.jsx("span",{style:{color:e===1?"#52c41a":"#f5222d"},children:A[e]||"-"})},{title:"起始场库",dataIndex:"storeFrom",key:"storeFrom",width:150},{title:"目标场库",dataIndex:"storeTo",key:"storeTo",width:150}];return t.jsx("div",{className:"p-6",children:t.jsxs(t.Fragment,{children:[t.jsxs(k,{gutter:16,align:"middle",children:[t.jsx(d,{span:6,children:t.jsx(Y,{placeholder:"请输入工装车编码",value:r,onChange:e=>g(e.target.value),allowClear:!0})}),t.jsx(d,{span:12,children:t.jsx(H,{value:o,onChange:e=>{e&&e[0]&&e[1]&&x([e[0],e[1]])},allowClear:!1})}),t.jsx(d,{children:t.jsx(P,{type:"primary",onClick:T,loading:m,icon:t.jsx(M,{}),children:"查询"})})]}),t.jsx(v,{columns:S,dataSource:f,rowKey:"assetId",loading:m,className:"mt-4",pagination:{current:p,pageSize:i,total:j,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`,onChange:(e,s)=>C(e,s)}})]})})};export{B as default};
