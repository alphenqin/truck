import{r as s,gU as p,j as t,h2 as R,h3 as d,V as k,h8 as Y,Y as D,hp as P,hb as M}from"./vendor-core-BL9Phd6R.js";import{A as v}from"./route-login-p179xrQD.js";import"./route-layout-De7MC9tK.js";const A={1:"入库",2:"出库"},F=o=>v.post({url:"/io-record/flow",data:o}),{RangePicker:H}=Y,N=()=>{const[o,g]=s.useState([p().subtract(30,"days"),p()]),[r,x]=s.useState(""),[f,n]=s.useState([]),[u,h]=s.useState(!1),[m,y]=s.useState(1),[i,j]=s.useState(10),[w,c]=s.useState(0),T=async()=>{if(!r){n([]),c(0);return}h(!0);try{const[e,a]=o,I={assetCode:r,startTime:e.format("YYYY-MM-DD HH:mm:ss"),endTime:a.format("YYYY-MM-DD HH:mm:ss"),limit:i,offset:(m-1)*i},l=await F(I);console.log("records",l),n(l.data.list),c(l.data.total)}catch(e){console.error("获取工装车记录失败:",e),n([]),c(0)}finally{h(!1)}},C=(e,a)=>{y(e),a&&j(a)},S=[{title:"资产ID",dataIndex:"assetId",key:"assetId",width:100},{title:"操作时间",dataIndex:"actionTime",key:"actionTime",width:180},{title:"操作类型",dataIndex:"actionType",key:"actionType",width:100,render:e=>t.jsx("span",{style:{color:e===1?"#52c41a":"#f5222d"},children:A[e]||"-"})},{title:"起始场库",dataIndex:"storeFrom",key:"storeFrom",width:150},{title:"目标场库",dataIndex:"storeTo",key:"storeTo",width:150}];return t.jsx("div",{className:"p-6",children:t.jsxs(t.Fragment,{children:[t.jsxs(R,{gutter:16,align:"middle",children:[t.jsx(d,{span:6,children:t.jsx(k,{placeholder:"请输入工装车编码",value:r,onChange:e=>x(e.target.value),allowClear:!0})}),t.jsx(d,{span:12,children:t.jsx(H,{value:o,onChange:e=>{e&&e[0]&&e[1]&&g([e[0],e[1]])},allowClear:!1})}),t.jsx(d,{children:t.jsx(D,{type:"primary",onClick:T,loading:u,icon:t.jsx(P,{}),children:"查询"})})]}),t.jsx(M,{columns:S,dataSource:f,rowKey:"assetId",loading:u,className:"mt-4",pagination:{current:m,pageSize:i,total:w,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`,onChange:(e,a)=>C(e,a)}})]})})};export{N as default};
