import{r as i,j as s}from"./vendor-react-BvY5jkjb.js";import{A as f}from"./route-login-BWcqE1fc.js";import{Y as u,k as m}from"./vendor-antd-VwCNQJi5.js";import{e5 as h,e6 as p,e7 as x,e8 as j,e9 as y,ea as g}from"./vendor-common-DvYBgWFG.js";import"./route-layout-33ldzD5l.js";import"./vendor-redux-D__shqzO.js";import"./vendor-router-C3iwmVt3.js";const l={1:"正常在库",2:"正常出库",3:"异常待修",4:"维修中",5:"报废",6:"呆滞",7:"疑似丢失"},S=()=>f.get({url:"/asset/status"}),o=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d","#ffc658"],v=()=>{const[n,c]=i.useState(!0),[a,r]=i.useState([]);return i.useEffect(()=>{(async()=>{c(!0);try{const t=await S();t&&t.data&&Array.isArray(t.data.list)?r(t.data.list):(r([]),console.error("获取资产状态统计数据格式不正确:",t))}catch(t){console.error("获取资产状态统计失败:",t),r([])}finally{c(!1)}})()},[]),s.jsx("div",{className:"p-6",children:s.jsx(u,{title:"资产状态统计",className:"h-full",children:n?s.jsx("div",{className:"flex justify-center items-center h-full",children:s.jsx(m,{size:"large"})}):a.length>0?s.jsx(h,{width:"100%",height:400,children:s.jsxs(p,{children:[s.jsx(x,{data:a,dataKey:"count",nameKey:"status",cx:"50%",cy:"50%",outerRadius:150,fill:"#8884d8",label:({status:e,percent:t})=>`${l[e]||e}: ${(t*100).toFixed(1)}%`,children:a.map((e,t)=>s.jsx(j,{fill:o[t%o.length]},`cell-${t}`))}),s.jsx(y,{formatter:(e,t,d)=>[`${e}个`,l[d.payload.status]||t]}),s.jsx(g,{formatter:e=>l[parseInt(e)]||e})]})}):s.jsx("div",{className:"flex justify-center items-center h-full",children:"暂无数据"})})})};export{v as default};
