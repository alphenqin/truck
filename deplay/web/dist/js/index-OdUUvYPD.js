import{r as o,j as e,V as h,hp as P,h2 as p,h3 as n,ha as E,hh as V,Y,G as O}from"./vendor-core-BL9Phd6R.js";import{C as T,B as v,L as S}from"./vendor-charts-CmHNSbmT.js";import"./route-layout-BrOgEPTf.js";const m=[{status:"正常在库",type:"工装车",count:8},{status:"正常在库",type:"牵引车",count:5},{status:"正常出库",type:"工装车",count:3},{status:"正常出库",type:"牵引车",count:2},{status:"异常待修",type:"工装车",count:1},{status:"异常待修",type:"牵引车",count:1},{status:"维修中",type:"工装车",count:2},{status:"维修中",type:"牵引车",count:1},{status:"报废",type:"工装车",count:1},{status:"报废",type:"牵引车",count:0},{status:"呆滞",type:"工装车",count:1},{status:"呆滞",type:"牵引车",count:0},{status:"疑似丢失",type:"工装车",count:0},{status:"疑似丢失",type:"牵引车",count:1}],$=[{warehouse:"12号库",count:25},{warehouse:"14号库",count:18},{warehouse:"01号库",count:10},{warehouse:"03号库",count:5}],q=[{asset:"工装车-A001",location:"12号库",type:"工装车",startTime:8,endTime:12},{asset:"工装车-A001",location:"大门A",type:"工装车",startTime:13,endTime:13.5},{asset:"牵引车-B002",location:"14号库",type:"牵引车",startTime:9,endTime:11},{asset:"牵引车-B002",location:"大门B",type:"牵引车",startTime:11.5,endTime:12},{asset:"工装车-A003",location:"12号库",type:"工装车",startTime:10,endTime:14},{asset:"牵引车-B004",location:"维修车间",type:"牵引车",startTime:14,endTime:16}],b=[{time:"1h",count:2},{time:"2h",count:3},{time:"3h",count:1},{time:"4h",count:0},{time:"5h",count:1},{time:"6h",count:2},{time:"7h",count:0},{time:"8h",count:1}],H=[{time:"08:00",statusType:"维修数量",value:2},{time:"08:00",statusType:"报废数量",value:0},{time:"09:00",statusType:"维修数量",value:3},{time:"09:00",statusType:"报废数量",value:1},{time:"10:00",statusType:"维修数量",value:5},{time:"10:00",statusType:"报废数量",value:2},{time:"11:00",statusType:"维修数量",value:4},{time:"11:00",statusType:"报废数量",value:1},{time:"12:00",statusType:"维修数量",value:6},{time:"12:00",statusType:"报废数量",value:3}],J=[{type:"入库",count:10,gateway:"GW001"},{type:"出库",count:5,gateway:"GW001"},{type:"入库",count:8,gateway:"GW002"},{type:"出库",count:7,gateway:"GW002"},{type:"入库",count:12,gateway:"GW003"},{type:"出库",count:6,gateway:"GW003"}],ee=()=>{const[N,x]=o.useState(!1),[F,y]=o.useState(""),[c,g]=o.useState(null),[u,f]=o.useState(""),[A,j]=o.useState(""),[w,C]=o.useState(""),d=o.useMemo(()=>{const t=m.reduce((a,i)=>a+i.count,0),l=m.filter(a=>a.status.includes("在库")).reduce((a,i)=>a+i.count,0),s=b.reduce((a,i)=>a+i.count,0);return{totalAssets:t,inStorage:l,lostTotal:s}},[]),k={data:m,xField:"status",yField:"count",colorField:"type",group:!0,isStack:!1,style:{inset:5},color:["#2563eb","#22c55e"],xAxis:{title:null,label:{autoRotate:!1}},yAxis:{title:null,min:0},label:!1,tooltip:{shared:!0},legend:{position:"top-right"},height:220},R={data:$,xField:"warehouse",yField:"count",axis:{x:{title:null,label:{autoRotate:!1}},y:{title:null,labelFormatter:t=>t.toFixed(0),min:0}},style:{radiusTopLeft:10,radiusTopRight:10},tooltip:{shared:!0},height:220,color:"#6366f1"},D={data:q.filter(t=>t.asset.includes(A)),xField:"location",yField:["endTime","startTime"],colorField:"location",style:{inset:5},xAxis:{title:null,label:{autoRotate:!1}},yAxis:{title:null,label:{autoRotate:!0},min:0,max:24},label:!1,tooltip:{shared:!0},legend:!1,height:220},B={data:b,xField:"time",yField:"count",axis:{x:{title:null,label:{autoRotate:!1}},y:{title:null,labelFormatter:t=>t.toFixed(0),min:0}},style:{radiusTopLeft:10,radiusTopRight:10},tooltip:{shared:!0},height:220,color:"#ef4444"},M={data:H,xField:"time",yField:"value",seriesField:"statusType",color:({statusType:t})=>t==="维修数量"?"#f59e0b":"#ef4444",point:{shapeField:"circle",sizeField:4},interaction:{tooltip:{marker:!1}},style:{lineWidth:2},xAxis:{title:null,label:{autoRotate:!1}},yAxis:{title:null,min:0},label:!1,legend:{position:"top-right",itemMarker:"circle"},height:220},I={data:(t=>{const l=t.filter(a=>a.gateway.includes(w)),s={入库:0,出库:0};return l.forEach(a=>{s[a.type]+=a.count}),Object.keys(s).map(a=>({type:a,count:s[a]}))})(J),xField:"type",yField:"count",colorField:"type",style:{radiusTopLeft:10,radiusTopRight:10,inset:5},xAxis:{title:null,label:{autoRotate:!1}},yAxis:{title:null,labelFormatter:t=>t.toFixed(0),min:0},label:!1,tooltip:{shared:!0},legend:!1,height:220,color:["#22c55e","#ef4444"]},L=(t,l,s)=>{y(t);const a={...l,height:500,tooltip:!1};g(a),f(s),x(!0)},W=()=>{x(!1),y(""),g(null),f("")},G=t=>{j(t)},z=t=>{C(t)},r=(t,l,s,a=!1)=>e.jsxs(V,{className:"panel-card",styles:{body:{padding:16}},children:[e.jsxs("div",{className:"panel-card-header",children:[e.jsx("div",{className:"panel-card-title",children:t}),e.jsxs("div",{className:"panel-card-actions",children:[a==="assetStay"&&e.jsx(h.Search,{placeholder:"搜索资产编号",onSearch:G,onChange:i=>j(i.target.value),className:"panel-search",allowClear:!0}),a==="circulation"&&e.jsx(h.Search,{placeholder:"搜索网关",onSearch:z,onChange:i=>C(i.target.value),className:"panel-search",allowClear:!0}),e.jsx(Y,{type:"text",icon:e.jsx(O,{}),onClick:()=>L(t,l,s),className:"panel-icon-btn"})]})]}),s==="Column"&&e.jsx(T,{...l}),s==="Bar"&&e.jsx(v,{...l}),s==="Line"&&e.jsx(S,{...l}),s==="Placeholder"&&e.jsx("div",{style:{height:"calc(100% - 40px)",display:"flex",alignItems:"center",justifyContent:"center",color:"#888"},children:"图表内容占位"})]});return e.jsxs("div",{className:"panel-page",children:[e.jsxs("div",{className:"panel-hero",children:[e.jsxs("div",{children:[e.jsx("div",{className:"panel-title",children:"资产看板"}),e.jsx("div",{className:"panel-subtitle",children:"实时掌握资产分布与状态趋势"})]}),e.jsx("div",{className:"panel-hero-actions",children:e.jsx(h,{placeholder:"全局搜索资产编号",prefix:e.jsx(P,{}),className:"panel-hero-search",allowClear:!0})})]}),e.jsxs(p,{gutter:[12,12],className:"panel-kpi-row",children:[e.jsx(n,{xs:24,md:8,children:e.jsxs("div",{className:"panel-kpi-card",children:[e.jsx("div",{className:"panel-kpi-label",children:"资产总量"}),e.jsx("div",{className:"panel-kpi-value",children:d.totalAssets}),e.jsx("div",{className:"panel-kpi-footnote",children:"包含工装车与牵引车"})]})}),e.jsx(n,{xs:24,md:8,children:e.jsxs("div",{className:"panel-kpi-card",children:[e.jsx("div",{className:"panel-kpi-label",children:"在库资产"}),e.jsx("div",{className:"panel-kpi-value",children:d.inStorage}),e.jsx("div",{className:"panel-kpi-footnote",children:"正常在库 + 维修在库"})]})}),e.jsx(n,{xs:24,md:8,children:e.jsxs("div",{className:"panel-kpi-card panel-kpi-alert",children:[e.jsx("div",{className:"panel-kpi-label",children:"疑似丢失"}),e.jsx("div",{className:"panel-kpi-value",children:d.lostTotal}),e.jsx("div",{className:"panel-kpi-footnote",children:"近 8 小时累计"})]})})]}),e.jsxs(p,{gutter:[20,20],className:"panel-chart-row",children:[e.jsx(n,{xs:24,md:8,children:r("资产状态",k,"Column")}),e.jsxs(n,{xs:24,md:8,children:[r("资产在库分布",R,"Column")," "]}),e.jsxs(n,{xs:24,md:8,children:[r("资产停留分布",D,"Bar","assetStay")," "]})]}),e.jsxs(p,{gutter:[20,20],className:"panel-chart-row",children:[e.jsxs(n,{xs:24,md:8,children:[r("疑似丢失统计",B,"Column")," "]}),e.jsxs(n,{xs:24,md:8,children:[r("资产状态趋势",M,"Line")," "]}),e.jsxs(n,{xs:24,md:8,children:[r("流转分析",I,"Column","circulation")," "]})]}),e.jsxs(E,{title:F,open:N,onCancel:W,footer:null,width:"80vw",centered:!0,maskClosable:!0,style:{top:20},bodyStyle:{height:"75vh",overflowY:"auto"},children:[u==="Column"&&c&&e.jsx(T,{...c}),u==="Bar"&&c&&e.jsx(v,{...c}),u==="Line"&&c&&e.jsx(S,{...c}),u==="Placeholder"&&e.jsx("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:24,fontWeight:"bold"},children:"图表内容占位"})]})]})};export{ee as default};
