import{l as i,Z as j,r as s,j as t,hl as S,Y as F,hp as k,hb as w,gU as b}from"./vendor-core-BL9Phd6R.js";import{A as M}from"./route-login-r9SQJoz-.js";import"./route-layout-BrOgEPTf.js";const Y={1:"入库",2:"出库"},A=a=>M.post({url:"/asset/exception/lost",data:a}),C=()=>{const[a]=i.useForm(),[l,p]=j.useMessage(),[d,u]=s.useState(!1),[h,x]=s.useState([]),[y,g]=s.useState(0),[c,f]=s.useState(1),[r,I]=s.useState(10),m=async()=>{const e=a.getFieldsValue();u(!0);try{const o={limit:r,offset:(c-1)*r,...e.hours&&{hours:e.hours}},n=await A(o);n?.code===200?(console.log(n.data),x(n.data.list),g(n.data.total)):l.error("获取异常资产列表失败")}catch(o){console.error("查询失败:",o),l.error("查询失败")}finally{u(!1)}},T=[{title:"资产ID",dataIndex:"assetId",key:"assetId"},{title:"操作类型",dataIndex:"actionType",key:"actionType",render:e=>Y[e]||e},{title:"起始场库",dataIndex:"storeFrom",key:"storeFrom"},{title:"目标场库",dataIndex:"storeTo",key:"storeTo"},{title:"操作时间",dataIndex:"actionTime",key:"actionTime",render:e=>e?b(e).format("YYYY-MM-DD HH:mm:ss"):"-"}];return s.useEffect(()=>{a.setFieldsValue({hours:24}),m()},[c,r]),t.jsxs("div",{className:"p-6",children:[p,t.jsxs(i,{form:a,onFinish:m,layout:"inline",children:[t.jsx(i.Item,{name:"hours",label:"往前推多少小时",initialValue:24,children:t.jsx(S,{min:1,precision:0})}),t.jsx(i.Item,{children:t.jsx(F,{type:"primary",htmlType:"submit",loading:d,icon:t.jsx(k,{}),children:"查询"})})]}),t.jsx(w,{columns:T,dataSource:h,rowKey:"assetId",loading:d,className:"mt-4",pagination:{current:c,pageSize:r,total:y,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`共 ${e} 条记录`,onChange:(e,o)=>{f(e),I(o||10)}}})]})};export{C as default};
