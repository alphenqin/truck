import{a as g,M as I,F as q,c as h}from"./vendor-common-DvYBgWFG.js";import{r as j,j as s}from"./vendor-react-BvY5jkjb.js";import{m as i,c as m,a as d,u as y,b as N,T as k,F as T,d as U,e as F,s as M,f as S,g as $}from"./route-layout-33ldzD5l.js";import{a as E}from"./vendor-router-C3iwmVt3.js";import{F as u,l as b,i as D,m as A,n as O,o as P,s as B}from"./vendor-antd-VwCNQJi5.js";class C{constructor(t,c,o,l=null){this.baseURL=t,this.timeOUT=c,this.interceptor=o,this.cancelTokenSource=l,this.Instance=g.create({baseURL:this.baseURL,timeout:this.timeOUT}),this.interceptor?.requestInterceptor&&this.Instance.interceptors.request.use(this.interceptor.requestInterceptor.onFulfilled,this.interceptor.requestInterceptor.onRejected,this.interceptor.requestInterceptor.options),this.interceptor?.responseInterceptor&&this.Instance.interceptors.response.use(this.interceptor.responseInterceptor.onFulfilled,this.interceptor.responseInterceptor.onRejected)}Instance;request(t){return new Promise((c,o)=>{const l=[],n=[];if(t.requestInterceptor){const a=this.Instance?.interceptors.request.use(t.requestInterceptor.onFulfilled,t.requestInterceptor.onRejected,t.requestInterceptor.options);typeof a=="number"&&l.push(a)}if(t.responseInterceptor){const a=this.Instance?.interceptors.response.use(t.responseInterceptor.onFulfilled,t.responseInterceptor.onRejected);typeof a=="number"&&n.push(a)}this.cancelTokenSource=g.CancelToken.source(),this.Instance?.request({...t,cancelToken:this.cancelTokenSource.token}).then(a=>{if(a instanceof Error){o(a);return}c(a)}).catch(a=>{o(a)}).finally(()=>{this.Instance&&(l.forEach(a=>this.Instance?.interceptors.request.eject(a)),n.forEach(a=>this.Instance?.interceptors.response.eject(a)))})})}cancelRequest(){this.cancelTokenSource&&this.cancelTokenSource.cancel("取消请求")}get(t){return this.request({method:"GET",...t})}post(t){return this.request({method:"POST",...t})}delete(t){return this.request({method:"DELETE",...t})}patch(t){return this.request({method:"PATCH",...t})}put(t){return this.request({method:"PUT",...t})}head(t){return this.request({method:"HEAD",...t})}options(t){return this.request({method:"OPTIONS",...t})}trace(t){return this.request({method:"TRACE",...t})}connect(t){return this.request({method:"CONNECT",...t})}}const r=new C("/cms",1e3*60,{requestInterceptor:{onFulfilled(e){const t=m.get(d.localStorage.token);return t&&(e.headers.Authorization=t),e},onRejected(e){return e}},responseInterceptor:{onFulfilled:e=>{if(e.data.code>201&&i.error(e.data.msg),e.data.code==401){m.clear(),window.location.replace(d.routePath.login),i.error("登录过期，请重新登录");return}return e.data},onRejected(e){const t=e?.response?.data;if(t?.msg?i.error(t.msg):i.error("请求失败，请稍后重试"),t?.code==401){m.clear(),window.location.replace(d.routePath.login),i.error("登录过期，请重新登录");return}return e}}}),z=e=>r.post({url:"/auth/login",data:{...e,password:I.hashStr(e.password)}}),L=()=>r.get({url:"/pages/user"}),X=()=>r.get({url:"/pages"}),Y=e=>r.delete({url:`/pages/${e}`}),Z=(e,t)=>r.patch({url:`/pages/${e}`,data:t}),ee=e=>r.post({url:"/pages",data:e}),te=[{key:"available",label:"可用内存"},{key:"used",label:"已使用内存"},{key:"free",label:"空闲内存"},{key:"active",label:"活跃内存"},{key:"inactive",label:"非活跃内存"},{key:"wired",label:"已分配内存"},{key:"laundry",label:"被回收内存"}],se=()=>r.get({url:"/system"}),re=()=>r.get({url:"/log/commits"}),ae=()=>r.get({url:"/log/commits/count"}),oe=e=>r.post({url:"/users/query",data:e}),ne=e=>r.patch({url:`/users/${e.id}`,data:e}),le=e=>r.delete({url:`/users/${e}`}),ce=e=>r.get({url:`/users/${e}`}),ie=e=>r.post({url:"/users",data:e}),ue=async e=>{const t=await r.post({url:"/users/export",data:{ids:e},responseType:"blob"});q.saveAs(new Blob([t]),"用户表.xlsx")},de=e=>r.get({url:`/users/role/${e.roleID}`,params:{limit:e.limit,offset:e.offset}}),pe=(e,t)=>r.post({url:`/users/query/role/${t}`,data:e}),he=e=>r.post({url:"/roles/query",data:e}),me=e=>r.delete({url:`/roles/${e}`}),xe=async e=>{const t=await r.post({url:"/roles/export",data:{ids:e},responseType:"blob"});q.saveAs(new Blob([t]),"角色表.xlsx")},fe=e=>r.patch({url:`/roles/${e.id}`,data:e}),ge=e=>r.post({url:"/roles",data:e}),be=e=>r.post({url:"/roles/deBindUser",data:e}),qe=e=>r.post({url:"/roles/bindUser",data:e}),je=()=>r.get({url:"/department"}),Re=e=>r.post({url:"/department",data:e}),we=e=>r.delete({url:`/department/${e}`}),ve=(e,t)=>r.patch({url:`/department/${e}`,data:t}),_="/svg/logo-Bati8OWy.svg",G=()=>{const e=E(),[t,c]=j.useState(!1),o=y(),[l]=u.useForm(),{themeMode:n}=N(),a={account:"",password:""},R=p=>{c(!0),z(p).then(async w=>{const{token:v,user:x}=w.data;o(U(x)),o(F(v)),await M(1e3);const f=await L();o(S(x.interfaceDic)),o($(f.data)),f.data?.length?e(d.routePath.main):B.error("暂无任何菜单，请联系管理员")}).catch(()=>{l.resetFields(["password"])}).finally(()=>{c(!1)})};return s.jsxs("div",{className:"min-h-screen flex flex-col select-none",children:[s.jsxs("div",{className:h("relative w-full flex flex-1 items-center justify-center overflow-hidden tran",{"bg-gradient-to-br from-slate-50 via-blue-50/30 to-slate-100":n==="light","bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950":n==="dark"}),children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 flex justify-end p-6",children:s.jsx(k,{})}),s.jsx("div",{className:"pointer-events-none absolute -top-32 -right-32 h-80 w-80 rounded-full bg-blue-400/20 blur-[100px]"}),s.jsx("div",{className:"pointer-events-none absolute -bottom-40 -left-32 h-96 w-96 rounded-full bg-indigo-400/15 blur-[120px]"}),s.jsx("div",{className:"pointer-events-none absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 h-[600px] w-[600px] rounded-full bg-gradient-to-r from-blue-500/5 to-teal-500/5 blur-[80px]"}),s.jsx("div",{className:h("relative z-10 w-full max-w-[1000px] mx-6 overflow-hidden rounded-3xl border shadow-2xl",{"bg-white/95 border-slate-200/80 backdrop-blur-xl shadow-slate-200/50":n==="light","bg-slate-900/95 border-slate-700/50 backdrop-blur-xl shadow-black/40":n==="dark"}),children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[s.jsxs("div",{className:h("hidden md:flex flex-col justify-between p-12 relative overflow-hidden",{"bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 text-white":n==="light","bg-gradient-to-br from-blue-900 via-slate-800 to-slate-900 text-white":n==="dark"}),children:[s.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-blue-400/20 rounded-full blur-2xl"}),s.jsxs("div",{className:"relative flex items-center gap-3",children:[s.jsx("div",{className:"h-11 w-11 rounded-xl bg-white/15 backdrop-blur flex items-center justify-center",children:s.jsx("img",{src:_,alt:"logo",className:"h-7 w-7"})}),s.jsx("span",{className:"text-lg font-bold tracking-wide",children:"工装车管理系统"})]}),s.jsxs("div",{className:"relative space-y-4",children:[s.jsxs("p",{className:"text-4xl font-bold leading-tight tracking-tight",children:["轻量、清晰、",s.jsx("br",{}),"可控"]}),s.jsx("p",{className:"text-base text-white/75 leading-relaxed max-w-[280px]",children:"统一车辆、资产与权限管理，打造简洁一致的操作体验"})]}),s.jsx("div",{className:"relative text-sm text-white/50 font-medium",children:"Version 1.0 · Web 管理端"})]}),s.jsx("div",{className:"flex items-center justify-center px-8 py-14 md:px-14 md:py-16",children:s.jsxs("div",{className:"w-full max-w-[360px] space-y-8",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h1",{className:"text-3xl font-bold text-[var(--app-text)]",children:"欢迎回来"}),s.jsx("p",{className:"text-[var(--app-muted)]",children:"请使用账号密码登录系统"})]}),s.jsxs(u,{onFinish:R,initialValues:a,form:l,autoComplete:"off",className:"space-y-1",children:[s.jsx(u.Item,{name:"account",rules:[{required:!0,message:"请输入账号"}],children:s.jsx(b,{suffix:s.jsx(D,{className:"text-[var(--app-muted)]"}),size:"large",placeholder:"请输入账号"})}),s.jsx(u.Item,{name:"password",rules:[{required:!0,message:"请输入密码"}],children:s.jsx(b.Password,{size:"large",iconRender:p=>p?s.jsx(A,{}):s.jsx(O,{}),placeholder:"请输入密码"})}),s.jsx("div",{className:"pt-4",children:s.jsx(P,{block:!0,htmlType:"submit",type:"primary",loading:t,size:"large",className:"h-12 rounded-xl font-semibold text-base shadow-lg shadow-blue-500/25 hover:shadow-xl hover:shadow-blue-500/30 tran",children:"登录"})})]})]})})]})})]}),s.jsx(T,{})]})},H=j.memo(G),Ie=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{r as A,Ie as B,te as M,re as a,ae as b,he as c,ge as d,xe as e,qe as f,se as g,de as h,be as i,X as j,me as k,pe as l,oe as m,ne as n,le as o,ce as p,je as q,ie as r,ue as s,we as t,fe as u,ve as v,Re as w,Y as x,Z as y,ee as z};
