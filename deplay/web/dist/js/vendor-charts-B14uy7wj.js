import{_ as J,$ as vt,a0 as hh,a1 as ZA,a2 as ce,a3 as Hn,a4 as ds,a5 as oe,a6 as QA,a7 as Nn,a8 as ph,a9 as Bo,aa as Zn,ab as to,ac as Gc,ad as JA,ae as jr,af as vh,ag as tT,ah as eT,ai as nT,aj as rT,ak as iT,al as aT,am as Pt,an as Et,ao as K,ap as Ot,aq as Z,ar as At,as as Qr,at as Nr,au as vn,av as nn,aw as ke,ax as Ht,ay as Nt,az as _t,aA as Wl,aB as ct,aC as Xf,aD as Gl,aE as qf,aF as fi,aG as cr,aH as Ab,aI as si,aJ as Hl,aK as oT,aL as sT,aM as Zt,aN as Tb,aO as ur,aP as hr,aQ as Fa,aR as lT,aS as $s,aT as Rr,aU as fr,aV as Mr,aW as cT,aX as qe,aY as uT,aZ as rn,a_ as Pb,a$ as Vv,b0 as fT,b1 as dT,b2 as Uv,b3 as hT,b4 as pT,b5 as Jr,b6 as Fi,b7 as Mb,b8 as ti,b9 as vT,ba as gT,bb as Xv,bc as yT,bd as mT,be as bT,bf as Bi,bg as Vi,bh as Cb,bi as Ao,bj as Aa,bk as Lb,bl as xT,bm as hs,bn as Al,bo as so,bp as OT,bq as Nb,br as Fs,bs as Bs,bt as qv,bu as wT,bv as _T,bw as ST,bx as zo,by as kT,bz as Wu,bA as Kv,bB as ET,bC as Kf,bD as AT,bE as TT,bF as PT,bG as Rb,bH as Zv,bI as gh,bJ as ps,bK as yh,bL as MT,bM as Ib,bN as jb,bO as Db,bP as $b,bQ as Fb,bR as Bb,bS as zb,bT as Qn,bU as ge,bV as D,bW as De,bX as Gu,bY as vs,bZ as Qv,b_ as CT,b$ as Wb,c0 as LT,c1 as NT,c2 as RT,c3 as IT,c4 as jT,c5 as DT,c6 as $T,c7 as Zf,c8 as Hc,c9 as FT,ca as mh,cb as BT,cc as zT,cd as Gb,ce as WT,cf as Hb,cg as Yb,ch as GT,ci as HT,cj as YT,ck as aa,cl as VT,cm as tr,cn as Jv,co as UT,cp as XT,cq as qT,cr as KT,cs as ZT,ct as QT,cu as JT,cv as tP,cw as eP,cx as nP,cy as rP,cz as iP,cA as aP,cB as oP,cC as sP,cD as lP,cE as cP,cF as uP,cG as fP,cH as dP,cI as hP,cJ as pP,cK as vP,cL as gP,cM as yP,cN as mP,cO as bP,cP as xP,cQ as OP,cR as wP,cS as _P,cT as SP,cU as kP,cV as EP,cW as AP,cX as TP,cY as PP,cZ as MP,c_ as CP,c$ as LP,d0 as Vb,d1 as NP,d2 as RP,d3 as IP,d4 as jP,d5 as DP,d6 as $P,d7 as FP,d8 as BP,d9 as zP,da as WP,db as GP,dc as HP,dd as YP,de as VP,df as UP,dg as XP,dh as qP,di as KP,dj as ZP,dk as QP,dl as JP,dm as tM,dn as eM,dp as nM,dq as rM,dr as iM,ds as aM,dt as oM,du as sM,dv as lM,dw as cM,dx as uM,dy as fM,dz as dM,dA as hM,dB as pM,dC as vM,dD as gM,dE as yM,dF as mM,dG as bM,dH as xM,dI as OM,dJ as wM,dK as _M,dL as SM,dM as kM,dN as EM,dO as AM,dP as TM,dQ as PM,dR as MM,dS as CM,dT as LM,dU as NM,dV as RM,dW as IM,dX as jM,dY as DM,dZ as $M,d_ as FM,d$ as BM,e0 as zM,e1 as WM,e2 as GM,e3 as HM,e4 as YM,e5 as VM,e6 as UM,e7 as XM,e8 as qM,e9 as KM,ea as ZM,eb as QM,ec as JM,ed as t2,ee as bh,ef as e2,eg as Ui,eh as Ub,ei as n2,ej as r2,ek as i2,el as a2,r as Cn,em as Un,en as H,eo as o2}from"./vendor-core-BL9Phd6R.js";import{_ as tg}from"./route-layout-De7MC9tK.js";const Xb=()=>[["cartesian"]];Xb.props={};function s2(t,r){return t=t%(2*Math.PI),r=r%(2*Math.PI),t<0&&(t=2*Math.PI+t),r<0&&(r=2*Math.PI+r),t>=r&&(r=r+2*Math.PI),{startAngle:t,endAngle:r}}const qb=(t={})=>{const r={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},e=Object.assign(Object.assign({},r),t);return Object.assign(Object.assign({},e),s2(e.startAngle,e.endAngle))},gs=t=>{const{startAngle:r,endAngle:e,innerRadius:n,outerRadius:i}=qb(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",r,e,n,i]]};gs.props={};const Kb=({startAngle:t=0,endAngle:r=Math.PI*6,innerRadius:e=0,outerRadius:n=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",t,r,e,n]];Kb.props={};const xh=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];xh.props={transform:!0};const l2=(t={})=>{const r={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},r),t)},Zb=t=>{const{startAngle:r,endAngle:e,innerRadius:n,outerRadius:i}=l2(t);return[...xh(),...gs({startAngle:r,endAngle:e,innerRadius:n,outerRadius:i})]};Zb.props={};const Qb=(t={})=>{const r={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},r),t)},Oh=t=>{const{startAngle:r,endAngle:e,innerRadius:n,outerRadius:i}=Qb(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...gs({startAngle:r,endAngle:e,innerRadius:n,outerRadius:i})]};Oh.props={};const wh=()=>[["parallel",0,1,0,1]];wh.props={};const Jb=({focusX:t=0,focusY:r=0,distortionX:e=2,distortionY:n=2,visual:i=!1})=>[["fisheye",t,r,e,n,i]];Jb.props={transform:!0};const tx=t=>{const{startAngle:r=-Math.PI/2,endAngle:e=Math.PI*3/2,innerRadius:n=0,outerRadius:i=1}=t;return[...wh(),...gs({startAngle:r,endAngle:e,innerRadius:n,outerRadius:i})]};tx.props={};const ex=({value:t})=>r=>r.map(()=>t);ex.props={};const nx=({value:t})=>r=>r.map(t);nx.props={};const rx=({value:t})=>r=>r.map(e=>e[t]);rx.props={};const ix=({value:t})=>()=>t;ix.props={};var Ki=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},ax=function(t,r){if(!Ki(t))return t;for(var e=[],n=0;n<t.length;n++){var i=t[n];r(i,n)&&e.push(i)}return e};function Ge(t){return typeof t=="function"}function gt(t){return t==null}function Le(t){return Array.isArray(t)}const ys=function(t){var r=typeof t;return t!==null&&r==="object"||r==="function"};function _h(t,r){if(t){var e;if(Le(t))for(var n=0,i=t.length;n<i&&(e=r(t[n],n),e!==!1);n++);else if(ys(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=r(t[a],a),e===!1))break}}}var Yc=Object.keys?function(t){return Object.keys(t)}:function(t){var r=[];return _h(t,function(e,n){Ge(t)&&n==="prototype"||r.push(n)}),r};function c2(t,r){var e=Yc(r),n=e.length;if(gt(t))return!n;for(var i=0;i<n;i+=1){var a=e[i];if(r[a]!==t[a]||!(a in t))return!1}return!0}var Qf=function(t){return typeof t=="object"&&t!==null},u2={}.toString,ox=function(t,r){return u2.call(t)==="[object "+r+"]"},Br=function(t){if(!Qf(t)||!ox(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r};function Ba(t,r){if(!Le(t))return null;var e;if(Ge(r)&&(e=r),Br(r)&&(e=function(i){return c2(i,r)}),e){for(var n=0;n<t.length;n+=1)if(e(t[n]))return t[n]}return null}var f2=function(t){if(!Le(t))return[];for(var r=[],e=0;e<t.length;e++)r=r.concat(t[e]);return r};function Yl(t){if(!Array.isArray(t))return-1/0;var r=t.length;if(!r)return-1/0;for(var e=t[0],n=1;n<r;n++)e=Math.max(e,t[n]);return e}const Vl=function(t){if(Le(t))return t.reduce(function(r,e){return Math.min(r,e)},t[0])};var sx=function(t,r,e){if(!Le(t)&&!Br(t))return t;var n=e;return _h(t,function(i,a){n=r(n,i,a)}),n};function pe(t){return typeof t=="string"}function d2(t){if(Ki(t))return t[0]}function xn(t){if(Ki(t)){var r=t;return r[r.length-1]}}var Pe=function(t,r,e){return t<r?r:t>e?e:t};function fe(t){return typeof t=="number"}var h2=1e-5;function Ta(t,r,e){return e===void 0&&(e=h2),t===r||Math.abs(t-r)<e}const p2=function(t,r){if(Le(t)){for(var e,n=-1/0,i=0;i<t.length;i++){var a=t[i],o=Ge(r)?r(a):a[r];o>n&&(e=a,n=o)}return e}},v2=function(t,r){if(Le(t)){for(var e,n=1/0,i=0;i<t.length;i++){var a=t[i],o=Ge(r)?r(a):a[r];o<n&&(e=a,n=o)}return e}};var lx=function(t,r){return(t%r+r)%r};const cx=function(t){return gt(t)?"":t.toString()};var ux=function(t){var r=cx(t);return r.charAt(0).toLowerCase()+r.substring(1)};function g2(t,r){return!t||!r?t:t.replace(/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)==="\\"?e.slice(1):r[n]===void 0?"":r[n]})}var yi=function(t){var r=cx(t);return r.charAt(0).toUpperCase()+r.substring(1)},eg=function(t){return ox(t,"Boolean")};function fx(t){return t===null}var Kt=function(t){return t===void 0};function y2(t){return t instanceof Element||t instanceof Document}function ng(t,r){for(var e in r)r.hasOwnProperty(e)&&e!=="constructor"&&r[e]!==void 0&&(t[e]=r[e])}function dx(t,r,e,n){return r&&ng(t,r),e&&ng(t,e),t}var Wo=function(t){if(typeof t!="object"||t===null)return t;var r;if(Le(t)){r=[];for(var e=0,n=t.length;e<n;e++)typeof t[e]=="object"&&t[e]!=null?r[e]=Wo(t[e]):r[e]=t[e]}else{r={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?r[i]=Wo(t[i]):r[i]=t[i]}return r};function hx(t,r,e){var n;return function(){var i=this,a=arguments,o=function(){n=null,t.apply(i,a)};clearTimeout(n),n=setTimeout(o,r)}}function m2(t){var r,e,n,i=t;function a(s,l){++r>i&&(n=e,o(1),++r),e[s]=l}function o(s){r=0,e=Object.create(null),s||(n=Object.create(null))}return o(),{clear:o,has:function(s){return e[s]!==void 0||n[s]!==void 0},get:function(s){var l=e[s];if(l!==void 0)return l;if((l=n[s])!==void 0)return a(s,l),l},set:function(s,l){e[s]!==void 0?e[s]=l:a(s,l)}}}var Hu=new Map;function b2(t,r,e){var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=r?r.apply(this,i):i[0];Hu.has(t)||Hu.set(t,m2(e));var s=Hu.get(t);if(s.has(o))return s.get(o);var l=t.apply(this,i);return s.set(o,l),l};return n}var x2=5;function O2(t,r){if(Object.hasOwn)return Object.hasOwn(t,r);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),r)}function px(t,r,e,n){e=e||0,n=n||x2;for(var i in r)if(O2(r,i)){var a=r[i];a!==null&&Br(a)?(Br(t[i])||(t[i]={}),e<n?px(t[i],a,e+1,n):t[i]=r[i]):Le(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var X=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var n=0;n<r.length;n+=1)px(t,r[n]);return t},vx=function(t,r){if(!Ki(t))return-1;var e=Array.prototype.indexOf;if(e)return e.call(t,r);for(var n=-1,i=0;i<t.length;i++)if(t[i]===r){n=i;break}return n},Go=function(t,r){if(t===r)return!0;if(!t||!r||pe(t)||pe(r))return!1;if(Ki(t)||Ki(r)){if(t.length!==r.length)return!1;for(var e=!0,n=0;n<t.length&&(e=Go(t[n],r[n]),!!e);n++);return e}if(Qf(t)||Qf(r)){var i=Object.keys(t),a=Object.keys(r);if(i.length!==a.length)return!1;for(var e=!0,n=0;n<i.length&&(e=Go(t[i[n]],r[i[n]]),!!e);n++);return e}return!1},w2=function(t){return t};const _2=function(t,r){r===void 0&&(r=w2);var e={};return ys(t)&&!gt(t)&&Object.keys(t).forEach(function(n){e[n]=r(t[n],n)}),e},mt=function(t,r,e){for(var n=0,i=pe(r)?r.split("."):r;t&&n<i.length;)t=t[i[n++]];return t===void 0||n<i.length?e:t},Vc=function(t,r,e){var n=t,i=pe(r)?r.split("."):r;return i.forEach(function(a,o){o<i.length-1?(ys(n[a])||(n[a]=fe(i[o+1])?[]:{}),n=n[a]):n[a]=e}),t};var S2=Object.prototype.hasOwnProperty;const ms=function(t,r){if(t===null||!Br(t))return{};var e={};return _h(r,function(n){S2.call(t,n)&&(e[n]=t[n])}),e},Sh=function(t,r){return sx(t,function(e,n,i){return r.includes(i)||(e[i]=n),e},{})},Zi=function(t,r,e){var n,i,a,o,s=0;e||(e={});var l=function(){s=e.leading===!1?0:Date.now(),n=null,o=t.apply(i,a),n||(i=a=null)},c=function(){var u=Date.now();!s&&e.leading===!1&&(s=u);var f=r-(u-s);return i=this,a=arguments,f<=0||f>r?(n&&(clearTimeout(n),n=null),s=u,o=t.apply(i,a),n||(i=a=null)):!n&&e.trailing!==!1&&(n=setTimeout(l,f)),o};return c.cancel=function(){clearTimeout(n),s=0,n=i=a=null},c},Yu=function(){},mr=function(t){return t};function Ho(t){return gt(t)?0:Ki(t)?t.length:Object.keys(t).length}var gx={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function k2(t,r,e){if(t[e].length>7){t[e].shift();for(var n=t[e],i=e;n.length;)r[e]="A",t.splice(i+=1,0,["C"].concat(n.splice(0,6)));t.splice(e,1)}}var To={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function yx(t){return Array.isArray(t)&&t.every(function(r){var e=r[0].toLowerCase();return To[e]===r.length-1&&"achlmqstvz".includes(e)})}function mx(t){return yx(t)&&t.every(function(r){var e=r[0];return e===e.toUpperCase()})}function bx(t){return mx(t)&&t.every(function(r){var e=r[0];return"ACLMQZ".includes(e)})}function rg(t){for(var r=t.pathValue[t.segmentStart],e=r.toLowerCase(),n=t.data;n.length>=To[e]&&(e==="m"&&n.length>2?(t.segments.push([r].concat(n.splice(0,2))),e="l",r=r==="m"?"l":"L"):t.segments.push([r].concat(n.splice(0,To[e]))),!!To[e]););}function E2(t){var r=t.index,e=t.pathValue,n=e.charCodeAt(r);if(n===48){t.param=0,t.index+=1;return}if(n===49){t.param=1,t.index+=1;return}t.err='[path-util]: invalid Arc flag "'.concat(e[r],'", expecting 0 or 1 at index ').concat(r)}function A2(t){return t>=48&&t<=57||t===43||t===45||t===46}function va(t){return t>=48&&t<=57}function T2(t){var r=t.max,e=t.pathValue,n=t.index,i=n,a=!1,o=!1,s=!1,l=!1,c;if(i>=r){t.err="[path-util]: Invalid path value at index ".concat(i,', "pathValue" is missing param');return}if(c=e.charCodeAt(i),(c===43||c===45)&&(i+=1,c=e.charCodeAt(i)),!va(c)&&c!==46){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(e[i],'" is not a number');return}if(c!==46){if(a=c===48,i+=1,c=e.charCodeAt(i),a&&i<r&&c&&va(c)){t.err="[path-util]: Invalid path value at index ".concat(n,', "').concat(e[n],'" illegal number');return}for(;i<r&&va(e.charCodeAt(i));)i+=1,o=!0;c=e.charCodeAt(i)}if(c===46){for(l=!0,i+=1;va(e.charCodeAt(i));)i+=1,s=!0;c=e.charCodeAt(i)}if(c===101||c===69){if(l&&!o&&!s){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(e[i],'" invalid float exponent');return}if(i+=1,c=e.charCodeAt(i),(c===43||c===45)&&(i+=1),i<r&&va(e.charCodeAt(i)))for(;i<r&&va(e.charCodeAt(i));)i+=1;else{t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(e[i],'" invalid integer exponent');return}}t.index=i,t.param=+t.pathValue.slice(n,i)}function P2(t){var r=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&r.includes(t)}function Tl(t){for(var r=t.pathValue,e=t.max;t.index<e&&P2(r.charCodeAt(t.index));)t.index+=1}function M2(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function C2(t){return(t|32)===97}function L2(t){var r=t.max,e=t.pathValue,n=t.index,i=e.charCodeAt(n),a=To[e[n].toLowerCase()];if(t.segmentStart=n,!M2(i)){t.err='[path-util]: Invalid path value "'.concat(e[n],'" is not a path command');return}if(t.index+=1,Tl(t),t.data=[],!a){rg(t);return}for(;;){for(var o=a;o>0;o-=1){if(C2(i)&&(o===3||o===4)?E2(t):T2(t),t.err.length)return;t.data.push(t.param),Tl(t),t.index<r&&e.charCodeAt(t.index)===44&&(t.index+=1,Tl(t))}if(t.index>=t.max||!A2(e.charCodeAt(t.index)))break}rg(t)}var N2=function(){function t(r){this.pathValue=r,this.segments=[],this.max=r.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function R2(t){if(yx(t))return[].concat(t);var r=new N2(t);for(Tl(r);r.index<r.max&&!r.err.length;)L2(r);return r.err?r.err:r.segments}function I2(t){if(mx(t))return[].concat(t);var r=R2(t),e=0,n=0,i=0,a=0;return r.map(function(o){var s=o.slice(1).map(Number),l=o[0],c=l.toUpperCase();if(l==="M")return e=s[0],n=s[1],i=e,a=n,["M",e,n];var u;if(l!==c)switch(c){case"A":u=[c,s[0],s[1],s[2],s[3],s[4],s[5]+e,s[6]+n];break;case"V":u=[c,s[0]+n];break;case"H":u=[c,s[0]+e];break;default:{var f=s.map(function(h,p){return h+(p%2?n:e)});u=[c].concat(f)}}else u=[c].concat(s);var d=u.length;switch(c){case"Z":e=i,n=a;break;case"H":e=u[1];break;case"V":n=u[1];break;default:e=u[d-2],n=u[d-1],c==="M"&&(i=e,a=n)}return u})}function j2(t,r){var e=t[0],n=r.x1,i=r.y1,a=r.x2,o=r.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(e)||(r.qx=null,r.qy=null),e==="H")l=["L",t[1],i];else if(e==="V")l=["L",n,t[1]];else if(e==="S"){var c=n*2-a,u=i*2-o;r.x1=c,r.y1=u,l=["C",c,u].concat(s)}else if(e==="T"){var f=n*2-r.qx,d=i*2-r.qy;r.qx=f,r.qy=d,l=["Q",f,d].concat(s)}else if(e==="Q"){var h=s[0],p=s[1];r.qx=h,r.qy=p}return l}function Ul(t){if(bx(t))return[].concat(t);for(var r=I2(t),e=J({},gx),n=0;n<r.length;n+=1){r[n]=j2(r[n],e);var i=r[n],a=i.length;e.x1=+i[a-2],e.y1=+i[a-1],e.x2=+i[a-4]||e.x1,e.y2=+i[a-3]||e.y1}return r}function D2(t){return bx(t)&&t.every(function(r){var e=r[0];return"MC".includes(e)})}function zs(t,r,e){var n=t*Math.cos(e)-r*Math.sin(e),i=t*Math.sin(e)+r*Math.cos(e);return{x:n,y:i}}function kh(t,r,e,n,i,a,o,s,l,c){var u=t,f=r,d=e,h=n,p=s,v=l,g=Math.PI*120/180,y=Math.PI/180*(+i||0),m=[],b,x,O,w,_;if(c)x=c[0],O=c[1],w=c[2],_=c[3];else{b=zs(u,f,-y),u=b.x,f=b.y,b=zs(p,v,-y),p=b.x,v=b.y;var S=(u-p)/2,k=(f-v)/2,E=S*S/(d*d)+k*k/(h*h);E>1&&(E=Math.sqrt(E),d*=E,h*=E);var A=d*d,T=h*h,P=(a===o?-1:1)*Math.sqrt(Math.abs((A*T-A*k*k-T*S*S)/(A*k*k+T*S*S)));w=P*d*k/h+(u+p)/2,_=P*-h*S/d+(f+v)/2,x=Math.asin(((f-_)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),O=Math.asin(((v-_)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),x=u<w?Math.PI-x:x,O=p<w?Math.PI-O:O,x<0&&(x=Math.PI*2+x),O<0&&(O=Math.PI*2+O),o&&x>O&&(x-=Math.PI*2),!o&&O>x&&(O-=Math.PI*2)}var N=O-x;if(Math.abs(N)>g){var I=O,R=p,C=v;O=x+g*(o&&O>x?1:-1),p=w+d*Math.cos(O),v=_+h*Math.sin(O),m=kh(p,v,d,h,i,0,o,R,C,[O,I,w,_])}N=O-x;var L=Math.cos(x),M=Math.sin(x),j=Math.cos(O),F=Math.sin(O),$=Math.tan(N/4),B=4/3*d*$,z=4/3*h*$,W=[u,f],Y=[u+B*M,f-z*L],V=[p+B*F,v-z*j],G=[p,v];if(Y[0]=2*W[0]-Y[0],Y[1]=2*W[1]-Y[1],c)return Y.concat(V,G,m);m=Y.concat(V,G,m);for(var q=[],Q=0,nt=m.length;Q<nt;Q+=1)q[Q]=Q%2?zs(m[Q-1],m[Q],y).y:zs(m[Q],m[Q+1],y).x;return q}function $2(t,r,e,n,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*e,o*r+s*n,o*i+s*e,o*a+s*n,i,a]}function qr(t,r,e){var n=t[0],i=t[1],a=r[0],o=r[1];return[n+(a-n)*e,i+(o-i)*e]}var ig=function(t,r,e,n){var i=.5,a=qr([t,r],[e,n],i);return vt(vt([],a,!0),[e,n,e,n],!1)};function F2(t,r){var e=t[0],n=t.slice(1).map(Number),i=n[0],a=n[1],o,s=r.x1,l=r.y1,c=r.x,u=r.y;switch("TQ".includes(e)||(r.qx=null,r.qy=null),e){case"M":return r.x=i,r.y=a,t;case"A":return o=[s,l].concat(n),["C"].concat(kh(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return r.qx=i,r.qy=a,o=[s,l].concat(n),["C"].concat($2(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(ig(s,l,i,a));case"Z":return s===c&&l===u?["C",s,l,c,u,c,u]:["C"].concat(ig(s,l,c,u))}return t}function Jf(t,r){if(r===void 0&&(r=!1),D2(t)){var e=[].concat(t);return r?[e,[]]:e}for(var n=Ul(t),i=J({},gx),a=[],o="",s=n.length,l,c,u=[],f=0;f<s;f+=1){n[f]&&(o=n[f][0]),a[f]=o;var d=F2(n[f],i);n[f]=d,k2(n,a,f),s=n.length,o==="Z"&&u.push(f),l=n[f],c=l.length,i.x1=+l[c-2],i.y1=+l[c-1],i.x2=+l[c-4]||i.x1,i.y2=+l[c-3]||i.y1}return r?[n,u]:n}function B2(t){return t.map(function(r){return Array.isArray(r)?[].concat(r):r})}function z2(t){var r=t.slice(1).map(function(e,n,i){return n?i[n-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))}).map(function(e){return e.map(function(n,i){return e[e.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(r[0].slice(0,2))].concat(r.map(function(e){return["C"].concat(e.slice(2))}))}function hn(t,r){return Math.sqrt((t[0]-r[0])*(t[0]-r[0])+(t[1]-r[1])*(t[1]-r[1]))}function td(t,r,e,n,i){var a=hn([t,r],[e,n]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:t,y:r};else if(i>=a)o={x:e,y:n};else{var s=qr([t,r],[e,n],i/a),l=s[0],c=s[1];o={x:l,y:c}}return{length:a,point:o,min:{x:Math.min(t,e),y:Math.min(r,n)},max:{x:Math.max(t,e),y:Math.max(r,n)}}}function ag(t,r){var e=t.x,n=t.y,i=r.x,a=r.y,o=e*i+n*a,s=Math.sqrt((Math.pow(e,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(a,2))),l=e*a-n*i<0?-1:1,c=l*Math.acos(o/s);return c}function W2(t,r,e,n,i,a,o,s,l,c){var u=Math.abs,f=Math.sin,d=Math.cos,h=Math.sqrt,p=Math.PI,v=u(e),g=u(n),y=(i%360+360)%360,m=y*(p/180);if(t===s&&r===l)return{x:t,y:r};if(v===0||g===0)return td(t,r,s,l,c).point;var b=(t-s)/2,x=(r-l)/2,O={x:d(m)*b+f(m)*x,y:-f(m)*b+d(m)*x},w=Math.pow(O.x,2)/Math.pow(v,2)+Math.pow(O.y,2)/Math.pow(g,2);w>1&&(v*=h(w),g*=h(w));var _=Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(O.y,2)-Math.pow(g,2)*Math.pow(O.x,2),S=Math.pow(v,2)*Math.pow(O.y,2)+Math.pow(g,2)*Math.pow(O.x,2),k=_/S;k=k<0?0:k;var E=(a!==o?1:-1)*h(k),A={x:E*(v*O.y/g),y:E*(-(g*O.x)/v)},T={x:d(m)*A.x-f(m)*A.y+(t+s)/2,y:f(m)*A.x+d(m)*A.y+(r+l)/2},P={x:(O.x-A.x)/v,y:(O.y-A.y)/g},N=ag({x:1,y:0},P),I={x:(-O.x-A.x)/v,y:(-O.y-A.y)/g},R=ag(P,I);!o&&R>0?R-=2*p:o&&R<0&&(R+=2*p),R%=2*p;var C=N+R*c,L=v*d(C),M=g*f(C),j={x:d(m)*L-f(m)*M+T.x,y:f(m)*L+d(m)*M+T.y};return j}function G2(t,r,e,n,i,a,o,s,l,c,u){var f,d=u.bbox,h=d===void 0?!0:d,p=u.length,v=p===void 0?!0:p,g=u.sampleSize,y=g===void 0?30:g,m=typeof c=="number",b=t,x=r,O=0,w=[b,x,O],_=[b,x],S=0,k={x:0,y:0},E=[{x:b,y:x}];m&&c<=0&&(k={x:b,y:x});for(var A=0;A<=y;A+=1){if(S=A/y,f=W2(t,r,e,n,i,a,o,s,l,S),b=f.x,x=f.y,h&&E.push({x:b,y:x}),v&&(O+=hn(_,[b,x])),_=[b,x],m&&O>=c&&c>w[2]){var T=(O-c)/(O-w[2]);k={x:_[0]*(1-T)+w[0]*T,y:_[1]*(1-T)+w[1]*T}}w=[b,x,O]}return m&&c>=O&&(k={x:s,y:l}),{length:O,point:k,min:{x:Math.min.apply(null,E.map(function(P){return P.x})),y:Math.min.apply(null,E.map(function(P){return P.y}))},max:{x:Math.max.apply(null,E.map(function(P){return P.x})),y:Math.max.apply(null,E.map(function(P){return P.y}))}}}function H2(t,r,e,n,i,a,o,s,l){var c=1-l;return{x:Math.pow(c,3)*t+3*Math.pow(c,2)*l*e+3*c*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(c,3)*r+3*Math.pow(c,2)*l*n+3*c*Math.pow(l,2)*a+Math.pow(l,3)*s}}function xx(t,r,e,n,i,a,o,s,l,c){var u,f=c.bbox,d=f===void 0?!0:f,h=c.length,p=h===void 0?!0:h,v=c.sampleSize,g=v===void 0?10:v,y=typeof l=="number",m=t,b=r,x=0,O=[m,b,x],w=[m,b],_=0,S={x:0,y:0},k=[{x:m,y:b}];y&&l<=0&&(S={x:m,y:b});for(var E=0;E<=g;E+=1){if(_=E/g,u=H2(t,r,e,n,i,a,o,s,_),m=u.x,b=u.y,d&&k.push({x:m,y:b}),p&&(x+=hn(w,[m,b])),w=[m,b],y&&x>=l&&l>O[2]){var A=(x-l)/(x-O[2]);S={x:w[0]*(1-A)+O[0]*A,y:w[1]*(1-A)+O[1]*A}}O=[m,b,x]}return y&&l>=x&&(S={x:o,y:s}),{length:x,point:S,min:{x:Math.min.apply(null,k.map(function(T){return T.x})),y:Math.min.apply(null,k.map(function(T){return T.y}))},max:{x:Math.max.apply(null,k.map(function(T){return T.x})),y:Math.max.apply(null,k.map(function(T){return T.y}))}}}function Y2(t,r,e,n,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*e+Math.pow(o,2)*i,y:Math.pow(s,2)*r+2*s*o*n+Math.pow(o,2)*a}}function V2(t,r,e,n,i,a,o,s){var l,c=s.bbox,u=c===void 0?!0:c,f=s.length,d=f===void 0?!0:f,h=s.sampleSize,p=h===void 0?10:h,v=typeof o=="number",g=t,y=r,m=0,b=[g,y,m],x=[g,y],O=0,w={x:0,y:0},_=[{x:g,y}];v&&o<=0&&(w={x:g,y});for(var S=0;S<=p;S+=1){if(O=S/p,l=Y2(t,r,e,n,i,a,O),g=l.x,y=l.y,u&&_.push({x:g,y}),d&&(m+=hn(x,[g,y])),x=[g,y],v&&m>=o&&o>b[2]){var k=(m-o)/(m-b[2]);w={x:x[0]*(1-k)+b[0]*k,y:x[1]*(1-k)+b[1]*k}}b=[g,y,m]}return v&&o>=m&&(w={x:i,y:a}),{length:m,point:w,min:{x:Math.min.apply(null,_.map(function(E){return E.x})),y:Math.min.apply(null,_.map(function(E){return E.y}))},max:{x:Math.max.apply(null,_.map(function(E){return E.x})),y:Math.max.apply(null,_.map(function(E){return E.y}))}}}function Ox(t,r,e){for(var n,i,a,o,s,l,c=Ul(t),u=typeof r=="number",f,d=[],h,p=0,v=0,g=0,y=0,m,b=[],x=[],O=0,w={x:0,y:0},_=w,S=w,k=w,E=0,A=0,T=c.length;A<T;A+=1)m=c[A],h=m[0],f=h==="M",d=f?d:[p,v].concat(m.slice(1)),f?(g=m[1],y=m[2],w={x:g,y},_=w,O=0,u&&r<.001&&(k=w)):h==="L"?(n=td(d[0],d[1],d[2],d[3],(r||0)-E),O=n.length,w=n.min,_=n.max,S=n.point):h==="A"?(i=G2(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],(r||0)-E,e||{}),O=i.length,w=i.min,_=i.max,S=i.point):h==="C"?(a=xx(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],(r||0)-E,e||{}),O=a.length,w=a.min,_=a.max,S=a.point):h==="Q"?(o=V2(d[0],d[1],d[2],d[3],d[4],d[5],(r||0)-E,e||{}),O=o.length,w=o.min,_=o.max,S=o.point):h==="Z"&&(d=[p,v,g,y],s=td(d[0],d[1],d[2],d[3],(r||0)-E),O=s.length,w=s.min,_=s.max,S=s.point),u&&E<r&&E+O>=r&&(k=S),x.push(_),b.push(w),E+=O,l=h!=="Z"?m.slice(-2):[g,y],p=l[0],v=l[1];return u&&r>=E&&(k={x:p,y:v}),{length:E,point:k,min:{x:Math.min.apply(null,b.map(function(P){return P.x})),y:Math.min.apply(null,b.map(function(P){return P.y}))},max:{x:Math.max.apply(null,x.map(function(P){return P.x})),y:Math.max.apply(null,x.map(function(P){return P.y}))}}}function U2(t,r){return Ox(t,void 0,J(J({},r),{bbox:!1,length:!0})).length}function X2(t){var r=t.length,e=r-1;return t.map(function(n,i){return t.map(function(a,o){var s=i+o,l;return o===0||t[s]&&t[s][0]==="M"?(l=t[s],["M"].concat(l.slice(-2))):(s>=r&&(s-=e),t[s])})})}function q2(t,r){var e=t.length-1,n=[],i=0,a=0,o=X2(t);return o.forEach(function(s,l){t.slice(1).forEach(function(c,u){a+=hn(t[(l+u)%e].slice(-2),r[u%e].slice(-2))}),n[l]=a,a=0}),i=n.indexOf(Math.min.apply(null,n)),o[i]}function K2(t,r,e,n,i,a,o,s){return 3*((s-r)*(e+i)-(o-t)*(n+a)+n*(t-i)-e*(r-a)+s*(i+t/3)-o*(a+r/3))/20}function Z2(t){var r=0,e=0,n=0;return Jf(t).map(function(i){var a;switch(i[0]){case"M":return r=i[1],e=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],c=o[2],u=o[3],f=o[4],d=o[5];return n=K2(r,e,s,l,c,u,f,d),a=i.slice(-2),r=a[0],e=a[1],n}}).reduce(function(i,a){return i+a},0)}function og(t){return Z2(t)>=0}function Q2(t,r,e){return Ox(t,r,J(J({},e),{bbox:!1,length:!0})).point}var J2=50;function tC(t,r){r===void 0&&(r=.5);var e=t.slice(0,2),n=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=qr(e,n,r),s=qr(n,i,r),l=qr(i,a,r),c=qr(o,s,r),u=qr(s,l,r),f=qr(c,u,r);return[["C"].concat(o,c,f),["C"].concat(u,l,a)]}function sg(t){return t.map(function(r,e,n){var i=e&&n[e-1].slice(-2).concat(r.slice(1)),a=e?xx(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return e?o=a?tC(i):[r,r]:o=[r],{s:r,ss:o,l:a}})}function wx(t,r,e,n){if(n===void 0&&(n=0),n>J2)return console.warn("Maximum recursion depth reached in equalizeSegments"),[t,r];var i=sg(t),a=sg(r),o=i.length,s=a.length,l=i.filter(function(y){return y.l}).length,c=a.filter(function(y){return y.l}).length,u=i.filter(function(y){return y.l}).reduce(function(y,m){var b=m.l;return y+b},0)/l||0,f=a.filter(function(y){return y.l}).reduce(function(y,m){var b=m.l;return y+b},0)/c||0,d=e||Math.max(o,s),h=[u,f],p=[d-o,d-s],v=0,g=[i,a].map(function(y,m){return y.l===d?y.map(function(b){return b.s}):y.map(function(b,x){return v=x&&p[m]&&b.l>=h[m],p[m]-=v?1:0,v?b.ss:[b.s]}).flat()});return g[0].length===g[1].length?g:wx(g[0],g[1],d,n+1)}function lg(t){var r=document.createElement("div");r.innerHTML=t;var e=r.childNodes[0];return e&&r.contains(e)&&r.removeChild(e),e}function se(t,r){if(t!==null)return{type:"column",value:t,field:r}}function Yo(t,r){const e=se(t,r);return Object.assign(Object.assign({},e),{inferred:!0})}function Xl(t,r){if(t!==null)return{type:"column",value:t,field:r,visual:!0}}function eC(t,r){const e=se(t,r);return Object.assign(Object.assign({},e),{constant:!1})}function li(t,r){const e=[];for(const n of t)e[n]=r;return e}function $t(t,r){const e=t[r];if(!e)return[null,null];const{value:n,field:i=null}=e;return[n,i]}function ql(t,...r){for(const e of r)if(typeof e=="string"){const[n,i]=$t(t,e);if(n!==null)return[n,i]}else return[e,null];return[null,null]}function bs(t){return t instanceof Date?!1:typeof t=="object"}const xs=()=>(t,r)=>{const{encode:e}=r,{y1:n}=e;return n!==void 0?[t,r]:[t,X({},r,{encode:{y1:Yo(li(t,0))}})]};xs.props={};function za(t,...r){return r.reduce((e,n)=>i=>e(n(i)),t)}function Kl(t,r){return r-t?e=>(e-t)/(r-t):e=>.5}function nC(t,r){const e=r<t?r:t,n=t>r?t:r;return i=>Math.min(Math.max(e,i),n)}function Eh(t,r,e,n,i){let a=e||0,o=n||t.length;const s=i||(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>r?o=l:a=l+1}return a}const ed=Math.sqrt(50),nd=Math.sqrt(10),rd=Math.sqrt(2);function Pl(t,r,e){const n=(r-t)/Math.max(0,e),i=Math.floor(Math.log(n)/Math.LN10),a=n/10**i;return i>=0?(a>=ed?10:a>=nd?5:a>=rd?2:1)*10**i:-(10**-i)/(a>=ed?10:a>=nd?5:a>=rd?2:1)}function cg(t,r,e){const n=Math.abs(r-t)/Math.max(0,e);let i=10**Math.floor(Math.log(n)/Math.LN10);const a=n/i;return a>=ed?i*=10:a>=nd?i*=5:a>=rd&&(i*=2),r<t?-i:i}const Ah=(t,r,e=5)=>{const n=[t,r];let i=0,a=n.length-1,o=n[i],s=n[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=Pl(o,s,e),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=Pl(o,s,e)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=Pl(o,s,e)),l>0?(n[i]=Math.floor(o/l)*l,n[a]=Math.ceil(s/l)*l):l<0&&(n[i]=Math.ceil(o*l)/l,n[a]=Math.floor(s*l)/l),n},Vo=1e3,Uo=Vo*60,Xo=Uo*60,Qi=Xo*24,Po=Qi*7,_x=Qi*30,Sx=Qi*365;function an(t,r,e,n){const i=(c,u)=>{const f=h=>n(h)%u===0;let d=u;for(;d&&!f(c);)e(c,-1),d-=1;return c},a=(c,u)=>{u&&i(c,u),r(c)},o=(c,u)=>{const f=new Date(+c);return a(f,u),f},s=(c,u)=>{const f=new Date(+c-1);return a(f,u),e(f,u),a(f),f};return{ceil:s,floor:o,range:(c,u,f,d)=>{const h=[],p=Math.floor(f),v=d?s(c,f):s(c);for(let g=v;g<u;e(g,p),a(g))h.push(new Date(+g));return h},duration:t}}const rC=an(1,t=>t,(t,r=1)=>{t.setTime(+t+r)},t=>t.getTime()),iC=an(Vo,t=>{t.setMilliseconds(0)},(t,r=1)=>{t.setTime(+t+Vo*r)},t=>t.getSeconds()),aC=an(Uo,t=>{t.setSeconds(0,0)},(t,r=1)=>{t.setTime(+t+Uo*r)},t=>t.getMinutes()),oC=an(Xo,t=>{t.setMinutes(0,0,0)},(t,r=1)=>{t.setTime(+t+Xo*r)},t=>t.getHours()),sC=an(Qi,t=>{t.setHours(0,0,0,0)},(t,r=1)=>{t.setTime(+t+Qi*r)},t=>t.getDate()-1),kx=an(_x,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r=1)=>{const e=t.getMonth();t.setMonth(e+r)},t=>t.getMonth()),lC=an(Po,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,r=1)=>{t.setDate(t.getDate()+7*r)},t=>{const r=kx.floor(t),e=new Date(+t);return Math.floor((+e-+r)/Po)}),cC=an(Sx,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r=1)=>{const e=t.getFullYear();t.setFullYear(e+r)},t=>t.getFullYear()),Ex={millisecond:rC,second:iC,minute:aC,hour:oC,day:sC,week:lC,month:kx,year:cC},uC=an(1,t=>t,(t,r=1)=>{t.setTime(+t+r)},t=>t.getTime()),fC=an(Vo,t=>{t.setUTCMilliseconds(0)},(t,r=1)=>{t.setTime(+t+Vo*r)},t=>t.getUTCSeconds()),dC=an(Uo,t=>{t.setUTCSeconds(0,0)},(t,r=1)=>{t.setTime(+t+Uo*r)},t=>t.getUTCMinutes()),hC=an(Xo,t=>{t.setUTCMinutes(0,0,0)},(t,r=1)=>{t.setTime(+t+Xo*r)},t=>t.getUTCHours()),pC=an(Qi,t=>{t.setUTCHours(0,0,0,0)},(t,r=1)=>{t.setTime(+t+Qi*r)},t=>t.getUTCDate()-1),Ax=an(_x,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r=1)=>{const e=t.getUTCMonth();t.setUTCMonth(e+r)},t=>t.getUTCMonth()),vC=an(Po,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,r=1)=>{t.setTime(+t+Po*r)},t=>{const r=Ax.floor(t),e=new Date(+t);return Math.floor((+e-+r)/Po)}),gC=an(Sx,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r=1)=>{const e=t.getUTCFullYear();t.setUTCFullYear(e+r)},t=>t.getUTCFullYear()),Tx={millisecond:uC,second:fC,minute:dC,hour:hC,day:pC,week:vC,month:Ax,year:gC};function yC(t){const r=t?Tx:Ex,{year:e,month:n,week:i,day:a,hour:o,minute:s,second:l,millisecond:c}=r;return{tickIntervals:[[l,1],[l,5],[l,15],[l,30],[s,1],[s,5],[s,15],[s,30],[o,1],[o,3],[o,6],[o,12],[a,1],[a,2],[i,1],[n,1],[n,3],[e,1]],year:e,millisecond:c}}function Px(t,r,e,n,i){const a=+t,o=+r,{tickIntervals:s,year:l,millisecond:c}=yC(i),u=([g,y])=>g.duration*y,f=n?(o-a)/n:e||5,d=n||(o-a)/f,h=s.length,p=Eh(s,d,0,h,u);let v;if(p===h){const g=cg(a/l.duration,o/l.duration,f);v=[l,g]}else if(p){const g=d/u(s[p-1])<u(s[p])/d,[y,m]=g?s[p-1]:s[p],b=n?Math.ceil(n/y.duration):m;v=[y,b]}else{const g=Math.max(cg(a,o,f),1);v=[c,g]}return v}const mC=(t,r,e,n,i)=>{const a=t>r,o=a?r:t,s=a?t:r,[l,c]=Px(o,s,e,n,i),u=[l.floor(o,c),l.ceil(s,c)];return a?u.reverse():u};function Zl(t){return!Kt(t)&&!fx(t)&&!Number.isNaN(t)}const Mx=t=>r=>-t(-r),Th=(t,r)=>{const e=Math.log(t),n=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:i=>Math.log(i)/e;return r?Mx(n):n},Ph=(t,r)=>{const e=t===Math.E?Math.exp:n=>t**n;return r?Mx(e):e},bC=(t,r,e,n)=>{const i=t<0,a=Th(n,i),o=Ph(n,i),s=t>r,l=s?r:t,c=s?t:r,u=[o(Math.floor(a(l))),o(Math.ceil(a(c)))];return s?u.reverse():u},xC=t=>r=>{const e=t(r);return fe(e)?Math.round(e):e};function OC(t,r){return e=>{e.prototype.rescale=function(){this.initRange(),this.nice();const[n]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n))},e.prototype.initRange=function(){const{interpolator:n}=this.options;this.options.range=t(n)},e.prototype.composeOutput=function(n,i){const{domain:a,interpolator:o,round:s}=this.getOptions(),l=r(a.map(n)),c=s?xC(o):o;this.output=za(c,l,i,n)},e.prototype.invert=void 0}}function Vu(t,r,e){let n=e;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(r-t)*6*n:n<1/2?r:n<2/3?t+(r-t)*(2/3-n)*6:t}function wC(t){const r=t[0]/360,e=t[1]/100,n=t[2]/100,i=t[3];if(e===0)return[n*255,n*255,n*255,i];const a=n<.5?n*(1+e):n+e-n*e,o=2*n-a,s=Vu(o,a,r+1/3),l=Vu(o,a,r),c=Vu(o,a,r-1/3);return[s*255,l*255,c*255,i]}function ug(t){const r=hh.get(t);if(!r)return null;const{model:e,value:n}=r;return e==="rgb"?n:e==="hsl"?wC(n):null}const Wa=(t,r)=>e=>t*(1-e)+r*e,_C=(t,r)=>{const e=ug(t),n=ug(r);return e===null||n===null?e?()=>t:()=>r:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=e[u],d=n[u];a[u]=f*(1-i)+d*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},Os=(t,r)=>typeof t=="number"&&typeof r=="number"?Wa(t,r):typeof t=="string"&&typeof r=="string"?_C(t,r):()=>t,SC=(t,r)=>{const e=Wa(t,r);return n=>Math.round(e(n))};function kC(t,r){const{second:e,minute:n,hour:i,day:a,week:o,month:s,year:l}=r;return e.floor(t)<t?".SSS":n.floor(t)<t?":ss":i.floor(t)<t?"hh:mm":a.floor(t)<t?"hh A":s.floor(t)<t?o.floor(t)<t?"MMM DD":"ddd DD":l.floor(t)<t?"MMMM":"YYYY"}function fg({map:t,initKey:r},e){const n=r(e);return t.has(n)?t.get(n):e}function EC({map:t,initKey:r},e){const n=r(e);return t.has(n)?t.get(n):(t.set(n,e),e)}function AC({map:t,initKey:r},e){const n=r(e);return t.has(n)&&(e=t.get(n),t.delete(n)),e}function TC(t){return typeof t=="object"?t.valueOf():t}let dg=class extends Map{constructor(r){if(super(),this.map=new Map,this.initKey=TC,r!==null)for(const[e,n]of r)this.set(e,n)}get(r){return super.get(fg({map:this.map,initKey:this.initKey},r))}has(r){return super.has(fg({map:this.map,initKey:this.initKey},r))}set(r,e){return super.set(EC({map:this.map,initKey:this.initKey},r),e)}delete(r){return super.delete(AC({map:this.map,initKey:this.initKey},r))}},ws=class{transformBreaks(r){return r}constructor(r){var e;this.options=X({},this.getDefaultOptions()),this.update(!((e=r?.breaks)===null||e===void 0)&&e.length?this.transformBreaks(r):r)}getOptions(){return this.options}update(r={}){const e=r.breaks?this.transformBreaks(r):r;this.options=X({},this.options,e),this.rescale(e)}rescale(r){}};const Uc=Symbol("defaultUnknown");function hg(t,r,e){for(let n=0;n<r.length;n+=1)t.has(r[n])||t.set(e(r[n]),n)}function pg(t){const{value:r,from:e,to:n,mapper:i,notFoundReturn:a}=t;let o=i.get(r);if(o===void 0){if(a!==Uc)return a;o=e.push(r)-1,i.set(r,o)}return n[o%n.length]}function vg(t){return t instanceof Date?r=>`${r}`:typeof t=="object"?r=>JSON.stringify(r):r=>r}let Cx=class Lx extends ws{getDefaultOptions(){return{domain:[],range:[],unknown:Uc}}constructor(r){super(r)}map(r){return this.domainIndexMap.size===0&&hg(this.domainIndexMap,this.getDomain(),this.domainKey),pg({value:this.domainKey(r),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(r){return this.rangeIndexMap.size===0&&hg(this.rangeIndexMap,this.getRange(),this.rangeKey),pg({value:this.rangeKey(r),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(r){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=vg(e),this.rangeKey=vg(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!r||r.range)&&this.rangeIndexMap.clear(),(!r||r.domain||r.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new Lx(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:r,compare:e}=this.options;return this.sortedDomain=e?[...r].sort(e):r,this.sortedDomain}};function PC(t){const r=t.reduce((e,n)=>Math.min(e,n),1/0);return r===1/0?[]:t.map(e=>e/r)}function MC(t,r){const e=t.length,n=r-e;return n>0?[...t,...new Array(n).fill(1)]:n<0?t.slice(0,r):t}function CC(t){return Math.round(t*1e12)/1e12}function LC(t){const{domain:r,range:e,paddingOuter:n,paddingInner:i,flex:a,round:o,align:s}=t,l=r.length,c=MC(a,l),[u,f]=e,d=f-u,h=2/l*n+1-1/l*i,p=d/h,v=p*i/l,g=p-l*v,y=PC(c),m=y.reduce((T,P)=>T+P),b=g/m,x=new dg(r.map((T,P)=>{const N=y[P]*b;return[T,o?Math.floor(N):N]})),O=new dg(r.map((T,P)=>{const I=y[P]*b+v;return[T,o?Math.floor(I):I]})),w=Array.from(O.values()).reduce((T,P)=>T+P),S=(d-(w-w/l*i))*s,k=u+S;let E=o?Math.round(k):k;const A=new Array(l);for(let T=0;T<l;T+=1){A[T]=CC(E);const P=r[T];E+=O.get(P)}return{valueBandWidth:x,valueStep:O,adjustedRange:A}}function NC(t){var r;const{domain:e}=t,n=e.length;if(n===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((r=t.flex)===null||r===void 0)&&r.length))return LC(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,d=a[0];const p=a[1]-d,v=o*2,g=n-s;u=p/Math.max(1,v+g),l&&(u=Math.floor(u)),d+=(p-u*(n-s))*c,f=u*(1-s),l&&(d=Math.round(d),f=Math.round(f));const y=new Array(n).fill(0).map((m,b)=>d+b*u);return{valueStep:u,valueBandWidth:f,adjustedRange:y}}let qo=class Nx extends Cx{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:Uc,flex:[]}}constructor(r){super(r)}clone(){return new Nx(this.options)}getStep(r){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:r===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(r)}getBandWidth(r){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:r===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(r)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:r,paddingInner:e}=this.options;return r>0?r:e}getPaddingOuter(){const{padding:r,paddingOuter:e}=this.options;return r>0?r:e}rescale(){super.rescale();const{align:r,domain:e,range:n,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=NC({align:r,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}};const RC=(t,r)=>{if(!r?.length)return t;const e=[...t,...r.flatMap(a=>[a.start,a.end])],i=Array.from(new Set(e)).sort((a,o)=>a-o).filter(a=>!r.some(({start:o,end:s})=>a>o&&a<s));return i.length?i:t},di=(t,r,e,n)=>{let i,a,o=t,s=r;if(o===s&&e>0)return[o];let l=Pl(o,s,e);if(l===0||!Number.isFinite(l))return[];if(l>0){o=Math.ceil(o/l),s=Math.floor(s/l),a=new Array(i=Math.ceil(s-o+1));for(let c=0;c<i;c+=1)a[c]=(o+c)*l}else{l=-l,o=Math.ceil(o*l),s=Math.floor(s*l),a=new Array(i=Math.ceil(s-o+1));for(let c=0;c<i;c+=1)a[c]=(o+c)/l}return RC(a,n)};let Mh=class Rx extends ws{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:di}}map(r){const[e]=this.options.range;return e!==void 0?e:this.options.unknown}invert(r){const[e]=this.options.range;return r===e&&e!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:r,domain:e,tickCount:n}=this.options,[i,a]=e;return!fe(i)||!fe(a)?[]:r(i,a,n)}clone(){return new Rx(this.options)}};function lo(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const IC=[1,5,2,2.5,4,3],gg=Number.EPSILON*100;function jC(t,r){return(t%r+r)%r}function DC(t){return Math.round(t*1e12)/1e12}function $C(t,r,e,n,i,a){const o=Ho(r),s=vx(r,t);let l=0;const c=jC(n,a);return(c<gg||a-c<gg)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-e+l}function FC(t,r,e){const n=Ho(r);return 1-vx(r,t)/(n-1)-e+1}function BC(t,r,e,n,i,a){const o=(t-1)/(a-i),s=(r-1)/(Math.max(a,n)-Math.min(e,i));return 2-Math.max(o/s,s/o)}function zC(t,r){return t>=r?2-(t-1)/(r-1):1}function WC(t,r,e,n){const i=r-t;return 1-.5*((r-n)**2+(t-e)**2)/(.1*i)**2}function GC(t,r,e){const n=r-t;return e>n?1-((e-n)/2)**2/(.1*n)**2:1}function HC(){return 1}const Ch=(t,r,e=5,n=!0,i=IC,a=[.25,.2,.5,.05])=>{const o=e<0?0:Math.round(e);if(Number.isNaN(t)||Number.isNaN(r)||typeof t!="number"||typeof r!="number"||!o)return[];if(r-t<1e-15||o===1)return[t];const s={score:-2,lmin:0,lmax:0,lstep:0};let l=1;for(;l<1/0;){for(let p=0;p<i.length;p+=1){const v=i[p],g=FC(v,i,l);if(a[0]*g+a[1]+a[2]+a[3]<s.score){l=1/0;break}let y=2;for(;y<1/0;){const m=zC(y,o);if(a[0]*g+a[1]+a[2]*m+a[3]<s.score)break;const b=(r-t)/(y+1)/l/v;let x=Math.ceil(Math.log10(b));for(;x<1/0;){const O=l*v*10**x,w=GC(t,r,O*(y-1));if(a[0]*g+a[1]*w+a[2]*m+a[3]<s.score)break;const _=Math.floor(r/O)*l-(y-1)*l,S=Math.ceil(t/O)*l;if(_<=S){const k=S-_;for(let E=0;E<=k;E+=1){const T=(_+E)*(O/l),P=T+O*(y-1),N=O,I=$C(v,i,l,T,P,N),R=WC(t,r,T,P),C=BC(y,o,t,r,T,P),L=HC(),M=a[0]*I+a[1]*R+a[2]*C+a[3]*L;M>s.score&&(!n||T<=t&&P>=r)&&(s.lmin=T,s.lmax=P,s.lstep=N,s.score=M)}}x+=1}y+=1}}l+=1}const c=lo(s.lmax),u=lo(s.lmin),f=lo(s.lstep),d=Math.floor(DC((c-u)/f))+1,h=new Array(d);h[0]=lo(u);for(let p=1;p<d;p+=1)h[p]=lo(h[p-1]+f);return h};let Ix=class jx extends ws{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:Ch}}map(r){return Zl(r)?r:this.options.unknown}invert(r){return this.map(r)}clone(){return new jx(this.options)}getTicks(){const{domain:r,tickCount:e,tickMethod:n}=this.options,[i,a]=r;return!fe(i)||!fe(a)?[]:n(i,a,e)}};const YC=(t,r,e)=>{const[n,i]=t,[a,o]=r;let s,l;return n<i?(s=Kl(n,i),l=e(a,o)):(s=Kl(i,n),l=e(o,a)),za(l,s)},VC=(t,r,e)=>{const n=Math.min(t.length,r.length)-1,i=new Array(n),a=new Array(n),o=t[0]>t[n],s=o?[...t].reverse():t,l=o?[...r].reverse():r;for(let c=0;c<n;c+=1)i[c]=Kl(s[c],s[c+1]),a[c]=e(l[c],l[c+1]);return c=>{const u=Eh(t,c,1,n)-1,f=i[u],d=a[u];return za(d,f)(c)}},yg=(t,r,e,n)=>(Math.min(t.length,r.length)>2?VC:YC)(t,r,n?SC:e);let Xc=class extends ws{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Wa,tickCount:5}}map(r){return Zl(r)?this.output(r):this.options.unknown}invert(r){return Zl(r)?this.input(r):this.options.unknown}nice(){if(!this.options.nice||Le(this.options.breaks))return;const[r,e,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(r,e,n,...i)}getTicks(){const{tickMethod:r}=this.options,[e,n,i,...a]=this.getTickMethodOptions();return r(e,n,i,...a)}getTickMethodOptions(){const{domain:r,tickCount:e}=this.options,n=r[0],i=r[r.length-1];return[n,i,e]}chooseNice(){return Ah}rescale(){this.nice();const[r,e]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r)),this.composeInput(r,e,this.chooseClamp(e))}chooseClamp(r){const{clamp:e,range:n}=this.options,i=this.options.domain.map(r),a=Math.min(i.length,n.length);return e?nC(i[0],i[a-1]):mr}composeOutput(r,e){const{domain:n,range:i,round:a,interpolate:o}=this.options,s=yg(n.map(r),i,o,a);this.output=za(s,e,r)}composeInput(r,e,n){const{domain:i,range:a}=this.options,o=yg(a,i.map(r),Wa);this.input=za(e,n,o)}},zr=class Dx extends Xc{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Os,tickMethod:di,tickCount:5}}removeUnsortedValues(r,e,n){let i=-1/0;return e.reduce((o,s,l)=>{if(l===0)return o;const c=i>0?i:s;return i>0&&(n?s>i:s<i)?o.push(l):(c-e[l-1])*(n?-1:1)<0?(i<0&&(i=e[l-1]),o.push(l)):i=-1/0,o},[]).slice().reverse().forEach(o=>{r.splice(o,1),e.splice(o,1)}),{breaksDomain:r,breaksRange:e}}transformDomain(r){const e=[.2,.8],n=.03,{domain:i=[],range:a=[1,0],breaks:o=[],tickCount:s=5,nice:l}=r,[c,u]=[Math.min(...i),Math.max(...i)];let f=c,d=u;if(l&&o.length<2){const k=this.chooseNice()(c,u,s);f=k[0],d=k[k.length-1]}const h=Math.min(f,c);let p=Math.max(d,u);const v=o.filter(({end:k})=>k<p).sort((k,E)=>k.start-E.start),g=di(h,p,s,v);if(xn(g)<p){const k=Ah(0,p-xn(g),3);g.push(xn(g)+xn(k)),p=xn(g)}const[y,m]=[a[0],xn(a)],b=p-h,x=Math.abs(m-y),O=y>m,w=g.map(k=>{const E=(k-h)/b;return O?y-E*x:y+E*x}),[_,S]=e;return v.forEach(({start:k,end:E,gap:A=n,compress:T="middle"})=>{const P=g.indexOf(k),N=g.indexOf(E);let I=(w[P]+w[N])/2;T==="start"&&(I=w[P]),T==="end"&&(I=w[N]);const R=A*x/2;let C=O?I+R:I-R,L=O?I-R:I+R;C<_&&(L+=_-C,C=_),L>S&&(C-=L-S,L=S),C>S&&(L-=C-S,C=S),L<_&&(C+=_-L,L=_),w[P]=C,w[N]=L}),this.removeUnsortedValues(g,w,O)}transformBreaks(r){const{domain:e,breaks:n=[]}=r;if(!Le(r.breaks))return r;const i=Math.max(...e),a=n.filter(({end:c})=>c<i),o={...r,breaks:a},{breaksDomain:s,breaksRange:l}=this.transformDomain(o);return{...r,domain:s,range:l,breaks:a,tickMethod:()=>[...s]}}chooseTransforms(){return[mr,mr]}clone(){return new Dx(this.options)}},UC=class $x extends qo{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:Uc,paddingInner:1,paddingOuter:0}}constructor(r){super(r)}getPaddingInner(){return 1}clone(){return new $x(this.options)}update(r){super.update(r)}getPaddingOuter(){return this.options.padding}};const XC=t=>r=>r<0?-((-r)**t):r**t,qC=t=>r=>r<0?-((-r)**(1/t)):r**(1/t),KC=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);let Fx=class Bx extends Xc{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:Os,tickMethod:di,tickCount:5}}constructor(r){super(r)}chooseTransforms(){const{exponent:r}=this.options;if(r===1)return[mr,mr];const e=r===.5?KC:XC(r),n=qC(r);return[e,n]}clone(){return new Bx(this.options)}},ZC=class zx extends Fx{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Os,tickMethod:di,tickCount:5,exponent:.5}}constructor(r){super(r)}update(r){super.update(r)}clone(){return new zx(this.options)}},qc=class Wx extends ws{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(r){super(r)}map(r){if(!Zl(r))return this.options.unknown;const e=Eh(this.thresholds,r,0,this.n);return this.options.range[e]}invert(r){const{range:e}=this.options,n=e.indexOf(r),i=this.thresholds;return[i[n-1],i[n]]}clone(){return new Wx(this.options)}rescale(){const{domain:r,range:e}=this.options;this.n=Math.min(r.length,e.length-1),this.thresholds=r}};const QC=(t,r,e,n=10)=>{const i=t<0,a=Ph(n,i),o=Th(n,i),s=r<t,l=s?r:t,c=s?t:r;let u=o(l),f=o(c),d=[];if(!(n%1)&&f-u<e){if(u=Math.floor(u),f=Math.ceil(f),i)for(;u<=f;u+=1){const h=a(u);for(let p=n-1;p>=1;p-=1){const v=h*p;if(v>c)break;v>=l&&d.push(v)}}else for(;u<=f;u+=1){const h=a(u);for(let p=1;p<n;p+=1){const v=h*p;if(v>c)break;v>=l&&d.push(v)}}d.length*2<e&&(d=di(l,c,e))}else{const h=e===-1?f-u:Math.min(f-u,e);d=di(u,f,h).map(a)}return s?d.reverse():d};let JC=class Gx extends Xc{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:Os,tickMethod:QC,tickCount:5}}chooseNice(){return bC}getTickMethodOptions(){const{domain:r,tickCount:e,base:n}=this.options,i=r[0],a=r[r.length-1];return[i,a,e,n]}chooseTransforms(){const{base:r,domain:e}=this.options,n=e[0]<0;return[Th(r,n),Ph(r,n)]}clone(){return new Gx(this.options)}},Hx=class Yx extends qc{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:Ch}}constructor(r){super(r)}nice(){const{nice:r}=this.options;if(r){const[e,n,i]=this.getTickMethodOptions();this.options.domain=Ah(e,n,i)}}getTicks(){const{tickMethod:r}=this.options,[e,n,i]=this.getTickMethodOptions();return r(e,n,i)}getTickMethodOptions(){const{domain:r,tickCount:e}=this.options,n=r[0],i=r[r.length-1];return[n,i,e]}rescale(){this.nice();const{range:r,domain:e}=this.options,[n,i]=e;this.n=r.length-1,this.thresholds=new Array(this.n);for(let a=0;a<this.n;a+=1)this.thresholds[a]=((a+1)*i-(a-this.n)*n)/(this.n+1)}invert(r){const[e,n]=super.invert(r),[i,a]=this.options.domain;return e===void 0&&n===void 0?[e,n]:[e||i,n||a]}getThresholds(){return this.thresholds}clone(){return new Yx(this.options)}};function tL(t,r){const e=t.length;if(!e)return;if(e<2)return t[e-1];const n=(e-1)*r,i=Math.floor(n),a=t[i],o=t[i+1];return a+(o-a)*(n-i)}function eL(t,r,e=!1){const n=t;e||n.sort((a,o)=>a-o);const i=[];for(let a=1;a<r;a+=1)i.push(tL(n,a/r));return i}let Vx=class Ux extends qc{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:Ch}}constructor(r){super(r)}rescale(){const{domain:r,range:e}=this.options;this.n=e.length-1,this.thresholds=eL(r,this.n+1,!1)}invert(r){const[e,n]=super.invert(r),{domain:i}=this.options,a=i[0],o=i[i.length-1];return e===void 0&&n===void 0?[e,n]:[e||a,n||o]}getThresholds(){return this.thresholds}clone(){return new Ux(this.options)}getTicks(){const{tickCount:r,domain:e,tickMethod:n}=this.options,i=e.length-1,a=e[0],o=e[i];return n(a,o,r)}};const nL=(t,r,e,n,i)=>{const a=t>r,o=a?r:t,s=a?t:r,[l,c]=Px(o,s,e,n,i),u=l.range(o,new Date(+s+1),c,!0);return a?u.reverse():u};function rL(t){const r=t.getTimezoneOffset(),e=new Date(t);return e.setMinutes(e.getMinutes()+r,e.getSeconds(),e.getMilliseconds()),e}let iL=class Xx extends Xc{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:nL,interpolate:Wa,mask:void 0,utc:!1}}chooseTransforms(){return[n=>+n,n=>new Date(n)]}chooseNice(){return mC}getTickMethodOptions(){const{domain:r,tickCount:e,tickInterval:n,utc:i}=this.options,a=r[0],o=r[r.length-1];return[a,o,e,n,i]}getFormatter(){const{mask:r,utc:e}=this.options,n=e?Tx:Ex,i=e?rL:mr;return a=>ZA(i(a),r||kC(a,n))}clone(){return new Xx(this.options)}};var aL=function(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a},id;function oL(t){return[t(0),t(1)]}const sL=t=>{const[r,e]=t;return za(Wa(0,1),Kl(r,e))};let ad=id=class extends zr{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:mr,tickMethod:di,tickCount:5}}constructor(r){super(r)}clone(){return new id(this.options)}};ad=id=aL([OC(oL,sL)],ad);var lL=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};function cL(t){var r;let e=t;for(;e;){if(((r=e.attributes)===null||r===void 0?void 0:r.class)==="view")return e;e=e.parentNode}return null}function Kc(t){const{markType:r,nodeName:e}=t;return r==="heatmap"&&e==="image"}function Lh(t,r){const e=r??cL(t).__data__,n=t.__data__,{markKey:i,index:a,seriesIndex:o,normalized:s={x:0}}=n,{markState:l}=e,c=Array.from(l.keys()).find(u=>u.key===i);if(c)return o?o.map(u=>c.data[u]):Kc(t)?c.data[Math.round(c.data.length*s.x)]:c.data[a]}function uL(t,r){var e,n,i,a;const o=(e=r.markKey)!==null&&e!==void 0?e:(i=(n=r.element)===null||n===void 0?void 0:n.__data__)===null||i===void 0?void 0:i.markKey,s=Object.keys(t).find(l=>{if(l.startsWith("series")){const c=t[l].getOptions();return c.name==="series"&&c.markKey===o}});return(a=t[s])!==null&&a!==void 0?a:t.series}function fL(t,r){const{color:e,facet:n=!1}=t,{color:i,series:a}=r,o=uL(t,r),s=l=>l&&l.invert&&!(l instanceof qo)&&!(l instanceof Mh);if(s(o))return o.clone().invert(a);if(a&&o instanceof qo&&o.invert(a)!==i&&!n)return o.invert(a);if(s(e)){const l=e.invert(i);return Array.isArray(l)?null:l}return null}function Ji(t){return t}function Nh(t){return t.reduce((r,e)=>(n,...i)=>e(r(n,...i),...i),Ji)}function dL(t){return t.reduce((r,e)=>n=>lL(this,void 0,void 0,function*(){const i=yield r(n);return e(i)}),Ji)}function Rh(t){return t.replace(/( |^)[a-z]/g,r=>r.toUpperCase())}function Ga(t=""){throw new Error(t)}function Zc(t,r){const{attributes:e}=r,n=new Set(["id","className"]);for(const[i,a]of Object.entries(e))n.has(i)||t.attr(i,a)}function le(t){return t!=null&&!Number.isNaN(t)}function hL(t){const r=new Map;return e=>{if(r.has(e))return r.get(e);const n=t(e);return r.set(e,n),n}}function pL(t,r){const{transform:e}=t.style,i=(a=>a==="none"||a===void 0)(e)?"":e;t.style.transform=`${i} ${r}`.trimStart()}function it(t,r){return qx(t,r)||{}}function qx(t,r){const e=Object.entries(t||{}).filter(([n])=>n.startsWith(r)).map(([n,i])=>[ux(n.replace(r,"").trim()),i]).filter(([n])=>!!n);return e.length===0?null:Object.fromEntries(e)}function vL(t,r){return Object.fromEntries(Object.entries(t).filter(([e])=>r.find(n=>e.startsWith(n))))}function Ml(t,...r){return Object.fromEntries(Object.entries(t).filter(([e])=>r.every(n=>!e.startsWith(n))))}function mg(t,r){if(t===void 0)return null;if(typeof t=="number")return t;const e=+t.replace("%","");return Number.isNaN(e)?null:e/100*r}function Ha(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function Wr(t){return t===null||t===!1}function Kx(t,r,e=5,n=0){if(!(n>=e)){for(const i of Object.keys(r)){const a=r[i];!Br(a)||!Br(t[i])?t[i]=a:Kx(t[i],a,e,n+1)}return t}}function br(t,r){return Object.entries(t).reduce((e,[n,i])=>(e[n]=r(i,n,t),e),{})}function oa(t){return t.map((r,e)=>e)}function gL(t){return t[0]}function Zx(t){return t[t.length-1]}function yL(t){return Array.from(new Set(t))}function Qx(t,r){const e=[[],[]];return t.forEach(n=>{e[r(n)?0:1].push(n)}),e}function Jx(t,r=t.length){if(r===1)return t.map(n=>[n]);const e=[];for(let n=0;n<t.length;n++){const i=t.slice(n+1);Jx(i,r-1).forEach(o=>{e.push([t[n],...o])})}return e}function mL(t){if(t.length===1)return[t];const r=[];for(let e=1;e<=t.length;e++)r.push(...Jx(t,e));return r}function mi(t,r,e){const{encode:n}=e;if(t===null)return[r];const i=bL(t).map(o=>{var s;return[o,(s=$t(n,o))===null||s===void 0?void 0:s[0]]}).filter(([,o])=>le(o)),a=o=>i.map(([,s])=>s[o]).join("-");return Array.from(ce(r,a).values())}function t1(t){return Array.isArray(t)?wL(t):typeof t=="function"?OL(t):t==="series"?xL:t==="value"?_L:t==="sum"?SL:t==="maxIndex"?kL:null}function e1(t,r){for(const e of t)e.sort(r)}function n1(t,r){return r?.domain||Array.from(new Set(t))}function bL(t){return Array.isArray(t)?t:[t]}function xL(t,r,e){return _s(n=>e[n])}function OL(t){return(r,e,n)=>_s(i=>t(r[i]))}function wL(t){return(r,e,n)=>(i,a)=>t.reduce((o,s)=>o!==0?o:Hn(r[i][s],r[a][s]),0)}function _L(t,r,e){return _s(n=>r[n])}function SL(t,r,e){const n=oa(t),i=Array.from(ce(n,o=>e[+o]).entries()),a=new Map(i.map(([o,s])=>[o,s.reduce((l,c)=>l+ +r[c])]));return _s(o=>a.get(e[o]))}function kL(t,r,e){const n=oa(t),i=Array.from(ce(n,o=>e[+o]).entries()),a=new Map(i.map(([o,s])=>[o,ds(s,l=>r[l])]));return _s(o=>a.get(e[o]))}function _s(t){return(r,e)=>Hn(t(r),t(e))}const r1=(t={})=>{const{groupBy:r="x",orderBy:e=null,reverse:n=!1,y:i="y",y1:a="y1",series:o=!0}=t;return(s,l)=>{var c;const{data:u,encode:f,style:d={}}=l,[h,p]=$t(f,"y"),[v,g]=$t(f,"y1"),[y]=o?ql(f,"series","color"):$t(f,"color"),m=mi(r,s,l),x=((c=t1(e))!==null&&c!==void 0?c:()=>null)(u,h,y);x&&e1(m,x);const O=new Array(s.length),w=new Array(s.length),_=new Array(s.length),S=[],k=[];for(const I of m){n&&I.reverse();const R=v?+v[I[0]]:0,C=[],L=[];for(const W of I){const Y=_[W]=+h[W]-R;Y<0?L.push(W):Y>=0&&C.push(W)}const M=C.length>0?C:L,j=L.length>0?L:C;let F=C.length-1,$=0;for(;F>0&&h[M[F]]===0;)F--;for(;$<j.length-1&&h[j[$]]===0;)$++;S.push(M[F]),k.push(j[$]);let B=R;for(const W of L.reverse()){const Y=_[W];B=O[W]=(w[W]=B)+Y}let z=R;for(const W of C){const Y=_[W];Y>0?z=O[W]=(w[W]=z)+Y:O[W]=w[W]=z}}const E=new Set(S),A=new Set(k),T=i==="y"?O:w,P=a==="y"?O:w;let N;return l.type==="point"?N={y0:Yo(h,p),y:se(T,p)}:N={y0:Yo(h,p),y:se(T,p),y1:se(P,g)},[s,X({},l,{encode:Object.assign({},N),style:Object.assign({first:(I,R)=>E.has(R),last:(I,R)=>A.has(R)},d)})]}};r1.props={};function co(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function EL(t){const r=t.getFullYear(),e=co(t.getMonth()+1),n=co(t.getDate()),i=`${r}-${e}-${n}`,a=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return a||o||s?`${i} ${co(a)}:${co(o)}:${co(s)}`:i}const Qc=(t={})=>{const{channel:r="x"}=t;return(e,n)=>{const{encode:i}=n,{tooltip:a}=n;if(Wr(a))return[e,n];const{title:o}=a;if(o!==void 0)return[e,n];const s=Object.keys(i).filter(c=>c.startsWith(r)).filter(c=>!i[c].inferred).map(c=>$t(i,c)).filter(([c])=>c).map(c=>c[0]);if(s.length===0)return[e,n];const l=[];for(const c of e)l[c]={value:s.map(u=>u[c]instanceof Date?EL(u[c]):u[c]).join(", ")};return[e,X({},n,{tooltip:{title:l}})]}};Qc.props={};const bi=()=>(t,r)=>{const{encode:e}=r,{x:n}=e;return n!==void 0?[t,r]:[t,X({},r,{encode:{x:Yo(li(t,0))},scale:{x:{guide:null}}})]};bi.props={};const Ss=()=>(t,r)=>{const{encode:e}=r,{y:n}=e;return n!==void 0?[t,r]:[t,X({},r,{encode:{y:Yo(li(t,0))},scale:{y:{guide:null}}})]};Ss.props={};const Ih=()=>(t,r)=>{const{encode:e}=r,{size:n}=e;return n!==void 0?[t,r]:[t,X({},r,{encode:{size:Xl(li(t,3))}})]};Ih.props={};var AL=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const i1=()=>(t,r)=>{const{encode:e}=r,{key:n}=e,i=AL(e,["key"]);if(n!==void 0)return[t,r];const a=Object.values(i).map(({value:s})=>s),o=t.map(s=>a.filter(Array.isArray).map(l=>l[s]).join("-"));return[t,X({},r,{encode:{key:se(o)}})]};i1.props={};const jh=()=>(t,r)=>{const{encode:e}=r,{series:n,color:i}=e;if(n!==void 0||i===void 0)return[t,r];const[a,o]=$t(e,"color");return[t,X({},r,{encode:{series:se(a,o)}})]};jh.props={};const a1=()=>(t,r)=>{const{data:e}=r;return!Array.isArray(e)||e.some(bs)?[t,r]:[t,X({},r,{encode:{y:se(e)}})]};a1.props={};const o1=()=>(t,r)=>{const{data:e}=r;return!Array.isArray(e)||e.some(bs)?[t,r]:[t,X({},r,{encode:{x:se(e)}})]};o1.props={};const s1=()=>(t,r)=>{const{encode:e}=r,{y1:n}=e;if(n)return[t,r];const[i]=$t(e,"y");return[t,X({},r,{encode:{y1:se([...i])}})]};s1.props={};const l1=()=>(t,r)=>{const{encode:e}=r,{x1:n}=e;if(n)return[t,r];const[i]=$t(e,"x");return[t,X({},r,{encode:{x1:se([...i])}})]};l1.props={};const c1=()=>(t,r)=>{const{data:e}=r;if(Array.isArray(e)&&(e.every(Array.isArray)||!e.some(bs))){const n=(i,a)=>Array.isArray(i[0])?i.map(o=>o[a]):[i[a]];return[t,X({},r,{encode:{x:se(n(e,0)),x1:se(n(e,1))}})]}return[t,r]};c1.props={};const u1=()=>(t,r)=>{const{data:e}=r;if(Array.isArray(e)&&(e.every(Array.isArray)||!e.some(bs))){const n=(i,a)=>Array.isArray(i[0])?i.map(o=>o[a]):[i[a]];return[t,X({},r,{encode:{y:se(n(e,0)),y1:se(n(e,1))}})]}return[t,r]};u1.props={};const Jc=t=>{const{channel:r}=t;return(e,n)=>{const{encode:i,tooltip:a}=n;if(Wr(a))return[e,n];const{items:o=[]}=a;if(!o||o.length>0)return[e,n];const l=(Array.isArray(r)?r:[r]).flatMap(c=>Object.keys(i).filter(u=>u.startsWith(c)).map(u=>{const{field:f,value:d,inferred:h=!1,aggregate:p}=i[u];return h?null:p&&d?{channel:u}:f?{field:f}:d?{channel:u}:null}).filter(u=>u!==null));return[e,X({},n,{tooltip:{items:l}})]}};Jc.props={};const Dh=()=>(t,r)=>[t,X({scale:{x:{padding:0},y:{padding:0}}},r)];Dh.props={};var bg=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const tu=()=>(t,r)=>{const{data:e,style:n={}}=r,i=bg(r,["data","style"]),{x:a,y:o}=n,s=bg(n,["x","y"]);if(a==null||o==null)return[t,r];const l=a||0,c=o||0;return[[0],X({},i,{data:[0],cartesian:!0,encode:{x:se([l]),y:se([c])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]};tu.props={};const f1=()=>(t,r)=>{const{style:e={}}=r;return[t,X({},r,{style:Object.assign(Object.assign({},e),Object.fromEntries(Object.entries(e).filter(([,n])=>typeof n=="function").map(([n,i])=>[n,()=>i])))})]};f1.props={};const eu=()=>(t,r)=>{const{data:e}=r;if(!Array.isArray(e)||e.some(bs))return[t,r];const n=Array.isArray(e[0])?e:[e],i=n.map(o=>o[0]),a=n.map(o=>o[1]);return[t,X({},r,{encode:{x:se(i),y:se(a)}})]};eu.props={};const d1=()=>(t,r)=>{const{style:e={},encode:n}=r,{series:i}=n,{gradient:a}=e;return!a||i?[t,r]:[t,X({},r,{encode:{series:Xl(li(t,void 0))}})]};d1.props={};var TL=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const h1=(t={})=>{const{groupBy:r="x",reverse:e=!1,orderBy:n,padding:i}=t;return TL(t,["groupBy","reverse","orderBy","padding"]),(a,o)=>{const{data:s,encode:l,scale:c}=o,{series:u}=c,[f]=$t(l,"y"),[d]=ql(l,"series","color"),h=n1(d,u),p=X({},o,{scale:{series:{domain:h,paddingInner:i}}}),v=mi(r,a,o),g=t1(n);if(!g)return[a,X(p,{encode:{series:se(d)}})];const y=g(s,f,d);y&&e1(v,y);const m=new Array(a.length);for(const b of v){e&&b.reverse();for(let x=0;x<b.length;x++)m[b[x]]=h[x]}return[a,X(p,{encode:{series:se(n?m:d)}})]}};h1.props={};const p1=t=>{const{groupBy:r=["x"],reducer:e=(o,s)=>s[o[0]],orderBy:n=null,reverse:i=!1,duration:a}=t;return(o,s)=>{const{encode:l}=s,u=(Array.isArray(r)?r:[r]).map(g=>[g,$t(l,g)[0]]);if(u.length===0)return[o,s];let f=[o];for(const[,g]of u){const y=[];for(const m of f){const b=Array.from(ce(m,x=>g[x]).values());y.push(...b)}f=y}if(n){const[g]=$t(l,n);g&&f.sort((y,m)=>e(y,g)-e(m,g)),i&&f.reverse()}const d=(a||3e3)/f.length,[h]=a?[li(o,d)]:ql(l,"enterDuration",li(o,d)),[p]=ql(l,"enterDelay",li(o,0)),v=new Array(o.length);for(let g=0,y=0;g<f.length;g++){const m=f[g],b=oe(m,x=>+h[x]);for(const x of m)v[x]=+p[x]+y;y+=b}return[o,X({},s,{encode:{enterDuration:Xl(h),enterDelay:Xl(v)}})]}};p1.props={};var PL=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function ML(t){return typeof t=="function"?t:{min:(e,n)=>Zn(e,i=>n[+i]),max:(e,n)=>oe(e,i=>n[+i]),first:(e,n)=>n[e[0]],last:(e,n)=>n[e[e.length-1]],mean:(e,n)=>Bo(e,i=>n[+i]),median:(e,n)=>ph(e,i=>n[+i]),sum:(e,n)=>Nn(e,i=>n[+i]),deviation:(e,n)=>QA(e,i=>n[+i])}[t]||oe}const v1=(t={})=>{const{groupBy:r="x",basis:e="max"}=t;return(n,i)=>{const{encode:a,tooltip:o}=i,{x:s}=a,l=PL(a,["x"]),c=Object.entries(l).filter(([v])=>v.startsWith("y")).map(([v])=>[v,$t(a,v)[0]]),[,u]=c.find(([v])=>v==="y"),f=c.map(([v])=>[v,new Array(n.length)]),d=mi(r,n,i),h=ML(e);for(const v of d){const g=h(v,u);for(const y of v)for(let m=0;m<c.length;m++){const[,b]=c[m],[,x]=f[m];x[y]=+b[y]/g}}const p=Wr(o)||o?.items&&o?.items.length!==0;return[n,X({},i,Object.assign({encode:Object.fromEntries(f.map(([v,g])=>[v,se(g,$t(a,v)[1])]))},!p&&a.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};v1.props={};function Ql(t,r,e){if(t===null)return[-.5,.5];const n=n1(t,r),a=new qo({domain:n,range:[0,1],padding:e}).getBandWidth();return[-a/2,a/2]}function Jl(t,r,e){return r*(1-t)+e*t}const g1=(t={})=>{const{padding:r=0,paddingX:e=r,paddingY:n=r,random:i=Math.random}=t;return(a,o)=>{const{encode:s,scale:l}=o,{x:c,y:u}=l,[f]=$t(s,"x"),[d]=$t(s,"y"),h=Ql(f,c,e),p=Ql(d,u,n),v=a.map(()=>Jl(i(),...p)),g=a.map(()=>Jl(i(),...h));return[a,X({scale:{x:{padding:.5},y:{padding:.5}}},o,{encode:{dy:se(v),dx:se(g)}})]}};g1.props={};const y1=(t={})=>{const{padding:r=0,random:e=Math.random}=t;return(n,i)=>{const{encode:a,scale:o}=i,{x:s}=o,[l]=$t(a,"x"),c=Ql(l,s,r),u=n.map(()=>Jl(e(),...c));return[n,X({scale:{x:{padding:.5}}},i,{encode:{dx:se(u)}})]}};y1.props={};const m1=(t={})=>{const{padding:r=0,random:e=Math.random}=t;return(n,i)=>{const{encode:a,scale:o}=i,{y:s}=o,[l]=$t(a,"y"),c=Ql(l,s,r),u=n.map(()=>Jl(e(),...c));return[n,X({scale:{y:{padding:.5}}},i,{encode:{dy:se(u)}})]}};m1.props={};var CL=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const b1=(t={})=>{const{groupBy:r="x"}=t;return(e,n)=>{const{encode:i,style:a={}}=n,{x:o}=i,s=CL(i,["x"]),l=Object.entries(s).filter(([h])=>h.startsWith("y")).map(([h])=>[h,$t(i,h)[0]]),c=l.map(([h])=>[h,new Array(e.length)]),u=mi(r,e,n),f=new Array(u.length);for(let h=0;h<u.length;h++){const v=u[h].flatMap(m=>l.map(([,b])=>+b[m])),[g,y]=to(v);f[h]=(g+y)/2}const d=Math.max(...f);for(let h=0;h<u.length;h++){const p=d-f[h],v=u[h];for(const g of v)for(let y=0;y<l.length;y++){const[,m]=l[y],[,b]=c[y];b[g]=+m[g]+p}}return[e,X({},n,{encode:Object.fromEntries(c.map(([h,p])=>[h,se(p,$t(i,h)[1])])),style:Object.assign({first:(h,p)=>p===0,last:(h,p)=>p===u.length-1},a)})]}};b1.props={};const x1=(t={})=>{const{groupBy:r="x"}=t;return(e,n)=>{const{encode:i}=n,[a]=$t(i,"y"),[o,s]=$t(i,"y1"),l=mi(r,e,n),c=new Array(e.length);for(const u of l){const f=u.map(d=>+a[d]);for(let d=0;d<u.length;d++){const h=u[d],p=Math.max(...f.filter((v,g)=>g!==d));c[h]=+a[h]>p?p:a[h]}}return[e,X({},n,{encode:{y1:se(c,s)}})]}};x1.props={};function xg(t,r){return[t[0]]}function LL(t,r){const e=t.length-1;return[t[e]]}function NL(t,r){const e=ds(t,n=>r[n]);return[t[e]]}function RL(t,r){const e=Gc(t,n=>r[n]);return[t[e]]}function IL(t){return typeof t=="function"?t:{first:xg,last:LL,max:NL,min:RL}[t]||xg}const nu=(t={})=>{const{groupBy:r="series",channel:e,selector:n}=t;return(i,a)=>{const{encode:o}=a,s=mi(r,i,a),[l]=$t(o,e),c=IL(n);return[s.flatMap(u=>c(u,l)),a]}};nu.props={};var jL=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const O1=(t={})=>{const{selector:r}=t,e=jL(t,["selector"]);return nu(Object.assign({channel:"x",selector:r},e))};O1.props={};var DL=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const w1=(t={})=>{const{selector:r}=t,e=DL(t,["selector"]);return nu(Object.assign({channel:"y",selector:r},e))};w1.props={};var $L=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function xi(t){return r=>r===null?t:`${t} of ${r}`}function FL(t){if(typeof t=="function")return[t,null];const e={mean:BL,max:WL,count:HL,first:VL,last:UL,sum:YL,min:GL,median:zL}[t];if(!e)throw new Error(`Unknown reducer: ${t}.`);return e()}function BL(){const t=(e,n)=>Bo(e,i=>+n[i]),r=xi("mean");return[t,r]}function zL(){const t=(e,n)=>ph(e,i=>+n[i]),r=xi("median");return[t,r]}function WL(){const t=(e,n)=>oe(e,i=>+n[i]),r=xi("max");return[t,r]}function GL(){const t=(e,n)=>Zn(e,i=>+n[i]),r=xi("min");return[t,r]}function HL(){const t=(e,n)=>e.length,r=xi("count");return[t,r]}function YL(){const t=(e,n)=>Nn(e,i=>+n[i]),r=xi("sum");return[t,r]}function VL(){const t=(e,n)=>n[e[0]],r=xi("first");return[t,r]}function UL(){const t=(e,n)=>n[e[e.length-1]],r=xi("last");return[t,r]}const $h=(t={})=>{const{groupBy:r}=t,e=$L(t,["groupBy"]);return(n,i)=>{const{data:a,encode:o}=i,s=r(n,i);if(!s)return[n,i];const l=(h,p)=>{if(h)return h;const{from:v}=p;if(!v)return h;const[,g]=$t(o,v);return g},c=Object.entries(e).map(([h,p])=>{const[v,g]=FL(p),[y,m]=$t(o,h),b=l(m,p),x=s.map(O=>v(O,y??a));return[h,Object.assign(Object.assign({},eC(x,g?.(b)||b)),{aggregate:!0})]}),u=Object.keys(o).map(h=>{const[p,v]=$t(o,h),g=s.map(y=>p[y[0]]);return[h,se(g,v)]}),f=s.map(h=>a[h[0]]);return[oa(s),X({},i,{data:f,encode:Object.fromEntries([...u,...c])})]}};$h.props={};var XL=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const ks=(t={})=>{const{channels:r=["x","y"]}=t,e=XL(t,["channels"]),n=(i,a)=>mi(r,i,a);return $h(Object.assign(Object.assign({},e),{groupBy:n}))};ks.props={};const _1=(t={})=>ks(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));_1.props={};const S1=(t={})=>ks(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));S1.props={};const k1=(t={})=>ks(Object.assign(Object.assign({},t),{channels:["color"]}));k1.props={};function qL(t,r,e){const{by:n=t,reducer:i="max"}=r,[a]=$t(e,n);if(typeof i=="function")return o=>i(o,a);if(i==="max")return o=>oe(o,s=>+a[s]);if(i==="min")return o=>Zn(o,s=>+a[s]);if(i==="sum")return o=>Nn(o,s=>+a[s]);if(i==="median")return o=>ph(o,s=>+a[s]);if(i==="mean")return o=>Bo(o,s=>+a[s]);if(i==="first")return o=>a[o[0]];if(i==="last")return o=>a[o[o.length-1]];throw new Error(`Unknown reducer: ${i}`)}function KL(t,r,e){if(!Array.isArray(e))return t;const n=new Set(e);return t.filter(i=>n.has(r[i]))}const ru=(t={})=>(r,e)=>{const{reverse:n,slice:i,channel:a,by:o,ordinal:s=!0,reducer:l}=t,{encode:c,scale:u={}}=e,f=u[a].domain,[d]=$t(c,o??a),[h]=$t(c,a),p=qL(a,{by:o,reducer:l},c),v=KL(r,h,f),g=JA(v,p,x=>h[x]),y=s?r:jr(r,x=>d[x]);n&&(!s&&y.reverse(),g.reverse());const m=typeof i=="number"?[0,i]:i,b=i?g.slice(...m):g;return[y,X(e,{scale:{[a]:{domain:b}}})]};ru.props={};const E1=(t={})=>ru(Object.assign(Object.assign({},t),{channel:"x"}));E1.props={};const A1=(t={})=>ru(Object.assign(Object.assign({},t),{channel:"color"}));A1.props={};const T1=(t={})=>ru(Object.assign(Object.assign({},t),{channel:"y"}));T1.props={};function ZL(t,r){return typeof r=="string"?t.map(e=>e[r]):t.map(r)}function QL(t,r){if(typeof t=="function")return e=>t(e,r);if(t==="sum")return e=>Nn(e,n=>+r[n]);throw new Error(`Unknown reducer: ${t}`)}const P1=(t={})=>{const{field:r,channel:e="y",reducer:n="sum"}=t;return(i,a)=>{const{data:o,encode:s}=a,[l]=$t(s,"x"),c=r?ZL(o,r):$t(s,e)[0],u=QL(n,c),f=vh(i,u,d=>l[d]).map(d=>d[1]);return[i,X({},a,{scale:{x:{flex:f}}})]}};P1.props={};function Ee([t,r],[e,n]){return[t-e,r-n]}function Ws([t,r],[e,n]){return[t+e,r+n]}function Oe([t,r],[e,n]){return Math.sqrt(Math.pow(t-e,2)+Math.pow(r-n,2))}function In([t,r]){return Math.atan2(r,t)}function Ya([t,r]){return In([t,r])+Math.PI/2}function M1(t,r){const e=In(t),n=In(r);return e<n?n-e:Math.PI*2-(e-n)}function Fh(t){let r=1/0,e=-1/0,n=1/0,i=-1/0;for(const[s,l]of t)r=Math.min(s,r),e=Math.max(s,e),n=Math.min(l,n),i=Math.max(l,i);const a=e-r,o=i-n;return[r,n,a,o]}function C1([t,r],[e,n]){return[(t+e)/2,(r+n)/2]}function JL(t){const{padding:r=0,direction:e="col"}=t;return(n,i,a)=>{const o=n.length;if(o===0)return[];const{innerWidth:s,innerHeight:l}=a,c=l/s;let u=Math.ceil(Math.sqrt(i/c)),f=s/u,d=Math.ceil(i/u),h=d*f;for(;h>l;)u=u+1,f=s/u,d=Math.ceil(i/u),h=d*f;const p=l-d*f,v=d<=1?0:p/(d-1),[g,y]=d<=1?[(s-o*f)/(o-1),(l-f)/2]:[0,0];return n.map((m,b)=>{const[x,O,w,_]=Fh(m),S=e==="col"?b%u:Math.floor(b/d),k=e==="col"?Math.floor(b/u):b%d,E=S*f,A=(d-k-1)*f+p,T=(f-r)/w,P=(f-r)/_,N=E-x+g*S+1/2*r,I=A-O-v*k-y+1/2*r;return`translate(${N}, ${I}) scale(${T}, ${P})`})}}const L1=t=>(r,e)=>[r,X({},e,{modifier:JL(t),axis:!1})];L1.props={};var tN=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Og="thresholds";function eN(t){const[r,e]=to(t);return Math.min(200,eT(t,r,e))}const Bh=(t={})=>{const{groupChannels:r=["color"],binChannels:e=["x","y"]}=t,n=tN(t,["groupChannels","binChannels"]),i={},a=(o,s)=>{const{encode:l}=s,c=e.map(p=>{const[v]=$t(l,p);return v}),u=it(n,Og),f=o.filter(p=>c.every(v=>le(v[p]))),d=[...r.map(p=>{const[v]=$t(l,p);return v}).filter(le).map(p=>v=>p[v]),...e.map((p,v)=>{const g=c[v],y=u[p]||eN(g),m=tT().thresholds(y).value(x=>+g[x])(f),b=new Map(m.flatMap(x=>{const{x0:O,x1:w}=x,_=`${O},${w}`;return x.map(S=>[S,_])}));return i[p]=b,x=>b.get(x)})],h=p=>d.map(v=>v(p)).join("-");return Array.from(ce(f,h).values())};return $h(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(n).filter(([o])=>!o.startsWith(Og)))),Object.fromEntries(e.flatMap(o=>{const s=([c])=>+i[o].get(c).split(",")[0],l=([c])=>+i[o].get(c).split(",")[1];return l.from=o,[[o,s],[`${o}1`,l]]}))),{groupBy:a}))};Bh.props={};const N1=(t={})=>{const{thresholds:r}=t;return Bh(Object.assign(Object.assign({},t),{thresholdsX:r,groupChannels:["color"],binChannels:["x"]}))};N1.props={};function nN(t,r,e,n){const i=t.length;if(n>=i||n===0)return t;const a=h=>r[t[h]]*1,o=h=>e[t[h]]*1,s=[],l=(i-2)/(n-2);let c=0,u,f,d;s.push(c);for(let h=0;h<n-2;h++){let p=0,v=0,g=Math.floor((h+1)*l)+1,y=Math.floor((h+2)*l)+1;y=Math.min(y,i);const m=y-g;for(;g<y;g++)p+=a(g),v+=o(g);p/=m,v/=m;let b=Math.floor((h+0)*l)+1;const x=Math.floor((h+1)*l)+1,O=[a(c),o(c)];for(u=f=-1;b<x;b++)f=Math.abs((O[0]-p)*(a(b)-O[1])-(O[0]-o(b))*(v-O[0]))*.5,f>u&&(u=f,d=b);s.push(d),c=d}return s.push(i-1),s.map(h=>t[h])}function rN(t){if(typeof t=="function")return t;if(t==="lttb")return nN;const r={first:n=>[n[0]],last:n=>[n[n.length-1]],min:(n,i,a)=>[n[Gc(n,o=>a[o])]],max:(n,i,a)=>[n[ds(n,o=>a[o])]],median:(n,i,a)=>[n[nT(n,o=>a[o])]]},e=r[t]||r.median;return(n,i,a,o)=>{const s=Math.max(1,Math.floor(n.length/o));return iN(n,s).flatMap(c=>e(c,i,a))}}function iN(t,r){const e=t.length,n=[];let i=0;for(;i<e;)n.push(t.slice(i,i+=r));return n}const R1=(t={})=>{const{strategy:r="median",thresholds:e=2e3,groupBy:n=["series","color"]}=t,i=rN(r);return(a,o)=>{const{encode:s}=o,l=mi(n,a,o),[c]=$t(s,"x"),[u]=$t(s,"y");return[l.flatMap(f=>i(f,c,u,e)),o]}};R1.props={};function aN(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}function oN(t){var r;const{encode:e}=t,n=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),i=(r=e?.color)===null||r===void 0?void 0:r.field;if(!e||!i)return n;let a;for(const[o,s]of Object.entries(e))(o==="x"||o==="y")&&s.field===i&&(a=Object.assign(Object.assign({},a),{[o]:Object.assign(Object.assign({},s),{value:[]})}));return a?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),a)}):n}const I1=(t={})=>(r,e)=>{const{encode:n,data:i}=e,a=Object.keys(t).length>0,o=Object.entries(t).map(([f,d])=>{const[h]=$t(n,f);if(!h)return null;const[p,v=!0]=aN(d);if(typeof p=="function")return g=>p(h[g]);if(v){const g=Array.isArray(p)?p:[p];return g.length===0?null:y=>g.includes(h[y])}else{const[g,y]=p;return m=>h[m]>=g&&h[m]<=y}}).filter(le),s=f=>o.every(d=>d(f)),l=r.filter(s),c=l.map((f,d)=>d);if(o.length===0&&a){const f=oN(e);return[[],f]}const u=Object.entries(n).map(([f,d])=>[f,Object.assign(Object.assign({},d),{value:c.map(h=>d.value[l[h]]).filter(h=>h!==void 0)})]);return[c,X({},e,{encode:Object.fromEntries(u),data:l.map(f=>i[f])})]};I1.props={};function ue(t){const{transformations:r}=t.getOptions();return r.map(([n])=>n).filter(n=>n==="transpose").length%2!==0}function Jt(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="polar")}function iu(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="reflect")&&r.some(([e])=>e.startsWith("transpose"))}function j1(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="helix")}function au(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="parallel")}function D1(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="fisheye")}function sN(t){return au(t)&&Jt(t)}function eo(t){return j1(t)||Jt(t)}function lN(t){return Jt(t)&&ue(t)}function cN(t){if(eo(t)){const[r,e]=t.getSize(),n=t.getOptions().transformations.find(i=>i[0]==="polar");if(n)return Math.max(r,e)/2*n[4]}return 0}function ou(t){const{transformations:r}=t.getOptions(),[,,,e,n]=r.find(i=>i[0]==="polar");return[+e,+n]}function zh(t,r=!0){const{transformations:e}=t.getOptions(),[,n,i]=e.find(a=>a[0]==="polar");return r?[+n*180/Math.PI,+i*180/Math.PI]:[n,i]}function uN(t,r){const{transformations:e}=t.getOptions(),[,...n]=e.find(i=>i[0]===r);return n}/*!
 * @antv/g-math
 * @description Geometry util
 * @version 3.1.0
 * @date 12/22/2025, 3:02:36 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function Dr(t,r,e,n){var i=t-e,a=r-n;return Math.sqrt(i*i+a*a)}function $1(t,r){var e=Math.min.apply(Math,Pt(t)),n=Math.min.apply(Math,Pt(r)),i=Math.max.apply(Math,Pt(t)),a=Math.max.apply(Math,Pt(r));return{x:e,y:n,width:i-e,height:a-n}}function fN(t,r,e){return Math.atan(-r/t*Math.tan(e))}function dN(t,r,e){return Math.atan(r/(t*Math.tan(e)))}function hN(t,r,e,n,i,a){return e*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+t}function pN(t,r,e,n,i,a){return e*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+r}function vN(t,r,e,n,i,a,o){for(var s=fN(e,n,i),l=1/0,c=-1/0,u=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var d=s+f;a<o?a<d&&d<o&&u.push(d):o<d&&d<a&&u.push(d)}for(var h=0;h<u.length;h++){var p=hN(t,r,e,n,i,u[h]);p<l&&(l=p),p>c&&(c=p)}for(var v=dN(e,n,i),g=1/0,y=-1/0,m=[a,o],b=-Math.PI*2;b<=Math.PI*2;b+=Math.PI){var x=v+b;a<o?a<x&&x<o&&m.push(x):o<x&&x<a&&m.push(x)}for(var O=0;O<m.length;O++){var w=pN(t,r,e,n,i,m[O]);w<g&&(g=w),w>y&&(y=w)}return{x:l,y:g,width:c-l,height:y-g}}var gN=1e-4;function F1(t,r,e,n,i,a){var o=-1,s=1/0,l=[e,n],c=20;a&&a>200&&(c=a/10);for(var u=1/c,f=u/10,d=0;d<=c;d++){var h=d*u,p=[i.apply(void 0,Pt(t.concat([h]))),i.apply(void 0,Pt(r.concat([h])))],v=Dr(l[0],l[1],p[0],p[1]);v<s&&(o=h,s=v)}if(o===0)return{x:t[0],y:r[0]};if(o===1){var g=t.length;return{x:t[g-1],y:r[g-1]}}s=1/0;for(var y=0;y<32&&!(f<gN);y++){var m=o-f,b=o+f,x=[i.apply(void 0,Pt(t.concat([m]))),i.apply(void 0,Pt(r.concat([m])))],O=Dr(l[0],l[1],x[0],x[1]);if(m>=0&&O<s)o=m,s=O;else{var w=[i.apply(void 0,Pt(t.concat([b]))),i.apply(void 0,Pt(r.concat([b])))],_=Dr(l[0],l[1],w[0],w[1]);b<=1&&_<s?(o=b,s=_):f*=.5}}return{x:i.apply(void 0,Pt(t.concat([o]))),y:i.apply(void 0,Pt(r.concat([o])))}}function B1(t,r,e,n){return Dr(t,r,e,n)}function z1(t,r,e,n,i){return{x:(1-i)*t+i*e,y:(1-i)*r+i*n}}function yN(t,r,e,n,i,a){var o=[e-t,n-r];if(rT(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-r)*(a-r));var s=[-o[1],o[0]];iT(s,s);var l=[i-t,a-r];return Math.abs(aT(l,s))}function od(t,r,e,n,i){var a=1-i;return a*a*a*t+3*r*i*a*a+3*e*i*i*a+n*i*i*i}function wg(t,r,e,n){var i=-3*t+9*r-9*e+3*n,a=6*t-12*r+6*e,o=3*r-3*t,s=[],l,c,u;if(Ta(i,0))Ta(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;Ta(f,0)?s.push(-a/(2*i)):f>0&&(u=Math.sqrt(f),l=(-a+u)/(2*i),c=(-a-u)/(2*i),l>=0&&l<=1&&s.push(l),c>=0&&c<=1&&s.push(c))}return s}function mN(t,r,e,n,i,a,o,s){for(var l=[t,o],c=[r,s],u=wg(t,e,i,o),f=wg(r,n,a,s),d=0;d<u.length;d++)l.push(od(t,e,i,o,u[d]));for(var h=0;h<f.length;h++)c.push(od(r,n,a,s,f[h]));return $1(l,c)}function bN(t,r,e,n,i,a,o,s,l,c,u){return F1([t,e,i,o],[r,n,a,s],l,c,od,u)}function _g(t,r,e,n,i,a,o,s,l,c,u){var f=bN(t,r,e,n,i,a,o,s,l,c,u);return Dr(f.x,f.y,l,c)}function xN(t){if(t.length<2)return 0;for(var r=0,e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];r+=Dr(n[0],n[1],i[0],i[1])}return r}function ON(t){return xN(t)}function sd(t,r,e,n){var i=1-n;return i*i*t+2*n*i*r+n*n*e}function Sg(t,r,e){var n=t+e-2*r;if(Ta(n,0))return[.5];var i=(t-r)/n;return i<=1&&i>=0?[i]:[]}function wN(t,r,e,n,i,a){var o=Sg(t,e,i)[0],s=Sg(r,n,a)[0],l=[t,i],c=[r,a];return o!==void 0&&l.push(sd(t,e,i,o)),s!==void 0&&c.push(sd(r,n,a,s)),$1(l,c)}function _N(t,r,e,n,i,a,o,s){return F1([t,e,i],[r,n,a],o,s,sd)}function SN(t,r,e,n,i,a,o,s){var l=_N(t,r,e,n,i,a,o,s);return Dr(l.x,l.y,o,s)}/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.7.0
 * @date 12/24/2025, 11:55:20 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var U=function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t}({}),Cl=function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t}({}),Oi=function(){function t(){Z(this,t),this.plugins=[]}return K(t,[{key:"addRenderingPlugin",value:function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)}},{key:"removeAllRenderingPlugins",value:function(){var e=this;this.plugins.forEach(function(n){var i=e.context.renderingPlugins.indexOf(n);i>=0&&e.context.renderingPlugins.splice(i,1)})}}])}(),kN=function(){function t(r){Z(this,t),this.clipSpaceNearZ=Cl.NEGATIVE_ONE,this.plugins=[],this.config=Ot({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},r)}return K(t,[{key:"registerPlugin",value:function(e){var n=this.plugins.findIndex(function(i){return i===e});n===-1&&this.plugins.push(e)}},{key:"unregisterPlugin",value:function(e){var n=this.plugins.findIndex(function(i){return i===e});n>-1&&this.plugins.splice(n,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(e){return this.plugins.find(function(n){return n.name===e})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(e){Object.assign(this.config,e)}}])}(),Uu=si,ga=cr,EN=oT,AN=sT,kg=Hl,Xu=Ab,ze=function(){function t(){Z(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return K(t,[{key:"update",value:function(e,n){ga(this.center,e),ga(this.halfExtents,n),Xu(this.min,this.center,this.halfExtents),Uu(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(e,n){Uu(this.center,n,e),kg(this.center,this.center,.5),Xu(this.halfExtents,n,e),kg(this.halfExtents,this.halfExtents,.5),ga(this.min,e),ga(this.max,n)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){if(!t.isEmpty(e)){if(t.isEmpty(this)){this.setMinMax(e.getMin(),e.getMax());return}var n=this.center,i=n[0],a=n[1],o=n[2],s=this.halfExtents,l=s[0],c=s[1],u=s[2],f=i-l,d=i+l,h=a-c,p=a+c,v=o-u,g=o+u,y=e.center,m=y[0],b=y[1],x=y[2],O=e.halfExtents,w=O[0],_=O[1],S=O[2],k=m-w,E=m+w,A=b-_,T=b+_,P=x-S,N=x+S;k<f&&(f=k),E>d&&(d=E),A<h&&(h=A),T>p&&(p=T),P<v&&(v=P),N>g&&(g=N),n[0]=(f+d)*.5,n[1]=(h+p)*.5,n[2]=(v+g)*.5,s[0]=(d-f)*.5,s[1]=(p-h)*.5,s[2]=(g-v)*.5,this.min[0]=f,this.min[1]=h,this.min[2]=v,this.max[0]=d,this.max[1]=p,this.max[2]=g}}},{key:"setFromTransformedAABB",value:function(e,n){var i=this.center,a=this.halfExtents,o=e.center,s=e.halfExtents,l=n[0],c=n[4],u=n[8],f=n[1],d=n[5],h=n[9],p=n[2],v=n[6],g=n[10],y=Math.abs(l),m=Math.abs(c),b=Math.abs(u),x=Math.abs(f),O=Math.abs(d),w=Math.abs(h),_=Math.abs(p),S=Math.abs(v),k=Math.abs(g);i[0]=n[12]+l*o[0]+c*o[1]+u*o[2],i[1]=n[13]+f*o[0]+d*o[1]+h*o[2],i[2]=n[14]+p*o[0]+v*o[1]+g*o[2],a[0]=y*s[0]+m*s[1]+b*s[2],a[1]=x*s[0]+O*s[1]+w*s[2],a[2]=_*s[0]+S*s[1]+k*s[2],Xu(this.min,i,a),Uu(this.max,i,a)}},{key:"intersects",value:function(e){var n=this.getMax(),i=this.getMin(),a=e.getMax(),o=e.getMin();return i[0]<=a[0]&&n[0]>=o[0]&&i[1]<=a[1]&&n[1]>=o[1]&&i[2]<=a[2]&&n[2]>=o[2]}},{key:"intersection",value:function(e){if(!this.intersects(e))return null;var n=new t,i=EN([0,0,0],this.getMin(),e.getMin()),a=AN([0,0,0],this.getMax(),e.getMax());return n.setMinMax(i,a),n}},{key:"getNegativeFarPoint",value:function(e){return e.pnVertexFlag===273?ga([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(e){return e.pnVertexFlag===273?ga([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0}}])}(),TN=function(){function t(r,e){Z(this,t),this.distance=r||0,this.normal=e||Ht(0,1,0),this.updatePNVertexFlag()}return K(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(e){return Nr(e,this.normal)-this.distance}},{key:"normalize",value:function(){var e=1/ET(this.normal);Hl(this.normal,this.normal,e),this.distance*=e}},{key:"intersectsLine",value:function(e,n,i){var a=this.distanceToPoint(e),o=this.distanceToPoint(n),s=a/(a-o),l=s>=0&&s<=1;return l&&i&&Kf(i,e,n,s),l}}])}(),ya=function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t}({}),PN=function(){function t(r){if(Z(this,t),this.planes=[],r)this.planes=r;else for(var e=0;e<6;e++)this.planes.push(new TN)}return K(t,[{key:"extractFromVPMatrix",value:function(e){var n=_t(e,16),i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],f=n[7],d=n[8],h=n[9],p=n[10],v=n[11],g=n[12],y=n[13],m=n[14],b=n[15];nn(this.planes[0].normal,s-i,f-l,v-d),this.planes[0].distance=b-g,nn(this.planes[1].normal,s+i,f+l,v+d),this.planes[1].distance=b+g,nn(this.planes[2].normal,s+a,f+c,v+h),this.planes[2].distance=b+y,nn(this.planes[3].normal,s-a,f-c,v-h),this.planes[3].distance=b-y,nn(this.planes[4].normal,s-o,f-u,v-p),this.planes[4].distance=b-m,nn(this.planes[5].normal,s+o,f+u,v+p),this.planes[5].distance=b+m,this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})}}])}(),Qe=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Z(this,t),this.x=0,this.y=0,this.x=r,this.y=e}return K(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y}}])}(),Va=function(){function t(r,e,n,i){Z(this,t),this.x=r,this.y=e,this.width=n,this.height=i,this.left=r,this.right=r+n,this.top=e,this.bottom=e+i}return K(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(e){return new t(e.x,e.y,e.width,e.height)}},{key:"applyTransform",value:function(e,n){var i=$s(e.x,e.y,0,1),a=$s(e.x+e.width,e.y,0,1),o=$s(e.x,e.y+e.height,0,1),s=$s(e.x+e.width,e.y+e.height,0,1),l=Rr(),c=Rr(),u=Rr(),f=Rr();fr(l,i,n),fr(c,a,n),fr(u,o,n),fr(f,s,n);var d=Math.min(l[0],c[0],u[0],f[0]),h=Math.min(l[1],c[1],u[1],f[1]),p=Math.max(l[0],c[0],u[0],f[0]),v=Math.max(l[1],c[1],u[1],f[1]);return t.fromRect({x:d,y:h,width:p-d,height:v-h})}}])}(),ie="Method not implemented.",ma="Use document.documentElement instead.",MN="Cannot append a destroyed element.";function Pa(t){return t===void 0?0:t>360||t<-360?t%360:t}var qu=Nt();function cn(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(t)&&t.length===3?n?Mr(t):cr(qu,t):fe(t)?n?Ht(t,r,e):nn(qu,t,r,e):n?Ht(t[0],t[1]||r,t[2]||e):nn(qu,t[0],t[1]||r,t[2]||e)}var CN=Math.PI/180;function Xt(t){return t*CN}var LN=180/Math.PI;function Tn(t){return t*LN}function NN(t){return 360*t}var tc=Math.PI/2;function RN(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=e*e,s=n*n,l=i*i,c=a*a,u=o+s+l+c,f=e*a-n*i;return f>.499995*u?(t[0]=tc,t[1]=2*Math.atan2(n,e),t[2]=0):f<-.499995*u?(t[0]=-tc,t[1]=2*Math.atan2(n,e),t[2]=0):(t[0]=Math.asin(2*(e*i-a*n)),t[1]=Math.atan2(2*(e*a+n*i),1-2*(l+c)),t[2]=Math.atan2(2*(e*n+i*a),1-2*(s+l))),t}function IN(t,r){var e,n,i=Gl(Nt(),r),a=_t(i,3),o=a[0],s=a[1],l=a[2],c=Math.asin(-r[2]/o);return c<tc?c>-tc?(e=Math.atan2(r[6]/s,r[10]/l),n=Math.atan2(r[1]/o,r[0]/o)):(n=0,e=-Math.atan2(r[4]/s,r[5]/s)):(n=0,e=Math.atan2(r[4]/s,r[5]/s)),t[0]=e,t[1]=c,t[2]=n,t}function Ku(t,r){return r.length===16?IN(t,r):RN(t,r)}function jN(t,r,e,n,i){var a=Math.cos(t),o=Math.sin(t);return cT(n*a,i*o,0,-n*o,i*a,0,r,e,1)}function DN(t,r,e,n,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,l=2*a,c=e-r,u=n-i,f=l/c,d=l/u,h=(e+r)/c,p=(n+i)/u,v,g,y=o-a,m=o*a;return s?(v=-o/y,g=-m/y):(v=-(o+a)/y,g=-2*m/y),t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=h,t[9]=p,t[10]=v,t[11]=-1,t[12]=0,t[13]=0,t[14]=g,t[15]=0,t}function Eg(t){var r=t[0],e=t[1],n=t[3],i=t[4],a=Math.sqrt(r*r+e*e),o=Math.sqrt(n*n+i*i),s=r*i-e*n;if(s<0&&(r<i?a=-a:o=-o),a){var l=1/a;r*=l,e*=l}if(o){var c=1/o;n*=c,i*=c}var u=Math.atan2(e,r),f=Tn(u);return[t[6],t[7],a,o,f]}var er=Zt(),zn=Zt(),uo=Rr(),bt=[Nt(),Nt(),Nt()],Ag=Nt();function $N(t,r,e,n,i,a){if(!FN(er,t)||(zo(zn,er),zn[3]=0,zn[7]=0,zn[11]=0,zn[15]=1,Math.abs(AT(zn))<1e-8))return!1;var o=er[3],s=er[7],l=er[11],c=er[12],u=er[13],f=er[14],d=er[15];if(o!==0||s!==0||l!==0){uo[0]=o,uo[1]=s,uo[2]=l,uo[3]=d;var h=ur(zn,zn);if(!h)return!1;TT(zn,zn),fr(i,uo,zn)}else i[0]=i[1]=i[2]=0,i[3]=1;if(r[0]=c,r[1]=u,r[2]=f,BN(bt,er),e[0]=ti(bt[0]),Aa(bt[0],bt[0]),n[0]=Nr(bt[0],bt[1]),Zu(bt[1],bt[1],bt[0],1,-n[0]),e[1]=ti(bt[1]),Aa(bt[1],bt[1]),n[0]/=e[1],n[1]=Nr(bt[0],bt[2]),Zu(bt[2],bt[2],bt[0],1,-n[1]),n[2]=Nr(bt[1],bt[2]),Zu(bt[2],bt[2],bt[1],1,-n[2]),e[2]=ti(bt[2]),Aa(bt[2],bt[2]),n[1]/=e[2],n[2]/=e[2],PT(Ag,bt[1],bt[2]),Nr(bt[0],Ag)<0)for(var p=0;p<3;p++)e[p]*=-1,bt[p][0]*=-1,bt[p][1]*=-1,bt[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+bt[0][0]-bt[1][1]-bt[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-bt[0][0]+bt[1][1]-bt[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-bt[0][0]-bt[1][1]+bt[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+bt[0][0]+bt[1][1]+bt[2][2],0)),bt[2][1]>bt[1][2]&&(a[0]=-a[0]),bt[0][2]>bt[2][0]&&(a[1]=-a[1]),bt[1][0]>bt[0][1]&&(a[2]=-a[2]),!0}function FN(t,r){var e=r[15];if(e===0)return!1;for(var n=1/e,i=0;i<16;i++)t[i]=r[i]*n;return!0}function BN(t,r){t[0][0]=r[0],t[0][1]=r[1],t[0][2]=r[2],t[1][0]=r[4],t[1][1]=r[5],t[1][2]=r[6],t[2][0]=r[8],t[2][1]=r[9],t[2][2]=r[10]}function Zu(t,r,e,n,i){t[0]=r[0]*n+e[0]*i,t[1]=r[1]*n+e[1]*i,t[2]=r[2]*n+e[2]*i}var re=function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t}({}),ld=function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t}({}),kn=function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t}({}),W1={UPDATED:"updated"},Tg=2e-4,G1=function(){function t(){Z(this,t),this.clipSpaceNearZ=Cl.NEGATIVE_ONE,this.eventEmitter=new Tb,this.matrix=Zt(),this.right=Ht(1,0,0),this.up=Ht(0,1,0),this.forward=Ht(0,0,1),this.position=Ht(0,0,1),this.focalPoint=Ht(0,0,0),this.distanceVector=Ht(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Zt(),this.projectionMatrixInverse=Zt(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=re.EXPLORING,this.trackingMode=ld.DEFAULT,this.projectionMode=kn.PERSPECTIVE,this.frustum=new PN,this.orthoMatrix=Zt()}return K(t,[{key:"isOrtho",value:function(){return this.projectionMode===kn.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(e){this.enableUpdate=e}},{key:"setType",value:function(e,n){return this.type=e,this.type===re.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===re.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this}},{key:"setTrackingMode",value:function(e){if(this.type!==re.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this}},{key:"setWorldRotation",value:function(e){return this.rotateWorld=e,this._getAngles(),this}},{key:"getViewTransform",value:function(){return ur(Zt(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(e,n){var i=Jr(Zt(),[e,n,0]);this.jitteredProjectionMatrix=vn(Zt(),i,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this}},{key:"setProjectionMatrix",value:function(e){this.projectionMatrix=e}},{key:"setFov",value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:"setNear",value:function(e){return this.projectionMode===kn.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this}},{key:"setFar",value:function(e){return this.projectionMode===kn.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this}},{key:"setViewOffset",value:function(e,n,i,a,o,s){return this.aspect=e/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===kn.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===kn.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(e){return this.zoom=e,this.projectionMode===kn.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===kn.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(e,n){var i=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),a=i.x,o=i.y,s=this.roll;this.rotate(0,0,-s),this.setPosition(a,o),this.setFocalPoint(a,o),this.setZoom(e),this.rotate(0,0,s);var l=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),c=l.x,u=l.y,f=Ht(c-a,u-o,0),d=Nr(f,this.right)/ti(this.right),h=Nr(f,this.up)/ti(this.up),p=this.getPosition(),v=_t(p,2),g=v[0],y=v[1],m=this.getFocalPoint(),b=_t(m,2),x=b[0],O=b[1];return this.setPosition(g-d,y-h),this.setFocalPoint(x-d,O-h),this}},{key:"setPerspective",value:function(e,n,i,a){var o;this.projectionMode=kn.PERSPECTIVE,this.fov=i,this.near=e,this.far=n,this.aspect=a;var s=this.near*Math.tan(Xt(.5*this.fov))/this.zoom,l=2*s,c=this.aspect*l,u=-.5*c;if((o=this.view)!==null&&o!==void 0&&o.enabled){var f=this.view.fullWidth,d=this.view.fullHeight;u+=this.view.offsetX*c/f,s-=this.view.offsetY*l/d,c*=this.view.width/f,l*=this.view.height/d}return DN(this.projectionMatrix,u,u+c,s-l,s,e,this.far,this.clipSpaceNearZ===Cl.ZERO),ur(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(e,n,i,a,o,s){var l;this.projectionMode=kn.ORTHOGRAPHIC,this.rright=n,this.left=e,this.top=i,this.bottom=a,this.near=o,this.far=s;var c=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),f=(this.rright+this.left)/2,d=(this.top+this.bottom)/2,h=f-c,p=f+c,v=d+u,g=d-u;if((l=this.view)!==null&&l!==void 0&&l.enabled){var y=(this.rright-this.left)/this.view.fullWidth/this.zoom,m=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=y*this.view.offsetX,p=h+y*this.view.width,v-=m*this.view.offsetY,g=v-m*this.view.height}return this.clipSpaceNearZ===Cl.NEGATIVE_ONE?vT(this.projectionMatrix,h,p,v,g,o,s):gT(this.projectionMatrix,h,p,v,g,o,s),ur(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],a=cn(e,n,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],a=Ht(0,1,0);if(this.focalPoint=cn(e,n,i),this.trackingMode===ld.CINEMATIC){var o=Xv(Nt(),this.focalPoint,this.position);e=o[0],n=o[1],i=o[2];var s=ti(o),l=Tn(Math.asin(n/s)),c=90+Tn(Math.atan2(i,e)),u=Zt();yT(u,u,Xt(c)),mT(u,u,Xt(l)),a=ke(Nt(),[0,1,0],u)}return ur(this.matrix,bT(Zt(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<Tg&&(this.distance=Tg),this.dollyingStep=this.distance/100;var n=Nt();e=this.distance;var i=this.forward,a=this.focalPoint;return n[0]=e*i[0]+a[0],n[1]=e*i[1]+a[1],n[2]=e*i[2]+a[2],this._setPosition(n),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this}},{key:"setAzimuth",value:function(e){return this.azimuth=Pa(e),this.computeMatrix(),this._getAxes(),this.type===re.ORBITING||this.type===re.EXPLORING?this._getPosition():this.type===re.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(e){return this.elevation=Pa(e),this.computeMatrix(),this._getAxes(),this.type===re.ORBITING||this.type===re.EXPLORING?this._getPosition():this.type===re.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(e){return this.roll=Pa(e),this.computeMatrix(),this._getAxes(),this.type===re.ORBITING||this.type===re.EXPLORING?this._getPosition():this.type===re.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var e=Bi(qe(),[0,0,1],Xt(this.roll));Fa(this.matrix);var n=Bi(qe(),[1,0,0],Xt((this.rotateWorld&&this.type!==re.TRACKING||this.type===re.TRACKING?1:-1)*this.elevation)),i=Bi(qe(),[0,1,0],Xt((this.rotateWorld&&this.type!==re.TRACKING||this.type===re.TRACKING?1:-1)*this.azimuth)),a=Vi(qe(),i,n);a=Vi(qe(),a,e);var o=Cb(Zt(),a);this.type===re.ORBITING||this.type===re.EXPLORING?(Ao(this.matrix,this.matrix,this.focalPoint),vn(this.matrix,this.matrix,o),Ao(this.matrix,this.matrix,[0,0,this.distance])):this.type===re.TRACKING&&(Ao(this.matrix,this.matrix,this.position),vn(this.matrix,this.matrix,o))}},{key:"_setPosition",value:function(e,n,i){this.position=cn(e,n,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){cr(this.right,cn(fr(Rr(),[1,0,0,0],this.matrix))),cr(this.up,cn(fr(Rr(),[0,1,0,0],this.matrix))),cr(this.forward,cn(fr(Rr(),[0,0,1,0],this.matrix))),Aa(this.right,this.right),Aa(this.up,this.up),Aa(this.forward,this.forward)}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],n=this.distanceVector[1],i=this.distanceVector[2],a=ti(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===re.TRACKING?(this.elevation=Tn(Math.asin(n/a)),this.azimuth=Tn(Math.atan2(-e,-i))):this.rotateWorld?(this.elevation=Tn(Math.asin(n/a)),this.azimuth=Tn(Math.atan2(-e,-i))):(this.elevation=-Tn(Math.asin(n/a)),this.azimuth=-Tn(Math.atan2(-e,-i)))}},{key:"_getPosition",value:function(){cr(this.position,cn(fr(Rr(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Lb(this.distanceVector,[0,0,-this.distance],xT(hs(),this.matrix)),si(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Xv(Nt(),this.focalPoint,this.position),this.distance=ti(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===kn.ORTHOGRAPHIC){var e=this.position,n=Bi(qe(),[0,0,1],-this.roll*Math.PI/180);Al(this.orthoMatrix,n,Ht((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),Ht(this.zoom,this.zoom,1),e)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var e=this.getViewTransform(),n=vn(Zt(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(W1.UPDATED)}}},{key:"rotate",value:function(e,n,i){throw new Error(ie)}},{key:"pan",value:function(e,n){throw new Error(ie)}},{key:"dolly",value:function(e){throw new Error(ie)}},{key:"createLandmark",value:function(e,n){throw new Error(ie)}},{key:"gotoLandmark",value:function(e,n){throw new Error(ie)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(ie)}}])}(),zN=function(t){return t[t.Standard=0]="Standard",t}({}),ec=function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t}({}),WN=Nt(),fo=Zt(),GN=qe();function Pg(t){if(t.localDirtyFlag){var r=t.localSkew[0]!==0||t.localSkew[1]!==0;if(r){Al(t.localTransform,t.localRotation,t.localPosition,Ht(1,1,1),t.origin),(t.localSkew[0]!==0||t.localSkew[1]!==0)&&(Fa(fo),fo[4]=Math.tan(t.localSkew[0]),fo[1]=Math.tan(t.localSkew[1]),vn(t.localTransform,t.localTransform,fo));var e=Al(fo,Nb(GN,0,0,0,1),nn(WN,1,1,1),t.localScale,t.origin);vn(t.localTransform,t.localTransform,e)}else{var n=t.localTransform,i=t.localPosition,a=t.localRotation,o=t.localScale,s=t.origin,l=i[0]!==0||i[1]!==0||i[2]!==0,c=a[3]!==1||a[0]!==0||a[1]!==0||a[2]!==0,u=o[0]!==1||o[1]!==1||o[2]!==1,f=s[0]!==0||s[1]!==0||s[2]!==0;!c&&!u&&!f?l?Jr(n,i):Fa(n):Al(n,a,i,o,s)}t.localDirtyFlag=!1}}function HN(t,r){t.dirtyFlag&&(r?vn(t.worldTransform,r.worldTransform,t.localTransform):zo(t.worldTransform,t.localTransform),t.dirtyFlag=!1)}var H1={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Va(0,0,0,0)},rt=function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t}({});function Wh(t,r,e){t.prototype=r.prototype=e,e.constructor=t}function Y1(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function Es(){}var Ko=.7,nc=1/Ko,Ma="\\s*([+-]?\\d+)\\s*",Zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",YN=/^#([0-9a-f]{3,8})$/,VN=new RegExp(`^rgb\\(${Ma},${Ma},${Ma}\\)$`),UN=new RegExp(`^rgb\\(${pr},${pr},${pr}\\)$`),XN=new RegExp(`^rgba\\(${Ma},${Ma},${Ma},${Zo}\\)$`),qN=new RegExp(`^rgba\\(${pr},${pr},${pr},${Zo}\\)$`),KN=new RegExp(`^hsl\\(${Zo},${pr},${pr}\\)$`),ZN=new RegExp(`^hsla\\(${Zo},${pr},${pr},${Zo}\\)$`),Mg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wh(Es,su,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Cg,formatHex:Cg,formatHex8:QN,formatHsl:JN,formatRgb:Lg,toString:Lg});function Cg(){return this.rgb().formatHex()}function QN(){return this.rgb().formatHex8()}function JN(){return V1(this).formatHsl()}function Lg(){return this.rgb().formatRgb()}function su(t){var r,e;return t=(t+"").trim().toLowerCase(),(r=YN.exec(t))?(e=r[1].length,r=parseInt(r[1],16),e===6?Ng(r):e===3?new gn(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):e===8?Gs(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):e===4?Gs(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=VN.exec(t))?new gn(r[1],r[2],r[3],1):(r=UN.exec(t))?new gn(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=XN.exec(t))?Gs(r[1],r[2],r[3],r[4]):(r=qN.exec(t))?Gs(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=KN.exec(t))?jg(r[1],r[2]/100,r[3]/100,1):(r=ZN.exec(t))?jg(r[1],r[2]/100,r[3]/100,r[4]):Mg.hasOwnProperty(t)?Ng(Mg[t]):t==="transparent"?new gn(NaN,NaN,NaN,0):null}function Ng(t){return new gn(t>>16&255,t>>8&255,t&255,1)}function Gs(t,r,e,n){return n<=0&&(t=r=e=NaN),new gn(t,r,e,n)}function tR(t){return t instanceof Es||(t=su(t)),t?(t=t.rgb(),new gn(t.r,t.g,t.b,t.opacity)):new gn}function eR(t,r,e,n){return arguments.length===1?tR(t):new gn(t,r,e,n??1)}function gn(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}Wh(gn,eR,Y1(Es,{brighter(t){return t=t==null?nc:Math.pow(nc,t),new gn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ko:Math.pow(Ko,t),new gn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new gn(Xi(this.r),Xi(this.g),Xi(this.b),rc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rg,formatHex:Rg,formatHex8:nR,formatRgb:Ig,toString:Ig}));function Rg(){return`#${zi(this.r)}${zi(this.g)}${zi(this.b)}`}function nR(){return`#${zi(this.r)}${zi(this.g)}${zi(this.b)}${zi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ig(){const t=rc(this.opacity);return`${t===1?"rgb(":"rgba("}${Xi(this.r)}, ${Xi(this.g)}, ${Xi(this.b)}${t===1?")":`, ${t})`}`}function rc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Xi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function zi(t){return t=Xi(t),(t<16?"0":"")+t.toString(16)}function jg(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new Vn(t,r,e,n)}function V1(t){if(t instanceof Vn)return new Vn(t.h,t.s,t.l,t.opacity);if(t instanceof Es||(t=su(t)),!t)return new Vn;if(t instanceof Vn)return t;t=t.rgb();var r=t.r/255,e=t.g/255,n=t.b/255,i=Math.min(r,e,n),a=Math.max(r,e,n),o=NaN,s=a-i,l=(a+i)/2;return s?(r===a?o=(e-n)/s+(e<n)*6:e===a?o=(n-r)/s+2:o=(r-e)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Vn(o,s,l,t.opacity)}function rR(t,r,e,n){return arguments.length===1?V1(t):new Vn(t,r,e,n??1)}function Vn(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}Wh(Vn,rR,Y1(Es,{brighter(t){return t=t==null?nc:Math.pow(nc,t),new Vn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ko:Math.pow(Ko,t),new Vn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,i=2*e-n;return new gn(Qu(t>=240?t-240:t+120,i,n),Qu(t,i,n),Qu(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Vn(Dg(this.h),Hs(this.s),Hs(this.l),rc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=rc(this.opacity);return`${t===1?"hsl(":"hsla("}${Dg(this.h)}, ${Hs(this.s)*100}%, ${Hs(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Dg(t){return t=(t||0)%360,t<0?t+360:t}function Hs(t){return Math.max(0,Math.min(1,t||0))}function Qu(t,r,e){return(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)*255}function $e(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");var e=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=r?r.apply(this,a):a[0],l=e.cache;if(l.has(s))return l.get(s);var c=t.apply(this,a);return e.cache=l.set(s,c)||l,c};return e.cache=new($e.Cache||Map),$e.cacheList.push(e.cache),e}$e.Cache=Map;$e.cacheList=[];$e.clearCache=function(){$e.cacheList.forEach(function(t){return t.clear()})};var ot=function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t}({}),Yn=function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t}({}),iR=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),aR=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),oR=[{name:"em",unit_type:ot.kEms},{name:"px",unit_type:ot.kPixels},{name:"deg",unit_type:ot.kDegrees},{name:"rad",unit_type:ot.kRadians},{name:"grad",unit_type:ot.kGradians},{name:"ms",unit_type:ot.kMilliseconds},{name:"s",unit_type:ot.kSeconds},{name:"rem",unit_type:ot.kRems},{name:"turn",unit_type:ot.kTurns}],Ua=function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t}({}),sR=function(r){return oR.find(function(e){return e.name===r}).unit_type},lR=function(r){return r?r==="number"?ot.kNumber:r==="percent"||r==="%"?ot.kPercentage:sR(r):ot.kUnknown},cR=function(r){switch(r){case ot.kNumber:case ot.kInteger:return Yn.kUNumber;case ot.kPercentage:return Yn.kUPercent;case ot.kPixels:return Yn.kULength;case ot.kMilliseconds:case ot.kSeconds:return Yn.kUTime;case ot.kDegrees:case ot.kRadians:case ot.kGradians:case ot.kTurns:return Yn.kUAngle;default:return Yn.kUOther}},uR=function(r){switch(r){case Yn.kUNumber:return ot.kNumber;case Yn.kULength:return ot.kPixels;case Yn.kUPercent:return ot.kPercentage;case Yn.kUTime:return ot.kSeconds;case Yn.kUAngle:return ot.kDegrees;default:return ot.kUnknown}},$g=function(r){var e=1;switch(r){case ot.kPixels:case ot.kDegrees:case ot.kSeconds:break;case ot.kMilliseconds:e=.001;break;case ot.kRadians:e=180/Math.PI;break;case ot.kGradians:e=.9;break;case ot.kTurns:e=360;break}return e},cd=function(r){switch(r){case ot.kNumber:case ot.kInteger:return"";case ot.kPercentage:return"%";case ot.kEms:return"em";case ot.kRems:return"rem";case ot.kPixels:return"px";case ot.kDegrees:return"deg";case ot.kRadians:return"rad";case ot.kGradians:return"grad";case ot.kMilliseconds:return"ms";case ot.kSeconds:return"s";case ot.kTurns:return"turn"}return""},lu=function(){function t(){Z(this,t)}return K(t,[{key:"toString",value:function(){return this.buildCSSText(iR.kNo,aR.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=Ua.kUnitType&&this.getType()<=Ua.kClampType}}],[{key:"isAngle",value:function(e){return e===ot.kDegrees||e===ot.kRadians||e===ot.kGradians||e===ot.kTurns}},{key:"isLength",value:function(e){return e>=ot.kEms&&e<ot.kDegrees}},{key:"isRelativeUnit",value:function(e){return e===ot.kPercentage||e===ot.kEms||e===ot.kRems}},{key:"isTime",value:function(e){return e===ot.kSeconds||e===ot.kMilliseconds}}])}(),fR=function(t){function r(e){var n;return Z(this,r),n=At(this,r),n.colorSpace=e,n}return Et(r,t),K(r,[{key:"getType",value:function(){return Ua.kColorType}},{key:"to",value:function(n){return this}}])}(lu),ni=function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t}({}),Ys=function(t){function r(e,n){var i;return Z(this,r),i=At(this,r),i.type=e,i.value=n,i}return Et(r,t),K(r,[{key:"clone",value:function(){return new r(this.type,this.value)}},{key:"buildCSSText",value:function(n,i,a){return a}},{key:"getType",value:function(){return Ua.kColorType}}])}(lu),Dn=function(t){function r(e){var n;return Z(this,r),n=At(this,r),n.value=e,n}return Et(r,t),K(r,[{key:"clone",value:function(){return new r(this.value)}},{key:"getType",value:function(){return Ua.kKeywordType}},{key:"buildCSSText",value:function(n,i,a){return a+this.value}}])}(lu),dR=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n="";return Number.isFinite(r)?n="NaN":r>0?n="infinity":n="-infinity",n+=e},ud=function(r){return uR(cR(r))},ae=function(t){function r(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ot.kNumber;Z(this,r),n=At(this,r);var a;return typeof i=="string"?a=lR(i):a=i,n.unit=a,n.value=e,n}return Et(r,t),K(r,[{key:"clone",value:function(){return new r(this.value,this.unit)}},{key:"equals",value:function(n){var i=n;return this.value===i.value&&this.unit===i.unit}},{key:"getType",value:function(){return Ua.kUnitType}},{key:"convertTo",value:function(n){if(this.unit===n)return new r(this.value,this.unit);var i=ud(this.unit);if(i!==ud(n)||i===ot.kUnknown)return null;var a=$g(this.unit)/$g(n);return new r(this.value*a,n)}},{key:"buildCSSText",value:function(n,i,a){var o;switch(this.unit){case ot.kUnknown:break;case ot.kInteger:o=Number(this.value).toFixed(0);break;case ot.kNumber:case ot.kPercentage:case ot.kEms:case ot.kRems:case ot.kPixels:case ot.kDegrees:case ot.kRadians:case ot.kGradians:case ot.kMilliseconds:case ot.kSeconds:case ot.kTurns:{var s=-999999,l=999999,c=this.value,u=cd(this.unit);if(c<s||c>l){var f=cd(this.unit);!Number.isFinite(c)||Number.isNaN(c)?o=dR(c,f):o=c+(f||"")}else o="".concat(c).concat(u)}}return a+=o,a}}])}(lu),Gn=new ae(0,"px");new ae(1,"px");var ta=new ae(0,"deg"),Gh=function(t){function r(e,n,i){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return Z(this,r),a=At(this,r,["rgb"]),a.r=e,a.g=n,a.b=i,a.alpha=o,a.isNone=s,a}return Et(r,t),K(r,[{key:"clone",value:function(){return new r(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(n,i,a){return"".concat(a,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(fR),Fg=new Dn("unset"),hR=new Dn("initial"),pR=new Dn("inherit"),Ju={"":Fg,unset:Fg,initial:hR,inherit:pR},vR=function(r){return Ju[r]||(Ju[r]=new Dn(r)),Ju[r]},U1=new Gh(0,0,0,0,!0),X1=new Gh(0,0,0,0),gR=$e(function(t,r,e,n){return new Gh(t,r,e,n)},function(t,r,e,n){return"rgba(".concat(t,",").concat(r,",").concat(e,",").concat(n,")")}),be=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ot.kNumber;return new ae(r,e)};new ae(50,"%");function yR(t){var r=t.type,e=t.value;return r==="hex"?"#".concat(e):r==="literal"?e:r==="rgb"?"rgb(".concat(e.join(","),")"):"rgba(".concat(e.join(","),")")}var mR=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},r="";function e(C){throw new Error("".concat(r,": ").concat(C))}function n(){var C=i();return r.length>0&&e("Invalid input not EOF"),C}function i(){return b(a)}function a(){return o("linear-gradient",t.linearGradient,l)||o("repeating-linear-gradient",t.repeatingLinearGradient,l)||o("radial-gradient",t.radialGradient,f)||o("repeating-radial-gradient",t.repeatingRadialGradient,f)||o("conic-gradient",t.conicGradient,f)}function o(C,L,M){return s(L,function(j){var F=M();return F&&(I(t.comma)||e("Missing comma before color stops")),{type:C,orientation:F,colorStops:b(x)}})}function s(C,L){var M=I(C);if(M){I(t.startCall)||e("Missing (");var j=L(M);return I(t.endCall)||e("Missing )"),j}}function l(){return c()||u()}function c(){return N("directional",t.sideOrCorner,1)}function u(){return N("angular",t.angleValue,1)}function f(){var C,L=d(),M;return L&&(C=[],C.push(L),M=r,I(t.comma)&&(L=d(),L?C.push(L):r=M)),C}function d(){var C=h()||p();if(C)C.at=g();else{var L=v();if(L){C=L;var M=g();M&&(C.at=M)}else{var j=y();j&&(C={type:"default-radial",at:j})}}return C}function h(){var C=N("shape",/^(circle)/i,0);return C&&(C.style=P()||v()),C}function p(){var C=N("shape",/^(ellipse)/i,0);return C&&(C.style=A()||v()),C}function v(){return N("extent-keyword",t.extentKeywords,1)}function g(){if(N("position",/^at/,0)){var C=y();return C||e("Missing positioning value"),C}}function y(){var C=m();if(C.x||C.y)return{type:"position",value:C}}function m(){return{x:A(),y:A()}}function b(C){var L=C(),M=[];if(L)for(M.push(L);I(t.comma);)L=C(),L?M.push(L):e("One extra comma");return M}function x(){var C=O();return C||e("Expected color definition"),C.length=A(),C}function O(){return _()||k()||S()||w()}function w(){return N("literal",t.literalColor,0)}function _(){return N("hex",t.hexColor,1)}function S(){return s(t.rgbColor,function(){return{type:"rgb",value:b(E)}})}function k(){return s(t.rgbaColor,function(){return{type:"rgba",value:b(E)}})}function E(){return I(t.number)[1]}function A(){return N("%",t.percentageValue,1)||T()||P()}function T(){return N("position-keyword",t.positionKeywords,1)}function P(){return N("px",t.pixelValue,1)||N("em",t.emValue,1)}function N(C,L,M){var j=I(L);if(j)return{type:C,value:j[M]}}function I(C){var L=/^[\n\r\t\s]+/.exec(r);L&&R(L[0].length);var M=C.exec(r);return M&&R(M[0].length),M}function R(C){r=r.substring(C)}return function(C){return r=C,n()}}();function bR(t,r,e,n){var i=Xt(n.value),a=0,o=0,s=a+r/2,l=o+e/2,c=Math.abs(r*Math.cos(i))+Math.abs(e*Math.sin(i)),u=t[0]+s-Math.cos(i)*c/2,f=t[1]+l-Math.sin(i)*c/2,d=t[0]+s+Math.cos(i)*c/2,h=t[1]+l+Math.sin(i)*c/2;return{x1:u,y1:f,x2:d,y2:h}}function xR(t,r,e,n,i,a){var o=n.value,s=i.value;n.unit===ot.kPercentage&&(o=n.value/100*r),i.unit===ot.kPercentage&&(s=i.value/100*e);var l=Math.max(hn([0,0],[o,s]),hn([0,e],[o,s]),hn([r,e],[o,s]),hn([r,0],[o,s]));return a&&(a instanceof ae?l=a.value:a instanceof Dn&&(a.value==="closest-side"?l=Math.min(o,r-o,s,e-s):a.value==="farthest-side"?l=Math.max(o,r-o,s,e-s):a.value==="closest-corner"&&(l=Math.min(hn([0,0],[o,s]),hn([0,e],[o,s]),hn([r,e],[o,s]),hn([r,0],[o,s]))))),{x:o+t[0],y:s+t[1],r:l}}var OR=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,wR=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,_R=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,q1=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function SR(t){var r,e=t.length;if(t[e-1].length=(r=t[e-1].length)!==null&&r!==void 0?r:{type:"%",value:"100"},e>1){var n;t[0].length=(n=t[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"}}for(var i=0,a=Number(t[0].length.value),o=1;o<e;o++){var s,l=(s=t[o].length)===null||s===void 0?void 0:s.value;if(!gt(l)&&!gt(a)){for(var c=1;c<o-i;c++)t[i+c].length={type:"%",value:"".concat(a+(Number(l)-a)*c/(o-i))};i=o,a=Number(l)}}}var kR={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},ER=$e(function(t){var r;return t.type==="angular"?r=Number(t.value):r=kR[t.value]||0,be(r,"deg")}),AR=$e(function(t){var r=50,e=50,n="%",i="%";if(t?.type==="position"){var a=t.value,o=a.x,s=a.y;o?.type==="position-keyword"&&(o.value==="left"?r=0:o.value==="center"?r=50:o.value==="right"?r=100:o.value==="top"?e=0:o.value==="bottom"&&(e=100)),s?.type==="position-keyword"&&(s.value==="left"?r=0:s.value==="center"?e=50:s.value==="right"?r=100:s.value==="top"?e=0:s.value==="bottom"&&(e=100)),(o?.type==="px"||o?.type==="%"||o?.type==="em")&&(n=o?.type,r=Number(o.value)),(s?.type==="px"||s?.type==="%"||s?.type==="em")&&(i=s?.type,e=Number(s.value))}return{cx:be(r,n),cy:be(e,i)}}),TR=$e(function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var r=mR(t);return r.map(function(s){var l=s.type,c=s.orientation,u=s.colorStops;SR(u);var f=u.map(function(b){return{offset:be(Number(b.length.value),"%"),color:yR(b)}});if(l==="linear-gradient")return new Ys(ni.LinearGradient,{angle:c?ER(c):ta,steps:f});if(l==="radial-gradient"&&(c||(c=[{type:"shape",value:"circle"}]),c[0].type==="shape"&&c[0].value==="circle")){var d=AR(c[0].at),h=d.cx,p=d.cy,v;if(c[0].style){var g=c[0].style,y=g.type,m=g.value;y==="extent-keyword"?v=vR(m):v=be(m,y)}return new Ys(ni.RadialGradient,{cx:h,cy:p,size:v,steps:f})}})}var e=t[0];if(t[1]==="("||t[2]==="("){if(e==="l"){var n=OR.exec(t);if(n){var i,a=((i=n[2].match(q1))===null||i===void 0?void 0:i.map(function(s){return s.split(":")}))||[];return[new Ys(ni.LinearGradient,{angle:be(parseFloat(n[1]),"deg"),steps:a.map(function(s){var l=_t(s,2),c=l[0],u=l[1];return{offset:be(Number(c)*100,"%"),color:u}})})]}}else if(e==="r"){var o=PR(t);if(o)if(pe(o))t=o;else return[new Ys(ni.RadialGradient,o)]}else if(e==="p")return MR(t)}});function PR(t){var r=wR.exec(t);if(r){var e,n=((e=r[4].match(q1))===null||e===void 0?void 0:e.map(function(i){return i.split(":")}))||[];return{cx:be(50,"%"),cy:be(50,"%"),steps:n.map(function(i){var a=_t(i,2),o=a[0],s=a[1];return{offset:be(Number(o)*100,"%"),color:s}})}}return null}function MR(t){var r=_R.exec(t);if(r){var e=r[1],n=r[2];switch(e){case"a":e="repeat";break;case"x":e="repeat-x";break;case"y":e="repeat-y";break;case"n":e="no-repeat";break;default:e="no-repeat"}return{image:n,repetition:e}}return null}function ea(t){return t&&!!t.image}function ic(t){return t&&!gt(t.r)&&!gt(t.g)&&!gt(t.b)}var ci=$e(function(t){if(ea(t))return Ot({repetition:"repeat"},t);if(gt(t)&&(t=""),t==="transparent")return X1;if(t==="currentColor")t="black";else if(t==="none")return U1;var r=TR(t);if(r)return r;var e=su(t),n=[0,0,0,0];return e!==null&&(n[0]=e.r||0,n[1]=e.g||0,n[2]=e.b||0,n[3]=e.opacity),gR.apply(void 0,n)});function CR(t,r){if(!(!ic(t)||!ic(r)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(r.r),Number(r.g),Number(r.b),Number(r.alpha)],function(e){var n=e.slice();if(n[3])for(var i=0;i<3;i++)n[i]=Math.round(Pe(n[i],0,255));return n[3]=Pe(n[3],0,1),"rgba(".concat(n.join(","),")")}]}function As(t,r){if(gt(r))return be(0,"px");if(r="".concat(r).trim().toLowerCase(),isFinite(Number(r))){if("px".search(t)>=0)return be(Number(r),"px");if("deg".search(t)>=0)return be(Number(r),"deg")}var e=[];r=r.replace(t,function(i){return e.push(i),"U".concat(i)});var n="U(".concat(t.source,")");return e.map(function(i){return be(Number(r.replace(new RegExp("U".concat(i),"g"),"").replace(new RegExp(n,"g"),"*0")),i)})[0]}var K1=function(r){return As(new RegExp("px","g"),r)},LR=$e(K1),NR=function(r){return As(new RegExp("%","g"),r)};$e(NR);var Z1=function(r){return fe(r)||isFinite(Number(r))?be(Number(r)||0,"px"):As(new RegExp("px|%|em|rem","g"),r)},fd=$e(Z1),Q1=function(r){return As(new RegExp("deg|rad|grad|turn","g"),r)},RR=$e(Q1);function IR(t,r,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a="",o=t.value||0,s=r.value||0,l=ud(t.unit),c=t.convertTo(l),u=r.convertTo(l);return c&&u?(o=c.value,s=u.value,a=cd(t.unit)):(ae.isLength(t.unit)||ae.isLength(r.unit))&&(o=bn(t,i,e),s=bn(r,i,e),a="px"),[o,s,function(f){return f+a}]}function pn(t){var r=0;return t.unit===ot.kDegrees?r=t.value:t.unit===ot.kRadians?r=Tn(Number(t.value)):t.unit===ot.kTurns?r=NN(Number(t.value)):t.value&&(r=t.value),r}function Bg(t,r){var e;return Array.isArray(t)?e=t.map(function(n){return Number(n)}):pe(t)?e=t.split(" ").map(function(n){return Number(n)}):fe(t)&&(e=[t]),r===2?e.length===1?[e[0],e[0]]:[e[0],e[1]]:r===4?e.length===1?[e[0],e[0],e[0],e[0]]:e.length===2?[e[0],e[1],e[0],e[1]]:e.length===3?[e[0],e[1],e[2],e[1]]:[e[0],e[1],e[2],e[3]]:r==="even"&&e.length%2===1?[].concat(Pt(e),Pt(e)):e}function bn(t,r,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.unit===ot.kPixels)return Number(t.value);if(t.unit===ot.kPercentage&&e){var i=e.nodeName===U.GROUP?e.getLocalBounds():e.getGeometryBounds();return(n?i.min[r]:0)+t.value/100*i.halfExtents[r]*2}return 0}var jR=function(r){return As(/deg|rad|grad|turn|px|%/g,r)},DR=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function $R(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(t=t.toLowerCase().trim(),t==="none")return[];for(var r=/\s*([\w-]+)\(([^)]*)\)/g,e=[],n,i=0;n=r.exec(t);){if(n.index!==i)return[];if(i=n.index+n[0].length,DR.indexOf(n[1])>-1&&e.push({name:n[1],params:n[2].split(" ").map(function(a){return jR(a)||ci(a)})}),r.lastIndex===t.length)return e}return[]}function J1(t){return t.toString()}var tO=function(r){return typeof r=="number"?be(r):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(r)?be(Number(r)):be(0)},dd=$e(tO);$e(function(t){return pe(t)?t.split(" ").map(dd):t.map(dd)});function Hh(t,r){return[t,r,J1]}function Yh(t,r){return function(e,n){return[e,n,function(i){return J1(Pe(i,t,r))}]}}function eO(t,r){if(t.length===r.length)return[t,r,function(e){return e}]}function hd(t){return t.parsedStyle.d.totalLength===0&&(t.parsedStyle.d.totalLength=U2(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function FR(t){return t.parsedStyle.points.totalLength===0&&(t.parsedStyle.points.totalLength=ON(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function BR(t){for(var r=0;r<t.length;r++){var e=t[r-1],n=t[r],i=n[0];if(i==="M"&&e){var a=e[0],o=[n[1],n[2]],s=void 0;a==="L"||a==="M"?s=[e[1],e[2]]:(a==="C"||a==="A"||a==="Q")&&(s=[e[e.length-2],e[e.length-1]]),s&&ac(o,s)&&(t.splice(r,1),r--)}}}function zR(t){for(var r=!1,e=t.length,n=0;n<e;n++){var i=t[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){r=!0;break}}return r}function WR(t){for(var r=[],e=[],n=[],i=0;i<t.length;i++){var a=t[i],o=a[0];o==="M"?(n.length&&(e.push(n),n=[]),n.push([a[1],a[2]])):o==="Z"?n.length&&(r.push(n),n=[]):n.push([a[1],a[2]])}return n.length>0&&e.push(n),{polygons:r,polylines:e}}function ac(t,r){return t[0]===r[0]&&t[1]===r[1]}function GR(t,r){for(var e=[],n=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,c=o.prePoint,u=void 0;switch(o.command){case"Q":u=wN(c[0],c[1],l[1],l[2],l[3],l[4]);break;case"C":u=mN(c[0],c[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;u=vN(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}u&&(o.box=u,e.push(u.x,u.x+u.width),n.push(u.y,u.y+u.height))}e=e.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0}),n=n.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0});var d=Vl(e),h=Vl(n),p=Yl(e),v=Yl(n);if(i.length===0)return{x:d,y:h,width:p-d,height:v-h};for(var g=0;g<i.length;g++){var y=i[g],m=y.currentPoint,b=void 0;m[0]===d?(b=Vs(y,r),d-=b.xExtra):m[0]===p&&(b=Vs(y,r),p+=b.xExtra),m[1]===h?(b=Vs(y,r),h-=b.yExtra):m[1]===v&&(b=Vs(y,r),v+=b.yExtra)}return{x:d,y:h,width:p-d,height:v-h}}function Vs(t,r){var e=t.prePoint,n=t.currentPoint,i=t.nextPoint,a=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||Ta(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),u=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(l/2-c)*(r/2*(1/Math.sin(l/2)))-r/2||0,yExtra:Math.cos(u-l/2)*(r/2*(1/Math.sin(l/2)))-r/2||0};return f}function zg(t,r){return[r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1])]}var Wg=function(r,e){var n=r.x*e.x+r.y*e.y,i=Math.sqrt((Math.pow(r.x,2)+Math.pow(r.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),a=r.x*e.y-r.y*e.x<0?-1:1,o=a*Math.acos(n/i);return o},Gg=function(r,e,n,i,a,o,s,l){e=Math.abs(e),n=Math.abs(n),i=lx(i,360);var c=Xt(i);if(r.x===s.x&&r.y===s.y)return{x:r.x,y:r.y,ellipticalArcAngle:0};if(e===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var u=(r.x-s.x)/2,f=(r.y-s.y)/2,d={x:Math.cos(c)*u+Math.sin(c)*f,y:-Math.sin(c)*u+Math.cos(c)*f},h=Math.pow(d.x,2)/Math.pow(e,2)+Math.pow(d.y,2)/Math.pow(n,2);h>1&&(e*=Math.sqrt(h),n*=Math.sqrt(h));var p=Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(d.y,2)-Math.pow(n,2)*Math.pow(d.x,2),v=Math.pow(e,2)*Math.pow(d.y,2)+Math.pow(n,2)*Math.pow(d.x,2),g=p/v;g=g<0?0:g;var y=(a!==o?1:-1)*Math.sqrt(g),m={x:y*(e*d.y/n),y:y*(-(n*d.x)/e)},b={x:Math.cos(c)*m.x-Math.sin(c)*m.y+(r.x+s.x)/2,y:Math.sin(c)*m.x+Math.cos(c)*m.y+(r.y+s.y)/2},x={x:(d.x-m.x)/e,y:(d.y-m.y)/n},O=Wg({x:1,y:0},x),w={x:(-d.x-m.x)/e,y:(-d.y-m.y)/n},_=Wg(x,w);!o&&_>0?_-=2*Math.PI:o&&_<0&&(_+=2*Math.PI),_%=2*Math.PI;var S=O+_*l,k=e*Math.cos(S),E=n*Math.sin(S),A={x:Math.cos(c)*k-Math.sin(c)*E+b.x,y:Math.sin(c)*k+Math.cos(c)*E+b.y,ellipticalArcStartAngle:O,ellipticalArcEndAngle:O+_,ellipticalArcAngle:S,ellipticalArcCenter:b,resultantRx:e,resultantRy:n};return A};function HR(t){for(var r=[],e=null,n=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];n=t[s+1];var c=l[0],u={command:c,prePoint:e,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=YR(e,l);u.arcParams=f;break}if(c==="Z")e=i,n=t[a+1];else{var d=l.length;e=[l[d-2],l[d-1]]}n&&n[0]==="Z"&&(n=t[a],r[a]&&(r[a].prePoint=e)),u.currentPoint=e,r[a]&&ac(e,r[a].currentPoint)&&(r[a].prePoint=u.prePoint);var h=n?[n[n.length-2],n[n.length-1]]:null;u.nextPoint=h;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]];else if(c==="Q"){var v=[l[1],l[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[e[0]-v[0],e[1]-v[1]]}else if(c==="T"){var g=r[s-1],y=zg(g.currentPoint,p);g.command==="Q"?(u.command="Q",u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[e[0]-y[0],e[1]-y[1]]):(u.command="TL",u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]])}else if(c==="C"){var m=[l[1],l[2]],b=[l[3],l[4]];u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[e[0]-b[0],e[1]-b[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[m[0]-b[0],m[1]-b[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[b[0]-m[0],b[1]-m[1]])}else if(c==="S"){var x=r[s-1],O=zg(x.currentPoint,p),w=[l[1],l[2]];x.command==="C"?(u.command="C",u.startTangent=[p[0]-O[0],p[1]-O[1]],u.endTangent=[e[0]-w[0],e[1]-w[1]]):(u.command="SQ",u.startTangent=[p[0]-w[0],p[1]-w[1]],u.endTangent=[e[0]-w[0],e[1]-w[1]])}else if(c==="A"){var _=Hg(u,0),S=_.x,k=_.y,E=Hg(u,1,!1),A=E.x,T=E.y;u.startTangent=[S,k],u.endTangent=[A,T]}r.push(u)}return r}function Hg(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=t.arcParams,i=n.rx,a=i===void 0?0:i,o=n.ry,s=o===void 0?0:o,l=n.xRotation,c=n.arcFlag,u=n.sweepFlag,f=Gg({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},r),d=Gg({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e?r+.005:r-.005),h=d.x-f.x,p=d.y-f.y,v=Math.sqrt(h*h+p*p);return{x:-h/v,y:-p/v}}function Us(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function pd(t,r){return Us(t)*Us(r)?(t[0]*r[0]+t[1]*r[1])/(Us(t)*Us(r)):1}function Yg(t,r){return(t[0]*r[1]<t[1]*r[0]?-1:1)*Math.acos(pd(t,r))}function YR(t,r){var e=r[1],n=r[2],i=lx(Xt(r[3]),Math.PI*2),a=r[4],o=r[5],s=t[0],l=t[1],c=r[6],u=r[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,h=f*f/(e*e)+d*d/(n*n);h>1&&(e*=Math.sqrt(h),n*=Math.sqrt(h));var p=e*e*(d*d)+n*n*(f*f),v=p?Math.sqrt((e*e*(n*n)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=n?v*e*d/n:0,y=e?v*-n*f/e:0,m=(s+c)/2+Math.cos(i)*g-Math.sin(i)*y,b=(l+u)/2+Math.sin(i)*g+Math.cos(i)*y,x=[(f-g)/e,(d-y)/n],O=[(-1*f-g)/e,(-1*d-y)/n],w=Yg([1,0],x),_=Yg(x,O);return pd(x,O)<=-1&&(_=Math.PI),pd(x,O)>=1&&(_=0),o===0&&_>0&&(_-=2*Math.PI),o===1&&_<0&&(_+=2*Math.PI),{cx:m,cy:b,rx:ac(t,[c,u])?0:e,ry:ac(t,[c,u])?0:n,startAngle:w,endAngle:w+_,xRotation:i,arcFlag:a,sweepFlag:o}}function VR(t,r,e){return t.reduce(function(n,i){var a="";if(i[0]==="M"||i[0]==="L"){var o=Ht(i[1],i[2],0);e&&ke(o,o,e),a="".concat(i[0]).concat(o[0],",").concat(o[1])}else if(i[0]==="Z")a=i[0];else if(i[0]==="C"){var s=Ht(i[1],i[2],0),l=Ht(i[3],i[4],0),c=Ht(i[5],i[6],0);e&&(ke(s,s,e),ke(l,l,e),ke(c,c,e)),a="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(l[0],",").concat(l[1],",").concat(c[0],",").concat(c[1])}else if(i[0]==="A"){var u=Ht(i[6],i[7],0);e&&ke(u,u,e),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(u[0],",").concat(u[1])}else if(i[0]==="Q"){var f=Ht(i[1],i[2],0),d=Ht(i[3],i[4],0);e&&(ke(f,f,e),ke(d,d,e)),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return n+=a},"")}function UR(t,r,e,n){return[["M",t,r],["L",e,n]]}function Vg(t,r,e,n){var i=(-1+Math.sqrt(2))/3*4,a=t*i,o=r*i,s=e-t,l=e+t,c=n-r,u=n+r;return[["M",s,n],["C",s,n-o,e-a,c,e,c],["C",e+a,c,l,n-o,l,n],["C",l,n+o,e+a,u,e,u],["C",e-a,u,s,n+o,s,n],["Z"]]}function XR(t,r){var e=t.map(function(n,i){return[i===0?"M":"L",n[0],n[1]]});return r&&e.push(["Z"]),e}function qR(t,r,e,n,i){if(i){var a=_t(i,4),o=a[0],s=a[1],l=a[2],c=a[3],u=t>0?1:-1,f=r>0?1:-1,d=u+f!==0?1:0;return[["M",u*o+e,n],["L",t-u*s+e,n],s?["A",s,s,0,0,d,t+e,f*s+n]:null,["L",t+e,r-f*l+n],l?["A",l,l,0,0,d,t+e-u*l,r+n]:null,["L",e+u*c,r+n],c?["A",c,c,0,0,d,e,r+n-f*c]:null,["L",e,f*o+n],o?["A",o,o,0,0,d,u*o+e,n]:null,["Z"]].filter(function(h){return h})}return[["M",e,n],["L",e+t,n],["L",e+t,n+r],["L",e,n+r],["Z"]]}function KR(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLocalTransform(),e=[];switch(t.nodeName){case U.LINE:var n=t.parsedStyle,i=n.x1,a=i===void 0?0:i,o=n.y1,s=o===void 0?0:o,l=n.x2,c=l===void 0?0:l,u=n.y2,f=u===void 0?0:u;e=UR(a,s,c,f);break;case U.CIRCLE:{var d=t.parsedStyle,h=d.r,p=h===void 0?0:h,v=d.cx,g=v===void 0?0:v,y=d.cy,m=y===void 0?0:y;e=Vg(p,p,g,m);break}case U.ELLIPSE:{var b=t.parsedStyle,x=b.rx,O=x===void 0?0:x,w=b.ry,_=w===void 0?0:w,S=b.cx,k=S===void 0?0:S,E=b.cy,A=E===void 0?0:E;e=Vg(O,_,k,A);break}case U.POLYLINE:case U.POLYGON:var T=t.parsedStyle.points;e=XR(T.points,t.nodeName===U.POLYGON);break;case U.RECT:var P=t.parsedStyle,N=P.width,I=N===void 0?0:N,R=P.height,C=R===void 0?0:R,L=P.x,M=L===void 0?0:L,j=P.y,F=j===void 0?0:j,$=P.radius,B=$&&$.some(function(W){return W!==0});e=qR(I,C,M,F,B&&$.map(function(W){return Pe(W,0,Math.min(Math.abs(I)/2,Math.abs(C)/2))}));break;case U.PATH:var z=t.parsedStyle.d.absolutePath;e=Pt(z);break}if(e.length)return VR(e,t,r)}var nO=function(r){if(r===""||Array.isArray(r)&&r.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=Ul(r)}catch{e=Ul(""),console.error("[g]: Invalid SVG Path definition: ".concat(r))}BR(e);var n=zR(e),i=WR(e),a=i.polygons,o=i.polylines,s=HR(e),l=GR(s,0),c=l.x,u=l.y,f=l.width,d=l.height;return{absolutePath:e,hasArc:n,segments:s,polygons:a,polylines:o,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(f)?f:0,height:Number.isFinite(d)?d:0}}},ZR=$e(nO);function rO(t){return pe(t)?ZR(t):nO(t)}function QR(t,r,e){var n=t.curve,i=r.curve;(!n||n.length===0)&&(n=Jf(t.absolutePath,!1),t.curve=n),(!i||i.length===0)&&(i=Jf(r.absolutePath,!1),r.curve=i);var a=[n,i];n.length!==i.length&&(a=wx(n,i));var o=og(a[0])!==og(a[1])?z2(a[0]):B2(a[0]);return[o,q2(a[1],o),function(s){return s}]}function JR(t,r){var e;return pe(t)?e=t.split(" ").map(function(n){var i=n.split(","),a=_t(i,2),o=a[0],s=a[1];return[Number(o),Number(s)]}):e=t,{points:e,totalLength:0,segments:[]}}function tI(t,r){return[t.points,r.points,function(e){return e}]}var _e=null,Ca=/\s*(\w+)\(([^)]*)\)/g;function dn(t){return function(r){var e=0;return t.map(function(n){return n===_e?r[e++]:n})}}function Pi(t){return t}var Qo={matrix:["NNNNNN",[_e,_e,0,0,_e,_e,0,0,0,0,1,0,_e,_e,0,1],Pi],matrix3d:["NNNNNNNNNNNNNNNN",Pi],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",dn([_e,_e,new ae(1)]),Pi],scaleX:["N",dn([_e,new ae(1),new ae(1)]),dn([_e,new ae(1)])],scaleY:["N",dn([new ae(1),_e,new ae(1)]),dn([new ae(1),_e])],scaleZ:["N",dn([new ae(1),new ae(1),_e])],scale3d:["NNN",Pi],skew:["Aa",null,Pi],skewX:["A",null,dn([_e,ta])],skewY:["A",null,dn([ta,_e])],translate:["Tt",dn([_e,_e,Gn]),Pi],translateX:["T",dn([_e,Gn,Gn]),dn([_e,Gn])],translateY:["T",dn([Gn,_e,Gn]),dn([Gn,_e])],translateZ:["L",dn([Gn,Gn,_e])],translate3d:["TTL",Pi]};function iO(t){for(var r=[],e=t.length,n=0;n<e;n++){var i=t[n],a=i[0],o=i.slice(1);a==="translate"||a==="skew"?o.length===1&&o.push(0):a==="scale"&&o.length===1&&o.push(o[0]);var s=Qo[a];if(!s)return[];var l=o.map(function(c){return be(c)});r.push({t:a,d:l})}return r}function aO(t){if(Array.isArray(t))return iO(t);if(t=(t||"none").trim(),t==="none")return[];var r=[],e,n=0;for(Ca.lastIndex=0;e=Ca.exec(t);){if(e.index!==n)return[];n=e.index+e[0].length;var i=e[1],a=Qo[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],c=0;c<s.length;c++){var u=o[c],f=s[c],d=void 0;if(u?d={A:function(p){return p.trim()==="0"?ta:RR(p)},N:dd,T:fd,L:LR}[f.toUpperCase()](u):d={a:ta,n:l[0],t:Gn}[f],d===void 0)return[];l.push(d)}if(r.push({t:i,d:l}),Ca.lastIndex===t.length)return r}return[]}function eI(t){if(Array.isArray(t))return iO(t);if(t=(t||"none").trim(),t==="none")return[];var r=[],e,n=0;for(Ca.lastIndex=0;e=Ca.exec(t);){if(e.index!==n)return[];n=e.index+e[0].length;var i=e[1],a=Qo[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],c=0;c<s.length;c++){var u=o[c],f=s[c],d=void 0;if(u?d={A:function(p){return p.trim()==="0"?ta:Q1(p)},N:tO,T:Z1,L:K1}[f.toUpperCase()](u):d={a:ta,n:l[0],t:Gn}[f],d===void 0)return[];l.push(d)}if(r.push({t:i,d:l}),Ca.lastIndex===t.length)return r}return[]}function nI(t){var r,e,n,i;switch(t.t){case"rotateX":return i=Xt(pn(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=Xt(pn(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=Xt(pn(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":r=t.d[0].value,e=t.d[1].value,n=t.d[2].value,i=Xt(pn(t.d[3]));var a=r*r+e*e+n*n;if(a===0)r=1,e=0,n=0;else if(a!==1){var o=Math.sqrt(a);r/=o,e/=o,n/=o}var s=Math.sin(i/2),l=s*Math.cos(i/2),c=s*s;return[1-2*(e*e+n*n)*c,2*(r*e*c+n*l),2*(r*n*c-e*l),0,2*(r*e*c-n*l),1-2*(r*r+n*n)*c,2*(e*n*c+r*l),0,2*(r*n*c+e*l),2*(e*n*c-r*l),1-2*(r*r+e*e)*c,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=Xt(pn(t.d[0])),f=Xt(pn(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=Xt(pn(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=Xt(pn(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return r=bn(t.d[0],0,null)||0,e=bn(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,r,e,0,1];case"translateX":return r=bn(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,r,0,0,1];case"translateY":return e=bn(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,e,0,1];case"translateZ":return n=bn(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,n,1];case"translate3d":return r=bn(t.d[0],0,null)||0,e=bn(t.d[1],0,null)||0,n=bn(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,r,e,n,1];case"perspective":var d=bn(t.d[0],0,null)||0,h=d?-1/d:0;return[1,0,0,0,0,1,0,0,0,0,1,h,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function rI(t,r){return[t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12]*r[3],t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13]*r[3],t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14]*r[3],t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15]*r[3],t[0]*r[4]+t[4]*r[5]+t[8]*r[6]+t[12]*r[7],t[1]*r[4]+t[5]*r[5]+t[9]*r[6]+t[13]*r[7],t[2]*r[4]+t[6]*r[5]+t[10]*r[6]+t[14]*r[7],t[3]*r[4]+t[7]*r[5]+t[11]*r[6]+t[15]*r[7],t[0]*r[8]+t[4]*r[9]+t[8]*r[10]+t[12]*r[11],t[1]*r[8]+t[5]*r[9]+t[9]*r[10]+t[13]*r[11],t[2]*r[8]+t[6]*r[9]+t[10]*r[10]+t[14]*r[11],t[3]*r[8]+t[7]*r[9]+t[11]*r[10]+t[15]*r[11],t[0]*r[12]+t[4]*r[13]+t[8]*r[14]+t[12]*r[15],t[1]*r[12]+t[5]*r[13]+t[9]*r[14]+t[13]*r[15],t[2]*r[12]+t[6]*r[13]+t[10]*r[14]+t[14]*r[15],t[3]*r[12]+t[7]*r[13]+t[11]*r[14]+t[15]*r[15]]}function iI(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(nI).reduce(rI)}function Ug(t){var r=[0,0,0],e=[1,1,1],n=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return $N(iI(t),r,e,n,i,a),[[r,e,n,a,i]]}var aI=function(){function t(n,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=0;o<4;o++)for(var s=0;s<4;s++)for(var l=0;l<4;l++)a[o][s]+=i[o][l]*n[l][s];return a}function r(n){return n[0][2]===0&&n[0][3]===0&&n[1][2]===0&&n[1][3]===0&&n[2][0]===0&&n[2][1]===0&&n[2][2]===1&&n[2][3]===0&&n[3][2]===0&&n[3][3]===1}function e(n,i,a,o,s){for(var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)l[c][3]=s[c];for(var u=0;u<3;u++)for(var f=0;f<3;f++)l[3][u]+=n[f]*l[f][u];var d=o[0],h=o[1],p=o[2],v=o[3],g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];g[0][0]=1-2*(h*h+p*p),g[0][1]=2*(d*h-p*v),g[0][2]=2*(d*p+h*v),g[1][0]=2*(d*h+p*v),g[1][1]=1-2*(d*d+p*p),g[1][2]=2*(h*p-d*v),g[2][0]=2*(d*p-h*v),g[2][1]=2*(h*p+d*v),g[2][2]=1-2*(d*d+h*h),l=t(l,g);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(y[2][1]=a[2],l=t(l,y)),a[1]&&(y[2][1]=0,y[2][0]=a[0],l=t(l,y)),a[0]&&(y[2][0]=0,y[1][0]=a[0],l=t(l,y));for(var m=0;m<3;m++)for(var b=0;b<3;b++)l[m][b]*=i[m];return r(l)?[l[0][0],l[0][1],l[1][0],l[1][1],l[3][0],l[3][1]]:l[0].concat(l[1],l[2],l[3])}return e}();function oI(t){return t.toFixed(6).replace(".000000","")}function tf(t,r){var e,n;return t.decompositionPair!==r&&(t.decompositionPair=r,e=Ug(t)),r.decompositionPair!==t&&(r.decompositionPair=t,n=Ug(r)),e[0]===null||n[0]===null?[[!1],[!0],function(i){return i?r[0].d:t[0].d}]:(e[0].push(0),n[0].push(1),[e,n,function(i){var a=lI(e[0][3],n[0][3],i[5]),o=aI(i[0],i[1],i[2],a,i[4]),s=o.map(oI).join(",");return s}])}function sI(t,r){for(var e=0,n=0;n<t.length;n++)e+=t[n]*r[n];return e}function lI(t,r,e){var n=sI(t,r);n=Pe(n,-1,1);var i=[];if(n===1)i=t;else for(var a=Math.acos(n),o=Math.sin(e*a)*1/Math.sqrt(1-n*n),s=0;s<4;s++)i.push(t[s]*(Math.cos(e*a)-n*o)+r[s]*o);return i}function ef(t){return t.replace(/[XY]/,"")}function nf(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var cI=function(r,e){return r==="perspective"&&e==="perspective"||(r==="matrix"||r==="matrix3d")&&(e==="matrix"||e==="matrix3d")};function uI(t,r,e){var n=!1;if(!t.length||!r.length){t.length||(n=!0,t=r,r=[]);for(var i=function(){var A=t[a],T=A.t,P=A.d,N=T.substring(0,5)==="scale"?1:0;r.push({t:T,d:P.map(function(I){return typeof I=="number"?be(N):be(N,I.unit)})})},a=0;a<t.length;a++)i()}var o=[],s=[],l=[];if(t.length!==r.length){var c=tf(t,r);o=[c[0]],s=[c[1]],l=[["matrix",[c[2]]]]}else for(var u=0;u<t.length;u++){var f=t[u].t,d=r[u].t,h=t[u].d,p=r[u].d,v=Qo[f],g=Qo[d],y=void 0;if(cI(f,d)){var m=tf([t[u]],[r[u]]);o.push(m[0]),s.push(m[1]),l.push(["matrix",[m[2]]]);continue}else if(f===d)y=f;else if(v[2]&&g[2]&&ef(f)===ef(d))y=ef(f),h=v[2](h),p=g[2](p);else if(v[1]&&g[1]&&nf(f)===nf(d))y=nf(f),h=v[1](h),p=g[1](p);else{var b=tf(t,r);o=[b[0]],s=[b[1]],l=[["matrix",[b[2]]]];break}for(var x=[],O=[],w=[],_=0;_<h.length;_++){var S=IR(h[_],p[_],e,!1,_);x[_]=S[0],O[_]=S[1],w.push(S[2])}o.push(x),s.push(O),l.push([y,w])}if(n){var k=o;o=s,s=k}return[o,s,function(E){return E.map(function(A,T){var P=A.map(function(N,I){return l[T][1][I](N)}).join(",");return l[T][0]==="matrix"&&P.split(",").length===16&&(l[T][0]="matrix3d"),l[T][0]==="matrix3d"&&P.split(",").length===6&&(l[T][0]="matrix"),"".concat(l[T][0],"(").concat(P,")")}).join(" ")}]}var fI=$e(function(t){if(pe(t)){if(t==="text-anchor")return[be(0,"px"),be(0,"px")];var r=t.split(" ");return r.length===1&&(r[0]==="top"||r[0]==="bottom"?(r[1]=r[0],r[0]="center"):r[1]="center"),r.length!==2?null:[fd(Xg(r[0])),fd(Xg(r[1]))]}return[be(t[0]||0,"px"),be(t[1]||0,"px")]});function Xg(t){return t==="center"?"50%":t==="left"||t==="top"?"0%":t==="right"||t==="bottom"?"100%":t}var Vh=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:rt.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:rt.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:rt.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:rt.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:rt.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:rt.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:rt.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:rt.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:rt.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:rt.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:rt.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:rt.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:rt.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:rt.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:rt.FILTER},{n:"clipPath",syntax:rt.DEFINED_PATH},{n:"textPath",syntax:rt.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:rt.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:rt.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:rt.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:rt.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:rt.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:rt.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:rt.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:rt.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:rt.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:rt.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:rt.COORDINATE},{n:"y1",int:!0,l:!0,syntax:rt.COORDINATE},{n:"z1",int:!0,l:!0,syntax:rt.COORDINATE},{n:"x2",int:!0,l:!0,syntax:rt.COORDINATE},{n:"y2",int:!0,l:!0,syntax:rt.COORDINATE},{n:"z2",int:!0,l:!0,syntax:rt.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:rt.PATH,p:50},{n:"points",int:!0,l:!0,syntax:rt.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:rt.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:rt.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:rt.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:rt.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:rt.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:rt.NUMBER,d:function(r){return r===U.PATH||r===U.POLYGON||r===U.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:rt.MARKER},{n:"markerEnd",syntax:rt.MARKER},{n:"markerMid",syntax:rt.MARKER},{n:"markerStartOffset",syntax:rt.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:rt.LENGTH,l:!0,int:!0,d:"0"}],dI=new Set(Vh.filter(function(t){return!!t.l}).map(function(t){return t.n})),oO={},hI=function(){function t(r){var e=this;Z(this,t),this.runtime=r,Vh.forEach(function(n){e.registerMetadata(n)})}return K(t,[{key:"registerMetadata",value:function(e){[e.n].concat(Pt(e.a||[])).forEach(function(n){oO[n]=e})}},{key:"getPropertySyntax",value:function(e){return this.runtime.CSSPropertySyntaxFactory[e]}},{key:"processProperties",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{forceUpdateGeometry:!1};Object.assign(e.attributes,n);var a=e.parsedStyle.clipPath,o=e.parsedStyle.offsetPath;pI(e,n);var s=!!i.forceUpdateGeometry;if(!s){for(var l in n)if(dI.has(l)){s=!0;break}}var c=sO(e);c.has("fill")&&n.fill&&(e.parsedStyle.fill=ci(n.fill)),c.has("stroke")&&n.stroke&&(e.parsedStyle.stroke=ci(n.stroke)),c.has("shadowColor")&&n.shadowColor&&(e.parsedStyle.shadowColor=ci(n.shadowColor)),c.has("filter")&&n.filter&&(e.parsedStyle.filter=$R(n.filter)),c.has("radius")&&!gt(n.radius)&&(e.parsedStyle.radius=Bg(n.radius,4)),c.has("lineDash")&&!gt(n.lineDash)&&(e.parsedStyle.lineDash=Bg(n.lineDash,"even")),c.has("points")&&n.points&&(e.parsedStyle.points=JR(n.points)),c.has("d")&&n.d===""&&(e.parsedStyle.d=Ot({},H1)),c.has("d")&&n.d&&(e.parsedStyle.d=rO(n.d)),c.has("textTransform")&&n.textTransform&&this.runtime.CSSPropertySyntaxFactory[rt.TEXT_TRANSFORM].calculator(null,null,{value:n.textTransform},e,null),c.has("clipPath")&&!Kt(n.clipPath)&&this.runtime.CSSPropertySyntaxFactory[rt.DEFINED_PATH].calculator("clipPath",a,n.clipPath,e,this.runtime),c.has("offsetPath")&&n.offsetPath&&this.runtime.CSSPropertySyntaxFactory[rt.DEFINED_PATH].calculator("offsetPath",o,n.offsetPath,e,this.runtime),c.has("transform")&&n.transform&&(e.parsedStyle.transform=aO(n.transform)),c.has("transformOrigin")&&n.transformOrigin&&(e.parsedStyle.transformOrigin=fI(n.transformOrigin)),c.has("markerStart")&&n.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[rt.MARKER].calculator(null,n.markerStart,n.markerStart,null,null)),c.has("markerEnd")&&n.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[rt.MARKER].calculator(null,n.markerEnd,n.markerEnd,null,null)),c.has("markerMid")&&n.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[rt.MARKER].calculator("",n.markerMid,n.markerMid,null,null)),c.has("zIndex")&&!gt(n.zIndex)&&this.runtime.CSSPropertySyntaxFactory[rt.Z_INDEX].postProcessor(e),c.has("offsetDistance")&&!gt(n.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[rt.OFFSET_DISTANCE].postProcessor(e),c.has("transform")&&n.transform&&this.runtime.CSSPropertySyntaxFactory[rt.TRANSFORM].postProcessor(e),c.has("transformOrigin")&&n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[rt.TRANSFORM_ORIGIN].postProcessor(e),s&&(e.dirty(!0,!0),i.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(e))}},{key:"updateGeometry",value:function(e){var n=e.nodeName,i=this.runtime.geometryUpdaterFactory[n];if(i){var a=e.geometry;a.contentBounds||(a.contentBounds=new ze),a.renderBounds||(a.renderBounds=new ze);var o=e.parsedStyle,s=i.update(o,e),l=s.cx,c=l===void 0?0:l,u=s.cy,f=u===void 0?0:u,d=s.cz,h=d===void 0?0:d,p=s.hwidth,v=p===void 0?0:p,g=s.hheight,y=g===void 0?0:g,m=s.hdepth,b=m===void 0?0:m,x=[Math.abs(v),Math.abs(y),b],O=o.stroke,w=o.lineWidth,_=w===void 0?1:w,S=o.increasedLineWidthForHitTesting,k=S===void 0?0:S,E=o.shadowType,A=E===void 0?"outer":E,T=o.shadowColor,P=o.filter,N=P===void 0?[]:P,I=o.transformOrigin,R=[c,f,h];a.contentBounds.update(R,x);var C=n===U.POLYLINE||n===U.POLYGON||n===U.PATH?Math.SQRT2:.5,L=O&&!O.isNone;if(L){var M=((_||0)+(k||0))*C;x[0]+=M,x[1]+=M}if(a.renderBounds.update(R,x),T&&A&&A!=="inner"){var j=a.renderBounds,F=j.min,$=j.max,B=o.shadowBlur,z=o.shadowOffsetX,W=o.shadowOffsetY,Y=B||0,V=z||0,G=W||0,q=F[0]-Y+V,Q=$[0]+Y+V,nt=F[1]-Y+G,et=$[1]+Y+G;F[0]=Math.min(F[0],q),$[0]=Math.max($[0],Q),F[1]=Math.min(F[1],nt),$[1]=Math.max($[1],et),a.renderBounds.setMinMax(F,$)}N.forEach(function(ht){var ut=ht.name,pt=ht.params;if(ut==="blur"){var Bt=pt[0].value;a.renderBounds.update(a.renderBounds.center,si(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[Bt,Bt,0]))}else if(ut==="drop-shadow"){var Wt=pt[0].value,Rt=pt[1].value,te=pt[2].value,ee=a.renderBounds,ne=ee.min,Dt=ee.max,Gt=ne[0]-te+Wt,he=Dt[0]+te+Wt,Ct=ne[1]-te+Rt,St=Dt[1]+te+Rt;ne[0]=Math.min(ne[0],Gt),Dt[0]=Math.max(Dt[0],he),ne[1]=Math.min(ne[1],Ct),Dt[1]=Math.max(Dt[1],St),a.renderBounds.setMinMax(ne,Dt)}}),e.geometry.dirty=!1;var at=v<0,lt=y<0,st=(at?-1:1)*(I?bn(I[0],0,e,!0):0),ft=(lt?-1:1)*(I?bn(I[1],1,e,!0):0);(st||ft)&&e.setOrigin(st,ft)}}},{key:"updateSizeAttenuation",value:function(e,n){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/n,e.nodeName===U.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/n)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===U.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))}}])}();function pI(t,r){var e=sO(t);for(var n in r)e.has(n)&&(t.parsedStyle[n]=r[n])}function sO(t){return t.constructor.PARSED_STYLE_LIST}var vI=function(){function t(){Z(this,t),this.mixer=Hh}return K(t,[{key:"calculator",value:function(e,n,i,a){return pn(i)}}])}(),gI=function(){function t(){Z(this,t)}return K(t,[{key:"calculator",value:function(e,n,i,a,o){return i instanceof Dn&&(i=null),o.sceneGraphService.updateDisplayObjectDependency(e,n,i,a),e==="clipPath"&&a.forEach(function(s){s.childNodes.length===0&&o.sceneGraphService.dirtyToRoot(s)}),i}}])}(),yI=function(){function t(){Z(this,t),this.parser=ci,this.mixer=CR}return K(t,[{key:"calculator",value:function(e,n,i,a){return i instanceof Dn?i.value==="none"?U1:X1:i}}])}(),mI=function(){function t(){Z(this,t)}return K(t,[{key:"calculator",value:function(e,n,i){return i instanceof Dn?[]:i}}])}();function qg(t){var r=t.parsedStyle,e=r.fontSize;return gt(e)?null:e}var vd=function(){function t(){Z(this,t),this.mixer=Hh}return K(t,[{key:"calculator",value:function(e,n,i,a,o){if(fe(i))return i;if(ae.isRelativeUnit(i.unit)){if(i.unit===ot.kPercentage)return 0;if(i.unit===ot.kEms){if(a.parentNode){var s=qg(a.parentNode);if(s)return s*=i.value,s}return 0}if(i.unit===ot.kRems){var l;if(a!=null&&(l=a.ownerDocument)!==null&&l!==void 0&&l.documentElement){var c=qg(a.ownerDocument.documentElement);if(c)return c*=i.value,c}return 0}}else return i.value}}])}(),bI=function(){function t(){Z(this,t),this.mixer=eO}return K(t,[{key:"calculator",value:function(e,n,i){return i.map(function(a){return a.value})}}])}(),xI=function(){function t(){Z(this,t),this.mixer=eO}return K(t,[{key:"calculator",value:function(e,n,i){return i.map(function(a){return a.value})}}])}(),OI=function(){function t(){Z(this,t)}return K(t,[{key:"calculator",value:function(e,n,i,a){var o;i instanceof Dn&&(i=null);var s=(o=i)===null||o===void 0?void 0:o.cloneNode(!0);return s&&(s.style.isMarker=!0),s}}])}(),wI=function(){function t(){Z(this,t),this.mixer=Hh}return K(t,[{key:"calculator",value:function(e,n,i){return i.value}}])}(),_I=function(){function t(){Z(this,t),this.mixer=Yh(0,1)}return K(t,[{key:"calculator",value:function(e,n,i){return i.value}},{key:"postProcessor",value:function(e){var n=e.parsedStyle,i=n.offsetPath,a=n.offsetDistance;if(i){var o=i.nodeName;if(o===U.LINE||o===U.PATH||o===U.POLYLINE){var s=i.getPoint(a);s&&e.setLocalPosition(s.x,s.y)}}}}])}(),SI=function(){function t(){Z(this,t),this.mixer=Yh(0,1)}return K(t,[{key:"calculator",value:function(e,n,i){return i.value}}])}(),kI=function(){function t(){Z(this,t),this.parser=rO,this.mixer=QR}return K(t,[{key:"calculator",value:function(e,n,i){return i instanceof Dn&&i.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new Va(0,0,0,0)}:i}}])}(),EI=K(function t(){Z(this,t),this.mixer=tI}),AI=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.mixer=Yh(0,1/0),e}return Et(r,t),K(r)}(vd),TI=function(){function t(){Z(this,t)}return K(t,[{key:"calculator",value:function(e,n,i,a){return i instanceof Dn?i.value==="unset"?"":i.value:"".concat(i)}},{key:"postProcessor",value:function(e){e.nodeValue="".concat(e.parsedStyle.text)||""}}])}(),PI=function(){function t(){Z(this,t)}return K(t,[{key:"calculator",value:function(e,n,i,a){var o=a.getAttribute("text");if(o){var s=o;i.value==="capitalize"?s=o.charAt(0).toUpperCase()+o.slice(1):i.value==="lowercase"?s=o.toLowerCase():i.value==="uppercase"&&(s=o.toUpperCase()),a.parsedStyle.text=s}return i.value}}])}(),rf=new WeakMap;function MI(t,r,e){if(t){var n=typeof t=="string"?document.getElementById(t):t;rf.has(n)&&rf.get(n).destroy(e),rf.set(n,r)}}var Uh=typeof window<"u"&&typeof window.document<"u";function CI(t){return!!t.getAttribute}function LI(t,r){for(var e=0,n=t.length;e<n;){var i=e+n>>>1;lO(t[i],r)<0?e=i+1:n=i}return e}function lO(t,r){var e=Number(t.parsedStyle.zIndex||0),n=Number(r.parsedStyle.zIndex||0);if(e===n){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(r)}}return e-n}function cO(t){var r=t;do{var e,n=(e=r.parsedStyle)===null||e===void 0?void 0:e.clipPath;if(n)return r;r=r.parentElement}while(r!==null);return null}var Kg="px";function NI(t,r,e){Uh&&t.style&&(t.style.width=r+Kg,t.style.height=e+Kg)}function uO(t,r){if(Uh)return document.defaultView.getComputedStyle(t,null).getPropertyValue(r)}function RI(t){var r=uO(t,"width");return r==="auto"?t.offsetWidth:parseFloat(r)}function II(t){var r=uO(t,"height");return r==="auto"?t.offsetHeight:parseFloat(r)}var jI=1,DI={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},gd=typeof performance=="object"&&performance.now?performance:Date;function oc(t){return t.nodeName===U.FRAGMENT?!0:t.getRootNode().nodeName===U.FRAGMENT}function sa(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",r=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,n=!1,i=!1,a=!!r&&!r.isNone,o=!!e&&!e.isNone;return t==="visiblepainted"||t==="painted"||t==="auto"?(n=a,i=o):t==="visiblefill"||t==="fill"?n=!0:t==="visiblestroke"||t==="stroke"?i=!0:(t==="visible"||t==="all")&&(n=!0,i=!0),[n,i]}var $I=1,FI=function(){return $I++},vr=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},BI=Date.now(),zI=function(){return vr.performance&&typeof vr.performance.now=="function"?vr.performance.now():Date.now()-BI},xo={},Zg=Date.now(),WI=function(r){if(typeof r!="function")throw new TypeError("".concat(r," is not a function"));var e=Date.now(),n=e-Zg,i=n>16?0:16-n,a=FI();return xo[a]=r,Object.keys(xo).length>1||setTimeout(function(){Zg=e;var o=xo;xo={},Object.keys(o).forEach(function(s){return o[s](zI())})},i),a},GI=function(r){delete xo[r]},HI=["","webkit","moz","ms","o"],fO=function(r){return typeof r!="string"?WI:r===""?vr.requestAnimationFrame:vr["".concat(r,"RequestAnimationFrame")]},YI=function(r){return typeof r!="string"?GI:r===""?vr.cancelAnimationFrame:vr["".concat(r,"CancelAnimationFrame")]||vr["".concat(r,"CancelRequestAnimationFrame")]},VI=function(r,e){for(var n=0;r[n]!==void 0;){if(e(r[n]))return r[n];n+=1}},dO=VI(HI,function(t){return!!fO(t)}),Xh=fO(dO),hO=YI(dO);vr.requestAnimationFrame=Xh;vr.cancelAnimationFrame=hO;var UI=function(){function t(){Z(this,t),this.callbacks=[]}return K(t,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(e,n){this.callbacks.push(n)}},{key:"promise",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Promise.all(this.callbacks.map(function(a){return a.apply(void 0,n)}))}}])}(),XI=function(){function t(){Z(this,t),this.callbacks=[]}return K(t,[{key:"tapPromise",value:function(e,n){this.callbacks.push(n)}},{key:"promise",value:function(){var r=fi(rn().mark(function n(){var i,a,o,s,l=arguments;return rn().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.callbacks.length){c.next=6;break}return c.next=1,(i=this.callbacks)[0].apply(i,l);case 1:a=c.sent,o=1;case 2:if(!(o<this.callbacks.length)){c.next=5;break}return s=this.callbacks[o],c.next=3,s(a);case 3:a=c.sent;case 4:o++,c.next=2;break;case 5:return c.abrupt("return",a);case 6:return c.abrupt("return",null);case 7:case"end":return c.stop()}},n,this)}));function e(){return r.apply(this,arguments)}return e}()}])}(),sn=function(){function t(){Z(this,t),this.callbacks=[]}return K(t,[{key:"tap",value:function(e,n){this.callbacks.push(n)}},{key:"call",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(o){o.apply(void 0,a)})}}])}(),af=function(){function t(){Z(this,t),this.callbacks=[]}return K(t,[{key:"tap",value:function(e,n){this.callbacks.push(n)}},{key:"call",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,o=this.callbacks[0].apply(void 0,a),s=1;s<this.callbacks.length;s++){var l=this.callbacks[s];o=l(o)}return o}return null}}])}(),qI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],KI=/([\"\'])[^\'\"]+\1/;function Qg(t){var r=t.fontSize,e=r===void 0?16:r,n=t.fontFamily,i=n===void 0?"sans-serif":n,a=t.fontStyle,o=a===void 0?"normal":a,s=t.fontVariant,l=s===void 0?"normal":s,c=t.fontWeight,u=c===void 0?"normal":c;return{fontSize:e,fontFamily:i,fontStyle:o,fontVariant:l,fontWeight:u}}var Jg=$e(function(r){for(var e=Qg(r),n=e.fontSize,i=e.fontFamily,a=e.fontStyle,o=e.fontVariant,s=e.fontWeight,l=fe(n)&&"".concat(n,"px")||"16px",c=i.split(","),u=c.length-1;u>=0;u--){var f=c[u].trim();!KI.test(f)&&qI.indexOf(f)<0&&(f='"'.concat(f,'"')),c[u]=f}return"".concat(a," ").concat(o," ").concat(s," ").concat(l," ").concat(c.join(","))},function(t){var r=Qg(t),e=r.fontSize,n=r.fontFamily,i=r.fontStyle,a=r.fontVariant,o=r.fontWeight;return"".concat(i,"_").concat(a,"_").concat(o,"_").concat(e,"_").concat(n)}),ZI=1e-6,ho=function(r){return Math.max(r,ZI)};function of(t,r,e){return Fa(t),t[4]=Math.tan(r),t[1]=Math.tan(e),t}var Ie=Zt(),QI=Zt(),JI={scale:function(r){Fi(Ie,[r[0].value,r[1].value,1].map(function(e){return ho(e)}))},scaleX:function(r){Fi(Ie,[r[0].value,1,1].map(function(e){return ho(e)}))},scaleY:function(r){Fi(Ie,[1,r[0].value,1].map(function(e){return ho(e)}))},scaleZ:function(r){Fi(Ie,[1,1,r[0].value].map(function(e){return ho(e)}))},scale3d:function(r){Fi(Ie,[r[0].value,r[1].value,r[2].value].map(function(e){return ho(e)}))},translate:function(r){Jr(Ie,[r[0].value,r[1].value,0])},translateX:function(r){Jr(Ie,[r[0].value,0,0])},translateY:function(r){Jr(Ie,[0,r[0].value,0])},translateZ:function(r){Jr(Ie,[0,0,r[0].value])},translate3d:function(r){Jr(Ie,[r[0].value,r[1].value,r[2].value])},rotate:function(r){Uv(Ie,Xt(pn(r[0])))},rotateX:function(r){pT(Ie,Xt(pn(r[0])))},rotateY:function(r){hT(Ie,Xt(pn(r[0])))},rotateZ:function(r){Uv(Ie,Xt(pn(r[0])))},rotate3d:function(r){dT(Ie,Xt(pn(r[3])),[r[0].value,r[1].value,r[2].value])},skew:function(r){of(Ie,Xt(r[0].value),Xt(r[1].value))},skewX:function(r){of(Ie,Xt(r[0].value),0)},skewY:function(r){of(Ie,0,Xt(r[0].value))},matrix:function(r){Vv(Ie,r[0].value,r[1].value,0,0,r[2].value,r[3].value,0,0,0,0,1,0,r[4].value,r[5].value,0,1)},matrix3d:function(r){Vv.apply(fT,[Ie].concat(Pt(r.map(function(e){return e.value}))))}},tj=Ht(1,1,1),ej=Nt(),ty={translate:function(r,e){tt.sceneGraphService.setLocalScale(r,tj,!1),tt.sceneGraphService.setLocalEulerAngles(r,ej,void 0,void 0,!1),tt.sceneGraphService.setLocalPosition(r,[e[0].value,e[1].value,0],!1),tt.sceneGraphService.dirtyLocalTransform(r,r.transformable)}};function pO(t,r){if(t.length){if(t.length===1&&ty[t[0].t]){ty[t[0].t](r,t[0].d);return}for(var e=Fa(QI),n=0;n<t.length;n++){var i=t[n],a=i.t,o=i.d,s=JI[a];s&&(s(o),Pb(e,e,Ie))}r.setLocalTransform(e)}else r.resetLocalTransform();return r.getLocalTransform()}var nj=function(){function t(){Z(this,t),this.parser=eI,this.mixer=uI}return K(t,[{key:"calculator",value:function(e,n,i,a){return i instanceof Dn?[]:i}},{key:"postProcessor",value:function(e){pO(e.parsedStyle.transform,e)}}])}(),rj=function(){function t(){Z(this,t)}return K(t,[{key:"postProcessor",value:function(e){var n=e.parsedStyle.transformOrigin;n[0].unit===ot.kPixels&&n[1].unit===ot.kPixels?e.setOrigin(n[0].value,n[1].value):e.getGeometryBounds()}}])}(),ij=function(){function t(){Z(this,t)}return K(t,[{key:"calculator",value:function(e,n,i,a){return i.value}},{key:"postProcessor",value:function(e){if(e.parentNode){var n=e.parentNode,i=n.renderable,a=n.sortable;i&&n.dirty(),a&&(a.dirty=!0,a.dirtyReason=ec.Z_INDEX_CHANGED)}}}])}(),aj=function(){function t(){Z(this,t)}return K(t,[{key:"update",value:function(e,n){var i=e.cx,a=i===void 0?0:i,o=e.cy,s=o===void 0?0:o,l=e.r,c=l===void 0?0:l;return{cx:a,cy:s,hwidth:c,hheight:c}}}])}(),oj=function(){function t(){Z(this,t)}return K(t,[{key:"update",value:function(e,n){var i=e.cx,a=i===void 0?0:i,o=e.cy,s=o===void 0?0:o,l=e.rx,c=l===void 0?0:l,u=e.ry,f=u===void 0?0:u;return{cx:a,cy:s,hwidth:c,hheight:f}}}])}(),sj=function(){function t(){Z(this,t)}return K(t,[{key:"update",value:function(e){var n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=Math.min(n,a),l=Math.max(n,a),c=Math.min(i,o),u=Math.max(i,o),f=l-s,d=u-c,h=f/2,p=d/2;return{cx:s+h,cy:c+p,hwidth:h,hheight:p}}}])}(),lj=function(){function t(){Z(this,t)}return K(t,[{key:"update",value:function(e){var n=e.d,i=n.rect,a=i.x,o=i.y,s=i.width,l=i.height,c=s/2,u=l/2;return{cx:a+c,cy:o+u,hwidth:c,hheight:u}}}])}(),cj=function(){function t(){Z(this,t)}return K(t,[{key:"update",value:function(e){if(e.points&&Le(e.points.points)){var n=e.points.points,i=Math.min.apply(Math,Pt(n.map(function(d){return d[0]}))),a=Math.max.apply(Math,Pt(n.map(function(d){return d[0]}))),o=Math.min.apply(Math,Pt(n.map(function(d){return d[1]}))),s=Math.max.apply(Math,Pt(n.map(function(d){return d[1]}))),l=a-i,c=s-o,u=l/2,f=c/2;return{cx:i+u,cy:o+f,hwidth:u,hheight:f}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),uj=function(){function t(){Z(this,t)}return K(t,[{key:"update",value:function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o,l=e.src,c=e.width,u=c===void 0?0:c,f=e.height,d=f===void 0?0:f,h=u,p=d;return l&&!pe(l)&&(h||(h=l.width,e.width=h),p||(p=l.height,e.height=p)),{cx:a+h/2,cy:s+p/2,hwidth:h/2,hheight:p/2}}}])}(),fj=function(){function t(r){Z(this,t),this.globalRuntime=r}return K(t,[{key:"isReadyToMeasure",value:function(e,n){var i=e.text;return i}},{key:"update",value:function(e,n){var i,a=e.text,o=e.textAlign,s=o===void 0?"start":o,l=e.lineWidth,c=l===void 0?1:l,u=e.textBaseline,f=u===void 0?"alphabetic":u,d=e.dx,h=d===void 0?0:d,p=e.dy,v=p===void 0?0:p,g=e.x,y=g===void 0?0:g,m=e.y,b=m===void 0?0:m;if(!this.isReadyToMeasure(e,n))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var x=(n==null||(i=n.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getConfig())||{},O=x.offscreenCanvas,w=this.globalRuntime.textService.measureText(a,e,O);e.metrics=w;var _=w.width,S=w.height,k=_/2,E=S/2,A=y+k;s==="center"||s==="middle"?A+=c/2-k:(s==="right"||s==="end")&&(A+=c-k*2);var T=b-E;return f==="middle"?T+=E:f==="top"||f==="hanging"?T+=E*2:f==="alphabetic"||(f==="bottom"||f==="ideographic")&&(T+=0),h&&(A+=h),v&&(T+=v),{cx:A,cy:T,hwidth:k,hheight:E}}}])}(),dj=function(){function t(){Z(this,t)}return K(t,[{key:"update",value:function(e,n){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),hj=function(){function t(){Z(this,t)}return K(t,[{key:"update",value:function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o,l=e.width,c=l===void 0?0:l,u=e.height,f=u===void 0?0:u;return{cx:a+c/2,cy:s+f/2,hwidth:c/2,hheight:f/2}}}])}(),cu=function(){function t(r){Z(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Qe,this.page=new Qe,this.canvas=new Qe,this.viewport=new Qe,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=r}return K(t,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(ie)}}])}(),vO=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.client=new Qe,e.movement=new Qe,e.offset=new Qe,e.global=new Qe,e.screen=new Qe,e}return Et(r,t),K(r,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)}},{key:"initMouseEvent",value:function(){throw new Error(ie)}}])}(cu),yd=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.width=0,e.height=0,e.isPrimary=!1,e}return Et(r,t),K(r,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}(vO),md=function(t){function r(){return Z(this,r),At(this,r,arguments)}return Et(r,t),K(r,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}(vO),Qt=function(t){function r(e,n){var i;return Z(this,r),i=At(this,r,[null]),i.type=e,i.detail=n?.detail,n&&!("detail"in n)&&(i.detail=n),Object.assign(i,n),i}return Et(r,t),K(r)}(cu),gO=function(){function t(){Z(this,t),this.emitter=new Tb}return K(t,[{key:"on",value:function(e,n,i){return this.addEventListener(e,n,i),this}},{key:"addEventListener",value:function(e,n,i){var a=!1,o=!1;if(eg(i))a=i;else if(i){var s=i.capture;a=s===void 0?!1:s;var l=i.once;o=l===void 0?!1:l}a&&(e+="capture"),n=Ge(n)?n:n.handleEvent;var c=Ge(n)?void 0:n;return o?this.emitter.once(e,n,c):this.emitter.on(e,n,c),this}},{key:"off",value:function(e,n,i){return e?this.removeEventListener(e,n,i):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var e;(e=this.emitter)===null||e===void 0||e.removeAllListeners()}},{key:"removeEventListener",value:function(e,n,i){var a;if(!this.emitter)return this;var o=eg(i)?i:i?.capture;o&&(e+="capture"),n=Ge(n)?n:(a=n)===null||a===void 0?void 0:a.handleEvent;var s=Ge(n)?void 0:n;return this.emitter.off(e,n,s),this}},{key:"emit",value:function(e,n){this.dispatchEvent(new Qt(e,n))}},{key:"dispatchEventToSelf",value:function(e){e.target||(e.target=this),e.currentTarget=this,this.emitter.emit(e.type,e)}},{key:"dispatchEvent",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(e),!0;var a;if(this.document)a=this;else if(this.defaultView)a=this.defaultView;else{var o;a=(o=this.ownerDocument)===null||o===void 0?void 0:o.defaultView}if(a){if(e.manager=a.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],n||(e.target=this),e.manager.dispatchEvent(e,e.type,n)}else this.dispatchEventToSelf(e);return!e.defaultPrevented}}])}(),xe=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.mutations=void 0,e.parentNode=null,e.destroyed=!1,e}return Et(r,t),K(r,[{key:"textContent",get:function(){var n="";this.nodeName===U.TEXT&&(n+=this.style.text);var i=Qr(this.childNodes),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.nodeName===U.TEXT?n+=o.nodeValue:n+=o.textContent}}catch(s){i.e(s)}finally{i.f()}return n},set:function(n){var i=this;this.childNodes.slice().forEach(function(a){i.removeChild(a)}),this.nodeName===U.TEXT&&(this.style.text="".concat(n))}},{key:"getRootNode",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(n){throw new Error(ie)}},{key:"lookupNamespaceURI",value:function(n){throw new Error(ie)}},{key:"lookupPrefix",value:function(n){throw new Error(ie)}},{key:"normalize",value:function(){throw new Error(ie)}},{key:"isEqualNode",value:function(n){return this===n}},{key:"isSameNode",value:function(n){return this.isEqualNode(n)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(n){if(n===this)return 0;for(var i=n,a=this,o=[i],s=[a];(l=i.parentNode)!==null&&l!==void 0?l:a.parentNode;){var l;i=i.parentNode?(o.push(i.parentNode),i.parentNode):i,a=a.parentNode?(s.push(a.parentNode),a.parentNode):a}if(i!==a)return r.DOCUMENT_POSITION_DISCONNECTED|r.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|r.DOCUMENT_POSITION_PRECEDING;var c=o.length>s.length?o:s,u=c===o?s:o;if(c[c.length-u.length]===u[0])return c===o?r.DOCUMENT_POSITION_CONTAINED_BY|r.DOCUMENT_POSITION_FOLLOWING:r.DOCUMENT_POSITION_CONTAINS|r.DOCUMENT_POSITION_PRECEDING;for(var f=c.length-u.length,d=u.length-1;d>=0;d--){var h=u[d],p=c[f+d];if(p!==h){var v=h.parentNode.childNodes;return v.indexOf(h)<v.indexOf(p)?u===o?r.DOCUMENT_POSITION_PRECEDING:r.DOCUMENT_POSITION_FOLLOWING:c===o?r.DOCUMENT_POSITION_PRECEDING:r.DOCUMENT_POSITION_FOLLOWING}}return r.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(n){return this.contains(n)}},{key:"contains",value:function(n){for(var i=n;i&&this!==i;)i=i.parentNode;return!!i}},{key:"getAncestor",value:function(n){for(var i=this;n>0&&i;)i=i.parentNode,n--;return i}},{key:"forEach",value:function(n){for(var i=[this];i.length>0;){var a=i.pop(),o=n(a);if(o===!1)break;for(var s=a.childNodes.length-1;s>=0;s--)i.push(a.childNodes[s])}}}],[{key:"isNode",value:function(n){return!!n.childNodes}}])}(gO);xe.DOCUMENT_POSITION_DISCONNECTED=1;xe.DOCUMENT_POSITION_PRECEDING=2;xe.DOCUMENT_POSITION_FOLLOWING=4;xe.DOCUMENT_POSITION_CONTAINS=8;xe.DOCUMENT_POSITION_CONTAINED_BY=16;xe.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var pj=2048,vj=function(){function t(r,e){var n=this;Z(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Zt(),this.tmpVec3=Nt(),this.onPointerDown=function(i){var a=n.createPointerEvent(i);if(n.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")n.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;n.dispatchEvent(a,o?"rightdown":"mousedown")}var s=n.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=a.composedPath(),n.freeEvent(a)},this.onPointerUp=function(i){var a=gd.now(),o=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);if(n.dispatchEvent(o,"pointerup"),o.pointerType==="touch")n.dispatchEvent(o,"touchend");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;n.dispatchEvent(o,s?"rightup":"mouseup")}var l=n.trackingData(i.pointerId),c=n.findMountedTarget(l.pressTargetsByButton[i.button]),u=c;if(c&&!o.composedPath().includes(c)){for(var f=c;f&&!o.composedPath().includes(f);){if(o.currentTarget=f,n.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch")n.notifyTarget(o,"touchendoutside");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var d=o.button===2;n.notifyTarget(o,d?"rightupoutside":"mouseupoutside")}xe.isNode(f)&&(f=f.parentNode)}delete l.pressTargetsByButton[i.button],u=f}if(u){var h,p=n.clonePointerEvent(o,"click");p.target=u,p.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:p.target,timeStamp:a});var v=n.context.renderingContext.root.ownerDocument.defaultView,g=l.clicksByButton[i.button];g.target===p.target&&a-g.timeStamp<v.getConfig().dblClickSpeed?++g.clickCount:g.clickCount=1,g.target=p.target,g.timeStamp=a,p.detail=g.clickCount,(h=o.detail)!==null&&h!==void 0&&h.preventClick||(!n.context.config.useNativeClickEvent&&(p.pointerType==="mouse"||p.pointerType==="touch")&&n.dispatchEvent(p,"click"),n.dispatchEvent(p,"pointertap")),n.freeEvent(p)}n.freeEvent(o)},this.onPointerMove=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0),o=a.pointerType==="mouse"||a.pointerType==="pen",s=n.trackingData(i.pointerId),l=n.findMountedTarget(s.overTargets);if(s.overTargets&&l!==a.target){var c=i.type==="mousemove"?"mouseout":"pointerout",u=n.createPointerEvent(i,c,l||void 0);if(n.dispatchEvent(u,"pointerout"),o&&n.dispatchEvent(u,"mouseout"),!a.composedPath().includes(l)){var f=n.createPointerEvent(i,"pointerleave",l||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!a.composedPath().includes(f.target);)f.currentTarget=f.target,n.notifyTarget(f),o&&n.notifyTarget(f,"mouseleave"),xe.isNode(f.target)&&(f.target=f.target.parentNode);n.freeEvent(f)}n.freeEvent(u)}if(l!==a.target){var d=i.type==="mousemove"?"mouseover":"pointerover",h=n.clonePointerEvent(a,d);n.dispatchEvent(h,"pointerover"),o&&n.dispatchEvent(h,"mouseover");for(var p=l&&xe.isNode(l)&&l.parentNode;p&&p!==(xe.isNode(n.rootTarget)&&n.rootTarget.parentNode)&&p!==a.target;)p=p.parentNode;var v=!p||p===(xe.isNode(n.rootTarget)&&n.rootTarget.parentNode);if(v){var g=n.clonePointerEvent(a,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==l&&g.target!==(xe.isNode(n.rootTarget)&&n.rootTarget.parentNode);)g.currentTarget=g.target,n.notifyTarget(g),o&&n.notifyTarget(g,"mouseenter"),xe.isNode(g.target)&&(g.target=g.target.parentNode);n.freeEvent(g)}n.freeEvent(h)}n.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&n.dispatchEvent(a,"touchmove"),o&&(n.dispatchEvent(a,"mousemove"),n.cursor=n.getCursor(a.target)),s.overTargets=a.composedPath(),n.freeEvent(a)},this.onPointerOut=function(i){var a=n.trackingData(i.pointerId);if(a.overTargets){var o=i.pointerType==="mouse"||i.pointerType==="pen",s=n.findMountedTarget(a.overTargets),l=n.createPointerEvent(i,"pointerout",s||void 0);n.dispatchEvent(l),o&&n.dispatchEvent(l,"mouseout");var c=n.createPointerEvent(i,"pointerleave",s||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(xe.isNode(n.rootTarget)&&n.rootTarget.parentNode);)c.currentTarget=c.target,n.notifyTarget(c),o&&n.notifyTarget(c,"mouseleave"),xe.isNode(c.target)&&(c.target=c.target.parentNode);a.overTargets=null,n.freeEvent(l),n.freeEvent(c)}n.cursor=null},this.onPointerOver=function(i){var a=n.trackingData(i.pointerId),o=n.createPointerEvent(i),s=o.pointerType==="mouse"||o.pointerType==="pen";n.dispatchEvent(o,"pointerover"),s&&n.dispatchEvent(o,"mouseover"),o.pointerType==="mouse"&&(n.cursor=n.getCursor(o.target));var l=n.clonePointerEvent(o,"pointerenter");for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(xe.isNode(n.rootTarget)&&n.rootTarget.parentNode);)l.currentTarget=l.target,n.notifyTarget(l),s&&n.notifyTarget(l,"mouseenter"),xe.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=o.composedPath(),n.freeEvent(o),n.freeEvent(l)},this.onPointerUpOutside=function(i){var a=n.trackingData(i.pointerId),o=n.findMountedTarget(a.pressTargetsByButton[i.button]),s=n.createPointerEvent(i);if(o){for(var l=o;l;)s.currentTarget=l,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&n.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),xe.isNode(l)&&(l=l.parentNode);delete a.pressTargetsByButton[i.button]}n.freeEvent(s)},this.onWheel=function(i){var a=n.createWheelEvent(i);n.dispatchEvent(a),n.freeEvent(a)},this.onClick=function(i){if(n.context.config.useNativeClickEvent){var a=n.createPointerEvent(i);n.dispatchEvent(a),n.freeEvent(a)}},this.onPointerCancel=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);n.dispatchEvent(a),n.freeEvent(a)},this.globalRuntime=r,this.context=e}return K(t,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var e=this.context.contextService.getBoundingClientRect(),n=1,i=1,a=this.context.contextService.getDomElement();if(a&&e){var o=a.offsetWidth,s=a.offsetHeight;o&&s&&(n=e.width/o,i=e.height/s)}return{scaleX:n,scaleY:i,bbox:e}}},{key:"client2Viewport",value:function(e){var n=this.getScale(),i=n.scaleX,a=n.scaleY,o=n.bbox;return new Qe((e.x-(o?.left||0))/i,(e.y-(o?.top||0))/a)}},{key:"viewport2Client",value:function(e){var n=this.getScale(),i=n.scaleX,a=n.scaleY,o=n.bbox;return new Qe((e.x+(o?.left||0))*i,(e.y+(o?.top||0))*a)}},{key:"viewport2Canvas",value:function(e){var n=e.x,i=e.y,a=this.rootTarget.defaultView,o=a.getCamera(),s=this.context.config,l=s.width,c=s.height,u=o.getPerspectiveInverse(),f=o.getWorldTransform(),d=vn(this.tmpMatrix,f,u),h=nn(this.tmpVec3,n/l*2-1,(1-i/c)*2-1,0);return ke(h,h,d),new Qe(h[0],h[1])}},{key:"canvas2Viewport",value:function(e){var n=this.rootTarget.defaultView,i=n.getCamera(),a=i.getPerspective(),o=i.getViewTransform(),s=vn(this.tmpMatrix,a,o),l=nn(this.tmpVec3,e.x,e.y,0);ke(this.tmpVec3,this.tmpVec3,s);var c=this.context.config,u=c.width,f=c.height;return new Qe((l[0]+1)/2*u,(1-(l[1]+1)/2)*f)}},{key:"setPickHandler",value:function(e){this.pickHandler=e}},{key:"addEventMapping",value:function(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort(function(i,a){return i.priority-a.priority})}},{key:"mapEvent",value:function(e){if(this.rootTarget){var n=this.mappingTable[e.type];if(n)for(var i=0,a=n.length;i<a;i++)n[i].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}}},{key:"dispatchEvent",value:function(e,n,i){if(!i)e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n);else{e.eventPhase=e.AT_TARGET;var a=this.rootTarget.defaultView||null;e.currentTarget=a,this.notifyListeners(e,n)}}},{key:"propagate",value:function(e,n){if(e.target){var i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(e.currentTarget=i[a],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){var o=i.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var s=o+1;s<i.length;s++)if(e.currentTarget=i[s],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(e){var n=[e],i=this.rootTarget.defaultView||null;if(i&&i===e)return n.unshift(i.document),n;for(var a=0;a<pj&&e!==this.rootTarget;a++)xe.isNode(e)&&e.parentNode&&(n.push(e.parentNode),e=e.parentNode);return i&&n.push(i),n}},{key:"hitTest",value:function(e){var n=e.viewportX,i=e.viewportY,a=this.context.config,o=a.width,s=a.height,l=a.disableHitTesting;return n<0||i<0||n>o||i>s?null:!l&&this.pickHandler(e)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(e,n){var i,a=n?.target;if((i=a)!==null&&i!==void 0&&i.shadowRoot&&(a=n.composedPath()[0]),a){if(a===e)return!0;if(e&&e.contains)return e.contains(a)}return n!=null&&n.composedPath?n.composedPath().indexOf(e)>-1:!1}},{key:"getExistedHTML",value:function(e){if(e.nativeEvent.composedPath)for(var n=0,i=e.nativeEvent.composedPath();n<i.length;n++){var a=i[n],o=this.nativeHTMLMap.get(a);if(o)return o}return null}},{key:"pickTarget",value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})}},{key:"createPointerEvent",value:function(e,n,i,a){var o=this.allocateEvent(yd);this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.nativeEvent=e.nativeEvent,o.originalEvent=e;var s=this.getExistedHTML(o),l=this.context.contextService.getDomElement();return o.target=i??(s||this.isNativeEventFromCanvas(l,o.nativeEvent)&&this.pickTarget(o)||a),typeof n=="string"&&(o.type=n),o}},{key:"createWheelEvent",value:function(e){var n=this.allocateEvent(md);this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e;var i=this.getExistedHTML(n),a=this.context.contextService.getDomElement();return n.target=i||this.isNativeEventFromCanvas(a,n.nativeEvent)&&this.pickTarget(n),n}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}},{key:"cloneWheelEvent",value:function(e){var n=this.allocateEvent(md);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=e.type,n}},{key:"clonePointerEvent",value:function(e,n){var i=this.allocateEvent(yd);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=n??i.type,i}},{key:"copyPointerData",value:function(e,n){n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist}},{key:"copyMouseData",value:function(e,n){n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.client.copyFrom(e.client),n.movement.copyFrom(e.movement),n.canvas.copyFrom(e.canvas),n.screen.copyFrom(e.screen),n.global.copyFrom(e.global),n.offset.copyFrom(e.offset)}},{key:"copyWheelData",value:function(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}},{key:"copyData",value:function(e,n){n.isTrusted=e.isTrusted,n.timeStamp=gd.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.page.copyFrom(e.page),n.viewport.copyFrom(e.viewport)}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}},{key:"notifyTarget",value:function(e,n){n=n??e.type;var i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}},{key:"notifyListeners",value:function(e,n){var i=e.currentTarget.emitter,a=i._events[n];if(a)if("fn"in a)a.once&&i.removeListener(n,a.fn,void 0,!0),a.fn.call(e.currentTarget||a.context,e);else for(var o=0;o<a.length&&!e.propagationImmediatelyStopped;o++)a[o].once&&i.removeListener(n,a[o].fn,void 0,!0),a[o].fn.call(e.currentTarget||a[o].context,e)}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var n=e[e.length-1],i=e.length-2;i>=0;i--){var a=e[i];if(a===this.rootTarget||xe.isNode(a)&&a.parentNode===n)n=e[i];else break}return n}},{key:"getCursor",value:function(e){for(var n=e;n;){var i=CI(n)&&n.getAttribute("cursor");if(i)return i;n=xe.isNode(n)&&n.parentNode}}}])}(),qh=function(){function t(){Z(this,t)}return K(t,[{key:"getOrCreateCanvas",value:function(e,n){if(this.canvas)return this.canvas;if(e||tt.offscreenCanvas)this.canvas=e||tt.offscreenCanvas,this.context=this.canvas.getContext("2d",Ot({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",Ot({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",Ot({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(e,n){return this.context?this.context:(this.getOrCreateCanvas(e,n),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])}(),La=function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t}({}),gj=function(){function t(r,e){Z(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new sn,initAsync:new UI,dirtycheck:new af,cull:new af,beginFrame:new sn,beforeRender:new sn,render:new sn,afterRender:new sn,endFrame:new sn,destroy:new sn,pick:new XI,pickSync:new af,pointerDown:new sn,pointerUp:new sn,pointerMove:new sn,pointerOut:new sn,pointerOver:new sn,pointerWheel:new sn,pointerCancel:new sn,click:new sn},this.globalRuntime=r,this.context=e}return K(t,[{key:"init",value:function(e){var n=this,i=Ot(Ot({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(a){a.apply(i,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){n.inited=!0,e()}).catch(function(a){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var e=this.context.config.renderer,n=e.getConfig(),i=n.enableDirtyRectangleRendering;return!i||this.context.renderingContext.renderReasons.has(La.CAMERA_CHANGED)}},{key:"render",value:function(e,n,i){var a=this,o=e.getConfig(),s=this.context.renderingContext;if(this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0,this.globalRuntime.sceneGraphService.syncHierarchy(s.root),this.globalRuntime.sceneGraphService.notifyMutationObservers(e),s.renderReasons.size&&this.inited){s.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var l=s.renderReasons.size===1&&s.renderReasons.has(La.CAMERA_CHANGED),c=!o.disableRenderHooks||!l;c&&this.renderDisplayObject(s.root,o,s),this.hooks.beginFrame.call(n),c&&s.renderListCurrentFrame.forEach(function(u){a.hooks.beforeRender.call(u),a.hooks.render.call(u),a.hooks.afterRender.call(u)}),this.hooks.endFrame.call(n),s.renderListCurrentFrame=[],s.renderReasons.clear(),i()}}},{key:"renderDisplayObject",value:function(e,n,i){var a=this,o=n.renderer.getConfig(),s=o.enableDirtyCheck,l=o.enableCulling;function c(v){var g=v.renderable,y=v.sortable,m=s?g.dirty||i.dirtyRectangleRenderingDisabled?v:null:v,b=null;m&&(b=l?a.hooks.cull.call(m,a.context.camera):m,b&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(b))),v.dirty(!1),y.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,y.dirty&&(a.sort(v,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0)}for(var u=[e];u.length>0;){var f,d=u.pop();c(d);for(var h=((f=d.sortable)===null||f===void 0||(f=f.sorted)===null||f===void 0?void 0:f.length)>0?d.sortable.sorted:d.childNodes,p=h.length-1;p>=0;p--)u.push(h[p])}}},{key:"sort",value:function(e,n){var i,a;(n==null||(i=n.sorted)===null||i===void 0?void 0:i.length)>0&&n.dirtyReason!==ec.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(o){var s=n.sorted.indexOf(o);s>-1&&n.sorted.splice(s,1);var l=e.childNodes.indexOf(o);if(l>-1)if(n.sorted.length===0)n.sorted.push(o);else{var c=LI(n.sorted,o);n.sorted.splice(c,0,o)}}):n.sorted=e.childNodes.slice().sort(lO),((a=n.sorted)===null||a===void 0?void 0:a.length)>0&&e.childNodes.filter(function(o){return o.parsedStyle.zIndex}).length===0&&(n.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call()}},{key:"dirty",value:function(){this.context.renderingContext.renderReasons.add(La.DISPLAY_OBJECT_CHANGED)}}])}(),yj=/\[\s*(.*)=(.*)\s*\]/,mj=function(){function t(){Z(this,t)}return K(t,[{key:"selectOne",value:function(e,n){var i=this;if(e.startsWith("."))return n.find(function(l){return(l?.classList||[]).indexOf(i.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.find(function(l){return l.id===i.getIdOrClassname(e)});if(e.startsWith("[")){var a=this.getAttribute(e),o=a.name,s=a.value;return o?n.find(function(l){return n!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):null}return n.find(function(l){return n!==l&&l.nodeName===e})}},{key:"selectAll",value:function(e,n){var i=this;if(e.startsWith("."))return n.findAll(function(l){return n!==l&&(l?.classList||[]).indexOf(i.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.findAll(function(l){return n!==l&&l.id===i.getIdOrClassname(e)});if(e.startsWith("[")){var a=this.getAttribute(e),o=a.name,s=a.value;return o?n.findAll(function(l){return n!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):[]}return n.findAll(function(l){return n!==l&&l.nodeName===e})}},{key:"is",value:function(e,n){if(e.startsWith("."))return n.className===this.getIdOrClassname(e);if(e.startsWith("#"))return n.id===this.getIdOrClassname(e);if(e.startsWith("[")){var i=this.getAttribute(e),a=i.name,o=i.value;return a==="name"?n.name===o:this.attributeToString(n,a)===o}return n.nodeName===e}},{key:"getIdOrClassname",value:function(e){return e.substring(1)}},{key:"getAttribute",value:function(e){var n=e.match(yj),i="",a="";return n&&n.length>2&&(i=n[1].replace(/"/g,""),a=n[2].replace(/"/g,"")),{name:i,value:a}}},{key:"attributeToString",value:function(e,n){if(!e.getAttribute)return"";var i=e.getAttribute(n);return gt(i)?"":i.toString?i.toString():""}}])}(),It=function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t}({}),xr=function(t){function r(e,n,i,a,o,s,l,c){var u;return Z(this,r),u=At(this,r,[null]),u.relatedNode=n,u.prevValue=i,u.newValue=a,u.attrName=o,u.attrChange=s,u.prevParsedValue=l,u.newParsedValue=c,u.type=e,u}return Et(r,t),K(r)}(cu);xr.ADDITION=2;xr.MODIFICATION=1;xr.REMOVAL=3;var bj=new xr(It.REPARENT,null,"","","",0,"",""),xj=Mb(),Xs=Nt(),Oj=Ht(1,1,1),wj=Zt(),_j=Mb(),Mi=Nt(),Sj=Zt(),Ci=qe(),kj=Nt(),Ej=qe(),Aj=Nt(),po=Nt(),Li=Nt(),qs=Zt(),ey=qe(),ny=qe(),Ks=qe(),Tj=function(){function t(r){Z(this,t),this.displayObjectDependencyMap=new WeakMap,this.runtime=r}return K(t,[{key:"matches",value:function(e,n){return this.runtime.sceneGraphSelector.is(e,n)}},{key:"querySelector",value:function(e,n){return this.runtime.sceneGraphSelector.selectOne(e,n)}},{key:"querySelectorAll",value:function(e,n){return this.runtime.sceneGraphSelector.selectAll(e,n)}},{key:"attach",value:function(e,n,i){var a,o=!1;e.parentNode&&(o=e.parentNode!==n,this.detach(e));var s=e.nodeName===U.FRAGMENT,l=oc(n);e.parentNode=n;var c=s?e.childNodes:[e];fe(i)?c.forEach(function(v){n.childNodes.splice(i,0,v),v.parentNode=n}):c.forEach(function(v){n.childNodes.push(v),v.parentNode=n});var u=n,f=u.sortable;if((f!=null&&(a=f.sorted)!==null&&a!==void 0&&a.length||f.dirty||e.parsedStyle.zIndex)&&(f.dirtyChildren.indexOf(e)===-1&&f.dirtyChildren.push(e),f.dirty=!0,f.dirtyReason=ec.ADDED),!l){if(s)this.dirtyFragment(e);else{var d=e.transformable;d&&this.dirtyWorldTransform(e,d)}if(o){var h,p=((h=n.ownerDocument)===null||h===void 0||(h=h.defaultView)===null||h===void 0||(h=h.getConfig())===null||h===void 0||(h=h.future)===null||h===void 0?void 0:h.experimentalCancelEventPropagation)===!0;e.dispatchEvent(bj,p,p)}}}},{key:"detach",value:function(e){var n,i;if(e.parentNode){var a=e.transformable,o=e.parentNode,s=o.sortable;(s!=null&&(n=s.sorted)!==null&&n!==void 0&&n.length||(i=e.style)!==null&&i!==void 0&&i.zIndex)&&(s.dirtyChildren.indexOf(e)===-1&&s.dirtyChildren.push(e),s.dirty=!0,s.dirtyReason=ec.REMOVED);var l=e.parentNode.childNodes.indexOf(e);l>-1&&e.parentNode.childNodes.splice(l,1),a&&this.dirtyWorldTransform(e,a),e.parentNode=null}}},{key:"getLocalPosition",value:function(e){return e.transformable.localPosition}},{key:"getLocalRotation",value:function(e){return e.transformable.localRotation}},{key:"getLocalScale",value:function(e){return e.transformable.localScale}},{key:"getLocalSkew",value:function(e){return e.transformable.localSkew}},{key:"getLocalTransform",value:function(e){var n=e.transformable;return Pg(n),n.localTransform}},{key:"setLocalPosition",value:function(e,n){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=e.transformable;po[0]=n[0],po[1]=n[1],po[2]=(i=n[2])!==null&&i!==void 0?i:0,!so(o.localPosition,po)&&(cr(o.localPosition,po),a&&this.dirtyLocalTransform(e,o))}},{key:"translateLocal",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Ht(n,i,a));var o=e.transformable;so(n,Xs)||(OT(n,n,o.localRotation),si(o.localPosition,o.localPosition,n),this.dirtyLocalTransform(e,o))}},{key:"setLocalRotation",value:function(e,n,i,a,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof n=="number"&&(n=Nb(Ci,n,i,a,o));var l=e.transformable;Fs(l.localRotation,n),s&&this.dirtyLocalTransform(e,l)}},{key:"rotateLocal",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Ht(n,i,a));var o=e.transformable;Bs(ny,n[0],n[1],n[2]),qv(o.localRotation,o.localRotation,ny),this.dirtyLocalTransform(e,o)}},{key:"setLocalScale",value:function(e,n){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=e.transformable;nn(Mi,n[0],n[1],(i=n[2])!==null&&i!==void 0?i:o.localScale[2]),!so(Mi,o.localScale)&&(cr(o.localScale,Mi),a&&this.dirtyLocalTransform(e,o))}},{key:"scaleLocal",value:function(e,n){var i,a=e.transformable;wT(a.localScale,a.localScale,nn(Mi,n[0],n[1],(i=n[2])!==null&&i!==void 0?i:1)),this.dirtyLocalTransform(e,a)}},{key:"setLocalSkew",value:function(e,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof n=="number"&&(n=_T(_j,n,i));var o=e.transformable;ST(o.localSkew,n),a&&this.dirtyLocalTransform(e,o)}},{key:"setLocalEulerAngles",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof n=="number"&&(n=Ht(n,i,a));var s=e.transformable;Bs(s.localRotation,n[0],n[1],n[2]),o&&this.dirtyLocalTransform(e,s)}},{key:"setLocalTransform",value:function(e,n){var i=Xf(kj,n),a=qf(Ej,n),o=Gl(Aj,n);this.setLocalScale(e,o,!1),this.setLocalPosition(e,i,!1),this.setLocalRotation(e,a,void 0,void 0,void 0,!1),this.dirtyLocalTransform(e,e.transformable)}},{key:"resetLocalTransform",value:function(e){this.setLocalScale(e,Oj,!1),this.setLocalPosition(e,Xs,!1),this.setLocalEulerAngles(e,Xs,void 0,void 0,!1),this.setLocalSkew(e,xj,void 0,!1),this.dirtyLocalTransform(e,e.transformable)}},{key:"getPosition",value:function(e){var n=e.transformable;return Xf(n.position,this.getWorldTransform(e,n))}},{key:"getRotation",value:function(e){var n=e.transformable;return qf(n.rotation,this.getWorldTransform(e,n))}},{key:"getScale",value:function(e){var n=e.transformable;return Gl(n.scaling,this.getWorldTransform(e,n))}},{key:"getOrigin",value:function(e){return e.getGeometryBounds(),e.transformable.origin}},{key:"getWorldTransform",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.transformable;return!n.localDirtyFlag&&!n.dirtyFlag||(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.internalUpdateTransform(e)),n.worldTransform}},{key:"setPosition",value:function(e,n){var i,a=e.transformable;if(Li[0]=n[0],Li[1]=n[1],Li[2]=(i=n[2])!==null&&i!==void 0?i:0,!so(this.getPosition(e),Li)){if(cr(a.position,Li),e.parentNode===null||!e.parentNode.transformable)cr(a.localPosition,Li);else{var o=e.parentNode.transformable;zo(qs,o.worldTransform),ur(qs,qs),ke(a.localPosition,Li,qs)}this.dirtyLocalTransform(e,a)}}},{key:"translate",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=nn(Mi,n,i,a)),!so(n,Xs)&&(si(Mi,this.getPosition(e),n),this.setPosition(e,Mi))}},{key:"setRotation",value:function(e,n,i,a,o){var s=e.transformable;if(typeof n=="number"&&(n=kT(n,i,a,o)),e.parentNode===null||!e.parentNode.transformable)this.setLocalRotation(e,n);else{var l=this.getRotation(e.parentNode);Fs(Ci,l),Wu(Ci,Ci),Vi(s.localRotation,Ci,n),Kv(s.localRotation,s.localRotation),this.dirtyLocalTransform(e,s)}}},{key:"rotate",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Ht(n,i,a));var o=e.transformable;if(e.parentNode===null||!e.parentNode.transformable)this.rotateLocal(e,n);else{var s=Ci;Bs(s,n[0],n[1],n[2]);var l=this.getRotation(e),c=this.getRotation(e.parentNode);Fs(Ks,c),Wu(Ks,Ks),Vi(s,Ks,s),Vi(o.localRotation,s,l),Kv(o.localRotation,o.localRotation),this.dirtyLocalTransform(e,o)}}},{key:"setOrigin",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=[n,i,a]);var o=e.transformable;if(!(n[0]===o.origin[0]&&n[1]===o.origin[1]&&n[2]===o.origin[2])){var s=o.origin;s[0]=n[0],s[1]=n[1],s[2]=n[2]||0,this.dirtyLocalTransform(e,o)}}},{key:"setEulerAngles",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Ht(n,i,a));var o=e.transformable;if(e.parentNode===null||!e.parentNode.transformable)this.setLocalEulerAngles(e,n);else{Bs(o.localRotation,n[0],n[1],n[2]);var s=this.getRotation(e.parentNode);Fs(ey,Wu(Ci,s)),qv(o.localRotation,o.localRotation,ey),this.dirtyLocalTransform(e,o)}}},{key:"getGeometryBounds",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e,a=i.geometry;a.dirty&&tt.styleValueRegistry.updateGeometry(e);var o=n?a.renderBounds:a.contentBounds||null;return o||new ze}},{key:"getTransformedGeometryBounds",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(e,n);if(!ze.isEmpty(a)){var o=i||new ze;return o.setFromTransformedAABB(a,this.getWorldTransform(e)),o}return null}},{key:"getBounds",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e,o=a.renderable;if(!o.boundsDirty&&!i&&o.bounds)return o.bounds;if(!o.renderBoundsDirty&&i&&o.renderBounds)return o.renderBounds;var s=i?o.renderBounds:o.bounds,l=this.getTransformedGeometryBounds(e,i,s),c=e.childNodes;if(c.forEach(function(d){var h=n.getBounds(d,i);h&&(l?l.add(h):(l=s||new ze,l.update(h.center,h.halfExtents)))}),l||(l=new ze),i){var u=cO(e);if(u){var f=u.parsedStyle.clipPath.getBounds(i);l?f&&(l=f.intersection(l)):l.update(f.center,f.halfExtents)}}return i?(o.renderBounds=l,o.renderBoundsDirty=!1):(o.bounds=l,o.boundsDirty=!1),l}},{key:"getLocalBounds",value:function(e){if(e.parentNode){var n=wj;e.parentNode.transformable&&(n=ur(Sj,this.getWorldTransform(e.parentNode)));var i=this.getBounds(e);if(!ze.isEmpty(i)){var a=new ze;return a.setFromTransformedAABB(i,n),a}}return this.getBounds(e)}},{key:"getBoundingClientRect",value:function(e){var n,i,a=this.getGeometryBounds(e);ze.isEmpty(a)||(i=new ze,i.setFromTransformedAABB(a,this.getWorldTransform(e)));var o=(n=e.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect();if(i){var s=i.getMin(),l=_t(s,2),c=l[0],u=l[1],f=i.getMax(),d=_t(f,2),h=d[0],p=d[1];return new Va(c+(o?.left||0),u+(o?.top||0),h-c,p-u)}return new Va(o?.left||0,o?.top||0,0,0)}},{key:"internalUpdateTransform",value:function(e){var n,i=(n=e.parentNode)===null||n===void 0?void 0:n.transformable;Pg(e.transformable),HN(e.transformable,i)}},{key:"internalUpdateElement",value:function(e,n){var i,a,o,s,l=((i=e.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0,c=n[n.length-1],u=c?.transformDirty||((a=e.transformable)===null||a===void 0?void 0:a.localDirtyFlag);if(e.transformable){var f;(f=e.transformable).dirtyFlag||(f.dirtyFlag=u)}if(this.internalUpdateTransform(e),u){var d;(d=e.dirty)===null||d===void 0||d.call(e,!0,!0)}var h=((o=e.renderable)===null||o===void 0?void 0:o.boundsDirty)||((s=e.renderable)===null||s===void 0?void 0:s.renderBoundsDirty);if((u||h)&&c?.shapeUpdated===!1&&l)for(var p=n.length-1;p>=0;){var v,g,y=n[p];if(y.shapeUpdated)break;(v=(g=y.node).dirty)===null||v===void 0||v.call(g,!0,!0),y.shapeUpdated=!0,p-=1}return u}},{key:"syncHierarchy",value:function(e){for(var n,i,a=[e],o=e.parentNode?[{node:e.parentNode,transformDirty:((n=e.parentNode.transformable)===null||n===void 0?void 0:n.localDirtyFlag)||((i=e.parentNode.transformable)===null||i===void 0?void 0:i.dirtyFlag),shapeUpdated:!1}]:[];a.length>0;){for(var s=a.pop(),l=o[o.length-1];o.length>0&&s.parentNode!==l.node;)l=o.pop();var c=this.internalUpdateElement(s,o);if(s.childNodes.length>0){for(var u=s.childNodes.length-1;u>=0;u--)a.push(s.childNodes[u]);o.push({node:s,transformDirty:c,shapeUpdated:!1})}}}},{key:"dirtyLocalTransform",value:function(e,n){oc(e)||n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtyWorldTransform(e,n))}},{key:"dirtyWorldTransform",value:function(e,n){this.dirtyWorldInternal(e,n),this.dirtyToRoot(e,!0)}},{key:"dirtyWorldInternal",value:function(e,n){var i,a=this,o=((i=e.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0;n.dirtyFlag||(n.dirtyFlag=!0,e.dirty(!0,!0),o||e.childNodes.forEach(function(s){var l=s.transformable;a.dirtyWorldInternal(s,l)}))}},{key:"dirtyToRoot",value:function(e){for(var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e,o=((n=e.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig())===null||n===void 0||(n=n.future)===null||n===void 0?void 0:n.experimentalAttributeUpdateOptimization)===!0;a;){var s,l;if((s=(l=a).dirty)===null||s===void 0||s.call(l,!0,!0),o)break;a=a.parentNode}i&&e.forEach(function(f){var d;(d=f.dirty)===null||d===void 0||d.call(f,!0,!0)}),this.informDependentDisplayObjects(e);var c=e.mutations||[],u=c.find(function(f){return f.type==="attributes"&&f._boundsChangeData});u?u._boundsChangeData={affectChildren:u._boundsChangeData.affectChildren||i}:(u={type:"attributes",target:e,_boundsChangeData:{affectChildren:i}},c.push(u)),e.mutations=c}},{key:"dirtyFragment",value:function(e){var n,i,a=e.transformable;a&&(a.dirtyFlag=!0,a.localDirtyFlag=!0),(n=(i=e).dirty)===null||n===void 0||n.call(i,!0,!0);for(var o=e.childNodes.length,s=0;s<o;s++)this.dirtyFragment(e.childNodes[s])}},{key:"notifyMutationObservers",value:function(e){var n=new Set;if(e.getRoot().forEach(function(a){(a.mutations||[]).forEach(function(o){o.type==="attributes"&&o._boundsChangeData&&(o._boundsChangeData.affectChildren?a.forEach(function(s){var l=Ot({},o);l.target=s,n.add(l)}):n.add(o))}),a.mutations=void 0}),n.size>0){var i=new Qt(It.BOUNDS_CHANGED,{detail:Array.from(n)});e.dispatchEvent(i,!0,!0)}}},{key:"updateDisplayObjectDependency",value:function(e,n,i,a){if(n&&n!==i){var o=this.displayObjectDependencyMap.get(n);if(o&&o[e]){var s=o[e].indexOf(a);o[e].splice(s,1)}}if(i){var l=this.displayObjectDependencyMap.get(i);l||(this.displayObjectDependencyMap.set(i,{}),l=this.displayObjectDependencyMap.get(i)),l[e]||(l[e]=[]),l[e].push(a)}}},{key:"informDependentDisplayObjects",value:function(e){var n,i=this,a=this.displayObjectDependencyMap.get(e);if(a){var o=(n=e.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig())===null||n===void 0||(n=n.future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation;Object.keys(a).forEach(function(s){a[s].forEach(function(l){i.dirtyToRoot(l,!0),l.dispatchEvent(new xr(It.ATTR_MODIFIED,l,i,i,s,xr.MODIFICATION,i,i),o,o),l.isCustomElement&&l.isConnected&&l.attributeChangedCallback&&l.attributeChangedCallback(s,i,i)})})}}}])}(),ry=function(){function t(r){if(Z(this,t),r<=0)throw new Error("LRU capacity must be a positive number.");this.capacity=r,this.cache=new Map}return K(t,[{key:"get",value:function(e){if(this.cache.has(e)){var n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}}},{key:"put",value:function(e,n){if(this.cache.has(e)&&this.cache.delete(e),this.cache.set(e,n),this.cache.size>this.capacity){var i=this.cache.keys().next().value;this.cache.delete(i)}}},{key:"len",value:function(){return this.cache.size}},{key:"clear",value:function(){this.cache.clear()}}])}(),Ni={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},iy=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,Pj=/[!%),.:;?\]}'""]/,Mj=/[$('"]/,Cj=/[!),.:;?\]}'""]/,Lj=/[([{'"]/,Nj=/[)\]'"?!:;,.]/,Rj=/[(['"...]/,Ij=/[!%),.:;?\]}'"]/,jj=/[$([{'"#]/,Dj=new RegExp("".concat(Pj.source,"|").concat(Cj.source,"|").concat(Nj.source,"|").concat(Ij.source)),$j=new RegExp("".concat(Mj.source,"|").concat(Lj.source,"|").concat(Rj.source,"|").concat(jj.source)),Fj=function(){function t(r){var e=this;Z(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(n,i){return e.isBreakingSpace(i)?!1:!!(n&&($j.exec(i)||Dj.exec(n)))},this.trimByKinsokuShorui=function(n){var i=Pt(n),a=i[i.length-2];if(!a)return n;var o=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=o+i[i.length-1],i},this.runtime=r,this.charWidthCache=new ry(100)}return K(t,[{key:"measureFont",value:function(e,n){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});o.font=e;var s=Ni.MetricsString+Ni.BaselineSymbol,l=Math.ceil(o.measureText(s).width),c=Math.ceil(o.measureText(Ni.BaselineSymbol).width),u=Ni.HeightMultiplier*c;c=c*Ni.BaselineMultiplier|0,a.width=l,a.height=u,o.fillStyle="#f00",o.fillRect(0,0,l,u),o.font=e,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(s,0,c);var f=o.getImageData(0,0,l||1,u||1).data,d=f.length,h=l*4,p=0,v=0,g=!1;for(p=0;p<c;++p){for(var y=0;y<h;y+=4)if(f[v+y]!==255){g=!0;break}if(!g)v+=h;else break}for(i.ascent=c-p,v=d-h,g=!1,p=u;p>c;--p){for(var m=0;m<h;m+=4)if(f[v+m]!==255){g=!0;break}if(!g)v-=h;else break}return i.descent=p-c,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[e]=i,i}},{key:"measureText",value:function(e,n,i){var a=n.fontSize,o=a===void 0?16:a,s=n.wordWrap,l=s===void 0?!1:s,c=n.lineHeight,u=n.lineWidth,f=u===void 0?1:u,d=n.textBaseline,h=d===void 0?"alphabetic":d,p=n.textAlign,v=p===void 0?"start":p,g=n.letterSpacing,y=g===void 0?0:g,m=n.textPath;n.textPathSide,n.textPathStartOffset;var b=n.leading,x=b===void 0?0:b,O=Jg(n),w=this.measureFont(O,i);w.fontSize===0&&(w.fontSize=o,w.ascent=o);var _=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);_.font=O,n.isOverflowing=!1;var S=l?this.wordWrap(e,n,i):e,k=S.split(/(?:\r\n|\r|\n)/),E=new Array(k.length),A=0;if(m){m.getTotalLength();for(var T=0;T<k.length;T++)_.measureText(k[T]).width+(k[T].length-1)*y}else{for(var P=0;P<k.length;P++){var N=_.measureText(k[P]).width+(k[P].length-1)*y;E[P]=N,A=Math.max(A,N)}var I=A+f,R=c||w.fontSize+f,C=Math.max(R,w.fontSize+f)+(k.length-1)*(R+x);R+=x;var L=0;return h==="middle"?L=-C/2:h==="bottom"||h==="alphabetic"||h==="ideographic"?L=-C:(h==="top"||h==="hanging")&&(L=0),{font:O,width:I,height:C,lines:k,lineWidths:E,lineHeight:R,maxLineWidth:A,fontProperties:w,lineMetrics:E.map(function(M,j){var F=0;return v==="center"||v==="middle"?F-=M/2:(v==="right"||v==="end")&&(F-=M),new Va(F-f/2,L+j*R,M+f,R)})}}}},{key:"wordWrap",value:function(e,n,i){var a=this,o=Array.from(e);if(o.length===0)return"";var s=this,l=n.wordWrapWidth,c=l===void 0?0:l,u=n.letterSpacing,f=u===void 0?0:u,d=n.maxLines,h=d===void 0?1/0:d,p=n.textOverflow,v=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),g=c+f,y="";p==="ellipsis"?y="...":p&&p!=="clip"&&(y=p);var m=[""],b=0,x=0,O=-1,w=Jg(n),_=this.charWidthCache.get(w);_||(_=new ry(500),this.charWidthCache.put(w,_));var S=function(M){return a.getFromCache(M,f,_,v)},k=S(y);function E(L,M,j,F){for(;S(L)<F&&M<o.length-1&&!s.isNewline(o[M+1]);)M+=1,L+=o[M];for(;S(L)>F&&M>=j;)M-=1,L=L.slice(0,-1);return{lineTxt:L,txtLastCharIndex:M}}function A(L,M){if(!(k<=0||k>g)){if(!m[L]){m[L]=y;return}var j=E(m[L],M,O+1,g-k);m[L]=j.lineTxt+y}}for(var T=0;T<o.length;T++){var P=o[T],N=o[T-1],I=o[T+1],R=S(P);if(this.isNewline(P)){if(b+1>=h){T<o.length-1&&A(b,T-1),n.isOverflowing=!0;break}O=T-1,b+=1,x=0,m[b]="";continue}if(R>g){A(b,T-1),n.isOverflowing=!0;break}if(x>0&&x+R>g){var C=E(m[b],T-1,O+1,g);if(C.txtLastCharIndex!==T-1){if(m[b]=C.lineTxt,C.txtLastCharIndex===o.length-1)break;T=C.txtLastCharIndex+1,P=o[T],N=o[T-1],I=o[T+1],R=S(P)}if(b+1>=h){A(b,T-1),n.isOverflowing=!0;break}if(O=T-1,b+=1,x=0,m[b]="",this.isBreakingSpace(P))continue;this.canBreakInLastChar(P)||(m=this.trimToBreakable(m),x=this.sumTextWidthByCache(m[b]||"",S)),this.shouldBreakByKinsokuShorui(P,I)&&(m=this.trimByKinsokuShorui(m),x+=S(N||""))}x+=R,m[b]+=P}return m.join(`
`)}},{key:"isBreakingSpace",value:function(e){return typeof e!="string"?!1:Ni.BreakingSpaces.indexOf(e.charCodeAt(0))>=0}},{key:"isNewline",value:function(e){return typeof e!="string"?!1:Ni.Newlines.indexOf(e.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(e){var n=Pt(e),i=n[n.length-2],a=this.findBreakableIndex(i);if(a===-1||!i)return n;var o=i.slice(a,a+1),s=this.isBreakingSpace(o),l=a+1,c=a+(s?0:1);return n[n.length-1]+=i.slice(l,i.length),n[n.length-2]=i.slice(0,c),n}},{key:"canBreakInLastChar",value:function(e){return!(e&&iy.test(e))}},{key:"sumTextWidthByCache",value:function(e,n){return e.split("").reduce(function(i,a){return i+n(a)},0)}},{key:"findBreakableIndex",value:function(e){for(var n=e.length-1;n>=0;n--)if(!iy.test(e[n]))return n;return-1}},{key:"getFromCache",value:function(e,n,i,a){var o=i.get(e);if(typeof o!="number"){var s=e.length*n,l=a.measureText(e);o=l.width+s,i.put(e,o)}return o}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear()}}])}(),tt={},Bj=function(t){var r=new uj,e=new cj;return t={},ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(t,U.FRAGMENT,null),U.CIRCLE,new aj),U.ELLIPSE,new oj),U.RECT,r),U.IMAGE,r),U.GROUP,new dj),U.LINE,new sj),U.TEXT,new fj(tt)),U.POLYLINE,e),U.POLYGON,e),ct(ct(ct(t,U.PATH,new lj),U.HTML,new hj),U.MESH,null)}(),zj=function(t){var r=new yI,e=new vd;return t={},ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(t,rt.PERCENTAGE,null),rt.NUMBER,new wI),rt.ANGLE,new vI),rt.DEFINED_PATH,new gI),rt.PAINT,r),rt.COLOR,r),rt.FILTER,new mI),rt.LENGTH,e),rt.LENGTH_PERCENTAGE,e),rt.LENGTH_PERCENTAGE_12,new bI),ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(t,rt.LENGTH_PERCENTAGE_14,new xI),rt.COORDINATE,new vd),rt.OFFSET_DISTANCE,new _I),rt.OPACITY_VALUE,new SI),rt.PATH,new kI),rt.LIST_OF_POINTS,new EI),rt.SHADOW_BLUR,new AI),rt.TEXT,new TI),rt.TEXT_TRANSFORM,new PI),rt.TRANSFORM,new nj),ct(ct(ct(t,rt.TRANSFORM_ORIGIN,new rj),rt.Z_INDEX,new ij),rt.MARKER,new OI)}(),Wj=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};tt.CameraContribution=G1;tt.AnimationTimeline=null;tt.EasingFunction=null;tt.offscreenCanvasCreator=new qh;tt.sceneGraphSelector=new mj;tt.sceneGraphService=new Tj(tt);tt.textService=new Fj(tt);tt.geometryUpdaterFactory=Bj;tt.CSSPropertySyntaxFactory=zj;tt.styleValueRegistry=new hI(tt);tt.layoutRegistry=null;tt.globalThis=Wj();tt.enableStyleSyntax=!0;tt.enableSizeAttenuation=!1;var Gj=0,bd=new xr(It.INSERTED,null,"","","",0,"",""),xd=new xr(It.REMOVED,null,"","","",0,"",""),yO=new Qt(It.DESTROY),Hj=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.entity=Gj++,e.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.cullable={strategy:zN.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e}return Et(r,t),K(r,[{key:"dirty",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1?arguments[1]:void 0;this.renderable.dirty=n,i!==void 0&&(this.renderable.boundsDirty=i,this.renderable.renderBoundsDirty=i,this.geometry.dirty=i)}},{key:"className",get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(n){return n!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null}},{key:"cloneNode",value:function(n){throw new Error(ie)}},{key:"appendChild",value:function(n,i){var a;if(n.destroyed)throw new Error(MN);return tt.sceneGraphService.attach(n,this,i),(a=this.ownerDocument)!==null&&a!==void 0&&a.defaultView&&(!oc(this)&&n.nodeName===U.FRAGMENT?this.ownerDocument.defaultView.mountFragment(n):this.ownerDocument.defaultView.mountChildren(n)),this.isMutationObserved&&(bd.relatedNode=this,n.dispatchEvent(bd)),n}},{key:"insertBefore",value:function(n,i){if(!i)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var a=this.childNodes.indexOf(i);a===-1?this.appendChild(n):this.appendChild(n,a)}return n}},{key:"replaceChild",value:function(n,i){var a=this.childNodes.indexOf(i);return this.removeChild(i),this.appendChild(n,a),i}},{key:"removeChild",value:function(n){var i,a,o=((i=this.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;return xd.relatedNode=this,n.dispatchEvent(xd,o,o),(a=n.ownerDocument)!==null&&a!==void 0&&a.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),tt.sceneGraphService.detach(n),n}},{key:"removeChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var i=this.childNodes[n];this.removeChild(i)}}},{key:"destroyChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var i=this.childNodes[n];i.childNodes.length>0&&i.destroyChildren(),i.destroy()}}},{key:"matches",value:function(n){return tt.sceneGraphService.matches(n,this)}},{key:"getElementById",value:function(n){return tt.sceneGraphService.querySelector("#".concat(n),this)}},{key:"getElementsByName",value:function(n){return tt.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)}},{key:"getElementsByClassName",value:function(n){return tt.sceneGraphService.querySelectorAll(".".concat(n),this)}},{key:"getElementsByTagName",value:function(n){return tt.sceneGraphService.querySelectorAll(n,this)}},{key:"querySelector",value:function(n){return tt.sceneGraphService.querySelector(n,this)}},{key:"querySelectorAll",value:function(n){return tt.sceneGraphService.querySelectorAll(n,this)}},{key:"closest",value:function(n){var i=this;do{if(tt.sceneGraphService.matches(n,i))return i;i=i.parentElement}while(i!==null);return null}},{key:"find",value:function(n){var i=this,a=null;return this.forEach(function(o){return o!==i&&n(o)?(a=o,!1):!0}),a}},{key:"findAll",value:function(n){var i=this,a=[];return this.forEach(function(o){o!==i&&n(o)&&a.push(o)}),a}},{key:"after",value:function(){var n=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];o.forEach(function(l,c){var u;return(u=n.parentNode)===null||u===void 0?void 0:u.appendChild(l,i+c+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var n,i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],c=uT(o).slice(1);this.parentNode.appendChild(l,i),(n=l).after.apply(n,Pt(c))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s){return n.appendChild(s)})}},{key:"prepend",value:function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s,l){return n.appendChild(s,l)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){var n,i=((n=this.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig().future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(yO,i,i),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return tt.sceneGraphService.getGeometryBounds(this,n)}},{key:"getTransformedGeometryBounds",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return tt.sceneGraphService.getTransformedGeometryBounds(this,n)}},{key:"getBounds",value:function(){return tt.sceneGraphService.getBounds(this)}},{key:"getRenderBounds",value:function(){return tt.sceneGraphService.getBounds(this,!0)}},{key:"getLocalBounds",value:function(){return tt.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return tt.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(n){if(typeof n!="symbol"){var i=this.attributes[n];return i}}},{key:"hasAttribute",value:function(n){return this.getAttributeNames().includes(n)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(n){this.setAttribute(n,null),delete this.attributes[n]}},{key:"setAttribute",value:function(n,i){this.attributes[n]=i}},{key:"getAttributeNS",value:function(n,i){throw new Error(ie)}},{key:"getAttributeNode",value:function(n){throw new Error(ie)}},{key:"getAttributeNodeNS",value:function(n,i){throw new Error(ie)}},{key:"hasAttributeNS",value:function(n,i){throw new Error(ie)}},{key:"removeAttributeNS",value:function(n,i){throw new Error(ie)}},{key:"removeAttributeNode",value:function(n){throw new Error(ie)}},{key:"setAttributeNS",value:function(n,i,a){throw new Error(ie)}},{key:"setAttributeNode",value:function(n){throw new Error(ie)}},{key:"setAttributeNodeNS",value:function(n){throw new Error(ie)}},{key:"toggleAttribute",value:function(n,i){throw new Error(ie)}}])}(xe);function zt(t){return!!(t!=null&&t.nodeName)}var Yj=tt.globalThis.Proxy?tt.globalThis.Proxy:function(){},ir=new xr(It.ATTR_MODIFIED,null,null,null,null,xr.MODIFICATION,null,null),vo=Nt(),Vj=qe(),de=function(t){function r(e){var n;return Z(this,r),n=At(this,r),n.isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=e,n.id=e.id||"",n.name=e.name||"",(e.className||e.class)&&(n.className=e.className||e.class),n.nodeName=e.type||U.GROUP,e.initialParsedStyle&&Object.assign(n.parsedStyle,e.initialParsedStyle),n.initAttributes(e.style),tt.enableStyleSyntax&&(n.style=new Yj({setProperty:function(a,o){n.setAttribute(a,o)},getPropertyValue:function(a){return n.getAttribute(a)},removeProperty:function(a){n.removeAttribute(a)},item:function(){return""}},{get:function(a,o){return a[o]!==void 0?a[o]:n.getAttribute(o)},set:function(a,o,s){return n.setAttribute(o,s),!0}})),n}return Et(r,t),K(r,[{key:"destroy",value:function(){Wl(r,"destroy",this)([]),this.getAnimations().forEach(function(n){n.cancel()})}},{key:"cloneNode",value:function(n,i){var a=Ot({},this.attributes);for(var o in a){var s=a[o];zt(s)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(a[o]=s.cloneNode(n)),i&&(a[o]=i(o,s))}var l=new this.constructor(Ot(Ot({},this.config),{},{style:a}));return l.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(c){if(!c.style.isMarker){var u=c.cloneNode(n);l.appendChild(u)}}),l}},{key:"initAttributes",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={forceUpdateGeometry:!0};tt.styleValueRegistry.processProperties(this,n,i),this.dirty()}},{key:"setAttribute",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;Kt(i)||(a||i!==this.attributes[n])&&(this.internalSetAttribute(n,i,{memoize:o}),Wl(r,"setAttribute",this)([n,i]))}},{key:"setAttributes",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.skipDispatchAttrModifiedEvent,o=a===void 0?!1:a,s,l;if(o||(s=Ot({},this.attributes),l=Ot({},this.parsedStyle)),tt.styleValueRegistry.processProperties(this,n,i),this.dirty(),!o)for(var c in n)this.dispatchAttrModifiedEvent(c,s[c],n[c],l[c])}},{key:"internalSetAttribute",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.attributes[n],s=this.parsedStyle[n];tt.styleValueRegistry.processProperties(this,ct({},n,i),a),this.dirty(),this.dispatchAttrModifiedEvent(n,o,i,s)}},{key:"dispatchAttrModifiedEvent",value:function(n,i,a,o){var s=this.parsedStyle[n];if(this.isConnected)if(ir.relatedNode=this,ir.prevValue=i,ir.newValue=a,ir.attrName=n,ir.prevParsedValue=o,ir.newParsedValue=s,this.isMutationObserved)this.dispatchEvent(ir);else{var l,c=((l=this.ownerDocument.defaultView.getConfig().future)===null||l===void 0?void 0:l.experimentalCancelEventPropagation)===!0;ir.target=this,this.ownerDocument.defaultView.dispatchEvent(ir,!0,c)}if(this.isCustomElement&&this.isConnected||!this.isCustomElement){var u,f;(u=(f=this).attributeChangedCallback)===null||u===void 0||u.call(f,n,i,a,o,s)}}},{key:"getBBox",value:function(){var n=this.getBounds(),i=n.getMin(),a=_t(i,2),o=a[0],s=a[1],l=n.getMax(),c=_t(l,2),u=c[0],f=c[1];return new Va(o,s,u-o,f-s)}},{key:"setOrigin",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return tt.sceneGraphService.setOrigin(this,cn(n,i,a,!1)),this}},{key:"getOrigin",value:function(){return tt.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return tt.sceneGraphService.setPosition(this,cn(n,i,a,!1)),this}},{key:"setLocalPosition",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return tt.sceneGraphService.setLocalPosition(this,cn(n,i,a,!1)),this}},{key:"translate",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return tt.sceneGraphService.translate(this,cn(n,i,a,!1)),this}},{key:"translateLocal",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return tt.sceneGraphService.translateLocal(this,cn(n,i,a,!1)),this}},{key:"getPosition",value:function(){return tt.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return tt.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(n,i,a){return this.scaleLocal(n,i,a)}},{key:"scaleLocal",value:function(n,i,a){return typeof n=="number"&&(i=i||n,a=a||n,n=cn(n,i,a,!1)),tt.sceneGraphService.scaleLocal(this,n),this}},{key:"setLocalScale",value:function(n,i,a){return typeof n=="number"&&(i=i||n,a=a||n,n=cn(n,i,a,!1)),tt.sceneGraphService.setLocalScale(this,n),this}},{key:"getLocalScale",value:function(){return tt.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return tt.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var n=Ku(vo,tt.sceneGraphService.getWorldTransform(this)),i=_t(n,3),a=i[2];return Tn(a)}},{key:"getLocalEulerAngles",value:function(){var n=Ku(vo,tt.sceneGraphService.getLocalRotation(this)),i=_t(n,3),a=i[2];return Tn(a)}},{key:"setEulerAngles",value:function(n){return tt.sceneGraphService.setEulerAngles(this,0,0,n),this}},{key:"setLocalEulerAngles",value:function(n){return tt.sceneGraphService.setLocalEulerAngles(this,0,0,n),this}},{key:"rotateLocal",value:function(n,i,a){return gt(i)&&gt(a)?tt.sceneGraphService.rotateLocal(this,0,0,n):tt.sceneGraphService.rotateLocal(this,n,i,a),this}},{key:"rotate",value:function(n,i,a){return gt(i)&&gt(a)?tt.sceneGraphService.rotate(this,0,0,n):tt.sceneGraphService.rotate(this,n,i,a),this}},{key:"setRotation",value:function(n,i,a,o){return tt.sceneGraphService.setRotation(this,n,i,a,o),this}},{key:"setLocalRotation",value:function(n,i,a,o){return tt.sceneGraphService.setLocalRotation(this,n,i,a,o),this}},{key:"setLocalSkew",value:function(n,i){return tt.sceneGraphService.setLocalSkew(this,n,i),this}},{key:"getRotation",value:function(){return tt.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return tt.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return tt.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return tt.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return tt.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(n){return tt.sceneGraphService.setLocalTransform(this,n),this}},{key:"resetLocalTransform",value:function(){tt.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(n,i){var a,o=(a=this.ownerDocument)===null||a===void 0?void 0:a.timeline;return o?o.play(this,n,i):null}},{key:"isVisible",value:function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"}},{key:"isInteractive",value:function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,Pt(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,Pt(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=a[0],l=a[1];return s?ys(s)?(Object.keys(s).forEach(function(c){n.setAttribute(c,s[c])}),this):a.length===2?(this.setAttribute(s,l),this):this.attributes[s]:this.attributes}},{key:"getMatrix",value:function(n){var i=n||this.getWorldTransform(),a=Xf(vo,i),o=_t(a,2),s=o[0],l=o[1],c=Gl(vo,i),u=_t(c,2),f=u[0],d=u[1],h=qf(Vj,i),p=Ku(vo,h),v=_t(p,3),g=v[0],y=v[2];return jN(g||y,s,l,f,d)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(n){var i=Eg(n),a=_t(i,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4];this.setEulerAngles(u).setPosition(o,s).setLocalScale(l,c)}},{key:"setLocalMatrix",value:function(n){var i=Eg(n),a=_t(i,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4];this.setLocalEulerAngles(u).setLocalPosition(o,s).setLocalScale(l,c)}},{key:"show",value:function(){this.forEach(function(n){n.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(n){n.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(n){return this.children[n]||null}},{key:"add",value:function(n,i){return this.appendChild(n,i)}},{key:"set",value:function(n,i){this.config[n]=i}},{key:"get",value:function(n){return this.config[n]}},{key:"moveTo",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(n,i,a),this}},{key:"move",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(n,i,a),this}},{key:"setZIndex",value:function(n){return this.style.zIndex=n,this}}])}(Hj);de.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var Or=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Z(this,r),At(this,r,[Ot({type:U.CIRCLE},e)])}return Et(r,t),K(r)}(de);Or.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var Uj=["style"],la=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=hr(n,Uj);return Z(this,r),e=At(this,r,[Ot({style:i},a)]),e.isCustomElement=!0,e}return Et(r,t),K(r)}(de);la.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var uu=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Z(this,r),At(this,r,[Ot({type:U.ELLIPSE},e)])}return Et(r,t),K(r)}(de);uu.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var Xj=function(t){function r(){return Z(this,r),At(this,r,[{type:U.FRAGMENT}])}return Et(r,t),K(r)}(de);Xj.PARSED_STYLE_LIST=new Set(["class","className"]);var Ve=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Z(this,r),At(this,r,[Ot({type:U.GROUP},e)])}return Et(r,t),K(r)}(de);Ve.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var qj=["style"],ca=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=hr(n,qj);return Z(this,r),e=At(this,r,[Ot({type:U.HTML,style:i},a)]),e.cullable.enable=!1,e}return Et(r,t),K(r,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var n=ur(Zt(),this.parentNode.getWorldTransform()),i=this.getBounds();if(!ze.isEmpty(i)){var a=new ze;return a.setFromTransformedAABB(i,n),a}}return this.getBounds()}}])}(de);ca.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var fu=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Z(this,r),At(this,r,[Ot({type:U.IMAGE},e)])}return Et(r,t),K(r)}(de);fu.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var Kj=["style"],ua=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=hr(n,Kj);Z(this,r),e=At(this,r,[Ot({type:U.LINE,style:Ot({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a)]),e.markerStartAngle=0,e.markerEndAngle=0;var o=e.parsedStyle,s=o.markerStart,l=o.markerEnd;return s&&zt(s)&&(e.markerStartAngle=s.getLocalEulerAngles(),e.appendChild(s)),l&&zt(l)&&(e.markerEndAngle=l.getLocalEulerAngles(),e.appendChild(l)),e.transformMarker(!0),e.transformMarker(!1),e}return Et(r,t),K(r,[{key:"attributeChangedCallback",value:function(n,i,a,o,s){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&zt(o)&&(this.markerStartAngle=0,o.remove()),s&&zt(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"&&(o&&zt(o)&&(this.markerEndAngle=0,o.remove()),s&&zt(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1)))}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=i.x1,u=i.x2,f=i.y1,d=i.y2,h=n?a:o;if(!(!h||!zt(h))){var p=0,v,g,y,m,b,x;n?(y=c,m=f,v=u-c,g=d-f,b=s||0,x=this.markerStartAngle):(y=u,m=d,v=c-u,g=f-d,b=l||0,x=this.markerEndAngle),p=Math.atan2(g,v),h.setLocalEulerAngles(p*180/Math.PI+x),h.setLocalPosition(y+Math.cos(p)*b,m+Math.sin(p)*b)}}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle,o=a.x1,s=a.y1,l=a.x2,c=a.y2,u=z1(o,s,l,c,n),f=u.x,d=u.y,h=ke(Nt(),Ht(f,d,0),i?this.getWorldTransform():this.getLocalTransform());return new Qe(h[0],h[1])}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(n/this.getTotalLength(),i)}},{key:"getTotalLength",value:function(){var n=this.parsedStyle,i=n.x1,a=n.y1,o=n.x2,s=n.y2;return B1(i,a,o,s)}}])}(de);ua.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var Zj=["style"],He=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=hr(n,Zj);Z(this,r),e=At(this,r,[Ot({type:U.PATH,style:i,initialParsedStyle:{miterLimit:4,d:Ot({},H1)}},a)]),e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var o=e.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&zt(s)&&(e.markerStartAngle=s.getLocalEulerAngles(),e.appendChild(s)),c&&zt(c)&&e.placeMarkerMid(c),l&&zt(l)&&(e.markerEndAngle=l.getLocalEulerAngles(),e.appendChild(l)),e.transformMarker(!0),e.transformMarker(!1),e}return Et(r,t),K(r,[{key:"attributeChangedCallback",value:function(n,i,a,o,s){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&zt(o)&&(this.markerStartAngle=0,o.remove()),s&&zt(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"?(o&&zt(o)&&(this.markerEndAngle=0,o.remove()),s&&zt(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=n?a:o;if(!(!c||!zt(c))){var u=0,f,d,h,p,v,g;if(n){var y=this.getStartTangent(),m=_t(y,2),b=m[0],x=m[1];h=x[0],p=x[1],f=b[0]-x[0],d=b[1]-x[1],v=s||0,g=this.markerStartAngle}else{var O=this.getEndTangent(),w=_t(O,2),_=w[0],S=w[1];h=S[0],p=S[1],f=_[0]-S[0],d=_[1]-S[1],v=l||0,g=this.markerEndAngle}u=Math.atan2(d,f),c.setLocalEulerAngles(u*180/Math.PI+g),c.setLocalPosition(h+Math.cos(u)*v,p+Math.sin(u)*v)}}},{key:"placeMarkerMid",value:function(n){var i=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(u){u.remove()}),n&&zt(n))for(var a=1;a<i.length-1;a++){var o=_t(i[a].currentPoint,2),s=o[0],l=o[1],c=a===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(s,l)}}},{key:"getTotalLength",value:function(){return hd(this)}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.d.absolutePath,o=Q2(a,n),s=o.x,l=o.y,c=ke(Nt(),Ht(s,l,0),i?this.getWorldTransform():this.getLocalTransform());return new Qe(c[0],c[1])}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(n*hd(this),i)}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.d.segments,i=[];if(n.length>1){var a=n[0].currentPoint,o=n[1].currentPoint,s=n[1].startTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.d.segments,i=n.length,a=[];if(i>1){var o=n[i-2].currentPoint,s=n[i-1].currentPoint,l=n[i-1].endTangent;a=[],l?(a.push([s[0]-l[0],s[1]-l[1]]),a.push([s[0],s[1]])):(a.push([o[0],o[1]]),a.push([s[0],s[1]]))}return a}}])}(de);He.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var Qj=["style"],fa=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=hr(n,Qj);Z(this,r),e=At(this,r,[Ot({type:U.POLYGON,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a)]),e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var o=e.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&zt(s)&&(e.markerStartAngle=s.getLocalEulerAngles(),e.appendChild(s)),c&&zt(c)&&e.placeMarkerMid(c),l&&zt(l)&&(e.markerEndAngle=l.getLocalEulerAngles(),e.appendChild(l)),e.transformMarker(!0),e.transformMarker(!1),e}return Et(r,t),K(r,[{key:"attributeChangedCallback",value:function(n,i,a,o,s){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&zt(o)&&(this.markerStartAngle=0,o.remove()),s&&zt(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"?(o&&zt(o)&&(this.markerEndAngle=0,o.remove()),s&&zt(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=i.points,u=c||{},f=u.points,d=n?a:o;if(!(!d||!zt(d)||!f)){var h=0,p,v,g,y,m,b;if(g=f[0][0],y=f[0][1],n)p=f[1][0]-f[0][0],v=f[1][1]-f[0][1],m=s||0,b=this.markerStartAngle;else{var x=f.length;this.parsedStyle.isClosed?(p=f[x-1][0]-f[0][0],v=f[x-1][1]-f[0][1]):(g=f[x-1][0],y=f[x-1][1],p=f[x-2][0]-f[x-1][0],v=f[x-2][1]-f[x-1][1]),m=l||0,b=this.markerEndAngle}h=Math.atan2(v,p),d.setLocalEulerAngles(h*180/Math.PI+b),d.setLocalPosition(g+Math.cos(h)*m,y+Math.sin(h)*m)}}},{key:"placeMarkerMid",value:function(n){var i=this.parsedStyle.points,a=i||{},o=a.points;if(this.markerMidList.forEach(function(f){f.remove()}),this.markerMidList=[],n&&zt(n)&&o)for(var s=1;s<(this.parsedStyle.isClosed?o.length:o.length-1);s++){var l=o[s][0],c=o[s][1],u=s===1?n:n.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(l,c)}}}])}(de);fa.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var Jj=["style"],du=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.style,i=hr(e,Jj);return Z(this,r),At(this,r,[Ot({type:U.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i)])}return Et(r,t),K(r,[{key:"getTotalLength",value:function(){return FR(this)}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(n/this.getTotalLength(),i)}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],s=0,l,c,u=this.getTotalLength();a.forEach(function(y,m){a[m+1]&&(l=[0,0],l[0]=s/u,c=B1(y[0],y[1],a[m+1][0],a[m+1][1]),s+=c,l[1]=s/u,o.push(l))}),this.parsedStyle.points.segments=o}var f=0,d=0;this.parsedStyle.points.segments.forEach(function(y,m){n>=y[0]&&n<=y[1]&&(f=(n-y[0])/(y[1]-y[0]),d=m)});var h=z1(a[d][0],a[d][1],a[d+1][0],a[d+1][1],f),p=h.x,v=h.y,g=ke(Nt(),Ht(p,v,0),i?this.getWorldTransform():this.getLocalTransform());return new Qe(g[0],g[1])}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.points.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.points.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a}}])}(fa);du.PARSED_STYLE_LIST=new Set([].concat(Pt(fa.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var wi=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Z(this,r),At(this,r,[Ot({type:U.RECT},e)])}return Et(r,t),K(r)}(de);wi.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var tD=["style"],jn=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.style,i=hr(e,tD);return Z(this,r),At(this,r,[Ot({type:U.TEXT,style:Ot({fill:"black"},n)},i)])}return Et(r,t),K(r,[{key:"getComputedTextLength",value:function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(de);jn.PARSED_STYLE_LIST=new Set([].concat(Pt(de.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textDecorationThickness","textPathSide","textPathStartOffset","metrics","dx","dy"]));var eD=function(){function t(){Z(this,t),this.registry={},this.define(U.CIRCLE,Or),this.define(U.ELLIPSE,uu),this.define(U.RECT,wi),this.define(U.IMAGE,fu),this.define(U.LINE,ua),this.define(U.GROUP,Ve),this.define(U.PATH,He),this.define(U.POLYGON,fa),this.define(U.POLYLINE,du),this.define(U.TEXT,jn),this.define(U.HTML,ca)}return K(t,[{key:"define",value:function(e,n){this.registry[e]=n}},{key:"get",value:function(e){return this.registry[e]}}])}(),Kh={number:function(r){return new ae(r)},percent:function(r){return new ae(r,"%")},px:function(r){return new ae(r,"px")},em:function(r){return new ae(r,"em")},rem:function(r){return new ae(r,"rem")},deg:function(r){return new ae(r,"deg")},grad:function(r){return new ae(r,"grad")},rad:function(r){return new ae(r,"rad")},turn:function(r){return new ae(r,"turn")},s:function(r){return new ae(r,"s")},ms:function(r){return new ae(r,"ms")},registerProperty:function(r){var e=r.name,n=r.inherits,i=r.interpolable,a=r.initialValue,o=r.syntax;tt.styleValueRegistry.registerMetadata({n:e,inh:n,int:i,d:a,syntax:o})},registerLayout:function(r,e){tt.layoutRegistry.registerLayout(r,e)}},nD=function(t){function r(){var e;Z(this,r),e=At(this,r),e.defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new tt.AnimationTimeline(e)}catch{}var n={};return Vh.forEach(function(i){var a=i.n,o=i.inh,s=i.d;o&&s&&(n[a]=Ge(s)?s(U.GROUP):s)}),e.documentElement=new Ve({id:"g-root",style:n}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return Et(r,t),K(r,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(n,i){if(n==="svg")return this.documentElement;var a=this.defaultView.customElements.get(n);a||(console.warn("Unsupported tagName: ",n),a=n==="tspan"?jn:Ve);var o=new a(i);return o.ownerDocument=this,o}},{key:"createElementNS",value:function(n,i,a){return this.createElement(i,a)}},{key:"cloneNode",value:function(n){throw new Error(ie)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(n,i,a,o){var s=[],l=function(u){if(!(!u.isInteractive()||u.isCulled())){var f=u.parsedStyle.pointerEvents,d=f===void 0?"auto":f,h=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(d);if(!h||u.isVisible()){var p=u.getTransformedGeometryBounds(!0);p&&!ze.isEmpty(p)&&p.max[0]>=n&&p.min[0]<=a&&p.max[1]>=i&&p.min[1]<=o&&s.push(u)}u.childNodes&&u.childNodes.forEach(function(v){v instanceof de&&l(v)})}};return l(this.documentElement),s.sort(function(c,u){return u.sortable.renderOrder-c.sortable.renderOrder}),s}},{key:"elementFromPointSync",value:function(n,i){var a=this.defaultView.canvas2Viewport({x:n,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),c=l.width,u=l.height;if(o<0||s<0||o>c||s>u)return null;var f=this.defaultView.viewport2Client({x:o,y:s}),d=f.x,h=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:i,viewportX:o,viewportY:s,clientX:d,clientY:h},picked:[]}),v=p.picked;return v&&v[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var e=fi(rn().mark(function i(a,o){var s,l,c,u,f,d,h,p,v,g,y;return rn().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,c=s.y,u=this.defaultView.getConfig(),f=u.width,d=u.height,!(l<0||c<0||l>f||c>d)){m.next=1;break}return m.abrupt("return",null);case 1:return h=this.defaultView.viewport2Client({x:l,y:c}),p=h.x,v=h.y,m.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:a,y:o,viewportX:l,viewportY:c,clientX:p,clientY:v},picked:[]});case 2:return g=m.sent,y=g.picked,m.abrupt("return",y&&y[0]||this.documentElement);case 3:case"end":return m.stop()}},i,this)}));function n(i,a){return e.apply(this,arguments)}return n}()},{key:"elementsFromPointSync",value:function(n,i){var a=this.defaultView.canvas2Viewport({x:n,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),c=l.width,u=l.height;if(o<0||s<0||o>c||s>u)return[];var f=this.defaultView.viewport2Client({x:o,y:s}),d=f.x,h=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:i,viewportX:o,viewportY:s,clientX:d,clientY:h},picked:[]}),v=p.picked;return v[v.length-1]!==this.documentElement&&v.push(this.documentElement),v}},{key:"elementsFromPoint",value:function(){var e=fi(rn().mark(function i(a,o){var s,l,c,u,f,d,h,p,v,g,y;return rn().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,c=s.y,u=this.defaultView.getConfig(),f=u.width,d=u.height,!(l<0||c<0||l>f||c>d)){m.next=1;break}return m.abrupt("return",[]);case 1:return h=this.defaultView.viewport2Client({x:l,y:c}),p=h.x,v=h.y,m.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:a,y:o,viewportX:l,viewportY:c,clientX:p,clientY:v},picked:[]});case 2:return g=m.sent,y=g.picked,y[y.length-1]!==this.documentElement&&y.push(this.documentElement),m.abrupt("return",y);case 3:case"end":return m.stop()}},i,this)}));function n(i,a){return e.apply(this,arguments)}return n}()},{key:"appendChild",value:function(n,i){throw new Error(ma)}},{key:"insertBefore",value:function(n,i){throw new Error(ma)}},{key:"removeChild",value:function(n,i){throw new Error(ma)}},{key:"replaceChild",value:function(n,i,a){throw new Error(ma)}},{key:"append",value:function(){throw new Error(ma)}},{key:"prepend",value:function(){throw new Error(ma)}},{key:"getElementById",value:function(n){return this.documentElement.getElementById(n)}},{key:"getElementsByName",value:function(n){return this.documentElement.getElementsByName(n)}},{key:"getElementsByTagName",value:function(n){return this.documentElement.getElementsByTagName(n)}},{key:"getElementsByClassName",value:function(n){return this.documentElement.getElementsByClassName(n)}},{key:"querySelector",value:function(n){return this.documentElement.querySelector(n)}},{key:"querySelectorAll",value:function(n){return this.documentElement.querySelectorAll(n)}},{key:"find",value:function(n){return this.documentElement.find(n)}},{key:"findAll",value:function(n){return this.documentElement.findAll(n)}}])}(xe),mO=function(){function t(r){Z(this,t),this.strategies=r}return K(t,[{key:"apply",value:function(e){var n=e.config,i=e.camera,a=e.renderingService,o=e.renderingContext,s=this.strategies;a.hooks.cull.tap(t.tag,function(l){if(l){var c,u=l.cullable;if(s.length===0?u.visible=o.unculledEntities.indexOf(l.entity)>-1:u.visible=s.every(function(d){return d.isVisible(i,l)}),!l.isCulled()&&l.isVisible())return l;var f=((c=n.future)===null||c===void 0?void 0:c.experimentalCancelEventPropagation)===!0;return l.dispatchEvent(new Qt(It.CULLED),f,f),null}return l}),a.hooks.afterRender.tap(t.tag,function(l){l.cullable.visibilityPlaneMask=-1})}}])}();mO.tag="Culling";var bO=function(){function t(){var r=this;Z(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new yd(null),this.rootWheelEvent=new md(null),this.onPointerMove=function(e){var n,i=(n=r.context.renderingContext.root)===null||n===void 0||(n=n.ownerDocument)===null||n===void 0?void 0:n.defaultView;if(!(i.supportsTouchEvents&&e.pointerType==="touch")){var a=r.normalizeToPointerEvent(e,i),o=Qr(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,c=r.bootstrapEvent(r.rootPointerEvent,l,i,e);r.context.eventService.mapEvent(c)}}catch(u){o.e(u)}finally{o.f()}r.setCursor(r.context.eventService.cursor)}},this.onClick=function(e){var n,i=(n=r.context.renderingContext.root)===null||n===void 0||(n=n.ownerDocument)===null||n===void 0?void 0:n.defaultView,a=r.normalizeToPointerEvent(e,i),o=Qr(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,c=r.bootstrapEvent(r.rootPointerEvent,l,i,e);r.context.eventService.mapEvent(c)}}catch(u){o.e(u)}finally{o.f()}r.setCursor(r.context.eventService.cursor)}}return K(t,[{key:"apply",value:function(e){var n=this;this.context=e;var i=e.renderingService,a=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var s=n.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}),l=s.picked;return l[0]||null}),i.hooks.pointerWheel.tap(t.tag,function(o){var s=n.normalizeWheelEvent(o);n.context.eventService.mapEvent(s)}),i.hooks.pointerDown.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=n.normalizeToPointerEvent(o,a);if(n.autoPreventDefault&&s[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}var c=Qr(s),u;try{for(c.s();!(u=c.n()).done;){var f=u.value,d=n.bootstrapEvent(n.rootPointerEvent,f,a,o);n.context.eventService.mapEvent(d)}}catch(h){c.e(h)}finally{c.f()}n.setCursor(n.context.eventService.cursor)}}),i.hooks.pointerUp.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=n.context.contextService.getDomElement(),l=n.context.eventService.isNativeEventFromCanvas(s,o),c=l?"":"outside",u=n.normalizeToPointerEvent(o,a),f=Qr(u),d;try{for(f.s();!(d=f.n()).done;){var h=d.value,p=n.bootstrapEvent(n.rootPointerEvent,h,a,o);p.type+=c,n.context.eventService.mapEvent(p)}}catch(v){f.e(v)}finally{f.f()}n.setCursor(n.context.eventService.cursor)}}),i.hooks.pointerMove.tap(t.tag,this.onPointerMove),i.hooks.pointerOver.tap(t.tag,this.onPointerMove),i.hooks.pointerOut.tap(t.tag,this.onPointerMove),i.hooks.click.tap(t.tag,this.onClick),i.hooks.pointerCancel.tap(t.tag,function(o){var s=n.normalizeToPointerEvent(o,a),l=Qr(s),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,f=n.bootstrapEvent(n.rootPointerEvent,u,a,o);n.context.eventService.mapEvent(f)}}catch(d){l.e(d)}finally{l.f()}n.setCursor(n.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(e,n,i,a){e.view=i,e.originalEvent=null,e.nativeEvent=a,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n);var o=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),s=o.x,l=o.y;e.viewport.x=s,e.viewport.y=l;var c=this.context.eventService.viewport2Canvas(e.viewport),u=c.x,f=c.y;return e.canvas.x=u,e.canvas.y=f,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=a.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=DI[e.type]||e.type),e}},{key:"normalizeWheelEvent",value:function(e){var n=this.rootWheelEvent;this.transferMouseData(n,e),n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ;var i=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),a=i.x,o=i.y;n.viewport.x=a,n.viewport.y=o;var s=this.context.eventService.viewport2Canvas(n.viewport),l=s.x,c=s.y;return n.canvas.x=l,n.canvas.y=c,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=e,n.type=e.type,n}},{key:"transferMouseData",value:function(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=gd.now(),e.type=n.type,e.altKey=n.altKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey,e.ctrlKey=n.ctrlKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.screen.x=n.screenX,e.screen.y=n.screenY,e.relatedTarget=null}},{key:"setCursor",value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(e,n){var i=[];if(n.isTouchEvent(e))for(var a=0;a<e.changedTouches.length;a++){var o=e.changedTouches[a];Kt(o.button)&&(o.button=0),Kt(o.buttons)&&(o.buttons=1),Kt(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),Kt(o.width)&&(o.width=o.radiusX||1),Kt(o.height)&&(o.height=o.radiusY||1),Kt(o.tiltX)&&(o.tiltX=0),Kt(o.tiltY)&&(o.tiltY=0),Kt(o.pointerType)&&(o.pointerType="touch"),Kt(o.pointerId)&&(o.pointerId=o.identifier||0),Kt(o.pressure)&&(o.pressure=o.force||.5),Kt(o.twist)&&(o.twist=0),Kt(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,i.push(o)}else if(n.isMouseEvent(e)){var s=e;Kt(s.isPrimary)&&(s.isPrimary=!0),Kt(s.width)&&(s.width=1),Kt(s.height)&&(s.height=1),Kt(s.tiltX)&&(s.tiltX=0),Kt(s.tiltY)&&(s.tiltY=0),Kt(s.pointerType)&&(s.pointerType="mouse"),Kt(s.pointerId)&&(s.pointerId=jI),Kt(s.pressure)&&(s.pressure=.5),Kt(s.twist)&&(s.twist=0),Kt(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,i.push(s)}else i.push(e);return i}}])}();bO.tag="Event";var rD=[U.CIRCLE,U.ELLIPSE,U.IMAGE,U.RECT,U.LINE,U.POLYLINE,U.POLYGON,U.TEXT,U.PATH,U.HTML],iD=function(){function t(){Z(this,t)}return K(t,[{key:"isVisible",value:function(e,n){var i,a=n.cullable;if(!a.enable)return!0;var o=n.getRenderBounds();if(ze.isEmpty(o))return!1;var s=e.getFrustum(),l=(i=n.parentNode)===null||i===void 0||(i=i.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,o,l||ya.INDETERMINATE,s.planes),a.visible=a.visibilityPlaneMask!==ya.OUTSIDE,a.visible}},{key:"computeVisibilityWithPlaneMask",value:function(e,n,i,a){if(i===ya.OUTSIDE||i===ya.INSIDE)return i;for(var o=ya.INSIDE,s=rD.indexOf(e.nodeName)>-1,l=0,c=a.length;l<c;++l){var u=1<<l;if(i&u&&!(s&&(l===4||l===5))){var f=a[l],d=f.normal,h=f.distance;if(Nr(d,n.getPositiveFarPoint(a[l]))+h<0)return ya.OUTSIDE;Nr(d,n.getNegativeFarPoint(a[l]))+h<0&&(o|=u)}}return o}}])}(),xO=function(){function t(){Z(this,t),this.mutationRecords=[],this.isFirstTimeRendering=!0,this.isFirstTimeRenderingFinished=!1}return K(t,[{key:"apply",value:function(e){var n=this,i,a=e.renderingService,o=e.renderingContext,s=o.root.ownerDocument.defaultView,l=function(p){a.dirty()},c=function(p){var v,g=p.detail;(v=n.mutationRecords).push.apply(v,Pt(g)),a.dirty()},u=function(p){var v=p.target;tt.enableSizeAttenuation&&tt.styleValueRegistry.updateSizeAttenuation(v,s.getCamera().getZoom())},f=function(p){var v=p.target;tt.sceneGraphService.dirtyToRoot(v),a.dirty()};a.hooks.init.tap(t.tag,function(){s.addEventListener(It.MOUNTED,u),s.addEventListener(It.UNMOUNTED,f),s.addEventListener(It.ATTR_MODIFIED,l),s.addEventListener(It.BOUNDS_CHANGED,c)}),a.hooks.destroy.tap(t.tag,function(){s.removeEventListener(It.MOUNTED,u),s.removeEventListener(It.UNMOUNTED,f),s.removeEventListener(It.ATTR_MODIFIED,l),s.removeEventListener(It.BOUNDS_CHANGED,c),n.mutationRecords=[]});var d=(i=tt.globalThis.requestIdleCallback)!==null&&i!==void 0?i:Xh.bind(tt.globalThis);a.hooks.endFrame.tap(t.tag,function(){n.isFirstTimeRendering&&(n.isFirstTimeRendering=!1,d(function(){n.isFirstTimeRenderingFinished=!0})),n.mutationRecords=[]})}}])}();xO.tag="Prepare";var Mn=function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t}({}),ay=500,aD=.1,oD=1e3,Zs=new Qt(It.MOUNTED),Qs=new Qt(It.UNMOUNTED),sf=new Qt(Mn.BEFORE_RENDER),oy=new Qt(Mn.RERENDER),lf=new Qt(Mn.AFTER_RENDER),OO=function(t){function r(e){var n;Z(this,r),n=At(this,r),n.Element=de,n.inited=!1,n.context={};var i=e.container,a=e.canvas,o=e.renderer,s=e.width,l=e.height,c=e.background,u=e.cursor,f=e.supportsMutipleCanvasesInOneContainer,d=e.cleanUpOnDestroy,h=d===void 0?!0:d,p=e.offscreenCanvas,v=e.devicePixelRatio,g=e.requestAnimationFrame,y=e.cancelAnimationFrame,m=e.createImage,b=e.supportsTouchEvents,x=e.supportsPointerEvents,O=e.isTouchEvent,w=e.isMouseEvent,_=e.dblClickSpeed,S=s,k=l,E=v||Uh&&window.devicePixelRatio||1;return E=E>=1?Math.ceil(E):1,a&&(S=s||RI(a)||a.width/E,k=l||II(a)||a.height/E),n.customElements=new eD,n.devicePixelRatio=E,n.requestAnimationFrame=g??Xh.bind(tt.globalThis),n.cancelAnimationFrame=y??hO.bind(tt.globalThis),n.createImage=m??function(){return new window.Image},n.supportsTouchEvents=b??"ontouchstart"in tt.globalThis,n.supportsPointerEvents=x??!!tt.globalThis.PointerEvent,n.isTouchEvent=O??function(A){return n.supportsTouchEvents&&A instanceof tt.globalThis.TouchEvent},n.isMouseEvent=w??function(A){return!tt.globalThis.MouseEvent||A instanceof tt.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(A instanceof tt.globalThis.PointerEvent))},p&&(tt.offscreenCanvas=p),n.document=new nD,n.document.defaultView=n,f||MI(i,n,h),n.initRenderingContext(Ot(Ot({},e),{},{width:S,height:k,background:c??"transparent",cursor:u??"default",cleanUpOnDestroy:h,devicePixelRatio:E,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,createImage:n.createImage,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:_??200})),n.initDefaultCamera(S,k,o.clipSpaceNearZ),n.initRenderer(o,!0),n}return Et(r,t),K(r,[{key:"initRenderingContext",value:function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(n,i,a){var o=this,s=new tt.CameraContribution;s.clipSpaceNearZ=a,s.setType(re.EXPLORING,ld.DEFAULT).setPosition(n/2,i/2,ay).setFocalPoint(n/2,i/2,0).setOrthographic(n/-2,n/2,i/2,i/-2,aD,oD),s.canvas=this,s.eventEmitter.on(W1.UPDATED,function(){o.context.renderingContext.renderReasons.add(La.CAMERA_CHANGED),tt.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=s}},{key:"updateSizeAttenuation",value:function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(i){tt.styleValueRegistry.updateSizeAttenuation(i,n)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(i){n.resolveReadyPromise=function(){i(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1?arguments[1]:void 0;$e.clearCache();var o=((n=this.getConfig().future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation)===!0;a||this.dispatchEvent(new Qt(Mn.BEFORE_DESTROY),o,o),this.frameId&&this.cancelAnimationFrame(this.frameId);var s=this.getRoot();i&&(this.unmountChildren(s),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),a||this.dispatchEvent(new Qt(Mn.AFTER_DESTROY),o,o);var l=function(u){u.currentTarget=null,u.manager=null,u.target=null,u.relatedNode=null};l(Zs),l(Qs),l(sf),l(oy),l(lf),l(ir),l(bd),l(xd),l(yO),tt.textService.clearCache()}},{key:"changeSize",value:function(n,i){this.resize(n,i)}},{key:"resize",value:function(n,i){var a,o=this.context.config;o.width=n,o.height=i,this.getContextService().resize(n,i);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(n/2,i/2,ay).setFocalPoint(n/2,i/2,0),l===kn.ORTHOGRAPHIC?s.setOrthographic(n/-2,n/2,i/2,i/-2,s.getNear(),s.getFar()):s.setAspect(n/i);var c=((a=o.future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;this.dispatchEvent(new Qt(Mn.RESIZE,{width:n,height:i}),c,c)}},{key:"appendChild",value:function(n,i){return this.document.documentElement.appendChild(n,i)}},{key:"insertBefore",value:function(n,i){return this.document.documentElement.insertBefore(n,i)}},{key:"removeChild",value:function(n){return this.document.documentElement.removeChild(n)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(n){var i,a=this;n&&(sf.detail=n,lf.detail=n);var o=((i=this.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;this.dispatchEvent(sf,o,o);var s=this.getRenderingService();s.render(this,n,function(){a.dispatchEvent(oy,o,o)}),this.dispatchEvent(lf,o,o)}},{key:"run",value:function(){var n=this,i=function(o,s){n.render(s),n.frameId=n.requestAnimationFrame(i)};i()}},{key:"initRenderer",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new bO,new xO,new mO([new iD])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService(Ot(Ot({},tt),this.context)),this.context.renderingService=new gj(tt,this.context),this.context.eventService=new vj(tt,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,a,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,a)}).catch(function(o){console.error(o)})}},{key:"initRenderingService",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){var s;i.inited=!0;var l=((s=i.getConfig().future)===null||s===void 0?void 0:s.experimentalCancelEventPropagation)===!0;a?o?i.requestAnimationFrame(function(){i.dispatchEvent(new Qt(Mn.READY),l,l)}):i.dispatchEvent(new Qt(Mn.READY),l,l):i.dispatchEvent(new Qt(Mn.RENDERER_CHANGED),l,l),i.readyPromise&&i.resolveReadyPromise(),a||i.getRoot().forEach(function(c){var u,f;(u=(f=c).dirty)===null||u===void 0||u.call(f,!0,!0)}),i.mountChildren(i.getRoot()),n.getConfig().enableAutoRendering&&i.run()})}},{key:"loadRendererContainerModule",value:function(n){var i=this,a=n.getPlugins();a.forEach(function(o){o.context=i.context,o.init(tt)})}},{key:"setRenderer",value:function(n){var i=this.getConfig();if(i.renderer!==n){var a=i.renderer;i.renderer=n,this.destroy(!1,!0),Pt(a?.getPlugins()||[]).reverse().forEach(function(o){o.destroy(tt)}),this.initRenderer(n)}}},{key:"setCursor",value:function(n){var i=this.getConfig();i.cursor=n,this.getContextService().applyCursorStyle(n)}},{key:"unmountChildren",value:function(n){var i=this;if(n.childNodes.forEach(function(s){i.unmountChildren(s)}),this.inited){if(n.isMutationObserved)n.dispatchEvent(Qs);else{var a,o=((a=this.getConfig().future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;Qs.target=n,this.dispatchEvent(Qs,!0,o)}n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1}n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()}},{key:"mountChildren",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:oc(n);if(this.inited){if(!n.isConnected&&(n.ownerDocument=this.document,n.isConnected=!0,!a))if(n.isMutationObserved)n.dispatchEvent(Zs);else{var o,s=((o=this.getConfig().future)===null||o===void 0?void 0:o.experimentalCancelEventPropagation)===!0;Zs.target=n,this.dispatchEvent(Zs,!0,s)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName);n.childNodes.forEach(function(l){i.mountChildren(l,a)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()}},{key:"mountFragment",value:function(n){this.mountChildren(n,!1)}},{key:"client2Viewport",value:function(n){return this.getEventService().client2Viewport(n)}},{key:"viewport2Client",value:function(n){return this.getEventService().viewport2Client(n)}},{key:"viewport2Canvas",value:function(n){return this.getEventService().viewport2Canvas(n)}},{key:"canvas2Viewport",value:function(n){return this.getEventService().canvas2Viewport(n)}},{key:"getPointByClient",value:function(n,i){return this.client2Viewport({x:n,y:i})}},{key:"getClientByPoint",value:function(n,i){return this.viewport2Client({x:n,y:i})}}])}(gO),sD=function(){function t(){Z(this,t),this.cacheStore=new Map}return K(t,[{key:"onRefAdded",value:function(e){}},{key:"has",value:function(e){return this.cacheStore.has(e)}},{key:"put",value:function(e,n,i){return this.cacheStore.has(e)?!1:(this.cacheStore.set(e,{value:n,counter:new Set([i.entity])}),this.onRefAdded(i),!0)}},{key:"get",value:function(e,n){var i=this.cacheStore.get(e);return i?(i.counter.has(n.entity)||(i.counter.add(n.entity),this.onRefAdded(n)),i.value):null}},{key:"update",value:function(e,n,i){var a=this.cacheStore.get(e);return a?(a.value=Ot(Ot({},a.value),n),a.counter.has(i.entity)||(a.counter.add(i.entity),this.onRefAdded(i)),!0):!1}},{key:"release",value:function(e,n){var i=this.cacheStore.get(e);return i?(i.counter.delete(n.entity),i.counter.size<=0&&this.cacheStore.delete(e),!0):!1}},{key:"releaseRef",value:function(e){var n=this;Array.from(this.cacheStore.keys()).forEach(function(i){n.release(i,e)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),cf=[],uf=[],Od=function(){function t(){Z(this,t)}return K(t,null,[{key:"stop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;t.rafId&&(e.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;cf.length<=0&&uf.length<=0||(uf.forEach(function(n){return n()}),uf=cf.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=e.requestAnimationFrame(function(){t.executeTask(e)}))}},{key:"sliceImage",value:function(e,n,i,a){for(var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t.api,l=e.naturalWidth||e.width,c=e.naturalHeight||e.height,u=n-o,f=i-o,d=Math.ceil(l/u),h=Math.ceil(c/f),p={tileSize:[n,i],gridSize:[h,d],tiles:Array(h).fill(null).map(function(){return Array(d).fill(null)})},v=function(m){for(var b=function(w){cf.push(function(){var _=w*u,S=m*f,k=[Math.min(n,l-_),Math.min(i,c-S)],E=k[0],A=k[1],T=s.createCanvas();T.width=n,T.height=i;var P=T.getContext("2d");P.drawImage(e,_,S,E,A,0,0,E,A),p.tiles[m][w]={x:_,y:S,tileX:w,tileY:m,data:T},a()})},x=0;x<d;x++)b(x)},g=0;g<h;g++)v(g);return t.stop(),t.executeTask(),p}}])}();Od.TASK_NUM_PER_FRAME=10;var mn=new sD;mn.onRefAdded=function(r){var e=this;r.addEventListener(It.DESTROY,function(){e.releaseRef(r)},{once:!0})};var Zh=function(){function t(r,e){Z(this,t),this.gradientCache={},this.patternCache={},this.context=r,this.runtime=e}return K(t,[{key:"getImageSync",value:function(e,n,i){var a=pe(e)?e:e.src;if(mn.has(a)){var o=mn.get(a,n);if(o.img.complete)return i?.(o),o}return this.getOrCreateImage(e,n).then(function(s){i?.(s)}).catch(function(s){console.error(s)}),null}},{key:"getOrCreateImage",value:function(e,n){var i=this,a=pe(e)?e:e.src;if(!pe(e)&&!mn.has(a)){var o={img:e,size:[e.naturalWidth||e.width,e.naturalHeight||e.height],tileSize:Js(e)};mn.put(a,o,n)}if(mn.has(a)){var s=mn.get(a,n);return s.img.complete?Promise.resolve(s):new Promise(function(l,c){s.img.addEventListener("load",function(){s.size=[s.img.naturalWidth||s.img.width,s.img.naturalHeight||s.img.height],s.tileSize=Js(s.img),l(s)}),s.img.addEventListener("error",function(u){c(u)})})}return new Promise(function(l,c){var u=i.context.config.createImage();if(u){var f={img:u,size:[0,0],tileSize:Js(u)};mn.put(a,f,n),u.onload=function(){f.size=[u.naturalWidth||u.width,u.naturalHeight||u.height],f.tileSize=Js(f.img),l(f)},u.onerror=function(d){c(d)},u.crossOrigin="Anonymous",u.src=a}})}},{key:"createDownSampledImage",value:function(){var r=fi(rn().mark(function n(i,a){var o,s,l,c,u,f,d,h,p,v,g,y,m,b;return rn().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=1,this.getOrCreateImage(i,a);case 1:if(o=x.sent,!(typeof o.downSamplingRate<"u")){x.next=2;break}return x.abrupt("return",o);case 2:if(s=this.context.config.enableLargeImageOptimization,l=typeof s=="boolean"?{}:s,c=l.maxDownSampledImageSize,u=c===void 0?2048:c,f=l.downSamplingRateThreshold,d=f===void 0?.5:f,h=this.runtime.globalThis.createImageBitmap,p=_t(o.size,2),v=p[0],g=p[1],y=o.img,m=Math.min((u+u)/(v+g),Math.max(.01,Math.min(d,.5))),b=Ot(Ot({},o),{},{downSamplingRate:m}),mn.update(o.img.src,b,a),!h){x.next=7;break}return x.prev=3,x.next=4,h(o.img,{resizeWidth:v*m,resizeHeight:g*m});case 4:y=x.sent,x.next=6;break;case 5:x.prev=5,x.catch(3),m=1;case 6:x.next=8;break;case 7:m=1;case 8:return b=Ot(Ot({},this.getImageSync(i,a)),{},{downSampled:y,downSamplingRate:m}),mn.update(o.img.src,b,a),x.abrupt("return",b);case 9:case"end":return x.stop()}},n,this,[[3,5]])}));function e(n,i){return r.apply(this,arguments)}return e}()},{key:"createImageTiles",value:function(){var r=fi(rn().mark(function n(i,a,o,s){var l,c,u,f,d;return rn().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=1,this.getOrCreateImage(i,s);case 1:return l=h.sent,c=s.ownerDocument.defaultView,u=c.requestAnimationFrame,f=c.cancelAnimationFrame,Od.api={requestAnimationFrame:u,cancelAnimationFrame:f,createCanvas:function(){return qh.createCanvas()}},d=Ot(Ot({},l),Od.sliceImage(l.img,l.tileSize[0],l.tileSize[0],o)),mn.update(l.img.src,d,s),h.abrupt("return",d);case 2:case"end":return h.stop()}},n,this)}));function e(n,i,a,o){return r.apply(this,arguments)}return e}()},{key:"releaseImage",value:function(e,n){mn.release(pe(e)?e:e.src,n)}},{key:"releaseImageRef",value:function(e){mn.releaseRef(e)}},{key:"getOrCreatePatternSync",value:function(e,n,i,a,o,s,l){var c=this.generatePatternKey(n);if(c&&this.patternCache[c])return this.patternCache[c];var u=n.image,f=n.repetition,d=n.transform,h,p=!1;if(pe(u)){var v=this.getImageSync(u,e,l);h=v?.img}else a?(h=a,p=!0):h=u;var g=h&&i.createPattern(h,f);if(g){var y;d?y=pO(aO(d),new de({})):y=Fa(Zt()),p&&lT(y,y,[1/o,1/o,1]),g.setTransform({a:y[0],b:y[1],c:y[4],d:y[5],e:y[12]+s[0],f:y[13]+s[1]})}return c&&g&&(this.patternCache[c]=g),g}},{key:"getOrCreateGradient",value:function(e,n){var i=this.generateGradientKey(e),a=e.type,o=e.steps,s=e.min,l=e.width,c=e.height,u=e.angle,f=e.cx,d=e.cy,h=e.size;if(this.gradientCache[i])return this.gradientCache[i];var p=null;if(a===ni.LinearGradient){var v=bR(s,l,c,u),g=v.x1,y=v.y1,m=v.x2,b=v.y2;p=n.createLinearGradient(g,y,m,b)}else if(a===ni.RadialGradient){var x=xR(s,l,c,f,d,h),O=x.x,w=x.y,_=x.r;p=n.createRadialGradient(O,w,0,O,w,_)}return p&&(o.forEach(function(S){var k=S.offset,E=S.color;if(k.unit===ot.kPercentage){var A;(A=p)===null||A===void 0||A.addColorStop(k.value/100,E.toString())}}),this.gradientCache[i]=p),this.gradientCache[i]}},{key:"generateGradientKey",value:function(e){var n=e.type,i=e.min,a=e.width,o=e.height,s=e.steps,l=e.angle,c=e.cx,u=e.cy,f=e.size;return"gradient-".concat(n,"-").concat(l?.toString()||0,"-").concat(c?.toString()||0,"-").concat(u?.toString()||0,"-").concat(f?.toString()||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(o,"-").concat(s.map(function(d){var h=d.offset,p=d.color;return"".concat(h).concat(p)}).join("-"))}},{key:"generatePatternKey",value:function(e){var n=e.image,i=e.repetition;if(pe(n))return"pattern-".concat(n,"-").concat(i);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(i)}}])}();Zh.isSupportTile=!!qh.createCanvas();function Js(t){if(!t.complete)return[0,0];var r=t.naturalWidth||t.width,e=t.naturalHeight||t.height,n=256;return[256,512].forEach(function(i){var a=Math.ceil(e/i),o=Math.ceil(r/i);a*o<1e3&&(n=i)}),[n,n]}var wO=function(){function t(){Z(this,t)}return K(t,[{key:"apply",value:function(e){var n=e.renderingService,i=e.renderingContext,a=e.imagePool,o=i.root.ownerDocument.defaultView,s=function(f,d,h){var p=f.parsedStyle,v=p.width,g=p.height;v&&!g?f.setAttribute("height",h/d*v):!v&&g&&f.setAttribute("width",d/h*g)},l=function(f){var d=f.target,h=d.nodeName,p=d.attributes;if(h===U.IMAGE){var v=p.src,g=p.keepAspectRatio;a.getImageSync(v,d,function(y){var m=y.img,b=m.width,x=m.height;g&&s(d,b,x),d.dirty(),n.dirty()})}},c=function(f){var d=f.target,h=f.attrName,p=f.prevValue,v=f.newValue;d.nodeName!==U.IMAGE||h!=="src"||(p!==v&&a.releaseImage(p,d),pe(v)&&a.getOrCreateImage(v,d).then(function(g){var y=g.img,m=y.width,b=y.height;d.attributes.keepAspectRatio&&s(d,m,b),d.dirty(),n.dirty()}).catch(function(){}))};n.hooks.init.tap(t.tag,function(){o.addEventListener(It.MOUNTED,l),o.addEventListener(It.ATTR_MODIFIED,c)}),n.hooks.destroy.tap(t.tag,function(){o.removeEventListener(It.MOUNTED,l),o.removeEventListener(It.ATTR_MODIFIED,c)})}}])}();wO.tag="LoadImage";var lD=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.name="image-loader",e}return Et(r,t),K(r,[{key:"init",value:function(n){this.context.imagePool=new Zh(this.context,n),this.addRenderingPlugin(new wO)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Oi),cD=Object.freeze({__proto__:null,ImagePool:Zh,Plugin:lD}),uD="g-canvas-camera",_O=function(){function t(){Z(this,t),this.displayObjectHTMLElementMap=new WeakMap}return K(t,[{key:"joinTransformMatrix",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([e[0],e[1],e[4],e[5],e[12]+n[0],e[13]+n[1]].join(","),")")}},{key:"apply",value:function(e,n){var i=this,a=e.camera,o=e.renderingContext,s=e.renderingService;this.context=e;var l=o.root.ownerDocument.defaultView,c=l.context.eventService.nativeHTMLMap,u=function(y,m){m.style.transform=i.joinTransformMatrix(y.getWorldTransform(),y.getOrigin())},f=function(y){var m=y.target;if(m.nodeName===U.HTML){i.$camera||(i.$camera=i.createCamera(a));var b=i.getOrCreateEl(m);i.$camera.appendChild(b),Object.keys(m.attributes).forEach(function(x){i.updateAttribute(x,m)}),u(m,b),c.set(b,m)}},d=function(y){var m=y.target;if(m.nodeName===U.HTML&&i.$camera){var b=i.getOrCreateEl(m);b&&(b.remove(),c.delete(b))}},h=function(y){var m=y.target;if(m.nodeName===U.HTML){var b=y.attrName;i.updateAttribute(b,m)}},p=function(y){for(var m=y.detail,b=0;b<m.length;b++){var x=m[b],O=x.target,w=O.nodeName===U.FRAGMENT?O.childNodes:[O];w.forEach(function(_){if(_.nodeName===U.HTML){var S=i.getOrCreateEl(_);u(_,S)}})}},v=function(){if(i.$camera){var y=i.context.config,m=y.width,b=y.height;i.$camera.parentElement.style.width="".concat(m||0,"px"),i.$camera.parentElement.style.height="".concat(b||0,"px")}};s.hooks.init.tap(t.tag,function(){l.addEventListener(Mn.RESIZE,v),l.addEventListener(It.MOUNTED,f),l.addEventListener(It.UNMOUNTED,d),l.addEventListener(It.ATTR_MODIFIED,h),l.addEventListener(It.BOUNDS_CHANGED,p)}),s.hooks.endFrame.tap(t.tag,function(){i.$camera&&o.renderReasons.has(La.CAMERA_CHANGED)&&(i.$camera.style.transform=i.joinTransformMatrix(a.getOrthoMatrix()))}),s.hooks.destroy.tap(t.tag,function(){i.$camera&&i.$camera.remove(),l.removeEventListener(Mn.RESIZE,v),l.removeEventListener(It.MOUNTED,f),l.removeEventListener(It.UNMOUNTED,d),l.removeEventListener(It.ATTR_MODIFIED,h),l.removeEventListener(It.BOUNDS_CHANGED,p)})}},{key:"createCamera",value:function(e){var n=this.context.config,i=n.document,a=n.width,o=n.height,s=this.context.contextService.getDomElement(),l=s.parentNode;if(l){var c=uD,u=l.querySelector("#".concat(c));if(!u){var f=(i||document).createElement("div");f.style.overflow="hidden",f.style.pointerEvents="none",f.style.position="absolute",f.style.left="0px",f.style.top="0px",f.style.width="".concat(a||0,"px"),f.style.height="".concat(o||0,"px");var d=(i||document).createElement("div");u=d,d.id=c,d.style.position="absolute",d.style.left="".concat(s.offsetLeft||0,"px"),d.style.top="".concat(s.offsetTop||0,"px"),d.style.transformOrigin="left top",d.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),d.style.pointerEvents="none",d.style.width="100%",d.style.height="100%",f.appendChild(d),l.appendChild(f)}return u}return null}},{key:"getOrCreateEl",value:function(e){var n=this.context.config.document,i=this.displayObjectHTMLElementMap.get(e);return i||(i=(n||document).createElement("div"),e.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(e,i),e.id&&(i.id=e.id),e.name&&i.setAttribute("name",e.name),e.className&&(i.className=e.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),i}},{key:"updateAttribute",value:function(e,n){var i=this.getOrCreateEl(n);switch(e){case"innerHTML":var a=n.parsedStyle.innerHTML;pe(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(n.parsedStyle.x,"px");break;case"y":i.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var o=n.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(o[0].buildCSSText(null,null,"")," ").concat(o[1].buildCSSText(null,null,""));break;case"width":var s=n.parsedStyle.width;i.style.width=fe(s)?"".concat(s,"px"):s.toString();break;case"height":var l=n.parsedStyle.height;i.style.height=fe(l)?"".concat(l,"px"):l.toString();break;case"zIndex":var c=n.parsedStyle.zIndex;i.style["z-index"]="".concat(c);break;case"visibility":var u=n.parsedStyle.visibility;i.style.visibility=u;break;case"pointerEvents":var f=n.parsedStyle.pointerEvents,d=f===void 0?"auto":f;i.style.pointerEvents=d;break;case"opacity":var h=n.parsedStyle.opacity;i.style.opacity="".concat(h);break;case"fill":var p=n.parsedStyle.fill,v="";ic(p)?p.isNone?v="transparent":v=n.getAttribute("fill"):Array.isArray(p)?v=n.getAttribute("fill"):ea(p),i.style.background=v;break;case"stroke":var g=n.parsedStyle.stroke,y="";ic(g)?g.isNone?y="transparent":y=n.getAttribute("stroke"):Array.isArray(g)?y=n.getAttribute("stroke"):ea(g),i.style["border-color"]=y,i.style["border-style"]="solid";break;case"lineWidth":var m=n.parsedStyle.lineWidth;i.style["border-width"]="".concat(m||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var b=n.style.filter;i.style.filter=b;break;default:!gt(n.style[e])&&n.style[e]!==""&&(i.style[e]=n.style[e])}}}])}();_O.tag="HTMLRendering";var fD=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.name="html-renderer",e}return Et(r,t),K(r,[{key:"init",value:function(){this.addRenderingPlugin(new _O)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Oi),dD=Object.freeze({__proto__:null,Plugin:fD}),SO=function(){function t(){Z(this,t)}return K(t,[{key:"apply",value:function(e,n){var i=this,a=e.renderingService,o=e.renderingContext,s=e.config;this.context=e;var l=o.root.ownerDocument.defaultView,c=function(S){a.hooks.pointerMove.call(S)},u=function(S){a.hooks.pointerUp.call(S)},f=function(S){a.hooks.pointerDown.call(S)},d=function(S){a.hooks.pointerOver.call(S)},h=function(S){a.hooks.pointerOut.call(S)},p=function(S){a.hooks.pointerCancel.call(S)},v=function(S){a.hooks.pointerWheel.call(S)},g=function(S){a.hooks.click.call(S)},y=function(S){n.globalThis.document.addEventListener("pointermove",c,!0),S.addEventListener("pointerdown",f,!0),S.addEventListener("pointerleave",h,!0),S.addEventListener("pointerover",d,!0),n.globalThis.addEventListener("pointerup",u,!0),n.globalThis.addEventListener("pointercancel",p,!0)},m=function(S){S.addEventListener("touchstart",f,!0),S.addEventListener("touchend",u,!0),S.addEventListener("touchmove",c,!0),S.addEventListener("touchcancel",p,!0)},b=function(S){n.globalThis.document.addEventListener("mousemove",c,!0),S.addEventListener("mousedown",f,!0),S.addEventListener("mouseout",h,!0),S.addEventListener("mouseover",d,!0),n.globalThis.addEventListener("mouseup",u,!0)},x=function(S){n.globalThis.document.removeEventListener("pointermove",c,!0),S.removeEventListener("pointerdown",f,!0),S.removeEventListener("pointerleave",h,!0),S.removeEventListener("pointerover",d,!0),n.globalThis.removeEventListener("pointerup",u,!0),n.globalThis.removeEventListener("pointercancel",p,!0)},O=function(S){S.removeEventListener("touchstart",f,!0),S.removeEventListener("touchend",u,!0),S.removeEventListener("touchmove",c,!0),S.removeEventListener("touchcancel",p,!0)},w=function(S){n.globalThis.document.removeEventListener("mousemove",c,!0),S.removeEventListener("mousedown",f,!0),S.removeEventListener("mouseout",h,!0),S.removeEventListener("mouseover",d,!0),n.globalThis.removeEventListener("mouseup",u,!0)};a.hooks.init.tap(t.tag,function(){var _=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(_.style.msContentZooming="none",_.style.msTouchAction="none"):l.supportsPointerEvents&&(_.style.touchAction="none"),l.supportsPointerEvents?y(_):b(_),l.supportsTouchEvents&&m(_),s.useNativeClickEvent&&_.addEventListener("click",g,!0),_.addEventListener("wheel",v,{passive:!0,capture:!0})}),a.hooks.destroy.tap(t.tag,function(){var _=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(_.style.msContentZooming="",_.style.msTouchAction=""):l.supportsPointerEvents&&(_.style.touchAction=""),l.supportsPointerEvents?x(_):w(_),l.supportsTouchEvents&&O(_),s.useNativeClickEvent&&_.removeEventListener("click",g,!0),_.removeEventListener("wheel",v,!0)})}}])}();SO.tag="DOMInteraction";var hD=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.name="dom-interaction",e}return Et(r,t),K(r,[{key:"init",value:function(){this.addRenderingPlugin(new SO)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Oi),pD=Object.freeze({__proto__:null,Plugin:hD}),vD=function(){function t(){Z(this,t)}return K(t,[{key:"apply",value:function(e){var n=e.renderingService,i=e.contextService,a=e.config,o=i.getDomElement(),s=function(v){n.hooks.pointerDown.call(v)},l=function(v){n.hooks.pointerUp.call(v)},c=function(v){n.hooks.pointerMove.call(v)},u=function(v){n.hooks.pointerOver.call(v)},f=function(v){n.hooks.pointerOut.call(v)},d=function(v){n.hooks.click.call(v)},h=function(v){n.hooks.pointerCancel.call(v)};n.hooks.init.tap(t.tag,function(){o.addEventListener("touchstart",s,!0),o.addEventListener("touchend",l,!0),o.addEventListener("touchmove",c,!0),o.addEventListener("touchcancel",h,!0),o.addEventListener("mouseout",f,!0),o.addEventListener("mouseover",u,!0),a.useNativeClickEvent&&o.addEventListener("click",d,!0)}),n.hooks.destroy.tap(t.tag,function(){o.removeEventListener("touchstart",s,!0),o.removeEventListener("touchend",l,!0),o.removeEventListener("touchmove",c,!0),o.removeEventListener("touchcancel",h,!0),o.removeEventListener("mouseout",f,!0),o.removeEventListener("mouseover",u,!0),a.useNativeClickEvent&&o.removeEventListener("click",d,!0)})}}])}();vD.tag="MobileInteraction";/*!
 * @antv/g
 * @description A core module for rendering engine implements DOM API.
 * @version 6.3.1
 * @date 12/24/2025, 11:55:39 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var ff=function(t){function r(e,n,i,a){var o;return Z(this,r),o=At(this,r,[e]),o.currentTime=i,o.timelineTime=a,o.target=n,o.type="finish",o.bubbles=!1,o.currentTarget=n,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=i,o.timelineTime=a,o}return Et(r,t),K(r)}(cu),gD=0,yD=function(){function t(r,e){var n;Z(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=r,r.animation=this,this.timeline=e,this.id="".concat(gD++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((n=this.effect)===null||n===void 0?void 0:n.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return K(t,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var e=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,i){e.resolveReadyPromise=function(){n(e)},e.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var e=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,i){e.resolveFinishedPromise=function(){n(e)},e.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(e){if(e=Number(e),!isNaN(e)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var n;this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-e/this.playbackRate}this.currentTimePending=!1,this._currentTime!==e&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(e,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(e){if(e!==null){if(this.updatePromises(),e=Number(e),isNaN(e)||this._paused||this._idle)return;this._startTime=e,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){if(e!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=e,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var e;if((e=this.effect.target)!==null&&e!==void 0&&e.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var n=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==n&&(i==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):n==="pending"?this.resolveReadyPromise():i==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&i!==n&&(i==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):i==="finished"?this.resolveFinishedPromise():n==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var e=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=null,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new ff(null,this,this.currentTime,null);setTimeout(function(){e.oncancel(n)})}}},{key:"reverse",value:function(){this.updatePromises();var e=this.currentTime;this.playbackRate*=-1,this.play(),e!==null&&(this.currentTime=e),this.updatePromises()}},{key:"updatePlaybackRate",value:function(e){this.playbackRate=e}},{key:"targetAnimations",value:function(){var e,n=(e=this.effect)===null||e===void 0?void 0:e.target;return n.getAnimations()}},{key:"markTarget",value:function(){var e=this.targetAnimations();e.indexOf(this)===-1&&e.push(this)}},{key:"unmarkTarget",value:function(){var e=this.targetAnimations(),n=e.indexOf(this);n!==-1&&e.splice(n,1)}},{key:"tick",value:function(e,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=e-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((e-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(e))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(ie)}},{key:"addEventListener",value:function(e,n,i){throw new Error(ie)}},{key:"removeEventListener",value:function(e,n,i){throw new Error(ie)}},{key:"dispatchEvent",value:function(e){throw new Error(ie)}},{key:"commitStyles",value:function(){throw new Error(ie)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var e;this._inEffect=!!((e=this.effect)!==null&&e!==void 0&&e.update(-1))}else{var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(e,n){e!==this._currentTime&&(this._currentTime=e,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(e){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new ff(null,this,this.currentTime,e);setTimeout(function(){n.onfinish&&n.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new ff(null,this,this.currentTime,e);this.onframe(a)}this._finishedFlag=!1}}}])}(),mD=4,bD=.001,xD=1e-7,OD=10,Oo=11,tl=1/(Oo-1),wD=typeof Float32Array=="function",kO=function(r,e){return 1-3*e+3*r},EO=function(r,e){return 3*e-6*r},AO=function(r){return 3*r},sc=function(r,e,n){return((kO(e,n)*r+EO(e,n))*r+AO(e))*r},TO=function(r,e,n){return 3*kO(e,n)*r*r+2*EO(e,n)*r+AO(e)},_D=function(r,e,n,i,a){var o,s,l=0;do s=e+(n-e)/2,o=sc(s,i,a)-r,o>0?n=s:e=s;while(Math.abs(o)>xD&&++l<OD);return s},SD=function(r,e,n,i){for(var a=0;a<mD;++a){var o=TO(e,n,i);if(o===0)return e;var s=sc(e,n,i)-r;e-=s/o}return e},Qh=function(r,e,n,i){if(!(r>=0&&r<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(r===e&&n===i)return function(l){return l};for(var a=wD?new Float32Array(Oo):new Array(Oo),o=0;o<Oo;++o)a[o]=sc(o*tl,r,n);var s=function(c){for(var u=0,f=1,d=Oo-1;f!==d&&a[f]<=c;++f)u+=tl;--f;var h=(c-a[f])/(a[f+1]-a[f]),p=u+h*tl,v=TO(p,r,n);return v>=bD?SD(c,p,r,n):v===0?p:_D(c,u,u+tl,r,n)};return function(l){return l===0||l===1?l:sc(s(l),e,i)}},kD=function(r){return r=r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}),r.charAt(0)==="-"?r.substring(1):r},el=function(r){return Math.pow(r,2)},nl=function(r){return Math.pow(r,3)},rl=function(r){return Math.pow(r,4)},il=function(r){return Math.pow(r,5)},al=function(r){return Math.pow(r,6)},ol=function(r){return 1-Math.cos(r*Math.PI/2)},sl=function(r){return 1-Math.sqrt(1-r*r)},ll=function(r){return r*r*(3*r-2)},cl=function(r){for(var e,n=4;r<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((e*3-2)/22-r,2)},ul=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=_t(e,2),i=n[0],a=i===void 0?1:i,o=n[1],s=o===void 0?.5:o,l=Pe(Number(a),1,10),c=Pe(Number(s),.1,2);return r===0||r===1?r:-l*Math.pow(2,10*(r-1))*Math.sin((r-1-c/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/c)},go=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=_t(e,4),a=i[0],o=a===void 0?1:a,s=i[1],l=s===void 0?100:s,c=i[2],u=c===void 0?10:c,f=i[3],d=f===void 0?0:f;o=Pe(o,.1,1e3),l=Pe(l,.1,1e3),u=Pe(u,.1,1e3),d=Pe(d,.1,1e3);var h=Math.sqrt(l/o),p=u/(2*Math.sqrt(l*o)),v=p<1?h*Math.sqrt(1-p*p):0,g=1,y=p<1?(p*h+-d)/v:-d+h,m=n?n*r/1e3:r;return p<1?m=Math.exp(-m*p*h)*(g*Math.cos(v*m)+y*Math.sin(v*m)):m=(g+y*m)*Math.exp(-m*h),r===0||r===1?r:1-m},df=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=e,i=_t(n,2),a=i[0],o=a===void 0?10:a,s=i[1],l=s==="start"?Math.ceil:Math.floor;return l(Pe(r,0,1)*o)/o},sy=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=_t(e,4),i=n[0],a=n[1],o=n[2],s=n[3];return Qh(i,a,o,s)(r)},fl=Qh(.42,0,1,1),wn=function(r){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-r(1-e,n,i)}},_n=function(r){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return e<.5?r(e*2,n,i)/2:1-r(e*-2+2,n,i)/2}},Sn=function(r){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return e<.5?(1-r(1-e*2,n,i))/2:(r(e*2-1,n,i)+1)/2}},ly={steps:df,"step-start":function(r){return df(r,[1,"start"])},"step-end":function(r){return df(r,[1,"end"])},linear:function(r){return r},"cubic-bezier":sy,ease:function(r){return sy(r,[.25,.1,.25,1])},in:fl,out:wn(fl),"in-out":_n(fl),"out-in":Sn(fl),"in-quad":el,"out-quad":wn(el),"in-out-quad":_n(el),"out-in-quad":Sn(el),"in-cubic":nl,"out-cubic":wn(nl),"in-out-cubic":_n(nl),"out-in-cubic":Sn(nl),"in-quart":rl,"out-quart":wn(rl),"in-out-quart":_n(rl),"out-in-quart":Sn(rl),"in-quint":il,"out-quint":wn(il),"in-out-quint":_n(il),"out-in-quint":Sn(il),"in-expo":al,"out-expo":wn(al),"in-out-expo":_n(al),"out-in-expo":Sn(al),"in-sine":ol,"out-sine":wn(ol),"in-out-sine":_n(ol),"out-in-sine":Sn(ol),"in-circ":sl,"out-circ":wn(sl),"in-out-circ":_n(sl),"out-in-circ":Sn(sl),"in-back":ll,"out-back":wn(ll),"in-out-back":_n(ll),"out-in-back":Sn(ll),"in-bounce":cl,"out-bounce":wn(cl),"in-out-bounce":_n(cl),"out-in-bounce":Sn(cl),"in-elastic":ul,"out-elastic":wn(ul),"in-out-elastic":_n(ul),"out-in-elastic":Sn(ul),spring:go,"spring-in":go,"spring-out":wn(go),"spring-in-out":_n(go),"spring-out-in":Sn(go)},ED=function(r){return kD(r).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},AD=function(r){return ly[ED(r)]||ly.linear},TD=function(r){return r},PD=1,MD=.5,cy=0;function uy(t,r){return function(e){if(e>=1)return 1;var n=1/t;return e+=r*n,e-e%n}}var dl="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",CD=new RegExp("cubic-bezier\\(".concat(dl,",").concat(dl,",").concat(dl,",").concat(dl,"\\)")),LD=/steps\(\s*(\d+)\s*\)/,ND=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function Jh(t){var r=CD.exec(t);if(r)return Qh.apply(void 0,Pt(r.slice(1).map(Number)));var e=LD.exec(t);if(e)return uy(Number(e[1]),cy);var n=ND.exec(t);return n?uy(Number(n[1]),{start:PD,middle:MD,end:cy}[n[2]]):AD(t)}function RD(t){return Math.abs(ID(t)/(t.playbackRate||1))}function ID(t){var r;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((r=t.iterations)!==null&&r!==void 0?r:1)}var PO=0,tp=1,hu=2,MO=3;function jD(t,r,e){if(r===null)return PO;var n=e.endTime;return r<Math.min(e.delay,n)?tp:r>=Math.min(e.delay+t+e.endDelay,n)?hu:MO}function DD(t,r,e,n,i){switch(n){case tp:return r==="backwards"||r==="both"?0:null;case MO:return e-i;case hu:return r==="forwards"||r==="both"?t:null;case PO:return null}}function $D(t,r,e,n,i){var a=i;return t===0?r!==tp&&(a+=e):a+=n/t,a}function FD(t,r,e,n,i,a){var o=t===1/0?r%1:t%1;return o===0&&e===hu&&n!==0&&(i!==0||a===0)&&(o=1),o}function BD(t,r,e,n){return t===hu&&r===1/0?1/0:e===1?Math.floor(n)-1:Math.floor(n)}function zD(t,r,e){var n=t;if(t!=="normal"&&t!=="reverse"){var i=r;t==="alternate-reverse"&&(i+=1),n="normal",i!==1/0&&i%2!==0&&(n="reverse")}return n==="normal"?e:1-e}function WD(t,r,e){var n=jD(t,r,e),i=DD(t,e.fill,r,n,e.delay);if(i===null)return null;var a=e.duration==="auto"?0:e.duration,o=$D(a,n,e.iterations,i,e.iterationStart),s=FD(o,e.iterationStart,n,e.iterations,i,a),l=BD(n,e.iterations,s,o),c=zD(e.direction,l,s);return e.currentIteration=l,e.progress=c,e.easingFunction(c)}function GD(t,r,e){var n=HD(t,r),i=YD(n,e);return function(a,o){if(o!==null)i.filter(function(l){return o>=l.applyFrom&&o<l.applyTo}).forEach(function(l){var c=o-l.startOffset,u=l.endOffset-l.startOffset,f=u===0?0:c/u;a.setAttribute(l.property,l.interpolation(f),!1,!1)});else for(var s in n)CO(s)&&a.setAttribute(s,null)}}function CO(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function HD(t,r){for(var e={},n=0;n<t.length;n++)for(var i in t[n])if(CO(i)){var a={offset:t[n].offset,computedOffset:t[n].computedOffset,easing:t[n].easing,easingFunction:Jh(t[n].easing)||r.easingFunction,value:t[n][i]};e[i]=e[i]||[],e[i].push(a)}return e}function YD(t,r){var e=[];for(var n in t)for(var i=t[n],a=0;a<i.length-1;a++){var o=a,s=a+1,l=i[o].computedOffset,c=i[s].computedOffset,u=l,f=c;a===0&&(u=-1/0,c===0&&(s=o)),a===i.length-2&&(f=1/0,l===1&&(o=s)),e.push({applyFrom:u,applyTo:f,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:n,interpolation:VD(n,i[o].value,i[s].value,r)})}return e.sort(function(d,h){return d.startOffset-h.startOffset}),e}var fy=function(r,e,n){return function(i){var a=LO(r,e,i);return fe(a)?a:n(a)}};function VD(t,r,e,n){var i=oO[t];if(i&&i.syntax&&i.int){var a=tt.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(r,n):r,l=o?o(e,n):e,c=a.mixer(s,l,n);if(c){var u=fy.apply(void 0,Pt(c));return function(f){return f===0?r:f===1?e:u(f)}}}}return fy(!1,!0,function(f){return f?e:r})}function LO(t,r,e){if(typeof t=="number"&&typeof r=="number")return t*(1-e)+r*e;if(typeof t=="boolean"&&typeof r=="boolean"||typeof t=="string"&&typeof r=="string")return e<.5?t:r;if(Array.isArray(t)&&Array.isArray(r)){for(var n=t.length,i=r.length,a=Math.max(n,i),o=[],s=0;s<a;s++)o.push(LO(t[s<n?s:n-1],r[s<i?s:i-1],e));return o}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(r))}var UD=function(){function t(){Z(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=TD,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return K(t,[{key:"easing",get:function(){return this._easing},set:function(e){this.easingFunction=Jh(e),this._easing=e}}])}();function XD(t){var r=[];for(var e in t)if(!(e in["easing","offset","composite"])){var n=t[e];Array.isArray(n)||(n=[n]);for(var i=n.length,a=0;a<i;a++){if(!r[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),r[a]=o}n[a]!==void 0&&n[a]!==null&&(r[a][e]=n[a])}}return r.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),r}function dy(t,r){if(t===null)return[];Array.isArray(t)||(t=XD(t));for(var e=t.map(function(l){var c={};r!=null&&r.composite&&(c.composite="auto");for(var u in l){var f=l[u];if(u==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");c.computedOffset=f}}else if(u==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));c[u]=f}return c.offset===void 0&&(c.offset=null),c.easing===void 0&&(c.easing=r?.easing||"linear"),c.composite===void 0&&(c.composite="auto"),c}),n=!0,i=-1/0,a=0;a<e.length;a++){var o=e[a].offset;if(gt(o))n=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}e=e.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,c=e,u=c.length;if(e[u-1].computedOffset=Number((l=e[u-1].offset)!==null&&l!==void 0?l:1),u>1){var f;e[0].computedOffset=Number((f=e[0].offset)!==null&&f!==void 0?f:0)}for(var d=0,h=Number(e[0].computedOffset),p=1;p<u;p++){var v=e[p].computedOffset;if(!gt(v)&&!gt(h)){for(var g=1;g<p-d;g++)e[d+g].computedOffset=h+(Number(v)-h)*g/(p-d);d=p,h=Number(v)}}}return n||s(),e}var qD="backwards|forwards|both|none".split("|"),KD="reverse|alternate|alternate-reverse".split("|");function ZD(t,r){var e=new UD;return typeof t=="number"&&!isNaN(t)?e.duration=t:t!==void 0&&Object.keys(t).forEach(function(n){if(t[n]!==void 0&&t[n]!==null&&t[n]!=="auto"){if((typeof e[n]=="number"||n==="duration")&&(typeof t[n]!="number"||isNaN(t[n]))||n==="fill"&&qD.indexOf(t[n])===-1||n==="direction"&&KD.indexOf(t[n])===-1)return;e[n]=t[n]}}),e}function QD(t,r){return t=JD(t??{duration:"auto"}),ZD(t)}function JD(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var t$=function(){function t(r,e,n){var i=this;Z(this,t),this.composite="replace",this.iterationComposite="replace",this.target=r,this.timing=QD(n),this.timing.effect=this,this.timing.activeDuration=RD(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=dy(e,this.timing),this.interpolations=GD(this.normalizedKeyframes,this.timing,this.target);var a=tt.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(s,l){return l==="duration"?s.duration==="auto"?0:s.duration:l==="fill"?s.fill==="auto"?"none":s.fill:l==="localTime"?i.animation&&i.animation.currentTime||null:l==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:s.currentIteration||0:l==="progress"?!i.animation||i.animation.playState!=="running"?null:s.progress||0:s[l]},set:function(){return!0}}):this.timing}return K(t,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(e){return e===null?!1:(this.timeFraction=WD(this.timing.activeDuration,e,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(e){this.normalizedKeyframes=dy(e)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(e){var n=this;Object.keys(e||{}).forEach(function(i){n.timing[i]=e[i]})}}])}();function hy(t,r){return Number(t.id)-Number(r.id)}var e$=function(){function t(r){var e=this;Z(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(n){e.currentTime=n,e.discardAnimations(),e.animations.length===0?e.timelineTicking=!1:e.requestAnimationFrame(e.webAnimationsNextTick)},this.processRafCallbacks=function(n){var i=e.rafCallbacks;e.rafCallbacks=[],n<Number(e.currentTime)&&(n=Number(e.currentTime)),e.animations.sort(hy),e.animations=e.tick(n,!0,e.animations)[0],i.forEach(function(a){a[1](n)}),e.applyPendingEffects()},this.document=r}return K(t,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(e,n,i){var a=new t$(e,n,i),o=new yD(a,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o}},{key:"applyDirtiedAnimation",value:function(e){var n=this;if(!this.inTick){e.markTarget();var i=e.targetAnimations();i.sort(hy);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(o){var s=n.animations.indexOf(o);s!==-1&&n.animations.splice(s,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(e){e?.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(e){return e.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(e){return e.playState!=="finished"&&e.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(e){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,e]),n}},{key:"requestAnimationFrame",value:function(e){var n=this;return this.rAF(function(i){n.updateAnimationsPromises(),e(i),n.updateAnimationsPromises()})}},{key:"tick",value:function(e,n,i){var a=this,o,s;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=e,this.ticking=!1;var l=[],c=[],u=[],f=[];return i.forEach(function(d){d.tick(e,n),d._inEffect?(c.push(d.effect),d.markTarget()):(l.push(d.effect),d.unmarkTarget()),d._needsTick&&(a.ticking=!0);var h=d._inEffect||d._needsTick;d._inTimeline=h,h?u.push(d):f.push(d)}),(o=this.pendingEffects).push.apply(o,l),(s=this.pendingEffects).push.apply(s,c),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[u,f]}}])}();tt.EasingFunction=Jh;tt.AnimationTimeline=e$;var n$=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.landmarks=[],e}return Et(r,t),K(r,[{key:"rotate",value:function(n,i,a){if(this.relElevation=Pa(i),this.relAzimuth=Pa(n),this.relRoll=Pa(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===re.EXPLORING){var o=Bi(qe(),[1,0,0],Xt((this.rotateWorld?1:-1)*this.relElevation)),s=Bi(qe(),[0,1,0],Xt((this.rotateWorld?1:-1)*this.relAzimuth)),l=Bi(qe(),[0,0,1],Xt(this.relRoll)),c=Vi(qe(),s,o);c=Vi(qe(),c,l);var u=Cb(Zt(),c);Ao(this.matrix,this.matrix,[0,0,-this.distance]),vn(this.matrix,this.matrix,u),Ao(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===re.ORBITING||this.type===re.EXPLORING?this._getPosition():this.type===re.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(n,i){var a=cn(n,i,0),o=Mr(this.position);return si(o,o,Hl(Nt(),this.right,a[0])),si(o,o,Hl(Nt(),this.up,a[1])),this._setPosition(o),this.triggerUpdate(),this}},{key:"dolly",value:function(n){var i=this.forward,a=Mr(this.position),o=n*this.dollyingStep,s=this.distance+n*this.dollyingStep;return o=Math.max(Math.min(s,this.maxDistance),this.minDistance)-this.distance,a[0]+=o*i[0],a[1]+=o*i[1],a[2]+=o*i[2],this._setPosition(a),this.type===re.ORBITING||this.type===re.EXPLORING?this._getDistance():this.type===re.TRACKING&&si(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(n){var i,a,o,s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.position,u=c===void 0?this.position:c,f=l.focalPoint,d=f===void 0?this.focalPoint:f,h=l.roll,p=l.zoom,v=new tt.CameraContribution;v.setType(this.type,void 0),v.setPosition(u[0],(i=u[1])!==null&&i!==void 0?i:this.position[1],(a=u[2])!==null&&a!==void 0?a:this.position[2]),v.setFocalPoint(d[0],(o=d[1])!==null&&o!==void 0?o:this.focalPoint[1],(s=d[2])!==null&&s!==void 0?s:this.focalPoint[2]),v.setRoll(h??this.roll),v.setZoom(p??this.zoom);var g={name:n,matrix:Rb(v.getWorldTransform()),right:Mr(v.right),up:Mr(v.up),forward:Mr(v.forward),position:Mr(v.getPosition()),focalPoint:Mr(v.getFocalPoint()),distanceVector:Mr(v.getDistanceVector()),distance:v.getDistance(),dollyingStep:v.getDollyingStep(),azimuth:v.getAzimuth(),elevation:v.getElevation(),roll:v.getRoll(),relAzimuth:v.relAzimuth,relElevation:v.relElevation,relRoll:v.relRoll,zoom:v.getZoom()};return this.landmarks.push(g),g}},{key:"gotoLandmark",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=pe(n)?this.landmarks.find(function(A){return A.name===n}):n;if(o){var s=fe(a)?{duration:a}:a,l=s.easing,c=l===void 0?"linear":l,u=s.duration,f=u===void 0?100:u,d=s.easingFunction,h=d===void 0?void 0:d,p=s.onfinish,v=p===void 0?void 0:p,g=s.onframe,y=g===void 0?void 0:g,m=.01;this.cancelLandmarkAnimation();var b=o.position,x=o.focalPoint,O=o.zoom,w=o.roll,_=h||tt.EasingFunction(c),S,k=function(){i.setFocalPoint(x),i.setPosition(b),i.setRoll(w),i.setZoom(O),i.computeMatrix(),i.triggerUpdate(),v?.()};if(f===0)return k();var E=function(T){S===void 0&&(S=T);var P=T-S;if(P>=f){k();return}var N=_(P/f),I=Nt(),R=Nt(),C=1,L=0;Kf(I,i.focalPoint,x,N),Kf(R,i.position,b,N),L=i.roll*(1-N)+w*N,C=i.zoom*(1-N)+O*N,i.setFocalPoint(I),i.setPosition(R),i.setRoll(L),i.setZoom(C);var M=Zv(I,x)+Zv(R,b);if(M<=m&&O===void 0&&w===void 0)return k();i.computeMatrix(),i.triggerUpdate(),P<f&&(y?.(N),i.landmarkAnimationID=i.canvas.requestAnimationFrame(E))};this.canvas.requestAnimationFrame(E)}}}])}(G1);tt.CameraContribution=n$;var r$=["body","startHead","endHead","startHeadOffset","endHeadOffset"],i$=["body","startHead","endHead","startHeadOffset","endHeadOffset"],a$=["body","startHead","endHead","startHeadOffset","endHeadOffset"],NO=function(t){function r(e){var n;Z(this,r),n=At(this,r,[Ot(Ot({},e),{},{type:r.tag})]);var i=n.attributes,a=i.body,o=i.startHead,s=i.endHead;i.startHeadOffset,i.endHeadOffset;var l=hr(i,r$);if(!a)throw new Error("Arrow's body is required");return n.body=a,n.appendChild(n.body),n.handleBodyAttributeChanged(n.body),o&&n.appendArrowHead(n.getArrowHeadType(o),!0),s&&n.appendArrowHead(n.getArrowHeadType(s),!1),n.applyArrowStyle(l,[n.body,n.startHead,n.endHead]),n}return Et(r,t),K(r,[{key:"handleBodyAttributeChanged",value:function(n){var i=this;n.addEventListener(It.ATTR_MODIFIED,function(a){var o=a.attrName;o==="x1"||o==="y1"?i.startHead&&i.transformArrowHead(i.startHead,!0):(o==="x2"||o==="y2")&&i.endHead&&i.transformArrowHead(i.endHead,!1)})}},{key:"getBody",value:function(){return this.body}},{key:"getStartHead",value:function(){return this.startHead}},{key:"getEndHead",value:function(){return this.endHead}},{key:"attributeChangedCallback",value:function(n,i,a){if(n==="opacity"||n==="strokeOpacity"||n==="stroke"||n==="lineWidth"||n==="increasedLineWidthForHitTesting")this.applyArrowStyle(ct({},n,a),[this.body,this.startHead,this.endHead]);else if(n==="startHead"||n==="endHead"){var o=n==="startHead";if(this.destroyArrowHead(o),a){var s=this.attributes;s.body,s.startHead,s.endHead,s.startHeadOffset,s.endHeadOffset;var l=hr(s,i$);this.appendArrowHead(this.getArrowHeadType(a),o),this.applyArrowStyle(l,[o?this.startHead:this.endHead])}}else if(n==="body"){var c=this.attributes;c.body,c.startHead,c.endHead,c.startHeadOffset,c.endHeadOffset;var u=hr(c,a$);this.body.destroy(),this.body=a,this.appendChild(this.body),this.applyArrowStyle(u,[this.body])}else n==="startHeadOffset"?this.moveArrowHeadAlongTangent(a,!0):n==="endHeadOffset"&&this.moveArrowHeadAlongTangent(a,!1)}},{key:"getArrowHeadType",value:function(n){return typeof n=="boolean"?"default":"custom"}},{key:"appendArrowHead",value:function(n,i){var a;n==="default"?a=this.createDefaultArrowHead():a=i?this.attributes.startHead:this.attributes.endHead,this.transformArrowHead(a,i),a.setAttribute("zIndex",1),i?this.startHead=a:this.endHead=a,this.appendChild(a);var o=i?this.attributes.startHeadOffset:this.attributes.endHeadOffset;o&&this.moveArrowHeadAlongTangent(o,i)}},{key:"transformArrowHead",value:function(n,i){var a=Nt(),o=0,s=0,l=0,c=0,u=0,f=this.body&&this.body.nodeName;if(f===U.LINE){var d=this.body.attributes,h=d.x1,p=d.x2,v=d.y1,g=d.y2;s=i?p:h,l=i?h:p,c=i?g:v,u=i?v:g}else if(f===U.POLYLINE){var y=this.body.attributes.points,m=y.length;s=i?y[1][0]:y[m-2][0],c=i?y[1][1]:y[m-2][1],l=i?y[0][0]:y[m-1][0],u=i?y[0][1]:y[m-1][1]}else if(f===U.PATH){var b=this.getTangent(this.body,i),x=_t(b,2),O=x[0],w=x[1];s=O[0],c=O[1],l=w[0],u=w[1]}var _=s-l,S=c-u;o=Math.atan2(S,_),a=Ht(l,u,0),i?(this.startHeadPosition=a,this.startHeadRad=o):(this.endHeadPosition=a,this.endHeadRad=o),n.setLocalPosition(a),n.setLocalEulerAngles(o*180/Math.PI+n.getLocalEulerAngles())}},{key:"moveArrowHeadAlongTangent",value:function(n,i){var a=i?this.startHead:this.endHead;a&&a.setLocalPosition(Ab(Nt(),i?this.startHeadPosition:this.endHeadPosition,Ht(Math.cos(i?this.startHeadRad:this.endHeadRad)*n,Math.sin(i?this.startHeadRad:this.endHeadRad)*n,0))),this.body}},{key:"destroyArrowHead",value:function(n){n&&this.startHead&&(this.startHead.destroy(),this.startHead=void 0),!n&&this.endHead&&(this.endHead.destroy(),this.endHead=void 0)}},{key:"getTangent",value:function(n,i){return i?n.getStartTangent():n.getEndTangent()}},{key:"createDefaultArrowHead",value:function(){var n=this.attributes,i=n.stroke,a=n.lineWidth,o=Math.sin,s=Math.cos,l=Math.PI,c=10*s(l/6);return new He({style:{d:"M".concat(c/2,",").concat(10*o(l/6)," L-").concat(c/2,",0 L").concat(c/2,",-").concat(10*o(l/6)),stroke:i,lineWidth:a,transformOrigin:"center"}})}},{key:"applyArrowStyle",value:function(n,i){var a=n.opacity,o=n.stroke,s=n.strokeOpacity,l=n.lineWidth,c=n.increasedLineWidthForHitTesting;i.forEach(function(u){u&&(gt(a)||(u.style.opacity=a),gt(o)||(u.style.stroke=o),gt(s)||(u.style.strokeOpacity=s),gt(l)||(u.style.lineWidth=l),gt(c)||(u.style.increasedLineWidthForHitTesting=c))})}}])}(la);NO.tag="arrow";NO.PARSED_STYLE_LIST=new Set([].concat(Pt(la.PARSED_STYLE_LIST),["body","startHead","endHead","startHeadOffset","endHeadOffset","stroke","lineWidth","opacity","strokeOpacity"]));var ep=Math.PI,o$=ep*2,yo=Math.sin,hl=Math.cos,s$=Math.acos,en=Math.atan2,Mo=Math.sqrt,wd=Math.max,nr=Math.min,Sa=1e-4,l$=[{name:"sr",inherits:!1,interpolable:!0,syntax:rt.LENGTH_PERCENTAGE},{name:"sr0",inherits:!1,interpolable:!0,syntax:rt.LENGTH_PERCENTAGE},{name:"startAngle",inherits:!1,interpolable:!0,syntax:rt.ANGLE},{name:"endAngle",inherits:!1,interpolable:!0,syntax:rt.ANGLE}];l$.forEach(function(t){Kh.registerProperty(t)});var Wn=function(r,e,n,i){return{x:r+n*Math.cos(i),y:e+n*Math.sin(i)}};function c$(t,r,e,n,i,a,o,s){var l=e-t,c=n-r,u=o-i,f=s-a,d=f*l-u*c;if(!(d*d<Sa))return d=(u*(r-a)-f*(t-i))/d,[t+d*l,r+d*c]}function pl(t,r,e,n,i,a,o){var s=t-e,l=r-n,c=a/Mo(s*s+l*l),u=c*l,f=-c*s,d=t+u,h=r+f,p=e+u,v=n+f,g=(d+p)/2,y=(h+v)/2,m=p-d,b=v-h,x=m*m+b*b,O=i-a,w=d*v-p*h,_=(b<0?-1:1)*Mo(wd(0,O*O*x-w*w)),S=(w*b-m*_)/x,k=(-w*m-b*_)/x,E=(w*b+m*_)/x,A=(-w*m+b*_)/x,T=S-g,P=k-y,N=E-g,I=A-y;return T*T+P*P>N*N+I*I&&(S=E,k=A),{cx:S,cy:k,x0:-u,y0:-f,x1:S*(i/O-1),y1:k*(i/O-1)}}function Er(t,r){return r=r<0&&t>=0?r+o$:r,r-t<=ep?0:1}var u$=function(t){function r(e){var n;return Z(this,r),n=At(this,r,[e]),n.updatePath(),n}return Et(r,t),K(r,[{key:"setAttribute",value:function(n,i,a){Wl(r,"setAttribute",this)([n,i,a]),["startAngle","endAngle","sr","sr0","radius"].indexOf(n)>-1&&this.updatePath()}},{key:"updatePath",value:function(){var n=this.parsedStyle,i=n.x,a=n.y,o=n.startAngle,s=n.endAngle,l=n.sr,c=n.sr0,u=n.radius,f=this.createPath(i,a,o?Xt(o):0,s?Xt(s):Math.PI*2,l||0,c||0,u||[0,0,0,0]);Wl(r,"setAttribute",this)(["d",f])}},{key:"createPath",value:function(n,i,a,o,s,l,c){if(!(s<=0)){var u=Wn(n,i,s,a),f=Wn(n,i,s,o),d=Wn(n,i,l,a),h=Wn(n,i,l,o);if(Ta(o-a,Math.PI*2)){var p=Wn(n,i,s,a+Math.PI),v=Wn(n,i,l,a+Math.PI),g=[["M",u.x,u.y],["A",s,s,0,1,1,p.x,p.y],["A",s,s,0,1,1,f.x,f.y],["M",d.x,d.y]];return l&&(g.push(["A",l,l,0,1,0,v.x,v.y]),g.push(["A",l,l,0,1,0,h.x,h.y])),g.push(["M",u.x,u.y]),g.push(["Z"]),g}var y=o-a,m=s*hl(a),b=s*yo(a),x=l*hl(o),O=l*yo(o),w=s*hl(o),_=s*yo(o),S=l*hl(a),k=l*yo(a),E=_t(c,4),A=E[0],T=E[1],P=E[2],N=E[3],I=(s-l)/2,R=nr(I,A),C=nr(I,T),L=nr(I,P),M=nr(I,N),j=wd(R,C),F=wd(L,M),$=j,B=F;if((j>Sa||F>Sa)&&y<ep){var z=c$(m,b,S,k,w,_,x,O);if(z){var W=m-z[0],Y=b-z[1],V=w-z[0],G=_-z[1],q=1/yo(s$((W*V+Y*G)/(Mo(W*W+Y*Y)*Mo(V*V+G*G)))/2),Q=Mo(z[0]*z[0]+z[1]*z[1]);$=nr(j,(s-Q)/(q+1)),B=nr(F,(l-Q)/(q-1))}}var nt=Er(a,o),et=[];if($>Sa){var at=nr(A,$),lt=nr(T,$),st=pl(S,k,m,b,s,at),ft=pl(w,_,x,O,s,lt);if(et.push(["M",n+st.cx+st.x0,i+st.cy+st.y0]),$<j&&at===lt){var ht=en(st.y0,st.x0),ut=en(ft.y0,ft.x0);et.push(["A",$,$,0,Er(ht,ut),1,n+ft.cx+ft.x0,i+ft.cy+ft.y0])}else{if(at>0){var pt=en(st.y0,st.x0),Bt=en(st.y1,st.x1),Wt=Wn(n,i,s,Bt);et.push(["A",at,at,0,Er(pt,Bt),1,Wt.x,Wt.y])}var Rt=en(st.cy+st.y1,st.cx+st.x1),te=en(ft.cy+ft.y1,ft.cx+ft.x1),ee=Wn(n,i,s,te);if(et.push(["A",s,s,0,Er(Rt,te),1,ee.x,ee.y]),lt>0){var ne=en(ft.y1,ft.x1),Dt=en(ft.y0,ft.x0);et.push(["A",lt,lt,0,Er(ne,Dt),1,n+ft.cx+ft.x0,i+ft.cy+ft.y0])}}}else et.push(["M",u.x,u.y]),et.push(["A",s,s,0,nt,1,f.x,f.y]);if(l<Sa)et.push(["L",h.x,h.y]);else if(B>Sa){var Gt=nr(N,B),he=nr(P,B),Ct=pl(x,O,0,0,l-s,he),St=pl(0,0,S,k,l-s,Gt);if(et.push(["L",n+Ct.cx+Ct.x0,i+Ct.cy+Ct.y0]),B<F&&Gt===he){var Ye=en(Ct.y0,Ct.x0),ye=en(St.y0,St.x0),tn=Wn(n,i,l,ye);et.push(["A",$,$,0,Er(Ye,ye),1,tn.x,tn.y])}else{if(he>0){var Sr=en(Ct.y0,Ct.x0),kr=en(Ct.y1,Ct.x1),Ti=Wn(n,i,l-s,kr);et.push(["A",he,he,0,Er(Sr,kr),1,Ti.x,Ti.y])}var zu=en(Ct.cy+Ct.y1,Ct.cx+Ct.x1),js=en(St.cy+St.y1,St.cx+St.x1),Ds=Wn(n,i,l,js);if(et.push(["A",l,l,0,Er(js,zu),0,Ds.x,Ds.y]),et.push(["L",Ds.x,Ds.y]),Gt>0){var qA=en(St.y1,St.x1),KA=en(St.y0,St.x0);et.push(["A",Gt,Gt,0,Er(qA,KA),1,n+St.cx+St.x0,i+St.cy+St.y0])}}}else et.push(["L",h.x,h.y]),et.push(["A",l,l,0,nt,0,d.x,d.y]);return et.push(["Z"]),et}}}])}(He);u$.PARSED_STYLE_LIST=new Set([].concat(Pt(He.PARSED_STYLE_LIST),["x","y","sr","sr0","radius","startAngle","endAngle"]));function yt(t){return new lc([t],null,t,t.ownerDocument)}let lc=class Ke{constructor(r=null,e=null,n=null,i=null,a=[null,null,null,null,null],o=[],s=[]){this._elements=Array.from(r),this._data=e,this._parent=n,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}selectAll(r){const e=typeof r=="string"?this._parent.querySelectorAll(r):r;return new Ke(e,null,this._elements[0],this._document)}selectFacetAll(r){const e=typeof r=="string"?this._parent.querySelectorAll(r):r;return new Ke(this._elements,null,this._parent,this._document,void 0,void 0,e)}select(r){const e=typeof r=="string"?this._parent.querySelectorAll(r)[0]||null:r;return new Ke([e],null,e,this._document)}append(r){const e=typeof r=="function"?r:()=>this.createElement(r),n=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const a=this._data[i],[o,s]=Array.isArray(a)?a:[a,null],l=e(o,i);l.__data__=o,s!==null&&(l.__fromElements__=s),this._parent.appendChild(l),n.push(l)}return new Ke(n,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const a=this._elements[i],o=a.__data__,s=e(o,i);a.appendChild(s),n.push(s)}return new Ke(n,null,n[0],this._document)}}maybeAppend(r,e,n){const i=this._elements[0],a=i.getElementById(r);if(a)return new Ke([a],null,this._parent,this._document);const o=typeof e=="string"?this.createElement(e):e();return o.id=r,n&&(o.className=n),i.appendChild(o),new Ke([o],null,this._parent,this._document)}data(r,e=i=>i,n=()=>null){const i=[],a=[],o=new Set(this._elements),s=[],l=new Set,c=new Map(this._elements.map((h,p)=>[e(h.__data__,p),h])),u=new Map(this._facetElements.map((h,p)=>[e(h.__data__,p),h])),f=ce(this._elements,h=>n(h.__data__));for(let h=0;h<r.length;h++){const p=r[h],v=e(p,h),g=n(p,h);if(c.has(v)){const y=c.get(v);y.__data__=p,y.__facet__=!1,a.push(y),o.delete(y),c.delete(v)}else if(u.has(v)){const y=u.get(v);y.__data__=p,y.__facet__=!0,a.push(y),u.delete(v)}else if(f.has(v)){const y=f.get(v);s.push([p,y]);for(const m of y)o.delete(m);f.delete(v)}else if(c.has(g)){const y=c.get(g);y.__toData__?y.__toData__.push(p):y.__toData__=[p],l.add(y),o.delete(y)}else i.push(p)}const d=[new Ke([],i,this._parent,this._document),new Ke(a,null,this._parent,this._document),new Ke(o,null,this._parent,this._document),new Ke([],s,this._parent,this._document),new Ke(l,null,this._parent,this._document)];return new Ke(this._elements,null,this._parent,this._document,d)}merge(r){const e=[...this._elements,...r._elements],n=[...this._transitions,...r._transitions];return new Ke(e,null,this._parent,this._document,void 0,n)}createElement(r){if(this._document)return this._document.createElement(r,{});const e=Ke.registry[r];return e?new e:Ga(`Unknown node type: ${r}`)}join(r=o=>o,e=o=>o,n=o=>o.remove(),i=o=>o,a=o=>o.remove()){const o=r(this._enter),s=e(this._update),l=n(this._exit),c=i(this._merge),u=a(this._split);return s.merge(o).merge(l).merge(c).merge(u)}remove(){for(let r=0;r<this._elements.length;r++){const e=this._transitions[r];if(this._elements[r].__removed__=!0,e){const n=Array.isArray(e)?e:[e];Promise.all(n.map(i=>i.finished)).then(()=>{const i=this._elements[r];i.__removed__&&i.remove()})}else{const n=this._elements[r];n.__removed__&&n.remove()}}return new Ke([],null,this._parent,this._document,void 0,this._transitions)}each(r){for(let e=0;e<this._elements.length;e++){const n=this._elements[e],i=n.__data__;r(i,e,n)}return this}attr(r,e){const n=typeof e!="function"?()=>e:e;return this.each(function(i,a,o){e!==void 0&&(o[r]=n(i,a,o))})}style(r,e){const n=typeof e!="function"?()=>e:e;return this.each(function(i,a,o){e!==void 0&&(o.style[r]=n(i,a,o))})}transition(r){const e=typeof r!="function"?()=>r:r,{_transitions:n}=this;return this.each(function(i,a,o){n[a]=e(i,a,o)})}on(r,e){return this.each(function(n,i,a){a.addEventListener(r,e)}),this}call(r,...e){return r(this,...e),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}};lc.registry={g:Ve,rect:wi,circle:Or,path:He,text:jn,ellipse:uu,image:fu,line:ua,polygon:fa,polyline:du,html:ca};function vl(t,r,e){return Math.max(r,Math.min(t,e))}function cc(t,r=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(r))}function dt(t,r){for(const[e,n]of Object.entries(r))t.style(e,n)}function f$(t,r){return r.forEach((e,n)=>n===0?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])),t.closePath(),t}function d$(t,r,e){const{arrowSize:n}=e,i=typeof n=="string"?+parseFloat(n)/100*Oe(t,r):n,a=Math.PI/6,o=Math.atan2(r[1]-t[1],r[0]-t[0]),s=Math.PI/2-o-a,l=[r[0]-i*Math.sin(s),r[1]-i*Math.cos(s)],c=o-a,u=[r[0]-i*Math.cos(c),r[1]-i*Math.sin(c)];return[l,u]}function Jo(t,r,e,n,i){const a=In(Ee(n,r))+Math.PI,o=In(Ee(n,e))+Math.PI;return t.arc(n[0],n[1],i,a,o,o-a<0),t}function RO(t,r,e,n="y",i="between",a=!1){const o=(g,y)=>g==="y"||g===!0?y?180:90:y?90:0,s=n==="y"||n===!0?e:r,l=o(n,a),c=oa(s),[u,f]=to(c,g=>s[g]),d=new zr({domain:[u,f],range:[0,100]}),h=g=>fe(s[g])&&!Number.isNaN(s[g])?d.map(s[g]):0,p={between:g=>`${t[g]} ${h(g)}%`,start:g=>g===0?`${t[g]} ${h(g)}%`:`${t[g-1]} ${h(g)}%, ${t[g]} ${h(g)}%`,end:g=>g===t.length-1?`${t[g]} ${h(g)}%`:`${t[g]} ${h(g)}%, ${t[g+1]} ${h(g)}%`},v=c.sort((g,y)=>h(g)-h(y)).map(p[i]||p.between).join(",");return`linear-gradient(${l}deg, ${v})`}function pu(t){const[r,e,n,i]=t;return[i,r,e,n]}function da(t,r,e){const[n,i,,a]=ue(t)?pu(r):r,[o,s]=e,l=t.getCenter(),c=Ya(Ee(n,l)),u=Ya(Ee(i,l)),f=u===c&&o!==s?u+Math.PI*2:u,d=1e-4;return{startAngle:c+d,endAngle:(f-c>=0?f:Math.PI*2+f)-d,innerRadius:Oe(a,l),outerRadius:Oe(n,l)}}function np(t){const{colorAttribute:r,opacityAttribute:e=r}=t;return`${e}Opacity`}function IO(t,r){if(!Jt(t))return"";const e=t.getCenter(),{transform:n}=r;return`translate(${e[0]}, ${e[1]}) ${n||""}`}function rp(t){if(t.length===1)return t[0];const[[r,e,n=0],[i,a,o=0]]=t;return[(r+i)/2,(e+a)/2,(n+o)/2]}var Ll=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function jO(t,r,e,n,i={}){const{inset:a=0,radius:o=0,insetLeft:s=a,insetTop:l=a,insetRight:c=a,insetBottom:u=a,radiusBottomLeft:f=o,radiusBottomRight:d=o,radiusTopLeft:h=o,radiusTopRight:p=o,minWidth:v=-1/0,maxWidth:g=1/0,minHeight:y=-1/0}=i,m=Ll(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!Jt(n)&&!j1(n)){const S=!!ue(n),[k,,E]=S?pu(r):r,[A,T]=k,[P,N]=Ee(E,k),I=P>0?A:A+P,R=N>0?T:T+N,C=Math.abs(P),L=Math.abs(N),M=I+s,j=R+l,F=C-(s+c),$=L-(l+u),B=S?vl(F,y,1/0):vl(F,v,g),z=S?vl($,v,g):vl($,y,1/0),W=S?M:M-(B-F)/2,Y=S?j-(z-$)/2:j-(z-$);return yt(t.createElement("rect",{})).style("x",W).style("y",Y).style("width",B).style("height",z).style("radius",[h,p,d,f]).call(dt,m).node()}const{y:b,y1:x}=e,O=n.getCenter(),w=da(n,r,[b,x]),_=gh().cornerRadius(o).padAngle(a*Math.PI/180);return yt(t.createElement("path",{})).style("d",_(w)).style("transform",`translate(${O[0]}, ${O[1]})`).style("radius",o).style("inset",a).call(dt,m).node()}const Ts=(t,r)=>{const{colorAttribute:e,opacityAttribute:n="fill",first:i=!0,last:a=!0}=t,o=Ll(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:s,document:l}=r;return(c,u,f)=>{const{color:d,radius:h=0}=f,p=Ll(f,["color","radius"]),v=p.lineWidth||1,{stroke:g,radius:y=h,radiusTopLeft:m=y,radiusTopRight:b=y,radiusBottomRight:x=y,radiusBottomLeft:O=y,innerRadius:w=0,innerRadiusTopLeft:_=w,innerRadiusTopRight:S=w,innerRadiusBottomRight:k=w,innerRadiusBottomLeft:E=w,lineWidth:A=e==="stroke"||g?v:0,inset:T=0,insetLeft:P=T,insetRight:N=T,insetBottom:I=T,insetTop:R=T,minWidth:C,maxWidth:L,minHeight:M}=o,j=Ll(o,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:F=d,opacity:$}=u,B=[i?m:_,i?b:S,a?x:k,a?O:E],z=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];ue(s)&&z.push(z.shift());const W=Object.assign(Object.assign({radius:y},Object.fromEntries(z.map((Y,V)=>[Y,B[V]]))),{inset:T,insetLeft:P,insetRight:N,insetBottom:I,insetTop:R,minWidth:C,maxWidth:L,minHeight:M});return yt(jO(l,c,u,s,W)).call(dt,p).style("fill","transparent").style(e,F).style(np(t),$).style("lineWidth",A).style("stroke",g===void 0?F:g).call(dt,j).node()}};Ts.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ha=(t,r)=>Ts(Object.assign({colorAttribute:"fill"},t),r);ha.props=Object.assign(Object.assign({},Ts.props),{defaultMarker:"square"});const vu=(t,r)=>Ts(Object.assign({colorAttribute:"stroke"},t),r);vu.props=Object.assign(Object.assign({},Ts.props),{defaultMarker:"hollowSquare"});var py=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function h$(t,r,e){const[n,i,a,o]=t;if(ue(e)){const c=[r?r[0][0]:i[0],i[1]],u=[r?r[3][0]:a[0],a[1]];return[n,c,u,o]}const s=[i[0],r?r[0][1]:i[1]],l=[a[0],r?r[3][1]:a[1]];return[n,s,l,o]}const p$=(t,r,e)=>{const n=Math.cos(t)*r,i=Math.sin(t)*r;return{x:n*e,y:i}},gl=(t,r)=>r/Math.tan(t/2);function v$(t,r){const[e,n,i,a]=t,[o,s,l,c]=r,u=n[0]-e[0]>i[0]-a[0],f=Math.atan2(Math.abs(n[1]-i[1]),Math.abs(n[0]-i[0])),d=u?[gl(f,o),gl(f,s),l,c]:[o,s,gl(f,l),gl(f,c)],h=u?1:-1,p=d.map(v=>p$(f,v,h));return[`M${e[0]+d[0]} ${e[1]}`,`L${n[0]-d[1]} ${n[1]}`,`Q${n[0]} ${n[1]} ${n[0]-p[1].x} ${n[1]+p[1].y}`,`L${i[0]+p[2].x} ${i[1]-p[2].y}`,`Q${i[0]} ${i[1]} ${i[0]-d[2]} ${i[1]}`,`L${a[0]+d[3]} ${a[1]}`,`Q${a[0]} ${a[1]} ${a[0]-p[3].x} ${a[1]-p[3].y}`,`L${e[0]+p[0].x} ${e[1]+p[0].y}`,`Q${e[0]} ${e[1]} ${e[0]+d[0]} ${e[1]}`,"Z"].join(" ")}const ip=(t,r)=>{const{adjustPoints:e=h$,radius:n,radiusTopLeft:i=n,radiusTopRight:a=n,radiusBottomRight:o=n,radiusBottomLeft:s=n,innerRadius:l=0,innerRadiusTopLeft:c=l,innerRadiusTopRight:u=l,innerRadiusBottomRight:f=l,innerRadiusBottomLeft:d=l,first:h=!0,last:p=!0}=t,v=py(t,["adjustPoints","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","first","last"]),{coordinate:g,document:y}=r;return(m,b,x,O)=>{const{index:w}=b,{color:_}=x,S=py(x,["color"]),k=O[w+1],E=e(m,k,g),A=!!ue(g),[T,P,N,I]=A?pu(E):E,{color:R=_,opacity:C}=b,L=[h?i??c:c,h?a??u:u,p?o??f:f,p?s??d:d],M=L.find(j=>j>0)?v$([T,P,N,I],L):ps().curve(yh)([T,P,N,I]);return yt(y.createElement("path",{})).call(dt,S).style("d",M).style("fill",R).style("fillOpacity",C).call(dt,v).node()}};ip.props={defaultMarker:"square"};function g$(t,r,e){const[n,i,a,o]=t;if(ue(e)){const c=[r?r[0][0]:(i[0]+a[0])/2,i[1]],u=[r?r[3][0]:(i[0]+a[0])/2,a[1]];return[n,c,u,o]}const s=[i[0],r?r[0][1]:(i[1]+a[1])/2],l=[a[0],r?r[3][1]:(i[1]+a[1])/2];return[n,s,l,o]}const DO=(t,r)=>ip(Object.assign({adjustPoints:g$},t),r);DO.props={defaultMarker:"square"};function Xa(t){const r=typeof t=="function"?t:t.render;return class extends la{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){r(this)}}}var vy=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const y$=Xa(t=>{const{d1:r,d2:e,style1:n,style2:i}=t.attributes,a=t.ownerDocument;yt(t).maybeAppend("line",()=>a.createElement("path",{})).style("d",r).call(dt,n),yt(t).maybeAppend("line1",()=>a.createElement("path",{})).style("d",e).call(dt,i)});function m$(t,r){const e=[],n=[];let i=!1,a=null;for(const o of t)!r(o[0])||!r(o[1])?i=!0:(e.push(o),i&&(i=!1,n.push([a,o])),a=o);return[e,n]}const $n=(t,r)=>{const{curve:e,gradient:n=!1,gradientColor:i="between",defined:a=u=>!Number.isNaN(u)&&u!==void 0&&u!==null,connect:o=!1}=t,s=vy(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:l,document:c}=r;return(u,f,d)=>{const{color:h,lineWidth:p}=d,v=vy(d,["color","lineWidth"]),{color:g=h,size:y=p,seriesColor:m,seriesX:b,seriesY:x}=f,O=IO(l,f),w=ue(l),_=n&&m?RO(m,b,x,n,i,w):g,S=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},v),_&&{stroke:_}),y&&{lineWidth:y}),O&&{transform:O}),s);let k;if(Jt(l)){const I=l.getCenter();k=R=>MT().angle((C,L)=>Ya(Ee(R[L],I))).radius((C,L)=>Oe(R[L],I)).defined(([C,L])=>a(C)&&a(L)).curve(e)(R)}else k=ps().x(I=>I[0]).y(I=>I[1]).defined(([I,R])=>a(I)&&a(R)).curve(e);const[E,A]=m$(u,a),T=it(S,"connect"),P=!!A.length;if(!P||o&&!Object.keys(T).length)return yt(c.createElement("path",{})).style("d",k(E)||[]).call(dt,S).node();if(P&&!o)return yt(c.createElement("path",{})).style("d",k(u)).call(dt,S).node();const N=I=>I.map(k).join(",");return yt(new y$).style("style1",Object.assign(Object.assign({},S),T)).style("style2",S).style("d1",N(A)).style("d2",k(u)).node()}};$n.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const $O=(t,r)=>{const{coordinate:e}=r;return(...n)=>{const i=Jt(e)?yh:Ib;return $n(Object.assign({curve:i},t),r)(...n)}};$O.props=Object.assign(Object.assign({},$n.props),{defaultMarker:"line"});var b$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const FO=(t,r)=>{const e=b$(t,[]),{coordinate:n}=r;return(...i)=>{const a=Jt(n)?jb:ue(n)?Db:$b;return $n(Object.assign({curve:a},e),r)(...i)}};FO.props=Object.assign(Object.assign({},$n.props),{defaultMarker:"smooth"});const BO=(t,r)=>$n(Object.assign({curve:Fb},t),r);BO.props=Object.assign(Object.assign({},$n.props),{defaultMarker:"hv"});const zO=(t,r)=>$n(Object.assign({curve:Bb},t),r);zO.props=Object.assign(Object.assign({},$n.props),{defaultMarker:"vh"});const WO=(t,r)=>$n(Object.assign({curve:zb},t),r);WO.props=Object.assign(Object.assign({},$n.props),{defaultMarker:"hvh"});var x$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function O$(t,r,e,n,i){const a=Ee(e,r),o=In(a),s=o+Math.PI/2,l=[n/2*Math.cos(s),n/2*Math.sin(s)],c=[i/2*Math.cos(s),i/2*Math.sin(s)],u=[i/2*Math.cos(o),i/2*Math.sin(o)],f=[n/2*Math.cos(o),n/2*Math.sin(o)],d=Ws(r,l),h=Ws(e,c),p=Ws(h,u),v=Ws(e,u),g=Ee(v,c),y=Ee(e,c),m=Ee(r,l),b=Ee(m,f),x=Ee(r,f),O=Ee(d,f);t.moveTo(...d),t.lineTo(...h),t.arcTo(...p,...v,i/2),t.arcTo(...g,...y,i/2),t.lineTo(...m),t.arcTo(...b,...x,n/2),t.arcTo(...O,...d,n/2),t.closePath()}const GO=(t,r)=>{const{document:e}=r;return(n,i,a)=>{const{seriesSize:o,color:s}=i,{color:l}=a,c=x$(a,["color"]),u=Qn();for(let f=0;f<n.length-1;f++){const d=n[f],h=n[f+1],p=o[f],v=o[f+1];[...d,...h].every(le)&&O$(u,d,h,p,v)}return yt(e.createElement("path",{})).call(dt,c).style("fill",s||l).style("d",u.toString()).call(dt,t).node()}};GO.props=Object.assign(Object.assign({},$n.props),{defaultMarker:"line"});var w$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const ap=(t,r,e)=>[["M",t-e,r],["A",e,e,0,1,0,t+e,r],["A",e,e,0,1,0,t-e,r],["Z"]];ap.style=["fill"];const HO=ap.bind(void 0);HO.style=["stroke","lineWidth"];const gu=(t,r,e)=>[["M",t-e,r-e],["L",t+e,r-e],["L",t+e,r+e],["L",t-e,r+e],["Z"]];gu.style=["fill"];const YO=gu.bind(void 0);YO.style=["fill"];const VO=gu.bind(void 0);VO.style=["stroke","lineWidth"];const op=(t,r,e)=>{const n=e*.618;return[["M",t-n,r],["L",t,r-e],["L",t+n,r],["L",t,r+e],["Z"]]};op.style=["fill"];const UO=op.bind(void 0);UO.style=["stroke","lineWidth"];const sp=(t,r,e)=>{const n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r+n],["L",t,r-n],["L",t+e,r+n],["Z"]]};sp.style=["fill"];const XO=sp.bind(void 0);XO.style=["stroke","lineWidth"];const lp=(t,r,e)=>{const n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r-n],["L",t+e,r-n],["L",t,r+n],["Z"]]};lp.style=["fill"];const qO=lp.bind(void 0);qO.style=["stroke","lineWidth"];const cp=(t,r,e)=>{const n=e/2*Math.sqrt(3);return[["M",t,r-e],["L",t+n,r-e/2],["L",t+n,r+e/2],["L",t,r+e],["L",t-n,r+e/2],["L",t-n,r-e/2],["Z"]]};cp.style=["fill"];const KO=cp.bind(void 0);KO.style=["stroke","lineWidth"];const up=(t,r,e)=>{const n=e-1.5;return[["M",t-e,r-n],["L",t+e,r+n],["L",t+e,r-n],["L",t-e,r+n],["Z"]]};up.style=["fill"];const ZO=up.bind(void 0);ZO.style=["stroke","lineWidth"];const QO=(t,r,e)=>[["M",t,r+e],["L",t,r-e]];QO.style=["stroke","lineWidth"];const JO=(t,r,e)=>[["M",t-e,r-e],["L",t+e,r+e],["M",t+e,r-e],["L",t-e,r+e]];JO.style=["stroke","lineWidth"];const tw=(t,r,e)=>[["M",t-e/2,r-e],["L",t+e/2,r-e],["M",t,r-e],["L",t,r+e],["M",t-e/2,r+e],["L",t+e/2,r+e]];tw.style=["stroke","lineWidth"];const ew=(t,r,e)=>[["M",t-e,r],["L",t+e,r],["M",t,r-e],["L",t,r+e]];ew.style=["stroke","lineWidth"];const nw=(t,r,e)=>[["M",t-e,r],["L",t+e,r]];nw.style=["stroke","lineWidth"];const fp=(t,r,e)=>[["M",t-e,r],["L",t+e,r]];fp.style=["stroke","lineWidth"];const rw=fp.bind(void 0);rw.style=["stroke","lineWidth"];const iw=(t,r,e)=>[["M",t-e,r],["A",e/2,e/2,0,1,1,t,r],["A",e/2,e/2,0,1,0,t+e,r]];iw.style=["stroke","lineWidth"];const aw=(t,r,e)=>[["M",t-e-1,r-2.5],["L",t,r-2.5],["L",t,r+2.5],["L",t+e+1,r+2.5]];aw.style=["stroke","lineWidth"];const ow=(t,r,e)=>[["M",t-e-1,r+2.5],["L",t,r+2.5],["L",t,r-2.5],["L",t+e+1,r-2.5]];ow.style=["stroke","lineWidth"];const sw=(t,r,e)=>[["M",t-(e+1),r+2.5],["L",t-e/2,r+2.5],["L",t-e/2,r-2.5],["L",t+e/2,r-2.5],["L",t+e/2,r+2.5],["L",t+e+1,r+2.5]];sw.style=["stroke","lineWidth"];const lw=(t,r,e)=>[["M",t-5,r+2.5],["L",t-5,r],["L",t,r],["L",t,r-3],["L",t,r+3],["L",t+6.5,r+3]];lw.style=["stroke","lineWidth"];const ts=new Map([["bowtie",up],["cross",JO],["dash",rw],["diamond",op],["dot",fp],["hexagon",cp],["hollowBowtie",ZO],["hollowDiamond",UO],["hollowHexagon",KO],["hollowPoint",HO],["hollowSquare",VO],["hollowTriangle",XO],["hollowTriangleDown",qO],["hv",aw],["hvh",sw],["hyphen",nw],["line",QO],["plus",ew],["point",ap],["rect",YO],["smooth",iw],["square",gu],["tick",tw],["triangleDown",lp],["triangle",sp],["vh",ow],["vhv",lw]]);function _$(t,r){var{d:e,fill:n,lineWidth:i,path:a,stroke:o,color:s}=r,l=w$(r,["d","fill","lineWidth","path","stroke","color"]);const c=ts.get(t)||ts.get("point");return(...u)=>new He({style:Object.assign(Object.assign({},l),{d:c(...u),stroke:c.style.includes("stroke")?s||o:"",fill:c.style.includes("fill")?s||n:"",lineWidth:c.style.includes("lineWidth")?i||i||2:0})})}function S$(t,r){ts.set(t,r)}function dp(t){return t.replace(/-(\w)/g,function(r,e){return e.toUpperCase()})}function k$(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}var E$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function cw(t,r,e,n){if(r.length===1)return;const{size:i}=e;if(t==="fixed")return i;if(t==="normal"||D1(n)){const[[a,o],[s,l]]=r,c=Math.abs((s-a)/2),u=Math.abs((l-o)/2);return Math.max(0,(c+u)/2)}return i}const jt=(t,r)=>{const{colorAttribute:e,symbol:n,mode:i="auto"}=t,a=E$(t,["colorAttribute","symbol","mode"]),o=ts.get(dp(n))||ts.get("point"),{coordinate:s,document:l}=r;return(c,u,f)=>{const{lineWidth:d,color:h}=f,p=a.stroke?d||1:d,{color:v=h,transform:g,opacity:y}=u,[m,b]=rp(c),O=cw(i,c,u,s)||a.r||f.r;return yt(l.createElement("path",{})).call(dt,f).style("fill","transparent").style("d",o(m,b,O)).style("lineWidth",p).style("transform",g).style("transformOrigin",`${m-O} ${b-O}`).style("stroke",v).style(np(t),y).style(e,v).call(dt,a).node()}};jt.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const hp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),r);hp.props=Object.assign({defaultMarker:"hollowBowtie"},jt.props);const pp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),r);pp.props=Object.assign({defaultMarker:"hollowDiamond"},jt.props);const vp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),r);vp.props=Object.assign({defaultMarker:"hollowHexagon"},jt.props);const gp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"point"},t),r);gp.props=Object.assign({defaultMarker:"hollowPoint"},jt.props);const yp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"square"},t),r);yp.props=Object.assign({defaultMarker:"hollowSquare"},jt.props);const mp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),r);mp.props=Object.assign({defaultMarker:"hollowTriangle"},jt.props);const bp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),r);bp.props=Object.assign({defaultMarker:"hollowTriangleDown"},jt.props);var A$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const uw=(t,r)=>{const{colorAttribute:e,mode:n="auto"}=t,i=A$(t,["colorAttribute","mode"]),{coordinate:a,document:o}=r;return(s,l,c)=>{const{lineWidth:u,color:f}=c,d=i.stroke?u||1:u,{color:h=f,transform:p,opacity:v}=l,[g,y]=rp(s),b=cw(n,s,l,a)||i.r||c.r;return yt(o.createElement("circle",{})).call(dt,c).style("fill","transparent").style("cx",g).style("cy",y).style("r",b).style("lineWidth",d).style("transform",p).style("transformOrigin",`${g} ${y}`).style("stroke",h).style(np(t),v).style(e,h).call(dt,i).node()}},yu=(t,r)=>uw(Object.assign({colorAttribute:"fill"},t),r);yu.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const xp=(t,r)=>uw(Object.assign({colorAttribute:"stroke"},t),r);xp.props=Object.assign({defaultMarker:"hollowPoint"},yu.props);const Op=(t,r)=>jt(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),r);Op.props=Object.assign({defaultMarker:"bowtie"},jt.props);const wp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),r);wp.props=Object.assign({defaultMarker:"cross"},jt.props);const _p=(t,r)=>jt(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),r);_p.props=Object.assign({defaultMarker:"diamond"},jt.props);const Sp=(t,r)=>jt(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),r);Sp.props=Object.assign({defaultMarker:"hexagon"},jt.props);const kp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),r);kp.props=Object.assign({defaultMarker:"hyphen"},jt.props);const Ep=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"line"},t),r);Ep.props=Object.assign({defaultMarker:"line"},jt.props);const Ap=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),r);Ap.props=Object.assign({defaultMarker:"plus"},jt.props);const Tp=(t,r)=>jt(Object.assign({colorAttribute:"fill",symbol:"point"},t),r);Tp.props=Object.assign({defaultMarker:"point"},jt.props);const Pp=(t,r)=>jt(Object.assign({colorAttribute:"fill",symbol:"square"},t),r);Pp.props=Object.assign({defaultMarker:"square"},jt.props);const Mp=(t,r)=>jt(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),r);Mp.props=Object.assign({defaultMarker:"tick"},jt.props);const Cp=(t,r)=>jt(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),r);Cp.props=Object.assign({defaultMarker:"triangle"},jt.props);const Lp=(t,r)=>jt(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),r);Lp.props=Object.assign({defaultMarker:"triangleDown"},jt.props);var gy=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Np=(t,r)=>{const{arrow:e=!0,arrowSize:n="40%"}=t,i=gy(t,["arrow","arrowSize"]),{document:a}=r;return(o,s,l)=>{const{defaultColor:c}=l,u=gy(l,["defaultColor"]),{color:f=c,transform:d}=s,[h,p]=o,v=Qn();if(v.moveTo(...h),v.lineTo(...p),e){const[g,y]=d$(h,p,{arrowSize:n});v.moveTo(...g),v.lineTo(...p),v.lineTo(...y)}return yt(a.createElement("path",{})).call(dt,u).style("d",v.toString()).style("stroke",f).style("transform",d).call(dt,i).node()}};Np.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function fw(t,r){r(t),t.children&&t.children.forEach(function(e){e&&fw(e,r)})}function Ps(t){mu(t,!0)}function _i(t){mu(t,!1)}function mu(t,r){var e=r?"visible":"hidden";fw(t,function(n){n.attr("visibility",e)})}var T$=function(t){ge(r,t);function r(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.apply(this,vt([],D(e),!1))||this;return i.isMutationObserved=!0,i.addEventListener(It.INSERTED,function(){_i(i)}),i}return r}(Ve);function dw(t){var r=t.appendChild(new T$({class:"offscreen"}));return _i(r),r}function P$(t){for(var r=t;r;){if(r.className==="offscreen")return!0;r=r.parent}return!1}var Rp=function(t){ge(r,t);function r(e){e===void 0&&(e={});var n=e.style,i=De(e,["style"]);return t.call(this,J({style:J({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},i))||this}return Object.defineProperty(r.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=dw(this)),this._offscreen},enumerable:!1,configurable:!0}),r.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)===null||e===void 0||e.destroy()},r}(jn);function qa(t){return t*Math.PI/180}function hw(t){return Number((t*180/Math.PI).toPrecision(5))}var me=function(){function t(r,e,n,i){r===void 0&&(r=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=r,this.y=e,this.width=n,this.height=i}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(r){return new t(r.x,r.y,r.width,r.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(r,e){return r>=this.left&&r<=this.right&&e>=this.top&&e<=this.bottom},t}();function yn(t,r){return Ge(t)?t.apply(void 0,vt([],D(r),!1)):t}var Fn=function(t,r){var e=function(i){return"".concat(r,"-").concat(i)},n=Object.fromEntries(Object.entries(t).map(function(i){var a=D(i,2),o=a[0],s=a[1],l=e(s);return[o,{name:l,class:".".concat(l),id:"#".concat(l),toString:function(){return l}}]}));return Object.assign(n,{prefix:e}),n},M$=5,pw=function(t,r,e,n){e===void 0&&(e=0),n===void 0&&(n=M$),Object.entries(r).forEach(function(i){var a=D(i,2),o=a[0],s=a[1],l=t;Object.prototype.hasOwnProperty.call(r,o)&&(s?Br(s)?(Br(t[o])||(l[o]={}),e<n?pw(t[o],s,e+1,n):l[o]=r[o]):Le(s)?(l[o]=[],l[o]=l[o].concat(s)):l[o]=s:l[o]=s)})},qn=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var n=0;n<r.length;n+=1)pw(t,r[n]);return t},C$=function(t){return t!==void 0&&t!=null&&!Number.isNaN(t)},yl,vw=b2(function(t,r){var e=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return yl||(yl=tt.offscreenCanvasCreator.getOrCreateContext(void 0)),yl.font=[a,o,i,"".concat(e,"px"),n].join(" "),yl.measureText(t).width},function(t,r){return[t,Object.values(r||gw(t)).join()].join("")},4096),gw=function(t){var r=t.style.fontFamily||"sans-serif",e=t.style.fontWeight||"normal",n=t.style.fontStyle||"normal",i=t.style.fontVariant,a=t.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:r,fontWeight:e,fontStyle:n,fontVariant:i}};function yw(t){return t.nodeName==="text"?t:t.nodeName==="g"&&t.children.length===1&&t.children[0].nodeName==="text"?t.children[0]:null}function mw(t,r){var e=yw(t);e&&e.attr(r)}function _d(t,r,e){e===void 0&&(e="..."),mw(t,{wordWrap:!0,wordWrapWidth:r,maxLines:1,textOverflow:e})}function L$(t,r,e,n){e===void 0&&(e=2),n===void 0&&(n="top"),mw(t,{wordWrap:!0,wordWrapWidth:r,maxLines:e,textBaseline:n})}function bw(t){var r=t.canvas,e=t.touches,n=t.offsetX,i=t.offsetY;if(r){var a=r.x,o=r.y;return[a,o]}if(e){var s=e[0],l=s.clientX,c=s.clientY;return[l,c]}return n&&i?[n,i]:[0,0]}function yy(t){var r=t.nativeEvent,e=t.touches,n=t.clientX,i=t.clientY;if(r)return[r.clientX,r.clientY];if(e){var a=e[0],o=a.clientX,s=a.clientY;return[o,s]}return typeof n=="number"&&typeof i=="number"?[n,i]:[0,0]}function na(t){return typeof t=="function"?t():pe(t)||fe(t)?new Rp({style:{text:String(t)}}):t}function N$(t,r){return typeof t=="function"?t():pe(t)||fe(t)?new ca({style:J(J({pointerEvents:"auto"},r),{innerHTML:t})}):t}function R$(t,r){return t.reduce(function(e,n){return(e[n[r]]=e[n[r]]||[]).push(n),e},{})}function un(t,r,e,n,i){return n===void 0&&(n=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),t?e(r):(n&&i(r),null)}function Ze(t,r,e,n,i){return n===void 0&&(n=!0),i===void 0&&(i=!1),n&&t===r||i&&t===e?!0:t>r&&t<e}var I$=function(t,r){return function(e){return t*(1-e)+r*e}};function j$(t,r){var e=r?r.length:0,n=t?Math.min(e,t.length):0;return function(i){var a=new Array(n),o=new Array(e),s=0;for(s=0;s<n;++s)a[s]=Ip(t[s],r[s]);for(;s<e;++s)o[s]=r[s];for(s=0;s<n;++s)o[s]=a[s](i);return o}}function D$(t,r){t===void 0&&(t={}),r===void 0&&(r={});var e={},n={};return Object.entries(r).forEach(function(i){var a=D(i,2),o=a[0],s=a[1];o in t?e[o]=Ip(t[o],s):n[o]=s}),function(i){return Object.entries(e).forEach(function(a){var o=D(a,2),s=o[0],l=o[1];return n[s]=l(i)}),n}}function Ip(t,r){return typeof t=="number"&&typeof r=="number"?I$(t,r):Array.isArray(t)&&Array.isArray(r)?j$(t,r):typeof t=="object"&&typeof r=="object"?D$(t,r):function(e){return t}}function $$(t,r,e,n){if(!n)return t.attr("__keyframe_data__",e),null;var i=n.duration,a=i===void 0?0:i,o=Ip(r,e),s=Math.ceil(+a/16),l=new Array(s).fill(0).map(function(c,u,f){return{__keyframe_data__:o(u/(f.length-1))}});return t.animate(l,J({fill:"both"},n))}function my(t){for(var r=1/0,e=1/0,n=-1/0,i=-1/0,a=0;a<t.length;a++){var o=t[a],s=o.x,l=o.y,c=o.width,u=o.height,f=D([s+c,l+u],2),d=f[0],h=f[1];s<r&&(r=s),l<e&&(e=l),d>n&&(n=d),h>i&&(i=h)}return new me(r,e,n-r,i-e)}var F$=function(t,r,e){var n=t.width,i=t.height,a=e.flexDirection,o=a===void 0?"row":a;e.flexWrap;var s=e.justifyContent,l=s===void 0?"flex-start":s;e.alignContent;var c=e.alignItems,u=c===void 0?"flex-start":c,f=o==="row",d=o==="row"||o==="column",h=f?d?[1,0]:[-1,0]:d?[0,1]:[0,-1],p=D([0,0],2),v=p[0],g=p[1],y=r.map(function(S){var k,E=S.width,A=S.height,T=D([v,g],2),P=T[0],N=T[1];return k=D([v+E*h[0],g+A*h[1]],2),v=k[0],g=k[1],new me(P,N,E,A)}),m=my(y),b={"flex-start":0,"flex-end":f?n-m.width:i-m.height,center:f?(n-m.width)/2:(i-m.height)/2},x=y.map(function(S){var k=S.x,E=S.y,A=me.fromRect(S);return A.x=f?k+b[l]:k,A.y=f?E:E+b[l],A});my(x);var O=function(S){var k=D(f?["height",i]:["width",n],2),E=k[0],A=k[1];switch(u){case"flex-start":return 0;case"flex-end":return A-S[E];case"center":return A/2-S[E]/2;default:return 0}},w=x.map(function(S){var k=S.x,E=S.y,A=me.fromRect(S);return A.x=f?k:k+O(A),A.y=f?E+O(A):E,A}),_=w.map(function(S){var k,E,A=me.fromRect(S);return A.x+=(k=t.x)!==null&&k!==void 0?k:0,A.y+=(E=t.y)!==null&&E!==void 0?E:0,A});return _},B$=function(t,r,e){return[]};const z$=function(t,r,e){if(r.length===0)return[];var n={flex:F$,grid:B$},i=e.display in n?n[e.display]:null;return i?.call(null,t,r,e)||[]};function Cr(t,r){return[t[0]*r,t[1]*r]}function wo(t,r){return[t[0]+r[0],t[1]+r[1]]}function hf(t,r){return[t[0]-r[0],t[1]-r[1]]}function Ri(t,r){return[Math.min(t[0],r[0]),Math.min(t[1],r[1])]}function Ii(t,r){return[Math.max(t[0],r[0]),Math.max(t[1],r[1])]}function es(t,r){return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}function xw(t){if(t[0]===0&&t[1]===0)return[0,0];var r=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/r,t[1]/r]}function W$(t,r){return r?[t[1],-t[0]]:[-t[1],t[0]]}function Sd(t,r){return+t.toPrecision(r)}function kd(t,r){var e={},n=Array.isArray(r)?r:[r];for(var i in t)n.includes(i)||(e[i]=t[i]);return e}function G$(t,r,e,n){var i,a=[],o=!!n,s,l,c=[1/0,1/0],u=[-1/0,-1/0],f,d,h;if(o){i=D(n,2),c=i[0],u=i[1];for(var p=0,v=t.length;p<v;p+=1){var g=t[p];c=Ri(c,g),u=Ii(u,g)}}for(var p=0,y=t.length;p<y;p+=1){var g=t[p];if(p===0)h=g;else if(p===y-1)d=g,a.push(h),a.push(d);else{var m=[p?p-1:y-1,p-1][1];s=t[m],l=t[p+1];var b=[0,0];b=hf(l,s),b=Cr(b,r);var x=es(g,s),O=es(g,l),w=x+O;w!==0&&(x/=w,O/=w);var _=Cr(b,-x),S=Cr(b,O);d=wo(g,_),f=wo(g,S),f=Ri(f,Ii(l,g)),f=Ii(f,Ri(l,g)),_=hf(f,g),_=Cr(_,-x/O),d=wo(g,_),d=Ri(d,Ii(s,g)),d=Ii(d,Ri(s,g)),S=hf(g,d),S=Cr(S,O/x),f=wo(g,S),o&&(d=Ii(d,c),d=Ri(d,u),f=Ii(f,c),f=Ri(f,u)),a.push(h),a.push(d),h=f}}return a}function H$(t,r,e){e===void 0&&(e=[[0,0],[1,1]]);for(var n=!1,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=G$(i,.4,n,e),l=i.length,c=[],u,f,d,a=0;a<l-1;a+=1)u=s[a*2],f=s[a*2+1],d=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],d[0],d[1]]);return c}var Y$=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function V$(t){return Y$.includes(t)}function by(t){var r={};for(var e in t)V$(e)&&(r[e]=t[e]);return r}function U$(t,r){if(t.length<=r)return t;for(var e=Math.floor(t.length/r),n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function jp(t,r,e){var n=t.getBBox(),i=n.width,a=n.height,o=r/Math.max(i,a);return t.style.transform="scale(".concat(o,")"),o}function X$(t,r){var e=new Map;return t.forEach(function(n){var i=r(n);e.has(i)||e.set(i,[]),e.get(i).push(n)}),e}function q$(t){throw new Error(t)}var K$=function(){function t(i,a,o,s,l,c,u){i===void 0&&(i=null),a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=[null,null,null,null,null]),c===void 0&&(c=[]),u===void 0&&(u=[]),r.add(this),this._elements=Array.from(i),this._data=a,this._parent=o,this._document=s,this._enter=l[0],this._update=l[1],this._exit=l[2],this._merge=l[3],this._split=l[4],this._transitions=c,this._facetElements=u}t.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new e(a,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new e(this._elements,null,this._parent,this._document,void 0,void 0,a)},t.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new e([a],null,a,this._document)},t.prototype.append=function(i){var a=this,o=typeof i=="function"?i:function(){return a.createElement(i)},s=[];if(this._data!==null){for(var l=0;l<this._data.length;l++){var c=this._data[l],u=D(Array.isArray(c)?c:[c,null],2),f=u[0],d=u[1],h=o(f,l);h.__data__=f,d!==null&&(h.__fromElements__=d),this._parent.appendChild(h),s.push(h)}return new e(s,null,this._parent,this._document)}for(var l=0;l<this._elements.length;l++){var p=this._elements[l],f=p.__data__,h=o(f,l);p.appendChild(h),s.push(h)}return new e(s,null,s[0],this._document)},t.prototype.maybeAppend=function(i,a){var o=Gu(this,r,"m",n).call(this,i[0]==="#"?i:"#".concat(i),a);return o.attr("id",i),o},t.prototype.maybeAppendByClassName=function(i,a){var o=i.toString(),s=Gu(this,r,"m",n).call(this,o[0]==="."?o:".".concat(o),a);return s.attr("className",o),s},t.prototype.maybeAppendByName=function(i,a){var o=Gu(this,r,"m",n).call(this,'[name="'.concat(i,'"]'),a);return o.attr("name",i),o},t.prototype.data=function(i,a,o){var s,l;a===void 0&&(a=function(E){return E}),o===void 0&&(o=function(){return null});for(var c=[],u=[],f=new Set(this._elements),d=[],h=new Set,p=new Map(this._elements.map(function(E,A){return[a(E.__data__,A),E]})),v=new Map(this._facetElements.map(function(E,A){return[a(E.__data__,A),E]})),g=X$(this._elements,function(E){return o(E.__data__)}),y=0;y<i.length;y++){var m=i[y],b=a(m,y),x=o(m,y);if(p.has(b)){var O=p.get(b);O.__data__=m,O.__facet__=!1,u.push(O),f.delete(O),p.delete(b)}else if(v.has(b)){var O=v.get(b);O.__data__=m,O.__facet__=!0,u.push(O),v.delete(b)}else if(g.has(b)){var w=g.get(b);d.push([m,w]);try{for(var _=(s=void 0,vs(w)),S=_.next();!S.done;S=_.next()){var O=S.value;f.delete(O)}}catch(E){s={error:E}}finally{try{S&&!S.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}g.delete(b)}else if(p.has(x)){var O=p.get(x);O.__toData__?O.__toData__.push(m):O.__toData__=[m],h.add(O),f.delete(O)}else c.push(m)}var k=[new e([],c,this._parent,this._document),new e(u,null,this._parent,this._document),new e(f,null,this._parent,this._document),new e([],d,this._parent,this._document),new e(h,null,this._parent,this._document)];return new e(this._elements,null,this._parent,this._document,k)},t.prototype.merge=function(i){var a=vt(vt([],D(this._elements),!1),D(i._elements),!1),o=vt(vt([],D(this._transitions),!1),D(i._transitions),!1);return new e(a,null,this._parent,this._document,void 0,o)},t.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=e.registry[i];return a?new a:q$("Unknown node type: ".concat(i))},t.prototype.join=function(i,a,o,s,l){i===void 0&&(i=function(p){return p}),a===void 0&&(a=function(p){return p}),o===void 0&&(o=function(p){return p.remove()}),s===void 0&&(s=function(p){return p}),l===void 0&&(l=function(p){return p.remove()});var c=i(this._enter),u=a(this._update),f=o(this._exit),d=s(this._merge),h=l(this._split);return u.merge(c).merge(f).merge(d).merge(h)},t.prototype.remove=function(){for(var i=function(s){var l=a._elements[s],c=a._transitions[s];c?c.then(function(){return l.remove()}):l.remove()},a=this,o=0;o<this._elements.length;o++)i(o);return new e([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var o=this._elements[a],s=o.__data__;i.call(o,s,a)}return this},t.prototype.attr=function(i,a){var o=typeof a!="function"?function(){return a}:a;return this.each(function(s,l){a!==void 0&&(this[i]=o.call(this,s,l))})},t.prototype.style=function(i,a,o){o===void 0&&(o=!0);var s=typeof a!="function"||!o?function(){return a}:a;return this.each(function(l,c){a!==void 0&&(this.style[i]=s.call(this,l,c))})},t.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(o,s){var l=this;Object.entries(i).forEach(function(c){var u=D(c,2),f=u[0],d=u[1],h=typeof d!="function"||!a?function(){return d}:d;d!==void 0&&l.attr(f,h.call(l,o,s))})})},t.prototype.update=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.transition=function(i){this._transitions;var a=new Array(this._elements.length);return this.each(function(o,s){a[s]=i.call(this,o,s)}),this._transitions=f2(a),this},t.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},t.prototype.call=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return i.call.apply(i,vt([this._parent,this],D(a),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},t.prototype.parent=function(){return this._parent};var r,e,n;return e=t,r=new WeakSet,n=function(a,o){var s=this._elements[0],l=s.querySelector(a);if(l)return new e([l],null,this._parent,this._document);var c=typeof o=="string"?this.createElement(o):o();return s.appendChild(c),new e([c],null,this._parent,this._document)},t.registry={g:Ve,rect:wi,circle:Or,path:He,text:Rp,ellipse:uu,image:fu,line:ua,polygon:fa,polyline:du,html:ca},t}();function wt(t){return new K$([t],null,t,t.ownerDocument)}function Z$(t,r,e){return t.querySelector(r)?wt(t).select(r):wt(t).append(e)}function Je(t){if(fe(t))return[t,t,t,t];if(Le(t)){var r=t.length;if(r===1)return[t[0],t[0],t[0],t[0]];if(r===2)return[t[0],t[1],t[0],t[1]];if(r===3)return[t[0],t[1],t[2],t[1]];if(r===4)return t}return[0,0,0,0]}function xy(t){var r=t.getLocalBounds(),e=r.min,n=r.max,i=D([e,n],2),a=D(i[0],2),o=a[0],s=a[1],l=D(i[1],2),c=l[0],u=l[1];return{x:o,y:s,width:c-o,height:u-s,left:o,bottom:u,top:s,right:c}}function Q$(t,r){var e=D(t,2),n=e[0],i=e[1],a=D(r,2),o=a[0],s=a[1];return n!==o&&i===s}function J$(t,r){var e,n,i=r.attributes;try{for(var a=vs(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=D(o.value,2),l=s[0],c=s[1];l!=="id"&&l!=="className"&&t.attr(l,c)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}function Dp(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function tF(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function eF(t,r){return"".concat(r).concat(Dp(t))}function Oy(t,r,e){var n;e===void 0&&(e=!0);var i=r||((n=t.match(/^([a-z][a-z0-9]+)/))===null||n===void 0?void 0:n[0])||"",a=t.replace(new RegExp("^(".concat(i,")")),"");return e?tF(a):a}function nF(t,r){Object.entries(r).forEach(function(e){var n=D(e,2),i=n[0],a=n[1];vt([t],D(t.querySelectorAll(i)),!1).filter(function(o){return o.matches(i)}).forEach(function(o){if(o){var s=o;s.style.cssText+=Object.entries(a).reduce(function(l,c){return"".concat(l).concat(c.join(":"),";")},"")}})})}var ml=function(t,r){if(!t?.startsWith(r))return!1;var e=t[r.length];return e>="A"&&e<="Z"};function Mt(t,r,e){e===void 0&&(e=!1);var n={};return Object.entries(t).forEach(function(i){var a=D(i,2),o=a[0],s=a[1];if(!(o==="className"||o==="class")){if(ml(o,"show")&&ml(Oy(o,"show"),r)!==e)o===eF(r,"show")?n[o]=s:n[o.replace(new RegExp(Dp(r)),"")]=s;else if(!ml(o,"show")&&ml(o,r)!==e){var l=Oy(o,r);l==="filter"&&typeof s=="function"||(n[l]=s)}}}),n}function sr(t,r){return Object.entries(t).reduce(function(e,n){var i=D(n,2),a=i[0],o=i[1];return a.startsWith("show")?e["show".concat(r).concat(a.slice(4))]=o:e["".concat(r).concat(Dp(a))]=o,e},{})}function Gr(t,r){r===void 0&&(r=["x","y","class","className"]);var e=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],n={},i={};return Object.entries(t).forEach(function(a){var o=D(a,2),s=o[0],l=o[1];r.includes(s)||(e.indexOf(s)!==-1?i[s]=l:n[s]=l)}),[n,i]}function rF(t,r,e){var n=t.getBBox(),i=n.width,a=n.height,o=D([r,e].map(function(c,u){var f;return c.includes("%")?parseFloat(((f=c.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||f===void 0?void 0:f[0])||"0")/100*(u===0?i:a):c}),2),s=o[0],l=o[1];return[s,l]}function Ow(t,r){if(r)try{var e=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,n=r.replace(e,function(i,a,o){return"translate(".concat(rF(t,a,o),")")});t.attr("transform",n)}catch{}}function iF(t){var r;return((r=t[0])===null||r===void 0?void 0:r.map(function(e,n){return t.map(function(i){return i[n]})}))||[]}var wy=function(t,r){if(r==null){t.innerHTML="";return}t.replaceChildren?Array.isArray(r)?t.replaceChildren.apply(t,vt([],D(r),!1)):t.replaceChildren(r):(t.innerHTML="",Array.isArray(r)?r.forEach(function(e){return t.appendChild(e)}):t.appendChild(r))};function bu(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(r){return r[0]}):t.length>2?[t[0]]:t.split("")}var aF=function(t){var r=new DOMParser,e=r.parseFromString(t,"text/html"),n=e.body.firstElementChild;if(console.log(n?.getClientRects(),11),!n)return 0;var i=n.getAttribute("style")||"",a=Object.fromEntries(i.split(";").map(function(g){return g.trim()}).filter(function(g){return g.includes(":")}).map(function(g){var y=D(g.split(":").map(function(x){return x.trim()}),2),m=y[0],b=y[1];return[m.toLowerCase(),b]})),o=function(g){if(!g)return 0;var y=g.match(/([\d.]+)px/);return y?parseFloat(y[1]):0};if(a.height)return o(a.height);var s=o(a["font-size"])||16,l=a["line-height"],c;!l||l==="normal"?c=1.2*s:l.endsWith("px")?c=o(l):/^[\d.]+$/.test(l)?c=parseFloat(l)*s:c=s;var u=o(a["padding-top"]),f=o(a["padding-bottom"]);if(a.padding){var d=a.padding.split(/\s+/).map(o);d.length===1||d.length===2?(u=d[0],f=d[0]):(d.length===3||d.length===4)&&(u=d[0],f=d[2])}var h=o(a["border-top-width"]),p=o(a["border-bottom-width"]);if(a.border){var v=a.border.match(/([\d.]+)px/);v&&(h=parseFloat(v[1]),p=parseFloat(v[1]))}if(a["border-width"]){var d=a["border-width"].split(/\s+/).map(o);d.length===1||d.length===2?(h=d[0],p=d[0]):(d.length===3||d.length===4)&&(h=d[0],p=d[2])}return c+u+f+h+p};function oF(){mu(this,this.attributes.visibility!=="hidden")}var Ue=function(t){ge(r,t);function r(e,n){n===void 0&&(n={});var i=t.call(this,qn({},{style:n},e))||this;return i.initialized=!1,i._defaultOptions=n,i}return Object.defineProperty(r.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=dw(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),r.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},r.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)===null||e===void 0||e.destroy()},r.prototype.attributeChangedCallback=function(e){e==="visibility"&&oF.call(this)},r.prototype.update=function(e,n){var i;return this.attr(qn({},this.attributes,e||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,n)},r.prototype.clear=function(){this.removeChildren()},r.prototype.bindEvents=function(e,n){},r.prototype.getSubShapeStyle=function(e){e.x,e.y,e.transform,e.transformOrigin,e.class,e.className,e.zIndex;var n=De(e,["x","y","transform","transformOrigin","class","className","zIndex"]);return n},r}(la),ww=function(t,r,e){return[["M",t-e,r],["A",e,e,0,1,0,t+e,r],["A",e,e,0,1,0,t-e,r],["Z"]]},sF=ww,lF=function(t,r,e){return[["M",t-e,r-e],["L",t+e,r-e],["L",t+e,r+e],["L",t-e,r+e],["Z"]]},cF=function(t,r,e){return[["M",t-e,r],["L",t,r-e],["L",t+e,r],["L",t,r+e],["Z"]]},uF=function(t,r,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r+n],["L",t,r-n],["L",t+e,r+n],["Z"]]},fF=function(t,r,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r-n],["L",t+e,r-n],["L",t,r+n],["Z"]]},dF=function(t,r,e){var n=e/2*Math.sqrt(3);return[["M",t,r-e],["L",t+n,r-e/2],["L",t+n,r+e/2],["L",t,r+e],["L",t-n,r+e/2],["L",t-n,r-e/2],["Z"]]},hF=function(t,r,e){var n=e-1.5;return[["M",t-e,r-n],["L",t+e,r+n],["L",t+e,r-n],["L",t-e,r+n],["Z"]]},_w=function(t,r,e){return[["M",t,r+e],["L",t,r-e]]},pF=function(t,r,e){return[["M",t-e,r-e],["L",t+e,r+e],["M",t+e,r-e],["L",t-e,r+e]]},vF=function(t,r,e){return[["M",t-e/2,r-e],["L",t+e/2,r-e],["M",t,r-e],["L",t,r+e],["M",t-e/2,r+e],["L",t+e/2,r+e]]},gF=function(t,r,e){return[["M",t-e,r],["L",t+e,r],["M",t,r-e],["L",t,r+e]]},yF=function(t,r,e){return[["M",t-e,r],["L",t+e,r]]},Sw=function(t,r,e){return[["M",t-e,r],["L",t+e,r]]},mF=Sw,bF=function(t,r,e){return[["M",t-e,r],["A",e/2,e/2,0,1,1,t,r],["A",e/2,e/2,0,1,0,t+e,r]]},xF=function(t,r,e){return[["M",t-e-1,r-2.5],["L",t,r-2.5],["L",t,r+2.5],["L",t+e+1,r+2.5]]},OF=function(t,r,e){return[["M",t-e-1,r+2.5],["L",t,r+2.5],["L",t,r-2.5],["L",t+e+1,r-2.5]]},wF=function(t,r,e){return[["M",t-(e+1),r+2.5],["L",t-e/2,r+2.5],["L",t-e/2,r-2.5],["L",t+e/2,r-2.5],["L",t+e/2,r+2.5],["L",t+e+1,r+2.5]]};function _F(t,r){return[["M",t-5,r+2.5],["L",t-5,r],["L",t,r],["L",t,r-3],["L",t,r+3],["L",t+6.5,r+3]]}var SF=function(t,r,e){return[["M",t-e,r-e],["L",t+e,r],["L",t-e,r+e],["Z"]]},kF=function(t,r,e){var n=e,i=e*.2,a=e*.7;return[["M",t-n,r],["A",n,n,0,1,0,t+n,r],["A",n,n,0,1,0,t-n,r],["Z"],["M",t-a,r],["L",t-i,r],["M",t+i,r],["L",t+a,r],["M",t,r-a],["L",t,r-i],["M",t,r+i],["L",t,r+a]]};function EF(t){var r="default";if(ys(t)&&t instanceof Image)r="image";else if(Ge(t))r="symbol";else if(pe(t)){var e=new RegExp("data:(image|text)");t.match(e)?r="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?r="url":r="symbol"}return r}function AF(t){var r=EF(t);return["base64","url","image"].includes(r)?"image":t&&r==="symbol"?"path":null}var Ft=function(t){ge(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.render=function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o,l=this.getSubShapeStyle(e),c=l.symbol,u=l.size,f=u===void 0?16:u,d=De(l,["symbol","size"]),h=AF(c);un(!!h,wt(n),function(p){p.maybeAppendByClassName("marker",h).attr("className","marker ".concat(h,"-marker")).call(function(v){if(h==="image"){var g=f*2;v.styles({img:c,width:g,height:g,x:a-f,y:s-f})}else{var g=f/2,y=Ge(c)?c:r.getSymbol(c);v.styles(J({d:y?.(a,s,g)},d))}})})},r.MARKER_SYMBOL_MAP=new Map,r.registerSymbol=function(e,n){r.MARKER_SYMBOL_MAP.set(e,n)},r.getSymbol=function(e){return r.MARKER_SYMBOL_MAP.get(e)},r.getSymbols=function(){return Array.from(r.MARKER_SYMBOL_MAP.keys())},r}(Ue);Ft.registerSymbol("cross",pF);Ft.registerSymbol("hyphen",yF);Ft.registerSymbol("line",_w);Ft.registerSymbol("plus",gF);Ft.registerSymbol("tick",vF);Ft.registerSymbol("circle",ww);Ft.registerSymbol("point",sF);Ft.registerSymbol("bowtie",hF);Ft.registerSymbol("hexagon",dF);Ft.registerSymbol("square",lF);Ft.registerSymbol("diamond",cF);Ft.registerSymbol("triangle",uF);Ft.registerSymbol("triangle-down",fF);Ft.registerSymbol("line",_w);Ft.registerSymbol("dot",Sw);Ft.registerSymbol("dash",mF);Ft.registerSymbol("smooth",bF);Ft.registerSymbol("hv",xF);Ft.registerSymbol("vh",OF);Ft.registerSymbol("hvh",wF);Ft.registerSymbol("vhv",_F);Ft.registerSymbol("focus",kF);function uc(t,...r){return r.reduce((e,n)=>i=>e(n(i)),t)}function Ed(t,r){return r-t?e=>(e-t)/(r-t):e=>.5}function TF(t,r){const e=r<t?r:t,n=t>r?t:r;return i=>Math.min(Math.max(e,i),n)}function PF(t,r,e,n,i){let a=e,o=n||t.length;const s=l=>l;for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>r?o=l:a=l+1}return a}const _y=Math.sqrt(50),Sy=Math.sqrt(10),ky=Math.sqrt(2);function Nl(t,r,e){const n=(r-t)/Math.max(0,e),i=Math.floor(Math.log(n)/Math.LN10),a=n/10**i;return i>=0?(a>=_y?10:a>=Sy?5:a>=ky?2:1)*10**i:-(10**-i)/(a>=_y?10:a>=Sy?5:a>=ky?2:1)}const MF=(t,r,e=5)=>{const n=[t,r];let i=0,a=n.length-1,o=n[i],s=n[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=Nl(o,s,e),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=Nl(o,s,e)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=Nl(o,s,e)),l>0?(n[i]=Math.floor(o/l)*l,n[a]=Math.ceil(s/l)*l):l<0&&(n[i]=Math.ceil(o*l)/l,n[a]=Math.floor(s*l)/l),n};function Ey(t){return!Kt(t)&&!fx(t)&&!Number.isNaN(t)}function pf(t,r,e){let n=e;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(r-t)*6*n:n<1/2?r:n<2/3?t+(r-t)*(2/3-n)*6:t}function CF(t){const r=t[0]/360,e=t[1]/100,n=t[2]/100,i=t[3];if(e===0)return[n*255,n*255,n*255,i];const a=n<.5?n*(1+e):n+e-n*e,o=2*n-a,s=pf(o,a,r+1/3),l=pf(o,a,r),c=pf(o,a,r-1/3);return[s*255,l*255,c*255,i]}function Ay(t){const r=hh.get(t);if(!r)return null;const{model:e,value:n}=r;return e==="rgb"?n:e==="hsl"?CF(n):null}const fc=(t,r)=>e=>t*(1-e)+r*e,LF=(t,r)=>{const e=Ay(t),n=Ay(r);return e===null||n===null?e?()=>t:()=>r:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=e[u],d=n[u];a[u]=f*(1-i)+d*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},NF=(t,r)=>typeof t=="number"&&typeof r=="number"?fc(t,r):typeof t=="string"&&typeof r=="string"?LF(t,r):()=>t,RF=(t,r)=>{const e=fc(t,r);return n=>Math.round(e(n))};function Ty({map:t,initKey:r},e){const n=r(e);return t.has(n)?t.get(n):e}function IF({map:t,initKey:r},e){const n=r(e);return t.has(n)?t.get(n):(t.set(n,e),e)}function jF({map:t,initKey:r},e){const n=r(e);return t.has(n)&&(e=t.get(n),t.delete(n)),e}function DF(t){return typeof t=="object"?t.valueOf():t}let Py=class extends Map{constructor(r){if(super(),this.map=new Map,this.initKey=DF,r!==null)for(const[e,n]of r)this.set(e,n)}get(r){return super.get(Ty({map:this.map,initKey:this.initKey},r))}has(r){return super.has(Ty({map:this.map,initKey:this.initKey},r))}set(r,e){return super.set(IF({map:this.map,initKey:this.initKey},r),e)}delete(r){return super.delete(jF({map:this.map,initKey:this.initKey},r))}},kw=class{constructor(r){this.options=X({},this.getDefaultOptions()),this.update(r)}getOptions(){return this.options}update(r={}){this.options=X({},this.options,r),this.rescale(r)}rescale(r){}};const $p=Symbol("defaultUnknown");function My(t,r,e){for(let n=0;n<r.length;n+=1)t.has(r[n])||t.set(e(r[n]),n)}function Cy(t){const{value:r,from:e,to:n,mapper:i,notFoundReturn:a}=t;let o=i.get(r);if(o===void 0){if(a!==$p)return a;o=e.push(r)-1,i.set(r,o)}return n[o%n.length]}function Ly(t){return t instanceof Date?r=>`${r}`:typeof t=="object"?r=>JSON.stringify(r):r=>r}let $F=class Ew extends kw{getDefaultOptions(){return{domain:[],range:[],unknown:$p}}constructor(r){super(r)}map(r){return this.domainIndexMap.size===0&&My(this.domainIndexMap,this.getDomain(),this.domainKey),Cy({value:this.domainKey(r),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(r){return this.rangeIndexMap.size===0&&My(this.rangeIndexMap,this.getRange(),this.rangeKey),Cy({value:this.rangeKey(r),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(r){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=Ly(e),this.rangeKey=Ly(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!r||r.range)&&this.rangeIndexMap.clear(),(!r||r.domain||r.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new Ew(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:r,compare:e}=this.options;return this.sortedDomain=e?[...r].sort(e):r,this.sortedDomain}};function FF(t){const r=Math.min(...t);return t.map(e=>e/r)}function BF(t,r){const e=t.length,n=r-e;return n>0?[...t,...new Array(n).fill(1)]:n<0?t.slice(0,r):t}function zF(t){return Math.round(t*1e12)/1e12}function WF(t){const{domain:r,range:e,paddingOuter:n,paddingInner:i,flex:a,round:o,align:s}=t,l=r.length,c=BF(a,l),[u,f]=e,d=f-u,h=2/l*n+1-1/l*i,p=d/h,v=p*i/l,g=p-l*v,y=FF(c),m=y.reduce((T,P)=>T+P),b=g/m,x=new Py(r.map((T,P)=>{const N=y[P]*b;return[T,o?Math.floor(N):N]})),O=new Py(r.map((T,P)=>{const I=y[P]*b+v;return[T,o?Math.floor(I):I]})),w=Array.from(O.values()).reduce((T,P)=>T+P),S=(d-(w-w/l*i))*s,k=u+S;let E=o?Math.round(k):k;const A=new Array(l);for(let T=0;T<l;T+=1){A[T]=zF(E);const P=r[T];E+=O.get(P)}return{valueBandWidth:x,valueStep:O,adjustedRange:A}}function GF(t){var r;const{domain:e}=t,n=e.length;if(n===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((r=t.flex)===null||r===void 0)&&r.length))return WF(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,d=a[0];const p=a[1]-d,v=o*2,g=n-s;u=p/Math.max(1,v+g),l&&(u=Math.floor(u)),d+=(p-u*(n-s))*c,f=u*(1-s),l&&(d=Math.round(d),f=Math.round(f));const y=new Array(n).fill(0).map((m,b)=>d+b*u);return{valueStep:u,valueBandWidth:f,adjustedRange:y}}let HF=class Aw extends $F{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:$p,flex:[]}}constructor(r){super(r)}clone(){return new Aw(this.options)}getStep(r){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:r===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(r)}getBandWidth(r){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:r===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(r)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:r,paddingInner:e}=this.options;return r>0?r:e}getPaddingOuter(){const{padding:r,paddingOuter:e}=this.options;return r>0?r:e}rescale(){super.rescale();const{align:r,domain:e,range:n,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=GF({align:r,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}};const YF=(t,r,e)=>{let n,i,a=t,o=r;if(a===o&&e>0)return[a];let s=Nl(a,o,e);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(n=Math.ceil(o-a+1));for(let l=0;l<n;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(n=Math.ceil(o-a+1));for(let l=0;l<n;l+=1)i[l]=(a+l)/s}return i},VF=(t,r,e)=>{const[n,i]=t,[a,o]=r;let s,l;return n<i?(s=Ed(n,i),l=e(a,o)):(s=Ed(i,n),l=e(o,a)),uc(l,s)},UF=(t,r,e)=>{const n=Math.min(t.length,r.length)-1,i=new Array(n),a=new Array(n),o=t[0]>t[n],s=o?[...t].reverse():t,l=o?[...r].reverse():r;for(let c=0;c<n;c+=1)i[c]=Ed(s[c],s[c+1]),a[c]=e(l[c],l[c+1]);return c=>{const u=PF(t,c,1,n)-1,f=i[u],d=a[u];return uc(d,f)(c)}},Ny=(t,r,e,n)=>(Math.min(t.length,r.length)>2?UF:VF)(t,r,n?RF:e);let XF=class extends kw{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:fc,tickCount:5}}map(r){return Ey(r)?this.output(r):this.options.unknown}invert(r){return Ey(r)?this.input(r):this.options.unknown}nice(){if(!this.options.nice)return;const[r,e,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(r,e,n,...i)}getTicks(){const{tickMethod:r}=this.options,[e,n,i,...a]=this.getTickMethodOptions();return r(e,n,i,...a)}getTickMethodOptions(){const{domain:r,tickCount:e}=this.options,n=r[0],i=r[r.length-1];return[n,i,e]}chooseNice(){return MF}rescale(){this.nice();const[r,e]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r)),this.composeInput(r,e,this.chooseClamp(e))}chooseClamp(r){const{clamp:e,range:n}=this.options,i=this.options.domain.map(r),a=Math.min(i.length,n.length);return e?TF(i[0],i[a-1]):mr}composeOutput(r,e){const{domain:n,range:i,round:a,interpolate:o}=this.options,s=Ny(n.map(r),i,o,a);this.output=uc(s,e,r)}composeInput(r,e,n){const{domain:i,range:a}=this.options,o=Ny(a,i.map(r),fc);this.input=uc(e,n,o)}},Co=class Tw extends XF{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:NF,tickMethod:YF,tickCount:5}}chooseTransforms(){return[mr,mr]}clone(){return new Tw(this.options)}};var qF=function(t){ge(r,t);function r(e){var n=this,i=e.style,a=De(e,["style"]);return n=t.call(this,X({},{type:"column"},J({style:i},a)))||this,n.columnsGroup=new Ve({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return r.prototype.render=function(){var e=this.attributes,n=e.columns,i=e.x,a=e.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),wt(this.columnsGroup).selectAll(".column").data(n.flat()).join(function(o){return o.append("rect").attr("className","column").each(function(s){this.attr(s)})},function(o){return o.each(function(s){this.attr(s)})},function(o){return o.remove()})},r.prototype.update=function(e){this.attr(qn({},this.attributes,e)),this.render()},r.prototype.clear=function(){this.removeChildren()},r}(de),KF=function(t){ge(r,t);function r(e){var n=this,i=e.style,a=De(e,["style"]);return n=t.call(this,X({},{type:"lines"},J({style:i},a)))||this,n.linesGroup=n.appendChild(new Ve),n.areasGroup=n.appendChild(new Ve),n.render(),n}return r.prototype.render=function(){var e=this.attributes,n=e.lines,i=e.areas,a=e.x,o=e.y;this.style.transform="translate(".concat(a,", ").concat(o,")"),n&&this.renderLines(n),i&&this.renderAreas(i)},r.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},r.prototype.update=function(e){this.attr(qn({},this.attributes,e)),this.render()},r.prototype.renderLines=function(e){wt(this.linesGroup).selectAll(".line").data(e).join(function(n){return n.append("path").attr("className","line").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.attr(i)})},function(n){return n.remove()})},r.prototype.renderAreas=function(e){wt(this.linesGroup).selectAll(".area").data(e).join(function(n){return n.append("path").attr("className","area").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.style(i)})},function(n){return n.remove()})},r}(de);function ZF(t,r){var e,n=r.x,i=r.y,a=D(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(e=D([o,s],2),s=e[0],o=e[1]),t.map(function(l){var c=l.map(function(u,f){return[n.map(f),Pe(i.map(u),s,o)]});return c})}function ns(t,r){r===void 0&&(r=!1);var e=r?t.length-1:0,n=t.map(function(i,a){return vt([a===e?"M":"L"],D(i),!1)});return r?n.reverse():n}function dc(t,r){if(r===void 0&&(r=!1),t.length<=2)return ns(t);for(var e=[],n=t.length,i=0;i<n;i+=1){var a=r?t[n-i-1]:t[i];Go(a,e.slice(-2))||e.push.apply(e,vt([],D(a),!1))}var o=H$(e);return r?o.unshift(vt(["M"],D(t[n-1]),!1)):o.unshift(vt(["M"],D(t[0]),!1)),o}function Fp(t,r,e){var n=Wo(t);return n.push(["L",r,e],["L",0,e],["Z"]),n}function QF(t,r,e,n){return t.map(function(i){return Fp(r?dc(i):ns(i),e,n)})}function JF(t,r,e){for(var n=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=ns(a),s=void 0;if(i===0)s=Fp(o,r,e);else{var l=t[i-1],c=ns(l,!0);c[0][0]="L",s=vt(vt(vt([],D(o),!1),D(c),!1),[["Z"]],!1)}n.push(s)}return n}function tB(t,r,e){for(var n=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=dc(a),s=void 0;if(i===0)s=Fp(o,r,e);else{var l=t[i-1],c=dc(l,!0),u=a[0];c[0][0]="L",s=vt(vt(vt([],D(o),!1),D(c),!1),[vt(["M"],D(u),!1),["Z"]],!1)}n.push(s)}return n}function Ry(t){return t.length===0?[0,0]:[Vl(v2(t,function(r){return Vl(r)||0})),Yl(p2(t,function(r){return Yl(r)||0}))]}function Iy(t){for(var r=Wo(t),e=r[0].length,n=D([Array(e).fill(0),Array(e).fill(0)],2),i=n[0],a=n[1],o=0;o<r.length;o+=1)for(var s=r[o],l=0;l<e;l+=1)s[l]>=0?(s[l]+=i[l],i[l]=s[l]):(s[l]+=a[l],a[l]=s[l]);return r}var eB=function(t){ge(r,t);function r(e){return t.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(r.prototype,"rawData",{get:function(){var e=this.attributes.data;if(!e||e?.length===0)return[[]];var n=Wo(e);return fe(n[0])?[n]:n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"data",{get:function(){return this.attributes.isStack?Iy(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"baseline",{get:function(){var e=this.scales.y,n=D(e.getOptions().domain||[0,0],2),i=n[0],a=n[1];return a<0?e.map(a):e.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"containerShape",{get:function(){var e=this.attributes,n=e.width,i=e.height;return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linesStyle",{get:function(){var e=this,n=this.attributes,i=n.type,a=n.isStack,o=n.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var s=Mt(this.attributes,"area"),l=Mt(this.attributes,"line"),c=this.containerShape.width,u=this.data;if(u[0].length===0)return{lines:[],areas:[]};var f=this.scales,d=f.x,h=f.y,p=ZF(u,{x:d,y:h}),v=[];if(s){var g=this.baseline;a?v=o?tB(p,c,g):JF(p,c,g):v=QF(p,o,c,g)}return{lines:p.map(function(y,m){return J({stroke:e.getColor(m),d:o?dc(y):ns(y)},l)}),areas:v.map(function(y,m){return J({d:y,fill:e.getColor(m)},s)})}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"columnsStyle",{get:function(){var e=this,n=Mt(this.attributes,"column"),i=this.attributes,a=i.isStack,o=i.type,s=i.scale;if(o!=="column")throw new Error("columnsStyle can only be used in column type");var l=this.containerShape.height,c=this.rawData;if(!c)return{columns:[]};a&&(c=Iy(c));var u=this.createScales(c),f=u.x,d=u.y,h=D(Ry(c),2),p=h[0],v=h[1],g=new Co({domain:[0,v-(p>0?0:p)],range:[0,l*s]}),y=f.getBandWidth(),m=this.rawData;return{columns:c.map(function(b,x){return b.map(function(O,w){var _=y/c.length,S=function(){return{x:f.map(w)+_*x,y:O>=0?d.map(O):d.map(0),width:_,height:g.map(Math.abs(O))}},k=function(){return{x:f.map(w),y:d.map(O),width:y,height:g.map(m[x][w])}};return J(J({fill:e.getColor(x)},n),a?k():S())})})}},enumerable:!1,configurable:!0}),r.prototype.render=function(e,n){Z$(n,".container","rect").attr("className","container").node();var i=e.type,a=e.x,o=e.y,s="spark".concat(i),l=J({x:a,y:o},i==="line"?this.linesStyle:this.columnsStyle);wt(n).selectAll(".spark").data([i]).join(function(c){return c.append(function(u){return u==="line"?new KF({className:s,style:l}):new qF({className:s,style:l})}).attr("className","spark ".concat(s))},function(c){return c.update(l)},function(c){return c.remove()})},r.prototype.getColor=function(e){var n=this.attributes.color;return Le(n)?n[e%n.length]:Ge(n)?n.call(null,e):n},r.prototype.createScales=function(e){var n,i,a=this.attributes,o=a.type,s=a.scale,l=a.range,c=l===void 0?[]:l,u=a.spacing,f=this.containerShape,d=f.width,h=f.height,p=D(Ry(e),2),v=p[0],g=p[1],y=new Co({domain:[(n=c[0])!==null&&n!==void 0?n:v,(i=c[1])!==null&&i!==void 0?i:g],range:[h,h*(1-s)]});return o==="line"?{type:o,x:new Co({domain:[0,e[0].length-1],range:[0,d]}),y}:{type:o,x:new HF({domain:e[0].map(function(m,b){return b}),range:[0,d],paddingInner:u,paddingOuter:u/2,align:.5}),y}},r.tag="sparkline",r}(Ue);function nB(t){return typeof t=="boolean"?!1:"enter"in t&&"update"in t&&"exit"in t}function jy(t){if(!t)return{enter:!1,update:!1,exit:!1};var r=["enter","update","exit"],e=Object.fromEntries(Object.entries(t).filter(function(n){var i=D(n,1),a=i[0];return!r.includes(a)}));return Object.fromEntries(r.map(function(n){return nB(t)?t[n]===!1?[n,!1]:[n,J(J({},t[n]),e)]:[n,e]}))}function no(t,r){t?t.finished.then(r):r()}function rB(t,r){t.length===0?r():Promise.all(t.map(function(e){return e?.finished})).then(r)}function Pw(t,r){"update"in t?t.update(r):t.attr(r)}function Mw(t,r,e){if(r.length===0)return null;if(!e){var n=r.slice(-1)[0];return Pw(t,{style:n}),null}return t.animate(r,e)}function iB(t,r){return!(t.nodeName!=="text"||r.nodeName!=="text"||t.attributes.text!==r.attributes.text)}function aB(t,r,e,n){if(n===void 0&&(n="destroy"),iB(t,r))return t.remove(),[null];var i=function(){n==="destroy"?t.destroy():n==="hide"&&_i(t),r.isVisible()&&Ps(r)};if(!e)return i(),[null];var a=e.duration,o=a===void 0?0:a,s=e.delay,l=s===void 0?0:s,c=Math.ceil(+o/2),u=+o/4,f=D(t.getGeometryBounds().center,2),d=f[0],h=f[1],p=D(r.getGeometryBounds().center,2),v=p[0],g=p[1],y=D([(d+v)/2-d,(h+g)/2-h],2),m=y[0],b=y[1],x=t.style.opacity,O=x===void 0?1:x,w=r.style.opacity,_=w===void 0?1:w,S=t.style.transform||"",k=r.style.transform||"",E=t.animate([{opacity:O,transform:"translate(0, 0) ".concat(S)},{opacity:0,transform:"translate(".concat(m,", ").concat(b,") ").concat(S)}],J(J({fill:"both"},e),{duration:l+c+u})),A=r.animate([{opacity:0,transform:"translate(".concat(-m,", ").concat(-b,") ").concat(k),offset:.01},{opacity:_,transform:"translate(0, 0) ".concat(k)}],J(J({fill:"both"},e),{duration:c+u,delay:l+c-u}));return no(A,i),[E,A]}function Xn(t,r,e){var n={},i={};return Object.entries(r).forEach(function(a){var o=D(a,2),s=o[0],l=o[1];if(!gt(l)){var c=t.style[s]||t.parsedStyle[s]||0;c!==l&&(n[s]=c,i[s]=l)}}),e?Mw(t,[n,i],J({fill:"both"},e)):(Pw(t,i),null)}function xu(t,r){return t.style.opacity||(t.style.opacity=1),Xn(t,{opacity:0},r)}var Cw={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},Lw={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},Nw={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},rr=Fn({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),Pn=Fn({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),oB=function(t){ge(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.render=function(e,n){var i=e.x,a=e.y,o=e.size,s=o===void 0?10:o,l=e.radius,c=l===void 0?s/4:l,u=e.orientation,f=e.classNamePrefix,d=De(e,["x","y","size","radius","orientation","classNamePrefix"]),h=s,p=h*2.4,v=f?"".concat(Pn.iconRect.name," ").concat(f,"handle-icon-rect"):Pn.iconRect.name,g=function(w){return f?"".concat(Pn.iconLine,"-").concat(w," ").concat(f,"handle-icon-line"):"".concat(Pn.iconLine,"-").concat(w)},y=wt(n).maybeAppendByClassName(Pn.iconRect,"rect").attr("className",v).styles(J(J({},d),{width:h,height:p,radius:c,x:i-h/2,y:a-p/2,transformOrigin:"center"})),m=i+1/3*h-h/2,b=i+2/3*h-h/2,x=a+1/4*p-p/2,O=a+3/4*p-p/2;y.maybeAppendByClassName("".concat(Pn.iconLine,"-1"),"line").attr("className",g(1)).styles(J({x1:m,x2:m,y1:x,y2:O},d)),y.maybeAppendByClassName("".concat(Pn.iconLine,"-2"),"line").attr("className",g(2)).styles(J({x1:b,x2:b,y1:x,y2:O},d)),u==="vertical"&&(y.node().style.transform="rotate(90)")},r}(Ue),Rw=function(t){ge(r,t);function r(e){return t.call(this,e,Nw)||this}return r.prototype.renderLabel=function(e){var n=this,i=this.attributes,a=i.x,o=i.y,s=i.showLabel,l=Mt(this.attributes,"label"),c=l.x,u=c===void 0?0:c,f=l.y,d=f===void 0?0:f,h=l.transform,p=l.transformOrigin,v=De(l,["x","y","transform","transformOrigin"]),g=D(Gr(v,[]),2),y=g[0],m=g[1],b=wt(e).maybeAppendByClassName(Pn.labelGroup,"g").styles(m),x=J(J({},Lw),y),O=x.text,w=De(x,["text"]);un(!!s,b,function(_){n.label=_.maybeAppendByClassName(Pn.label,"text").styles(J(J({},w),{x:a+u,y:o+d,transform:h,transformOrigin:p,text:"".concat(O)})),n.label.on("mousedown",function(S){S.stopPropagation()}),n.label.on("touchstart",function(S){S.stopPropagation()})})},r.prototype.renderIcon=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.orientation,s=n.type,l=n.classNamePrefix,c=J(J({x:i,y:a,orientation:o,classNamePrefix:l},Cw),Mt(this.attributes,"icon")),u=this.attributes.iconShape,f=u===void 0?function(){return new oB({style:c})}:u,d=wt(e).maybeAppendByClassName(Pn.iconGroup,"g");d.selectAll(Pn.icon.class).data([f]).join(function(h){return h.append(typeof f=="string"?f:function(){return f(s)}).attr("className",Pn.icon.name)},function(h){return h.update(c)},function(h){return h.remove()})},r.prototype.render=function(e,n){this.renderIcon(n),this.renderLabel(n)},r}(Ue),Iw=function(t){ge(r,t);function r(e){var n=t.call(this,e,J(J(J({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},sr(Nw,"handle")),sr(Cw,"handleIcon")),sr(Lw,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(i){return function(a){a.stopPropagation(),n.target=i,n.prevPos=n.getOrientVal(yy(a));var o=n.availableSpace,s=o.x,l=o.y,c=n.getBBox(),u=c.x,f=c.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([s,l])-n.getOrientVal([+u,+f])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(i){var a=n.attributes,o=a.slidable,s=a.brushable,l=a.type;i.stopPropagation();var c=n.getOrientVal(yy(i)),u=c-n.prevPos;if(u){var f=n.getRatio(u);switch(n.target){case"start":o&&n.setValuesOffset(f);break;case"end":o&&n.setValuesOffset(0,f);break;case"selection":o&&n.setValuesOffset(f,f);break;case"track":if(!s)return;n.selectionWidth+=f,l==="range"?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);break}n.prevPos=c}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(i){var a=n.attributes,o=a.onChange,s=a.type,l=s==="range"?i:i[1],c=s==="range"?n.getValues():n.getValues()[1],u=new Qt("valuechange",{detail:{oldValue:l,value:c}});n.dispatchEvent(u),o?.(c)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return Object.defineProperty(r.prototype,"values",{get:function(){return this.attributes.values},set:function(e){this.attributes.values=this.clampValues(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sparklineStyle",{get:function(){var e=this.attributes.orientation;if(e!=="horizontal")return null;var n=Mt(this.attributes,"sparkline");return J(J({zIndex:0},this.availableSpace),n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shape",{get:function(){var e=this.attributes,n=e.trackLength,i=e.trackSize,a=D(this.getOrientVal([[n,i],[i,n]]),2),o=a[0],s=a[1];return{width:o,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableSpace",{get:function(){var e=this.attributes;e.x,e.y;var n=e.padding,i=D(Je(n),4),a=i[0],o=i[1],s=i[2],l=i[3],c=this.shape,u=c.width,f=c.height;return{x:l,y:a,width:u-(l+o),height:f-(a+s)}},enumerable:!1,configurable:!0}),r.prototype.getValues=function(){return this.values},r.prototype.setValues=function(e,n){e===void 0&&(e=[0,0]),n===void 0&&(n=!1),this.attributes.values=e;var i=n===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},r.prototype.updateSelectionArea=function(e){var n=this.calcSelectionArea();this.foregroundGroup.selectAll(rr.selection.class).each(function(i,a){Xn(this,n[a],e)})},r.prototype.updateHandlesPosition=function(e){this.attributes.showHandle&&(this.startHandle&&Xn(this.startHandle,this.getHandleStyle("start"),e),this.endHandle&&Xn(this.endHandle,this.getHandleStyle("end"),e))},r.prototype.innerSetValues=function(e,n){e===void 0&&(e=[0,0]),n===void 0&&(n=!1);var i=this.values,a=this.clampValues(e);this.attributes.values=a,this.setValues(a),n&&this.onValueChange(i)},r.prototype.renderTrack=function(e){var n=this.attributes,i=n.x,a=n.y,o=Mt(this.attributes,"track");this.trackShape=wt(e).maybeAppendByClassName(rr.track,"rect").styles(J(J({x:i,y:a},this.shape),o))},r.prototype.renderBrushArea=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.brushable;this.brushArea=wt(e).maybeAppendByClassName(rr.brushArea,"rect").styles(J({x:i,y:a,fill:"transparent",cursor:o?"crosshair":"default"},this.shape))},r.prototype.renderSparkline=function(e){var n=this,i=this.attributes,a=i.x,o=i.y,s=i.orientation,l=wt(e).maybeAppendByClassName(rr.sparklineGroup,"g");un(s==="horizontal",l,function(c){var u=J(J({},n.sparklineStyle),{x:a,y:o});c.maybeAppendByClassName(rr.sparkline,function(){return new eB({style:u})}).update(u)})},r.prototype.renderHandles=function(){var e=this,n,i=this.attributes,a=i.showHandle,o=i.type,s=o==="range"?["start","end"]:["end"],l=a?s:[],c=this;(n=this.foregroundGroup)===null||n===void 0||n.selectAll(rr.handle.class).data(l.map(function(u){return{type:u}}),function(u){return u.type}).join(function(u){return u.append(function(f){var d=f.type;return new Rw({style:e.getHandleStyle(d)})}).each(function(f){var d=f.type;this.attr("class","".concat(rr.handle.name," ").concat(d,"-handle"));var h="".concat(d,"Handle");c[h]=this,this.addEventListener("pointerdown",c.onDragStart(d))})},function(u){return u.each(function(f){var d=f.type;this.update(c.getHandleStyle(d))})},function(u){return u.each(function(f){var d=f.type,h="".concat(d,"Handle");c[h]=void 0}).remove()})},r.prototype.renderSelection=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.type,s=n.selectionType;this.foregroundGroup=wt(e).maybeAppendByClassName(rr.foreground,"g");var l=Mt(this.attributes,"selection"),c=function(f){return f.style("visibility",function(d){return d.show?"visible":"hidden"}).style("cursor",function(d){return s==="select"?"grab":s==="invert"?"crosshair":"default"}).styles(J(J({},l),{transform:"translate(".concat(i,", ").concat(a,")")}))},u=this;this.foregroundGroup.selectAll(rr.selection.class).data(o==="value"?[]:this.calcSelectionArea().map(function(f,d){return{style:J({},f),index:d,show:s==="select"?d===1:d!==1}}),function(f){return f.index}).join(function(f){return f.append("rect").attr("className",rr.selection.name).call(c).each(function(d,h){var p=this;h===1?(u.selectionShape=wt(this),this.on("pointerdown",function(v){p.attr("cursor","grabbing"),u.onDragStart("selection")(v)}),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){p.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){p.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){p.attr("cursor","pointer")})):this.on("pointerdown",u.onDragStart("track"))})},function(f){return f.call(c)},function(f){return f.remove()}),this.updateSelectionArea(!1),this.renderHandles()},r.prototype.render=function(e,n){this.renderTrack(n),this.renderSparkline(n),this.renderBrushArea(n),this.renderSelection(n)},r.prototype.clampValues=function(e,n){var i;n===void 0&&(n=4);var a=D(this.range,2),o=a[0],s=a[1],l=D(this.getValues().map(function(g){return Sd(g,n)}),2),c=l[0],u=l[1],f=Array.isArray(e)?e:[c,e??u],d=D((f||[c,u]).map(function(g){return Sd(g,n)}),2),h=d[0],p=d[1];if(this.attributes.type==="value")return[0,Pe(p,o,s)];h>p&&(i=D([p,h],2),h=i[0],p=i[1]);var v=p-h;return v>s-o?[o,s]:h<o?c===o&&u===p?[o,p]:[o,v+o]:p>s?u===s&&c===h?[h,s]:[s-v,s]:[h,p]},r.prototype.calcSelectionArea=function(e){var n=D(this.clampValues(e),2),i=n[0],a=n[1],o=this.availableSpace,s=o.x,l=o.y,c=o.width,u=o.height;return this.getOrientVal([[{y:l,height:u,x:s,width:i*c},{y:l,height:u,x:i*c+s,width:(a-i)*c},{y:l,height:u,x:a*c,width:(1-a)*c}],[{x:s,width:c,y:l,height:i*u},{x:s,width:c,y:i*u+l,height:(a-i)*u},{x:s,width:c,y:a*u,height:(1-a)*u}]])},r.prototype.calcHandlePosition=function(e){var n=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,o=i.y,s=i.width,l=i.height,c=D(this.clampValues(),2),u=c[0],f=c[1],d=e==="start"?-n:n,h=(e==="start"?u:f)*this.getOrientVal([s,l])+d;return{x:a+this.getOrientVal([h,s/2]),y:o+this.getOrientVal([l/2,h])}},r.prototype.inferTextStyle=function(e){var n=this.attributes.orientation;return n==="horizontal"?{}:e==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:e==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},r.prototype.calcHandleText=function(e){var n,i=this.attributes,a=i.type,o=i.orientation,s=i.formatter,l=i.autoFitLabel,c=Mt(this.attributes,"handle"),u=Mt(c,"label"),f=c.spacing,d=this.getHandleSize(),h=this.clampValues(),p=e==="start"?h[0]:h[1],v=s(p),g=new Rp({style:J(J(J({},u),this.inferTextStyle(e)),{text:v})}),y=g.getBBox(),m=y.width,b=y.height;if(g.destroy(),!l){if(a==="value")return{text:v,x:0,y:-b-f};var x=f+d+(o==="horizontal"?m/2:0);return n={text:v},n[o==="horizontal"?"x":"y"]=e==="start"?-x:x,n}var O=0,w=0,_=this.availableSpace,S=_.width,k=_.height,E=this.calcSelectionArea()[1],A=E.x,T=E.y,P=E.width,N=E.height,I=f+d;if(o==="horizontal"){var R=I+m/2;if(e==="start"){var C=A-I-m;O=C>0?-R:R}else{var L=S-A-P-I>m;O=L?R:-R}}else{var M=I,j=b+I;e==="start"?w=T-d>b?-j:M:w=k-(T+N)-d>b?j:-M}return{x:O,y:w,text:v}},r.prototype.getHandleLabelStyle=function(e){var n=Mt(this.attributes,"handleLabel");return J(J(J({},n),this.calcHandleText(e)),this.inferTextStyle(e))},r.prototype.getHandleIconStyle=function(){var e=this.attributes.handleIconShape,n=Mt(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return J({cursor:i,shape:e,size:a},n)},r.prototype.getHandleStyle=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.showLabel,s=n.showLabelOnInteraction,l=n.orientation,c=this.calcHandlePosition(e),u=c.x,f=c.y,d=this.calcHandleText(e),h=o;return!o&&s&&(this.target?h=!0:h=!1),J(J(J({},sr(this.getHandleIconStyle(),"icon")),sr(J(J({},this.getHandleLabelStyle(e)),d),"label")),{transform:"translate(".concat(u+i,", ").concat(f+a,")"),orientation:l,showLabel:h,type:e,zIndex:3})},r.prototype.getHandleSize=function(){var e=this.attributes,n=e.handleIconSize,i=e.width,a=e.height;return n||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},r.prototype.getOrientVal=function(e){var n=D(e,2),i=n[0],a=n[1],o=this.attributes.orientation;return o==="horizontal"?i:a},r.prototype.setValuesOffset=function(e,n){n===void 0&&(n=0);var i=this.attributes.type,a=D(this.getValues(),2),o=a[0],s=a[1],l=i==="range"?e:0,c=[o+l,s+n].sort();this.innerSetValues(c,!0)},r.prototype.getRatio=function(e){var n=this.availableSpace,i=n.width,a=n.height;return e/this.getOrientVal([i,a])},r.prototype.dispatchCustomEvent=function(e,n,i){var a=this;e.on(n,function(o){o.stopPropagation(),a.dispatchEvent(new Qt(i,{detail:o}))})},r.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var e=this.brushArea;this.dispatchCustomEvent(e,"click","trackClick"),this.dispatchCustomEvent(e,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(e,"pointerleave","trackMouseleave"),e.on("pointerdown",this.onDragStart("track"))},r.prototype.onScroll=function(e){var n=this.attributes.scrollable;if(n){var i=e.deltaX,a=e.deltaY,o=a||i,s=this.getRatio(o);this.setValuesOffset(s,s)}},r.tag="slider",r}(Ue),sB=function(t){ge(r,t);function r(e){var n=t.call(this,e,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return n.range=[0,1],n.onValueChange=function(i){var a=n.attributes.value;if(i!==a){var o={detail:{oldValue:i,value:a}};n.dispatchEvent(new Qt("scroll",o)),n.dispatchEvent(new Qt("valuechange",o))}},n.onTrackClick=function(i){var a=n.attributes.slidable;if(a){var o=D(n.getLocalPosition(),2),s=o[0],l=o[1],c=D(n.padding,4),u=c[0],f=c[3],d=n.getOrientVal([s+f,l+u]),h=n.getOrientVal(bw(i)),p=(h-d)/n.trackLength;n.setValue(p,!0)}},n.onThumbMouseenter=function(i){n.dispatchEvent(new Qt("thumbMouseenter",{detail:i.detail}))},n.onTrackMouseenter=function(i){n.dispatchEvent(new Qt("trackMouseenter",{detail:i.detail}))},n.onThumbMouseleave=function(i){n.dispatchEvent(new Qt("thumbMouseleave",{detail:i.detail}))},n.onTrackMouseleave=function(i){n.dispatchEvent(new Qt("trackMouseleave",{detail:i.detail}))},n}return Object.defineProperty(r.prototype,"padding",{get:function(){var e=this.attributes.padding;return Je(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){var e=this.attributes.value,n=D(this.range,2),i=n[0],a=n[1];return Pe(e,i,a)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trackLength",{get:function(){var e=this.attributes,n=e.viewportLength,i=e.trackLength,a=i===void 0?n:i;return a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableSpace",{get:function(){var e=this.attributes.trackSize,n=this.trackLength,i=D(this.padding,4),a=i[0],o=i[1],s=i[2],l=i[3],c=D(this.getOrientVal([[n,e],[e,n]]),2),u=c[0],f=c[1];return{x:l,y:a,width:+u-(l+o),height:+f-(a+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trackRadius",{get:function(){var e=this.attributes,n=e.isRound,i=e.trackSize;return n?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"thumbRadius",{get:function(){var e=this.attributes,n=e.isRound,i=e.thumbRadius;if(!n)return 0;var a=this.availableSpace,o=a.width,s=a.height;return i||this.getOrientVal([s,o])/2},enumerable:!1,configurable:!0}),r.prototype.getValues=function(e){e===void 0&&(e=this.value);var n=this.attributes,i=n.viewportLength,a=n.contentLength,o=i/a,s=D(this.range,2),l=s[0],c=s[1],u=e*(c-l-o);return[u,u+o]},r.prototype.getValue=function(){return this.value},r.prototype.renderSlider=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.orientation,s=n.trackSize,l=n.padding,c=n.slidable,u=Mt(this.attributes,"track"),f=Mt(this.attributes,"thumb"),d=J(J({x:i,y:a,brushable:!1,orientation:o,padding:l,selectionRadius:this.thumbRadius,showHandle:!1,slidable:c,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},sr(u,"track")),sr(f,"selection"));this.slider=wt(e).maybeAppendByClassName("scrollbar",function(){return new Iw({style:d})}).update(d).node()},r.prototype.render=function(e,n){this.renderSlider(n)},r.prototype.setValue=function(e,n){n===void 0&&(n=!1);var i=this.attributes.value,a=D(this.range,2),o=a[0],s=a[1];this.slider.setValues(this.getValues(Pe(e,o,s)),n),this.onValueChange(i)},r.prototype.bindEvents=function(){var e=this;this.slider.addEventListener("trackClick",function(n){n.stopPropagation(),e.onTrackClick(n.detail)}),this.onHover()},r.prototype.getOrientVal=function(e){var n=this.attributes.orientation;return n==="horizontal"?e[0]:e[1]},r.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},r.tag="scrollbar",r}(Ue),Ut={gridGroup:"grid-group",mainGroup:"main-group",lineGroup:"line-group",tickGroup:"tick-group",labelGroup:"label-group",titleGroup:"title-group",grid:"grid",line:"line",lineFirst:"line-first",lineSecond:"line-second",tick:"tick",tickItem:"tick-item",label:"label",labelItem:"label-item",title:"title"},Bp={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new He({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};X({},Bp,{style:{type:"arc"}});X({},Bp,{style:{}});var xt=Fn({mainGroup:Ut.mainGroup,gridGroup:Ut.gridGroup,grid:Ut.grid,lineGroup:Ut.lineGroup,line:Ut.line,tickGroup:Ut.tickGroup,tick:Ut.tick,tickItem:Ut.tickItem,labelGroup:Ut.labelGroup,label:Ut.label,labelItem:Ut.labelItem,titleGroup:Ut.titleGroup,title:Ut.title,lineFirst:Ut.lineFirst,lineSecond:Ut.lineSecond},"axis"),Ka=Fn({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function jw(t){return t.reduce(function(r,e,n){return r.push(vt([n===0?"M":"L"],D(e),!1)),r},[])}function lB(t,r,e){var n=r.connect,i=n===void 0?"line":n,a=r.center;if(i==="line")return jw(t);if(!a)return[];var o=es(t[0],a),s=e?0:1;return t.reduce(function(l,c,u){return u===0?l.push(vt(["M"],D(c),!1)):l.push(vt(["A",o,o,0,0,s],D(c),!1)),l},[])}function Ad(t,r,e){return r.type==="surround"?lB(t,r,e):jw(t)}function cB(t,r,e){var n=e.type,i=e.connect,a=e.center,o=e.closed,s=o?[["Z"]]:[],l=D([Ad(t,e),Ad(r.slice().reverse(),e,!0)],2),c=l[0],u=l[1],f=D([t[0],r.slice(-1)[0]],2),d=f[0],h=f[1],p=function(m,b){return[c,m,u,b,s].flat()};if(i==="line"||n==="surround")return p([vt(["L"],D(h),!1)],[vt(["L"],D(d),!1)]);if(!a)throw new Error("Arc grid need to specified center");var v=D([es(h,a),es(d,a)],2),g=v[0],y=v[1];return p([vt(["A",g,g,0,0,1],D(h),!1),vt(["L"],D(h),!1)],[vt(["A",y,y,0,0,0],D(d),!1),vt(["L"],D(d),!1)])}function uB(t,r,e,n){var i=e.animate,a=e.isBillboard,o=r.map(function(s,l){return{id:s.id||"grid-line-".concat(l),d:Ad(s.points,e)}});return t.selectAll(Ka.line.class).data(o,function(s){return s.id}).join(function(s){return s.append("path").each(function(l,c){var u=yn(by(J({d:l.d},n)),[l,c,o]);this.attr(J({class:Ka.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},u))})},function(s){return s.transition(function(l,c){var u=yn(by(J({d:l.d},n)),[l,c,o]);return Xn(this,u,i.update)})},function(s){return s.transition(function(){var l=this,c=xu(this,i.exit);return no(c,function(){return l.remove()}),c})}).transitions()}function fB(t,r,e){var n=e.animate,i=e.connect,a=e.areaFill;if(r.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(p){return o[p%o.length]},l=[],c=0;c<r.length-1;c++){var u=D([r[c].points,r[c+1].points],2),f=u[0],d=u[1],h=cB(f,d,e);l.push({d:h,fill:s(c)})}return t.selectAll(Ka.region.class).data(l,function(p,v){return v}).join(function(p){return p.append("path").each(function(v,g){var y=yn(v,[v,g,l]);this.attr(y)}).attr("className",Ka.region.name)},function(p){return p.transition(function(v,g){var y=yn(v,[v,g,l]);return Xn(this,y,n.update)})},function(p){return p.transition(function(){var v=this,g=xu(this,n.exit);return no(g,function(){return v.remove()}),g})}).transitions()}function dB(t){var r=t.data,e=r===void 0?[]:r,n=t.closed;return n?e.map(function(i){var a=i.points,o=D(a,1),s=o[0];return J(J({},i),{points:vt(vt([],D(a),!1),[s],!1)})}):e}var hB=function(t){ge(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.render=function(e,n){e.type,e.center,e.areaFill,e.closed;var i=De(e,["type","center","areaFill","closed"]),a=dB(e),o=wt(n).maybeAppendByClassName(Ka.lineGroup,"g"),s=wt(n).maybeAppendByClassName(Ka.regionGroup,"g"),l=uB(o,a,e,i),c=fB(s,a,e);return vt(vt([],D(l),!1),D(c),!1)},r}(Ue);function Dw(t,r){return Object.fromEntries(Object.entries(t).map(function(e){var n=D(e,2),i=n[0],a=n[1];return[i,yn(a,r)]}))}function zp(t,r){return r&&Ge(r)?t.filter(r):t}function $w(t,r){var e=r.startAngle,n=r.endAngle;return(n-e)*t+e}function Ou(t,r){if(r.type==="linear"){var e=D(r.startPos,2),n=e[0],i=e[1],a=D(r.endPos,2),o=a[0],s=a[1],l=D([o-n,s-i],2),c=l[0],u=l[1];return xw([c,u])}var f=qa($w(t,r));return[-Math.sin(f),Math.cos(f)]}function Wp(t,r,e){var n=Ou(t,e);return W$(n,r!=="positive")}function ro(t,r){return Wp(t,r.labelDirection,r)}function Rl(t,r,e){return e?"".concat(t," ").concat(e,"axis-").concat(r):t}function On(t,r,e,n){return n&&t.attr("className",Rl(r.name,e,n)),t}function pB(t,r){var e=D(r.startPos,2),n=e[0],i=e[1],a=D(r.endPos,2),o=a[0],s=a[1],l=D([o-n,s-i],2),c=l[0],u=l[1];return[n+c*t,i+u*t]}function vB(t,r){var e=r.radius,n=D(r.center,2),i=n[0],a=n[1],o=qa($w(t,r));return[i+e*Math.cos(o),a+e*Math.sin(o)]}function wu(t,r){return r.type==="linear"?pB(t,r):vB(t,r)}function Gp(t){return Ou(0,t)[1]===0}function Fw(t){return Ou(0,t)[0]===0}function Bw(t,r){return r-t===360}function Dy(t,r,e,n,i){var a=r-t,o=D([i,i],2),s=o[0],l=o[1],c=D([qa(t),qa(r)],2),u=c[0],f=c[1],d=function(k){return[e+i*Math.cos(k),n+i*Math.sin(k)]},h=D(d(u),2),p=h[0],v=h[1],g=D(d(f),2),y=g[0],m=g[1];if(Bw(t,r)){var b=(f+u)/2,x=D(d(b),2),O=x[0],w=x[1];return[["M",p,v],["A",s,l,0,1,0,O,w],["A",s,l,0,1,0,y,m]]}var _=a>180?1:0,S=t>r?0:1;return"M".concat(p,",").concat(v,",A").concat(s,",").concat(l,",0,").concat(_,",").concat(S,",").concat(y,",").concat(m)}function gB(t){var r=t.attributes,e=r.startAngle,n=r.endAngle,i=r.center,a=r.radius;return vt(vt([e,n],D(i),!1),[a],!1)}function yB(t,r,e,n){var i=r.startAngle,a=r.endAngle,o=r.center,s=r.radius,l=r.classNamePrefix;return t.selectAll(xt.line.class).data([{d:Dy.apply(void 0,vt(vt([i,a],D(o),!1),[s],!1))}],function(c,u){return u}).join(function(c){var u=c.append("path").attr("className",xt.line.name).styles(r).styles({d:function(f){return f.d}});return On(u,xt.line,Ut.line,l),u},function(c){return c.transition(function(){var u=this,f=$$(this,gB(this),vt(vt([i,a],D(o),!1),[s],!1),n.update);if(f){var d=function(){var h=mt(u.attributes,"__keyframe_data__");u.style.d=Dy.apply(void 0,vt([],D(h),!1))};f.onframe=d,f.onfinish=d}return f}).styles(r)},function(c){return c.remove()}).styles(e).transitions()}function mB(t,r){r.truncRange,r.truncShape,r.lineExtension}function bB(t,r,e){e===void 0&&(e=[0,0]);var n=D([t,r,e],3),i=D(n[0],2),a=i[0],o=i[1],s=D(n[1],2),l=s[0],c=s[1],u=D(n[2],2),f=u[0],d=u[1],h=D([l-a,c-o],2),p=h[0],v=h[1],g=Math.sqrt(Math.pow(p,2)+Math.pow(v,2)),y=D([-f/g,d/g],2),m=y[0],b=y[1];return[m*p,m*v,b*p,b*v]}function $y(t){var r=D(t,2),e=D(r[0],2),n=e[0],i=e[1],a=D(r[1],2),o=a[0],s=a[1];return{x1:n,y1:i,x2:o,y2:s}}function xB(t,r,e,n){var i=r.showTrunc,a=r.startPos,o=r.endPos,s=r.truncRange,l=r.lineExtension,c=r.classNamePrefix,u=D([a,o],2),f=D(u[0],2),d=f[0],h=f[1],p=D(u[1],2),v=p[0],g=p[1],y=D(l?bB(a,o,l):new Array(4).fill(0),4),m=y[0],b=y[1],x=y[2],O=y[3],w=function(M){return t.selectAll(xt.line.class).data(M,function(j,F){return F}).join(function(j){var F=j.append("line").styles(e).transition(function($){return Xn(this,$y($.line),!1)});return F.attr("className",function($){if(!c)return"".concat(xt.line.name," ").concat($.className);var B=Rl(xt.line.name,Ut.line,c);if($.className===xt.lineFirst.name){var z=Rl(xt.lineFirst.name,Ut.lineFirst,c);return"".concat(B," ").concat(z)}if($.className===xt.lineSecond.name){var z=Rl(xt.lineSecond.name,Ut.lineSecond,c);return"".concat(B," ").concat(z)}return B}),F},function(j){return j.styles(e).transition(function(F){var $=F.line;return Xn(this,$y($),n.update)})},function(j){return j.remove()}).transitions()};if(!i||!s)return w([{line:[[d+m,h+b],[v+x,g+O]],className:xt.line.name}]);var _=D(s,2),S=_[0],k=_[1],E=v-d,A=g-h,T=D([d+E*S,h+A*S],2),P=T[0],N=T[1],I=D([d+E*k,h+A*k],2),R=I[0],C=I[1],L=w([{line:[[d+m,h+b],[P,N]],className:xt.lineFirst.name},{line:[[R,C],[v+x,g+O]],className:xt.lineSecond.name}]);return mB(t,r),L}function OB(t,r,e,n){var i=e.showArrow,a=e.showTrunc,o=e.lineArrow,s=e.lineArrowOffset,l=e.lineArrowSize,c;if(r==="arc"?c=t.select(xt.line.class):a?c=t.select(xt.lineSecond.class):c=t.select(xt.line.class),!i||!o||e.type==="arc"&&Bw(e.startAngle,e.endAngle)){var u=c.node();u&&(u.style.markerEnd=void 0);return}var f=na(o);f.attr(n),jp(f,l),c.style("markerEnd",f).style("markerEndOffset",-s)}function wB(t,r,e){var n=r.type,i,a=Mt(r,"line");return n==="linear"?i=xB(t,r,kd(a,"arrow"),e):i=yB(t,r,kd(a,"arrow"),e),OB(t,n,r,a),i}function _B(t,r){return Wp(t,r.gridDirection,r)}function zw(t){var r=t.type,e=t.gridCenter;return r==="linear"?e:e||t.center}function SB(t,r){var e=r.gridLength;return t.map(function(n,i){var a=n.value,o=D(wu(a,r),2),s=o[0],l=o[1],c=D(Cr(_B(a,r),e),2),u=c[0],f=c[1];return{id:i,points:[[s,l],[s+u,l+f]]}})}function kB(t,r){var e=r.gridControlAngles,n=zw(r);if(!n)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!e||e.length===0)throw new Error("Invalid gridControlAngles");var i=D(n,2),a=i[0],o=i[1];return t.map(function(s,l){var c=s.value,u=D(wu(c,r),2),f=u[0],d=u[1],h=D([f-a,d-o],2),p=h[0],v=h[1],g=[];return e.forEach(function(y){var m=qa(y),b=D([Math.cos(m),Math.sin(m)],2),x=b[0],O=b[1],w=p*x-v*O+a,_=p*O+v*x+o;g.push([w,_])}),{points:g,id:l}})}function EB(t,r,e,n){var i=e.classNamePrefix,a=Mt(e,"grid"),o=a.type,s=a.areaFill,l=zw(e),c=zp(r,e.gridFilter),u=o==="segment"?SB(c,e):kB(c,e),f=J(J({},a),{center:l,areaFill:Ge(s)?c.map(function(d,h){return yn(s,[d,h,c])}):s,animate:n,data:u});return t.selectAll(xt.grid.class).data([1]).join(function(d){var h=d.append(function(){return new hB({style:f})}).attr("className",xt.grid.name);return On(h,xt.grid,Ut.grid,i),h},function(d){return d.transition(function(){return this.update(f)})},function(d){return d.remove()}).transitions()}var Td=function(){function t(r,e,n,i){this.set(r,e,n,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(r,e,n){var i=this,a=i.x1,o=i.y1,s=i.x2,l=i.y2,c=Math.cos(r),u=Math.sin(r),f=e-e*c+n*u,d=n-e*u-n*c,h=[[c*a-u*l+f,u*a+c*l+d],[c*s-u*l+f,u*s+c*l+d],[c*a-u*o+f,u*a+c*o+d],[c*s-u*o+f,u*s+c*o+d]];return h},t.prototype.set=function(r,e,n,i){return n<r?(this.x2=r,this.x1=n):(this.x1=r,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},t.prototype.defined=function(r){return this[r]!==Number.MAX_VALUE&&this[r]!==-Number.MAX_VALUE},t}();function Pd(t,r){var e=t.getEulerAngles()||0;t.setEulerAngles(0);var n=t.getBounds(),i=D(n.min,2),a=i[0],o=i[1],s=D(n.max,2),l=s[0],c=s[1],u=t.getBBox(),f=u.width,d=u.height,h=d,p=0,v=0,g=a,y=o,m=yw(t);if(m){h-=1.5;var b=m.style.textAlign,x=m.style.textBaseline;b==="center"?g=(a+l)/2:(b==="right"||b==="end")&&(g=l),x==="middle"?y=(o+c)/2:x==="bottom"&&(y=c)}var O=D(Je(r),4),w=O[0],_=w===void 0?0:w,S=O[1],k=S===void 0?0:S,E=O[2],A=E===void 0?_:E,T=O[3],P=T===void 0?k:T,N=new Td((p+=a)-P,(v+=o)-_,p+f+k,v+h+A);return t.setEulerAngles(e),N.rotatedPoints(qa(e),g,y)}function _o(t,r){return r[0]<=Math.max(t[0][0],t[1][0])&&r[0]<=Math.min(t[0][0],t[1][0])&&r[1]<=Math.max(t[0][1],t[1][1])&&r[1]<=Math.min(t[0][1],t[1][1])}function So(t,r,e){var n=(r[1]-t[1])*(e[0]-r[0])-(r[0]-t[0])*(e[1]-r[1]);return n===0?0:n<0?2:1}function AB(t,r){var e=So(t[0],t[1],r[0]),n=So(t[0],t[1],r[1]),i=So(r[0],r[1],t[0]),a=So(r[0],r[1],t[1]);return!!(e!==n&&i!==a||e===0&&_o(t,r[0])||n===0&&_o(t,r[1])||i===0&&_o(r,t[0])||a===0&&_o(r,t[1]))}function TB(t,r){var e=t.length;if(e<3)return!1;var n=[r,[9999,r[1]]],i=0,a=0;do{var o=[t[a],t[(a+1)%e]];if(AB(o,n)){if(So(o[0],r,o[1])===0)return _o(o,r);i++}a=(a+1)%e}while(a!==0);return!!(i&1)}function PB(t,r){return r.every(function(e){return TB(t,e)})}function MB(t,r,e){var n=t.x1,i=t.x2,a=t.y1,o=t.y2,s=[[n,a],[i,a],[i,o],[n,o]],l=Pd(r,e);return PB(s,l)}function CB(t,r){var e=D(t,4),n=e[0],i=e[1],a=e[2],o=e[3],s=D(r,4),l=s[0],c=s[1],u=s[2],f=s[3],d=a-n,h=o-i,p=u-l,v=f-c,g=d*v-p*h;if(g===0)return!1;var y=g>0,m=n-l,b=i-c,x=d*b-h*m;if(x<0===y)return!1;var O=p*b-v*m;return!(O<0===y||x>g===y||O>g===y)}function LB(t,r){var e=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return e.some(function(n){return CB(r,n)})}function NB(t,r,e){var n,i,a=Pd(t,e).flat(1),o=Pd(r,e).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var l=vs(s),c=l.next();!c.done;c=l.next()){var u=c.value;if(LB(o,u))return!0}}catch(f){n={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return!1}function RB(t,r){var e=t.type,n=t.labelDirection,i=t.crossSize;if(!i)return!1;if(e==="arc"){var a=t.center,o=t.radius,s=D(a,2),l=s[0],c=s[1],u=n==="negative"?0:i,f=-o-u,d=o+u,h=D(Je(r),4),p=h[0],v=h[1],g=h[2],y=h[3];return new Td(l+f-y,c+f-p,l+d+v,c+d+g)}var m=D(t.startPos,2),b=m[0],x=m[1],O=D(t.endPos,2),w=O[0],_=O[1],S=D(Fw(t)?[-r,0,r,0]:[0,r,0,-r],4),k=S[0],E=S[1],A=S[2],T=S[3],P=ro(0,t),N=Cr(P,i),I=new Td(b,x,w,_);return I.x1+=T,I.y1+=k,I.x2+=E+N[0],I.y2+=A+N[1],I}function _u(t,r,e){var n,i,a=r.crossPadding,o=new Set,s=null,l=RB(r,a),c=function(p){return l?MB(l,p):!0},u=function(p,v){return!p||!p.firstChild?!0:!NB(p.firstChild,v.firstChild,Je(e))};try{for(var f=vs(t),d=f.next();!d.done;d=f.next()){var h=d.value;c(h)?!s||u(s,h)?s=h:(o.add(s),o.add(h)):o.add(h)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}return Array.from(o)}function vf(t,r){return r===void 0&&(r={}),gt(t)?0:typeof t=="number"?t:Math.floor(vw(t,r))}function IB(t,r,e,n){if(!(t.length<=0)){var i=r.suffix,a=i===void 0?"...":i,o=r.minLength,s=r.maxLength,l=s===void 0?1/0:s,c=r.step,u=c===void 0?" ":c,f=r.margin,d=f===void 0?[0,0,0,0]:f,h=gw(n.getTextShape(t[0])),p=vf(u,h),v=o?vf(o,h):p,g=vf(l,h);(gt(g)||g===1/0)&&(g=Math.max.apply(null,t.map(function(w){return w.getBBox().width})));var y=t.slice(),m=D(d,4);m[0],m[1],m[2],m[3];for(var b=function(w){if(y.forEach(function(_){n.ellipsis(n.getTextShape(_),w,a)}),y=_u(t,e,d),y.length<1)return{value:void 0}},x=g;x>v+p;x-=p){var O=b(x);if(typeof O=="object")return O.value}}}var jB={parity:function(t,r){var e=r.seq,n=e===void 0?2:e;return t.filter(function(i,a){return a%n?(_i(i),!1):!0})}},DB=function(t){return t.filter(C$)};function $B(t,r,e,n){var i=t.length,a=r.keepHeader,o=r.keepTail;if(!(i<=1||i===2&&a&&o)){var s=jB.parity,l=function(b){return b.forEach(n.show),b},c=2,u=t.slice(),f=t.slice(),d=Math.min.apply(Math,vt([1],D(t.map(function(b){return b.getBBox().width})),!1));if(e.type==="linear"&&(Gp(e)||Fw(e))){var h=xy(t[0]).left,p=xy(t[i-1]).right,v=Math.abs(p-h)||1;c=Math.max(Math.floor(i*d/v),c)}var g,y;for(a&&(g=u.splice(0,1)[0]),o&&(y=u.splice(-1,1)[0],u.reverse()),l(u);c<t.length&&_u(DB(y?vt(vt([y],D(f),!1),[g],!1):vt([g],D(f),!1)),e,r?.margin).length;){if(y&&!g&&c%2===0){var m=u.splice(0,1);m.forEach(n.hide)}else if(y&&g){var m=u.splice(0,1);m.forEach(n.hide)}f=s(l(u),{seq:c}),c++}}}function FB(t,r,e,n){var i,a,o=r.optionalAngles,s=o===void 0?[0,45,90]:o,l=r.margin,c=r.recoverWhenFailed,u=c===void 0?!0:c,f=t.map(function(y){return y.getLocalEulerAngles()}),d=function(){return _u(t,e,l).length<1},h=function(y){return t.forEach(function(m,b){var x=Array.isArray(y)?y[b]:y;n.rotate(m,+x)})};try{for(var p=vs(s),v=p.next();!v.done;v=p.next()){var g=v.value;if(h(g),d())return}}catch(y){i={error:y}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u&&h(f)}function BB(t){var r=t.type,e=t.labelDirection;return r==="linear"&&Gp(t)?e==="negative"?"bottom":"top":"middle"}function zB(t,r,e,n,i){var a,o=r.maxLines,s=o===void 0?3:o,l=r.recoverWhenFailed,c=l===void 0?!0:l,u=r.margin,f=u===void 0?[0,0,0,0]:u,d=yn((a=r.wordWrapWidth)!==null&&a!==void 0?a:50,[i]),h=t.map(function(b){return b.attr("maxLines")||1}),p=Math.min.apply(Math,vt([],D(h),!1)),v=function(){return _u(t,e,f).length<1},g=BB(e),y=function(b){return t.forEach(function(x,O){var w=Array.isArray(b)?b[O]:b;n.wrap(x,d,w,g)})};if(!(p>s)){if(e.type==="linear"&&Gp(e)){if(y(s),v())return}else for(var m=p;m<=s;m++)if(y(m),v())return;c&&y(h)}}var WB=new Map([["hide",$B],["rotate",FB],["ellipsis",IB],["wrap",zB]]);function GB(t,r,e){return r.labelOverlap.length<1?!1:e==="hide"?!P$(t[0]):e==="rotate"?!t.some(function(n){var i;return!!(!((i=n.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):e==="ellipsis"||e==="wrap"?t.filter(function(n){return n.querySelector("text")}).length>=1:!0}function HB(t,r,e,n){var i=r.labelOverlap,a=i===void 0?[]:i;a.length&&a.forEach(function(o){var s=o.type,l=WB.get(s);GB(t,r,s)&&l?.(t,o,r,n,e)})}function YB(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=function(n){return n==="positive"?-1:1};return t.reduce(function(n,i){return n*e(i)},1)}function Fy(t){for(var r=t;r<0;)r+=360;return Math.round(r%360)}function Md(t,r){var e=D(t,2),n=e[0],i=e[1],a=D(r,2),o=a[0],s=a[1],l=D([n*o+i*s,n*s-i*o],2),c=l[0],u=l[1];return Math.atan2(u,c)}function VB(t){var r=(t+360)%180;return Ze(r,-90,90)||(r+=180),r}function UB(t,r,e){var n,i=e.labelAlign,a=(n=r.style.transform)===null||n===void 0?void 0:n.includes("rotate");if(a)return r.getLocalEulerAngles();var o=0,s=ro(t.value,e),l=Ou(t.value,e);return i==="horizontal"?0:(i==="perpendicular"?o=Md([1,0],s):o=Md([l[0]<0?-1:1,0],l),VB(hw(o)))}function Ww(t,r,e){var n=e.type,i=e.labelAlign,a=ro(t,e),o=Fy(r),s=Fy(hw(Md([1,0],a))),l="center",c="middle";return n==="linear"?[90,270].includes(s)&&o===0?(l="center",c=a[1]===1?"top":"bottom"):!(s%180)&&[90,270].includes(o)?l="center":s===0?(Ze(o,0,90,!1,!0)||Ze(o,0,90)||Ze(o,270,360))&&(l="start"):s===90?Ze(o,0,90,!1,!0)?l="start":(Ze(o,90,180)||Ze(o,270,360))&&(l="end"):s===270?Ze(o,0,90,!1,!0)?l="end":(Ze(o,90,180)||Ze(o,270,360))&&(l="start"):s===180&&(o===90?l="start":(Ze(o,0,90)||Ze(o,270,360))&&(l="end")):i==="parallel"?Ze(s,0,180,!0)?c="top":c="bottom":i==="horizontal"?Ze(s,90,270,!1)?l="end":(Ze(s,270,360,!1)||Ze(s,0,90))&&(l="start"):i==="perpendicular"&&(Ze(s,90,270)?l="end":l="start"),{textAlign:l,textBaseline:c}}function XB(t,r,e){r.setLocalEulerAngles(t);var n=r.__data__.value,i=Ww(n,t,e),a=r.querySelector(xt.labelItem.class);a&&Gw(a,i)}function By(t,r,e){var n=e.showTick,i=e.tickLength,a=e.tickDirection,o=e.labelDirection,s=e.labelSpacing,l=r.indexOf(t),c=yn(s,[t,l,r]),u=D([ro(t.value,e),YB(o,a)],2),f=u[0],d=u[1],h=d===1?yn(n?i:0,[t,l,r]):0,p=D(wo(Cr(f,c+h),wu(t.value,e)),2),v=p[0],g=p[1];return{x:v,y:g}}function qB(t,r,e,n){var i=n.labelFormatter,a=Ge(i)?function(){return na(yn(i,[t,r,e,ro(t.value,n)]))}:function(){return na(t.label||"")};return a}function KB(t,r,e,n){var i=n.labelRender,a=(mt(n,"endPos.0",400)-mt(n,"startPos.0",0))/e.length,o=Ge(i)?yn(i,[t,r,e,ro(t.value,n)]):t.label||"",s=aF(o)||30;return function(){return N$(o,{width:a,height:s})}}var ZB={html:["fill"],text:[]};function Gw(t,r){["text","html"].includes(t.nodeName)&&t.attr(kd(r,ZB[t.nodeName]))}function QB(t,r){HB(this.node().childNodes,t,r,{hide:_i,show:Ps,rotate:function(e,n){XB(+n,e,t)},ellipsis:function(e,n,i){e&&_d(e,n||1/0,i)},wrap:function(e,n,i){e&&L$(e,n,i)},getTextShape:function(e){return e.querySelector(xt.labelItem.class)}})}function zy(t,r,e,n,i){var a=e.indexOf(r),o=i.labelRender,s=i.classNamePrefix,l=wt(t).append(o?KB(r,a,e,i):qB(r,a,e,i)).attr("className",xt.labelItem.name).node();On(wt(l),xt.labelItem,Ut.labelItem,s);var c=D(Gr(Dw(n,[r,a,e])),2),u=c[0],f=c[1],d=f.transform,h=De(f,["transform"]);Ow(l,d);var p=UB(r,l,i);if(l.getLocalEulerAngles()||l.setLocalEulerAngles(p),Gw(l,J(J({},Ww(r.value,p,i)),u)),l.nodeName==="html"){var v=l.getBBox(),g=l.style.x||0;l.attr("x",g-v.width/2)}return t.attr(h),l}function JB(t,r,e,n,i){var a=e.classNamePrefix,o=zp(r,e.labelFilter),s=Mt(e,"label"),l,c=t.selectAll(xt.label.class).data(o,function(u,f){return f}).join(function(u){var f=u.append("g").attr("className",xt.label.name).transition(function(d){zy(this,d,r,s,e);var h=By(d,r,e),p=h.x,v=h.y;return this.style.transform="translate(".concat(p,", ").concat(v,")"),null});return On(f,xt.label,Ut.label,a),f},function(u){return u.transition(function(f){var d=this.querySelector(xt.labelItem.class),h=zy(this,f,r,s,e),p=aB(d,h,n.update),v=By(f,r,e),g=v.x,y=v.y,m=Xn(this,{transform:"translate(".concat(g,", ").concat(y,")")},n.update);return vt(vt([],D(p),!1),[m],!1)})},function(u){return l=u,u.transition(function(){var f=this,d=xu(this.childNodes[0],n.exit);return no(d,function(){return wt(f).remove()}),d}),l}).transitions();return rB(c,function(){QB.call(t,e,i)}),c}function Hw(t,r){return Wp(t,r.tickDirection,r)}function tz(t,r){var e=D(t,2),n=e[0],i=e[1];return[[0,0],[n*r,i*r]]}function ez(t,r,e,n,i){var a=i.tickLength,o=D(tz(n,yn(a,[t,r,e])),2),s=D(o[0],2),l=s[0],c=s[1],u=D(o[1],2),f=u[0],d=u[1];return{x1:l,x2:f,y1:c,y2:d}}function nz(t,r,e,n,i){var a=i.tickFormatter,o=i.classNamePrefix,s=Hw(r.value,i),l="line";Ge(a)&&(l=function(){return yn(a,[r,e,n,s])});var c=t.append(l).attr("className",xt.tickItem.name);return On(c,xt.tickItem,Ut.tickItem,o),c}function rz(t,r,e,n,i,a,o){var s=Hw(t.value,a),l=ez(t,r,e,s,a),c=l.x1,u=l.x2,f=l.y1,d=l.y2,h=D(Gr(Dw(o,[t,r,e,s])),2),p=h[0],v=h[1];n.node().nodeName==="line"&&n.styles(J({x1:c,x2:u,y1:f,y2:d},p)),i.attr(v),n.styles(p)}function Wy(t,r,e,n,i,a){var o=nz(wt(this),t,r,e,n);rz(t,r,e,o,this,n,i);var s=D(wu(t.value,n),2),l=s[0],c=s[1];return Xn(this,{transform:"translate(".concat(l,", ").concat(c,")")},a)}function iz(t,r,e,n){var i=e.classNamePrefix,a=zp(r,e.tickFilter),o=Mt(e,"tick");return t.selectAll(xt.tick.class).data(a,function(s){return s.id||s.label}).join(function(s){var l=s.append("g").attr("className",xt.tick.name).transition(function(c,u){return Wy.call(this,c,u,a,e,o,!1)});return On(l,xt.tick,Ut.tick,i),l},function(s){return s.transition(function(l,c){return this.removeChildren(),Wy.call(this,l,c,a,e,o,n.update)})},function(s){return s.transition(function(){var l=this,c=xu(this.childNodes[0],n.exit);return no(c,function(){return l.remove()}),c})}).transitions()}function az(t,r,e){var n=e.titlePosition,i=n===void 0?"lb":n,a=e.titleSpacing,o=bu(i),s=t.node().getLocalBounds(),l=D(s.min,2),c=l[0],u=l[1],f=D(s.halfExtents,2),d=f[0],h=f[1],p=D(r.node().getLocalBounds().halfExtents,2),v=p[0],g=p[1],y=D([c+d,u+h],2),m=y[0],b=y[1],x=D(Je(a),4),O=x[0],w=x[1],_=x[2],S=x[3];if(["start","end"].includes(i)&&e.type==="linear"){var k=e.startPos,E=e.endPos,A=D(i==="start"?[k,E]:[E,k],2),T=A[0],P=A[1],N=xw([-P[0]+T[0],-P[1]+T[1]]),I=D(Cr(N,O),2),R=I[0],C=I[1];return{x:T[0]+R,y:T[1]+C}}return o.includes("t")&&(b-=h+g+O),o.includes("r")&&(m+=d+v+w),o.includes("l")&&(m-=d+v+S),o.includes("b")&&(b+=h+g+_),{x:m,y:b}}function oz(t,r,e){var n=t.getGeometryBounds().halfExtents,i=n[1]*2;if(r==="vertical"){if(e==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(e==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function Gy(t,r,e,n,i){var a=Mt(n,"title"),o=D(Gr(a),2),s=o[0],l=o[1],c=l.transform,u=l.transformOrigin,f=De(l,["transform","transformOrigin"]);r.styles(f);var d=c||oz(t.node(),s.direction,s.position);t.styles(J(J({},s),{transformOrigin:u})),Ow(t.node(),d);var h=az(wt(e._offscreen||e.querySelector(xt.mainGroup.class)),r,n),p=h.x,v=h.y,g=Xn(r.node(),{transform:"translate(".concat(p,", ").concat(v,")")},i);return g}function sz(t,r,e,n){var i=e.titleText,a=e.classNamePrefix;return t.selectAll(xt.title.class).data([{title:i}].filter(function(o){return!!o.title}),function(o,s){return o.title}).join(function(o){var s=o.append(function(){return na(i)}).attr("className",xt.title.name).transition(function(){return Gy(wt(this),t,r,e,n.enter)});return On(s,xt.title,Ut.title,a),s},function(o){return o.transition(function(){return Gy(wt(this),t,r,e,n.update)})},function(o){return o.remove()}).transitions()}function Hy(t,r,e,n){var i=t.showLine,a=t.showTick,o=t.showLabel,s=t.classNamePrefix,l=r.maybeAppendByClassName(xt.lineGroup,"g");On(l,xt.lineGroup,Ut.lineGroup,s);var c=un(i,l,function(p){return wB(p,t,n)})||[],u=r.maybeAppendByClassName(xt.tickGroup,"g");On(u,xt.tickGroup,Ut.tickGroup,s);var f=un(a,u,function(p){return iz(p,e,t,n)})||[],d=r.maybeAppendByClassName(xt.labelGroup,"g");On(d,xt.labelGroup,Ut.labelGroup,s);var h=un(o,d,function(p){return JB(p,e,t,n,r.node())})||[];return vt(vt(vt([],D(c),!1),D(f),!1),D(h),!1).filter(function(p){return!!p})}var Hp=function(t){ge(r,t);function r(e){return t.call(this,e,Bp)||this}return r.prototype.render=function(e,n,i){var a=this,o=e.titleText,s=e.data,l=e.animate,c=e.showTitle,u=e.showGrid,f=e.dataThreshold,d=e.truncRange,h=e.classNamePrefix,p=n.className||"axis";h?n.attr("className","".concat(p," ").concat(h,"axis")):n.className||n.attr("className","axis");var v=U$(s,f).filter(function(_){var S=_.value;return!(d&&S>d[0]&&S<d[1])}),g=jy(i===void 0?l:i),y=wt(n).maybeAppendByClassName(xt.gridGroup,"g");On(y,xt.gridGroup,Ut.gridGroup,h);var m=un(u,y,function(_){return EB(_,v,e,g)})||[],b=wt(n).maybeAppendByClassName(xt.mainGroup,"g");On(b,xt.mainGroup,Ut.mainGroup,h),o&&(!this.initialized&&g.enter||this.initialized&&g.update)&&Hy(e,wt(this.offscreenGroup),v,jy(!1));var x=Hy(e,wt(b.node()),v,g),O=wt(n).maybeAppendByClassName(xt.titleGroup,"g");On(O,xt.titleGroup,Ut.titleGroup,h);var w=un(c,O,function(_){return sz(_,a,e,g)})||[];return vt(vt(vt([],D(m),!1),D(x),!1),D(w),!1).flat().filter(function(_){return!!_})},r}(Ue);function Ae(t,r,e){return e?"".concat(t," ").concat(e,"legend-").concat(r):t}function lz(t,r,e){var n=Math.round((t-e)/r);return e+n*r}function cz(t,r,e){var n=1.4,i=n*e;return[["M",t-e,r-i],["L",t+e,r-i],["L",t+e,r+i],["L",t-e,r+i],["Z"]]}var Yw=1.4,Vw=.4;function uz(t,r,e){var n=e,i=n*Yw,a=n/2,o=n/6,s=t+i*Vw;return[["M",t,r],["L",s,r+a],["L",t+i,r+a],["L",t+i,r-a],["L",s,r-a],["Z"],["M",s,r+o],["L",t+i-2,r+o],["M",s,r-o],["L",t+i-2,r-o]]}function fz(t,r,e){var n=e,i=n*Yw,a=n/2,o=n/6,s=r+i*Vw;return[["M",t,r],["L",t-a,s],["L",t-a,r+i],["L",t+a,r+i],["L",t+a,s],["Z"],["M",t-o,s],["L",t-o,r+i-2],["M",t+o,s],["L",t+o,r+i-2]]}Ft.registerSymbol("hiddenHandle",cz);Ft.registerSymbol("verticalHandle",uz);Ft.registerSymbol("horizontalHandle",fz);function dz(t,r,e,n){var i,a=D(t,2),o=a[0],s=a[1],l=D(r,2),c=l[0],u=l[1],f=D(e,2),d=f[0],h=f[1],p=D([c,u],2),v=p[0],g=p[1],y=g-v;return v>g&&(i=D([g,v],2),v=i[0],g=i[1]),y>s-o?[o,s]:v<o?d===o&&h===g?[o,g]:[o,y+o]:g>s?h===s&&d===v?[v,s]:[s-y,s]:[v,g]}function dr(t,r,e){return t===void 0&&(t="horizontal"),t==="horizontal"?r:e}var Te={title:"title",item:"item",marker:"marker",label:"label",value:"value",focusIcon:"focus-icon",background:"background",ribbon:"ribbon",track:"track",selection:"selection",handle:"handle",handleMarker:"handle-marker",handleLabel:"handle-label",indicator:"indicator",prevBtn:"prev-btn",nextBtn:"next-btn",pageInfo:"page-info"},ji=Fn({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),Uw={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},hz=function(t){ge(r,t);function r(e){return t.call(this,e,Uw)||this}return r.prototype.render=function(e,n){var i=wt(n).maybeAppendByClassName(ji.markerGroup,"g");this.renderMarker(i);var a=wt(n).maybeAppendByClassName(ji.labelGroup,"g");this.renderLabel(a)},r.prototype.renderMarker=function(e){var n=this,i=this.attributes,a=i.orientation,o=i.classNamePrefix,s=i.markerSymbol,l=s===void 0?dr(a,"horizontalHandle","verticalHandle"):s;un(!!l,e,function(c){var u=Mt(n.attributes,"marker"),f=J({symbol:l},u),d=Ae(ji.marker.name,Te.handleMarker,o);if(n.marker=c.maybeAppendByClassName(ji.marker,function(){return new Ft({style:f,className:d})}).update(f),o){var h=n.marker.node().querySelector(".marker");if(h){var p=h.getAttribute("class")||"",v=p.split(" ")[0],g=Ae(v,Te.handleMarker,o);h.setAttribute("class",g)}}})},r.prototype.renderLabel=function(e){var n=this,i=this.attributes,a=i.showLabel,o=i.orientation,s=i.spacing,l=s===void 0?0:s,c=i.formatter,u=i.classNamePrefix;un(a,e,function(f){var d,h=Mt(n.attributes,"label"),p=h.text,v=De(h,["text"]),g=((d=f.select(ji.marker.class))===null||d===void 0?void 0:d.node().getBBox())||{},y=g.width,m=y===void 0?0:y,b=g.height,x=b===void 0?0:b,O=D(dr(o,[0,x+l,"center","top"],[m+l,0,"start","middle"]),4),w=O[0],_=O[1],S=O[2],k=O[3],E=Ae(ji.label.name,Te.handleLabel,u);f.maybeAppendByClassName(ji.label,"text").attr("className",E).styles(J(J({},v),{x:w,y:_,text:c(p).toString(),textAlign:S,textBaseline:k}))})},r}(Ue),Xw={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},pz=qn({},Xw,{}),vz=qn({},Xw,sr(Uw,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),gz=.01,je=Fn({title:"title",html:"html",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),gf=Fn({text:"text"},"title");function yz(t,r){var e=t.attributes,n=e.position,i=e.spacing,a=e.inset,o=e.text,s=t.getBBox(),l=r.getBBox(),c=bu(n),u=D(Je(o?i:0),4),f=u[0],d=u[1],h=u[2],p=u[3],v=D(Je(a),4),g=v[0],y=v[1],m=v[2],b=v[3],x=D([p+d,f+h],2),O=x[0],w=x[1],_=D([b+y,g+m],2),S=_[0],k=_[1];if(c[0]==="l")return new me(s.x,s.y,l.width+s.width+O+S,Math.max(l.height+k,s.height));if(c[0]==="t")return new me(s.x,s.y,Math.max(l.width+S,s.width),l.height+s.height+w+k);var E=D([r.attributes.width||l.width,r.attributes.height||l.height],2),A=E[0],T=E[1];return new me(l.x,l.y,A+s.width+O+S,T+s.height+w+k)}function mz(t,r){var e=Object.entries(r).reduce(function(n,i){var a=D(i,2),o=a[0],s=a[1],l=t.node().attr(o);return l||(n[o]=s),n},{});t.styles(e)}function bz(t){var r,e,n,i,a=t,o=a.width,s=a.height,l=a.position,c=D([+o/2,+s/2],2),u=c[0],f=c[1],d=D([+u,+f,"center","middle"],4),h=d[0],p=d[1],v=d[2],g=d[3],y=bu(l);return y.includes("l")&&(r=D([0,"start"],2),h=r[0],v=r[1]),y.includes("r")&&(e=D([+o,"end"],2),h=e[0],v=e[1]),y.includes("t")&&(n=D([0,"top"],2),p=n[0],g=n[1]),y.includes("b")&&(i=D([+s,"bottom"],2),p=i[0],g=i[1]),{x:h,y:p,textAlign:v,textBaseline:g}}var qw=function(t){ge(r,t);function r(e){return t.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return r.prototype.getAvailableSpace=function(){var e=this,n=this.attributes,i=n.width,a=n.height,o=n.position,s=n.spacing,l=n.inset,c=e.querySelector(gf.text.class);if(!c)return new me(0,0,+i,+a);var u=c.getBBox(),f=u.width,d=u.height,h=D(Je(s),4),p=h[0],v=h[1],g=h[2],y=h[3],m=D([0,0,+i,+a],4),b=m[0],x=m[1],O=m[2],w=m[3],_=bu(o);if(_.includes("i"))return new me(b,x,O,w);_.forEach(function(R,C){var L,M,j,F;R==="t"&&(L=D(C===0?[d+g,+a-d-g]:[0,+a],2),x=L[0],w=L[1]),R==="r"&&(M=D([+i-f-y],1),O=M[0]),R==="b"&&(j=D([+a-d-p],1),w=j[0]),R==="l"&&(F=D(C===0?[f+v,+i-f-v]:[0,+i],2),b=F[0],O=F[1])});var S=D(Je(l),4),k=S[0],E=S[1],A=S[2],T=S[3],P=D([T+E,k+A],2),N=P[0],I=P[1];return new me(b+T,x+k,O-N,w-I)},r.prototype.getBBox=function(){return this.title?this.title.getBBox():new me(0,0,0,0)},r.prototype.render=function(e,n){var i=this;e.width,e.height,e.position,e.spacing;var a=e.classNamePrefix,o=De(e,["width","height","position","spacing","classNamePrefix"]),s=D(Gr(o),1),l=s[0],c=bz(e),u=c.x,f=c.y,d=c.textAlign,h=c.textBaseline;un(!!o.text,wt(n),function(p){var v=Ae(gf.text.name,Te.title,a);i.title=p.maybeAppendByClassName(gf.text,"text").attr("className",v).styles(l).call(mz,{x:u,y:f,textAlign:d,textBaseline:h}).node()})},r}(Ue),ln=Fn({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),xz=function(t){ge(r,t);function r(e){var n=t.call(this,e,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:SF(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new Ve({class:ln.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new Ve({class:ln.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Object.defineProperty(r.prototype,"defaultPage",{get:function(){var e=this.attributes.defaultPage;return Pe(e,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageShape",{get:function(){var e=this.pageViews,n=D(iF(e.map(function(f){var d=f.getBBox(),h=d.width,p=d.height;return[h,p]})).map(function(f){return Math.max.apply(Math,vt([],D(f),!1))}),2),i=n[0],a=n[1],o=this.attributes,s=o.pageWidth,l=s===void 0?i:s,c=o.pageHeight,u=c===void 0?a:c;return{pageWidth:l,pageHeight:u}},enumerable:!1,configurable:!0}),r.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(r.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var e=t.prototype.getBBox.call(this),n=e.x,i=e.y,a=this.controllerShape,o=this.pageShape,s=o.pageWidth,l=o.pageHeight;return new me(n,i,s+a.width,l)},r.prototype.goTo=function(e){var n=this,i=this.attributes.animate,a=this,o=a.currPage,s=a.playState,l=a.playWindow,c=a.pageViews;if(s!=="idle"||e<0||c.length<=0||e>=c.length)return null;c[o].setLocalPosition(0,0),this.prepareFollowingPage(e);var u=D(this.getFollowingPageDiff(e),2),f=u[0],d=u[1];this.playState="running";var h=Mw(l,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-f,", ").concat(-d,")")}],i);return no(h,function(){n.innerCurrPage=e,n.playState="idle",n.setVisiblePages([e]),n.updatePageInfo()}),h},r.prototype.prev=function(){var e=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!e&&i<=0)return null;var a=e?(i-1+n)%n:Pe(i-1,0,n);return this.goTo(a)},r.prototype.next=function(){var e=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!e&&i>=n-1)return null;var a=e?(i+1)%n:Pe(i+1,0,n);return this.goTo(a)},r.prototype.renderClipPath=function(e){var n=this.pageShape,i=n.pageWidth,a=n.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=e.maybeAppendByClassName(ln.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},r.prototype.setVisiblePages=function(e){this.playWindow.children.forEach(function(n,i){e.includes(i)?Ps(n):_i(n)})},r.prototype.adjustControllerLayout=function(){var e=this,n=e.prevBtnGroup,i=e.nextBtnGroup,a=e.pageInfoGroup,o=this.attributes,s=o.orientation,l=o.controllerPadding,c=a.getBBox(),u=c.width;c.height;var f=D(s==="horizontal"?[-180,0]:[-90,90],2),d=f[0],h=f[1];n.setLocalEulerAngles(d),i.setLocalEulerAngles(h);var p=n.getBBox(),v=p.width,g=p.height,y=i.getBBox(),m=y.width,b=y.height,x=Math.max(v,u,m),O=s==="horizontal"?{offset:[[0,0],[v/2+l,0],[v+u+l*2,0]],textAlign:"start"}:{offset:[[x/2,-g-l],[x/2,0],[x/2,b+l]],textAlign:"center"},w=D(O.offset,3),_=D(w[0],2),S=_[0],k=_[1],E=D(w[1],2),A=E[0],T=E[1],P=D(w[2],2),N=P[0],I=P[1],R=O.textAlign,C=a.querySelector("text");C&&(C.style.textAlign=R),n.setLocalPosition(S,k),a.setLocalPosition(A,T),i.setLocalPosition(N,I)},r.prototype.updatePageInfo=function(){var e,n=this,i=n.currPage,a=n.pageViews,o=n.attributes.formatter;a.length<2||((e=this.pageInfoGroup.querySelector(ln.pageInfo.class))===null||e===void 0||e.attr("text",o(i+1,a.length)),this.adjustControllerLayout())},r.prototype.getFollowingPageDiff=function(e){var n=this.currPage;if(n===e)return[0,0];var i=this.attributes.orientation,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=e<n?-1:1;return i==="horizontal"?[l*o,0]:[0,l*s]},r.prototype.prepareFollowingPage=function(e){var n=this,i=n.currPage,a=n.pageViews;if(this.setVisiblePages([e,i]),e!==i){var o=D(this.getFollowingPageDiff(e),2),s=o[0],l=o[1];a[e].setLocalPosition(s,l)}},r.prototype.renderController=function(e){var n=this,i=this.attributes,a=i.controllerSpacing,o=i.classNamePrefix,s=o===void 0?"":o,l=this.pageShape,c=l.pageWidth,u=l.pageHeight,f=this.pageViews.length>=2,d=e.maybeAppendByClassName(ln.controller,"g");if(mu(d.node(),f),!!f){var h=Mt(this.attributes,"button"),p=Mt(this.attributes,"pageNum"),v=D(Gr(h),2),g=v[0],y=v[1],m=g.size,b=De(g,["size"]),x=!d.select(ln.prevBtnGroup.class).node(),O=d.maybeAppendByClassName(ln.prevBtnGroup,"g").styles(y);this.prevBtnGroup=O.node();var w=O.maybeAppendByClassName(ln.prevBtn,"path");if(s){var _=Ae(ln.prevBtn.name,Te.prevBtn,s);w.node().setAttribute("class",_)}var S=d.maybeAppendByClassName(ln.nextBtnGroup,"g").styles(y);this.nextBtnGroup=S.node();var k=S.maybeAppendByClassName(ln.nextBtn,"path");if(s){var E=Ae(ln.nextBtn.name,Te.nextBtn,s);k.node().setAttribute("class",E)}[w,k].forEach(function(N){N.styles(J(J({},b),{transformOrigin:"center"})),jp(N.node(),m)});var A=d.maybeAppendByClassName(ln.pageInfoGroup,"g");this.pageInfoGroup=A.node();var T=A.maybeAppendByClassName(ln.pageInfo,"text");if(T.styles(p),s){var P=Ae(ln.pageInfo.name,Te.pageInfo,s);T.node().setAttribute("class",P)}this.updatePageInfo(),d.node().setLocalPosition(c+a,u/2),x&&(this.prevBtnGroup.addEventListener("click",function(){n.prev()}),this.nextBtnGroup.addEventListener("click",function(){n.next()}))}},r.prototype.render=function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o;this.attr("transform","translate(".concat(a,", ").concat(s,")"));var l=wt(n);this.renderClipPath(l),this.renderController(l),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},r.prototype.bindEvents=function(){var e=this,n=hx(function(){return e.render(e.attributes,e)},50);this.playWindow.addEventListener(It.INSERTED,n),this.playWindow.addEventListener(It.REMOVED,n)},r}(Ue),Lt,Oz="component-poptip",Tt={CONTAINER:"component-poptip",ARROW:"component-poptip-arrow",TEXT:"component-poptip-text"},Yy=(Lt={},Lt[".".concat(Tt.CONTAINER)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},Lt[".".concat(Tt.TEXT)]={"text-align":"center"},Lt[".".concat(Tt.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, -100%)"},Lt[".".concat(Tt.CONTAINER,"[data-position='left']")]={transform:"translate(-100%, -50%)"},Lt[".".concat(Tt.CONTAINER,"[data-position='right']")]={transform:"translate(0, -50%)"},Lt[".".concat(Tt.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},Lt[".".concat(Tt.CONTAINER,"[data-position='top-left']")]={transform:"translate(0,-100%)"},Lt[".".concat(Tt.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},Lt[".".concat(Tt.CONTAINER,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},Lt[".".concat(Tt.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},Lt[".".concat(Tt.CONTAINER,"[data-position='right-top']")]={transform:"translate(0, 0)"},Lt[".".concat(Tt.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},Lt[".".concat(Tt.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},Lt[".".concat(Tt.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},Lt[".".concat(Tt.ARROW)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},Lt[".".concat(Tt.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},Lt["[data-position='top'] .".concat(Tt.ARROW)]={bottom:"-2px"},Lt[".".concat(Tt.CONTAINER,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},Lt["[data-position='left'] .".concat(Tt.ARROW)]={right:"-2px"},Lt[".".concat(Tt.CONTAINER,"[data-position='right']")]={transform:"translate(5px, -50%)"},Lt["[data-position='right'] .".concat(Tt.ARROW)]={left:"-2px"},Lt[".".concat(Tt.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},Lt["[data-position='bottom'] .".concat(Tt.ARROW)]={top:"-2px"},Lt[".".concat(Tt.CONTAINER,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},Lt["[data-position='top-left'] .".concat(Tt.ARROW)]={left:"10px",bottom:"-2px"},Lt[".".concat(Tt.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},Lt["[data-position='top-right'] .".concat(Tt.ARROW)]={right:"10px",bottom:"-2px"},Lt[".".concat(Tt.CONTAINER,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},Lt["[data-position='left-top'] .".concat(Tt.ARROW)]={right:"-2px",top:"8px"},Lt[".".concat(Tt.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},Lt["[data-position='left-bottom'] .".concat(Tt.ARROW)]={right:"-2px",bottom:"8px"},Lt[".".concat(Tt.CONTAINER,"[data-position='right-top']")]={transform:"translate(5px, 0)"},Lt["[data-position='right-top'] .".concat(Tt.ARROW)]={left:"-2px",top:"8px"},Lt[".".concat(Tt.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},Lt["[data-position='right-bottom'] .".concat(Tt.ARROW)]={left:"-2px",bottom:"8px"},Lt[".".concat(Tt.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},Lt["[data-position='bottom-left'] .".concat(Tt.ARROW)]={top:"-2px",left:"8px"},Lt[".".concat(Tt.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},Lt["[data-position='bottom-right'] .".concat(Tt.ARROW)]={top:"-2px",right:"8px"},Lt),wz=void 0;function _z(t,r,e,n,i,a){if(i===void 0&&(i=!1),a===void 0&&(a=!1),a)return[t,r];var o=e.getBoundingClientRect(),s=o.x,l=o.y,c=o.width,u=o.height;switch(n){case"top":return i?[s+c/2,l]:[t,l];case"left":return i?[s,l+u/2]:[s,r];case"bottom":return i?[s+c/2,l+u]:[t,l+u];case"right":return i?[s+c,l+u/2]:[s+c,r];case"top-right":case"right-top":return[s+c,l];case"left-bottom":case"bottom-left":return[s,l+u];case"right-bottom":case"bottom-right":return[s+c,l+u];case"top-left":case"left-top":default:return[s,l]}}var Sz=function(t){var r;return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r||(r=t.apply(wz,e)),r}};function kz(t){var r=t&&document.getElementById(t);return r||(r=document.createElement("div"),r.setAttribute("id",t),document.body.appendChild(r)),r}function Ez(t){var r=Sz(kz)(t);return r}var Az=function(t){ge(r,t);function r(e){var n=t.call(this,X({style:{id:Oz}},r.defaultOptions,e))||this;return n.visibility="visible",n.map=new Map,n.domStyles="",n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(r.prototype,"visible",{get:function(){return this.visibility==="visible"},enumerable:!1,configurable:!0}),r.prototype.render=function(e,n){this.visibility=this.style.visibility,this.updatePoptipElement()},r.prototype.update=function(e){this.attr(X({},this.style,e)),this.render(this.attributes,this)},r.prototype.bind=function(e,n){var i=this;if(e){var a=this.style.text,o=function(l){var c=e,u=i.style,f=a;if(n){var d=typeof n=="function"?n.call(null,l):n,h=d.html,p=d.target,v=De(d,["html","target"]);u=dx({},i.style,v),(p||p===!1)&&(c=p),typeof h=="string"&&(f=h)}var g=u.position,y=u.arrowPointAtCenter,m=u.follow,b=u.offset;if(c){var x=l,O=x.clientX,w=x.clientY,_=D(_z(O,w,c,g,y,m),2),S=_[0],k=_[1];i.showTip(S,k,{text:f,position:g,offset:b})}else i.hideTip()},s=function(){i.hideTip()};e.addEventListener("mousemove",o),e.addEventListener("mouseleave",s),this.map.set(e,[o,s])}},r.prototype.unbind=function(e){if(this.map.has(e)){var n=D(this.map.get(e)||[],2),i=n[0],a=n[1];i&&e.removeEventListener("mousemove",i),a&&e.removeEventListener("mouseleave",a),this.map.delete(e)}},r.prototype.clear=function(){this.container.innerHTML=""},r.prototype.destroy=function(){var e=this,n;vt([],D(this.map.keys()),!1).forEach(function(i){return e.unbind(i)}),(n=this.container)===null||n===void 0||n.remove(),t.prototype.destroy.call(this)},r.prototype.showTip=function(e,n,i){var a=mt(i,"text");if(!(a&&typeof a!="string")&&(this.applyStyles(),e&&n&&i)){var o=i.offset,s=i.position;if(s&&this.container.setAttribute("data-position",s),this.setOffsetPosition(e,n,o),typeof a=="string"){var l=this.container.querySelector(".".concat(Tt.TEXT));l&&(l.innerHTML=a)}this.visibility="visible",this.container.style.visibility="visible"}},r.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},r.prototype.getContainer=function(){return this.container},r.prototype.getClassName=function(){var e=this.style.containerClassName;return"".concat(Tt.CONTAINER).concat(e?" ".concat(e):"")},r.prototype.initShape=function(){var e=this,n=this.style.id;this.container=Ez(n),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",function(){return e.showTip()}),this.container.addEventListener("mouseleave",function(){return e.hideTip()})},r.prototype.updatePoptipElement=function(){var e=this.container;this.clear();var n=this.style,i=n.id,a=n.template,o=n.text;this.container.setAttribute("id",i),this.container.className=this.getClassName();var s='<span class="'.concat(Tt.ARROW,'"></span>');e.innerHTML=s,pe(a)?e.innerHTML+=a:a&&y2(a)&&e.appendChild(a),o&&(e.getElementsByClassName(Tt.TEXT)[0].textContent=o),this.applyStyles(),this.container.style.visibility=this.visibility},r.prototype.applyStyles=function(){var e=qn({},Yy,this.style.domStyles),n=Object.entries(e).reduce(function(a,o){var s=D(o,2),l=s[0],c=s[1],u=Object.entries(c).reduce(function(f,d){var h=D(d,2),p=h[0],v=h[1];return"".concat(f).concat(p,": ").concat(v,";")},"");return"".concat(a).concat(l,"{").concat(u,"}")},"");if(this.domStyles!==n){this.domStyles=n;var i=this.container.querySelector("style");i&&this.container.removeChild(i),i=document.createElement("style"),i.innerHTML=n,this.container.appendChild(i)}},r.prototype.setOffsetPosition=function(e,n,i){i===void 0&&(i=this.style.offset);var a=D(i,2),o=a[0],s=o===void 0?0:o,l=a[1],c=l===void 0?0:l;this.container.style.left="".concat(e+s,"px"),this.container.style.top="".concat(n+c,"px")},r.tag="poptip",r.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:Yy,template:'<div class="'.concat(Tt.TEXT,'"></div>')}},r}(Ue),Fe=Fn({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",focusGroup:"focus-group",focus:"focus",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),Tz={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}};function Pz(t){var r=t.querySelector(Fe.marker.class);return r?r.style:{}}var Mz=function(t){ge(r,t);function r(e,n){var i=t.call(this,e,{span:[1,1],marker:function(){return new Or({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;return i.keyFields={},i.keyFields=n||{},i}return Object.defineProperty(r.prototype,"showValue",{get:function(){var e=this.attributes.valueText;return e?typeof e=="string"||typeof e=="number"?e!=="":typeof e=="function"?!0:e.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"actualSpace",{get:function(){var e=this.labelGroup,n=this.valueGroup,i=this.attributes,a=i.markerSize,o=i.focus,s=i.focusMarkerSize,l=e.node().getBBox(),c=l.width,u=l.height,f=n.node().getBBox(),d=f.width,h=f.height,p=o?s??12:0;return{markerWidth:a,labelWidth:c,valueWidth:d,focusWidth:p,height:Math.max(a,u,h)}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"span",{get:function(){var e=this.attributes.span;if(!e)return[1,1];var n=D(Je(e),2),i=n[0],a=n[1],o=this.showValue?a:0,s=i+o;return[i/s,o/s]},enumerable:!1,configurable:!0}),r.prototype.setAttribute=function(e,n){t.prototype.setAttribute.call(this,e,n)},Object.defineProperty(r.prototype,"shape",{get:function(){var e,n=this.attributes,i=n.markerSize,a=n.width,o=this.actualSpace,s=o.markerWidth,l=o.focusWidth,c=o.height,u=this.actualSpace,f=u.labelWidth,d=u.valueWidth,h=D(this.spacing,3),p=h[0],v=h[1],g=h[2];if(a){var y=a-i-p-v-l-g,m=D(this.span,2),b=m[0],x=m[1];e=D([b*y,x*y],2),f=e[0],d=e[1]}var O=s+f+d+p+v+l+g;return{width:O,height:c,markerWidth:s,labelWidth:f,valueWidth:d,focusWidth:l}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"spacing",{get:function(){var e=this.attributes,n=e.spacing,i=e.focus;if(!n)return[0,0,0];var a=D(Je(n),3),o=a[0],s=a[1],l=a[2];return[o,this.showValue?s:0,i?l:0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layout",{get:function(){var e=this.shape,n=e.markerWidth,i=e.labelWidth,a=e.valueWidth,o=e.focusWidth,s=e.width,l=e.height,c=D(this.spacing,3),u=c[0],f=c[1],d=c[2];return{height:l,width:s,markerWidth:n,labelWidth:i,valueWidth:a,focusWidth:o,position:[n/2,n+u,n+i+u+f,n+i+a+u+f+d+o/2]}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scaleSize",{get:function(){var e=Pz(this.markerGroup.node()),n=this.attributes,i=n.markerSize,a=n.markerStrokeWidth,o=a===void 0?e.strokeWidth:a,s=n.markerLineWidth,l=s===void 0?e.lineWidth:s,c=n.markerStroke,u=c===void 0?e.stroke:c,f=+(o||l||(u?1:0))*Math.sqrt(2),d=this.markerGroup.node().getBBox(),h=d.width,p=d.height;return(1-f/Math.max(h,p))*i},enumerable:!1,configurable:!0}),r.prototype.renderMarker=function(e){var n=this,i=this.attributes,a=i.marker,o=i.classNamePrefix,s=Mt(this.attributes,"marker");this.markerGroup=e.maybeAppendByClassName(Fe.markerGroup,"g").style("zIndex",0),un(!!a,this.markerGroup,function(){var l,c=n.markerGroup.node(),u=(l=c.childNodes)===null||l===void 0?void 0:l[0],f=Ae(Fe.marker.name,Te.marker,o),d=typeof a=="string"?new Ft({style:{symbol:a},className:f}):a();if(u)if(d.nodeName===u.nodeName)u instanceof Ft?u.update(J(J({},s),{symbol:a})):(J$(u,d),wt(u).styles(s));else{if(u.remove(),!(d instanceof Ft)){var p=Ae(Fe.marker.name,Te.marker,o);d.className=p}wt(d).styles(s),c.appendChild(d)}else{if(!(d instanceof Ft)){var h=Ae(Fe.marker.name,Te.marker,o);d.className=h,wt(d).styles(s)}c.appendChild(d)}n.markerGroup.node().scale(1/n.markerGroup.node().getScale()[0]);var v=jp(n.markerGroup.node(),n.scaleSize);n.markerGroup.node().style._transform="scale(".concat(v,")")})},r.prototype.renderLabel=function(e){var n=Mt(this.attributes,"label"),i=n.text,a=De(n,["text"]),o=this.attributes.classNamePrefix;this.labelGroup=e.maybeAppendByClassName(Fe.labelGroup,"g").style("zIndex",0);var s=Ae(Fe.label.name,Te.label,o),l=this.labelGroup.maybeAppendByClassName(Fe.label,function(){return na(i)});l.node().setAttribute("class",s),l.styles(a)},r.prototype.renderValue=function(e){var n=this,i=Mt(this.attributes,"value"),a=i.text,o=De(i,["text"]),s=this.attributes.classNamePrefix;this.valueGroup=e.maybeAppendByClassName(Fe.valueGroup,"g").style("zIndex",0),un(this.showValue,this.valueGroup,function(){var l=Ae(Fe.value.name,Te.value,s),c=n.valueGroup.maybeAppendByClassName(Fe.value,function(){return na(a)});c.node().setAttribute("class",l),c.styles(o)})},r.prototype.createPoptip=function(){var e=this.attributes.poptip,n=e||{};n.render;var i=De(n,["render"]),a=new Az({style:qn(Tz,i)});return this.poptipGroup=a,a},r.prototype.bindPoptip=function(e){var n=this,i=this.attributes.poptip;if(i){var a=this.poptipGroup||this.createPoptip();a.bind(e,function(){var o=n.attributes,s=o.labelText,l=o.valueText,c=o.markerFill,u=typeof s=="string"?s:s?.attr("text"),f=typeof l=="string"?l:l?.attr("text");if(typeof i.render=="function")return{html:i.render(J(J({},n.keyFields),{label:u,value:f,color:c}))};var d="";return(typeof u=="string"||typeof u=="number")&&(d+='<div class="component-poptip-label">'.concat(u,"</div>")),(typeof f=="string"||typeof f=="number")&&(d+='<div class="component-poptip-value">'.concat(f,"</div>")),{html:d}})}},r.prototype.renderFocus=function(e){var n=this,i=this.attributes,a=i.focus,o=i.focusMarkerSize,s=i.classNamePrefix,l={x:0,y:0,size:o,opacity:.6,symbol:"focus",stroke:"#aaaaaa",lineWidth:1};Kt(a)||(this.focusGroup=e.maybeAppendByClassName(Fe.focusGroup,"g").style("zIndex",0),un(a,this.focusGroup,function(){var c=Ae(Fe.focus.name,Te.focusIcon,s),u=new Ft({style:J(J({},l),{symbol:"focus"}),className:c}),f=new Or({style:{r:l.size/2,fill:"transparent"}}),d=n.focusGroup.node();d.appendChild(f),d.appendChild(u),u.update({opacity:0}),e.node().addEventListener("pointerenter",function(){u.update({opacity:1})}),e.node().addEventListener("pointerleave",function(){u.update({opacity:0})})}))},r.prototype.renderPoptip=function(e){var n=this,i=this.attributes.poptip;if(i){var a=e.maybeAppendByClassName(Fe.value,"g").node(),o=e.maybeAppendByClassName(Fe.label,"g").node();[a,o].forEach(function(s){s&&n.bindPoptip(s)})}},r.prototype.renderBackground=function(e){var n=this.shape,i=n.width,a=n.height,o=Mt(this.attributes,"background");this.background=e.maybeAppendByClassName(Fe.backgroundGroup,"g").style("zIndex",-1);var s=this.background.maybeAppendByClassName(Fe.background,"rect");s.styles(J({width:i,height:a},o));var l=this.attributes.classNamePrefix,c=l===void 0?"":l;if(c){var u=Ae(Fe.background.name,Te.background,c);s.node().setAttribute("class",u)}},r.prototype.adjustLayout=function(){var e=this.layout,n=e.labelWidth,i=e.valueWidth,a=e.height,o=D(e.position,4),s=o[0],l=o[1],c=o[2],u=o[3],f=a/2;this.markerGroup.styles({transform:"translate(".concat(s,", ").concat(f,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(l,", ").concat(f,")")}),this.focusGroup&&this.focusGroup.styles({transform:"translate(".concat(u,", ").concat(f,")")}),_d(this.labelGroup.select(Fe.label.class).node(),Math.ceil(n)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(c,", ").concat(f,")")}),_d(this.valueGroup.select(Fe.value.class).node(),Math.ceil(i)))},r.prototype.render=function(e,n){var i=wt(n),a=e.x,o=a===void 0?0:a,s=e.y,l=s===void 0?0:s;i.styles({transform:"translate(".concat(o,", ").concat(l,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.renderPoptip(i),this.renderFocus(i),this.adjustLayout()},r}(Ue),Di=Fn({page:"item-page",navigator:"navigator",item:"item"},"items"),Vy=function(t,r,e){return e===void 0&&(e=!0),t?r(t):e},Cz=function(t){ge(r,t);function r(e){var n=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:Yu,mouseenter:Yu,mouseleave:Yu})||this;return n.navigatorShape=[0,0],n}return Object.defineProperty(r.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"grid",{get:function(){var e=this.attributes,n=e.gridRow,i=e.gridCol,a=e.data;if(!n&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return n&&i?[n,i]:n?[n,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"renderData",{get:function(){var e=this.attributes,n=e.data,i=e.layout,a=e.poptip,o=e.focus,s=e.focusMarkerSize,l=e.classNamePrefix,c=Mt(this.attributes,"item"),u=n.map(function(f,d){var h=f.id,p=h===void 0?d:h,v=f.label,g=f.value;return{id:"".concat(p),index:d,style:J({layout:i,labelText:v,valueText:g,poptip:a,focus:o,focusMarkerSize:s,classNamePrefix:l},Object.fromEntries(Object.entries(c).map(function(y){var m=D(y,2),b=m[0],x=m[1];return[b,yn(x,[f,d,n])]})))}});return u},enumerable:!1,configurable:!0}),r.prototype.getGridLayout=function(){var e=this,n=this.attributes,i=n.orientation,a=n.width,o=n.rowPadding,s=n.colPadding,l=D(this.navigatorShape,1),c=l[0],u=D(this.grid,2),f=u[0],d=u[1],h=d*f,p=0;return this.pageViews.children.map(function(v,g){var y,m,b=Math.floor(g/h),x=g%h,O=e.ifHorizontal(d,f),w=[Math.floor(x/O),x%O];i==="vertical"&&w.reverse();var _=D(w,2),S=_[0],k=_[1],E=(a-c-(d-1)*s)/d,A=v.getBBox().height,T=D([0,0],2),P=T[0],N=T[1];return i==="horizontal"?(y=D([p,S*(A+o)],2),P=y[0],N=y[1],p=k===d-1?0:p+E+s):(m=D([k*(E+s),p],2),P=m[0],N=m[1],p=S===f-1?0:p+A+o),{page:b,index:g,row:S,col:k,pageIndex:x,width:E,height:A,x:P,y:N}})},r.prototype.getFlexLayout=function(){var e=this.attributes,n=e.width,i=e.height,a=e.rowPadding,o=e.colPadding,s=D(this.navigatorShape,1),l=s[0],c=D(this.grid,2),u=c[0],f=c[1],d=D([n-l,i],2),h=d[0],p=d[1],v=D([0,0,0,0,0,0,0,0],8),g=v[0],y=v[1],m=v[2],b=v[3],x=v[4],O=v[5],w=v[6],_=v[7];return this.pageViews.children.map(function(S,k){var E,A,T,P,N=S.getBBox(),I=N.width,R=N.height,C=w===0?0:o,L=w+C+I;if(L<=h&&Vy(x,function(j){return j<f}))return E=D([w+C,_,L],3),g=E[0],y=E[1],w=E[2],{width:I,height:R,x:g,y,page:m,index:k,pageIndex:b++,row:O,col:x++};A=D([O+1,0,0,_+R+a],4),O=A[0],x=A[1],w=A[2],_=A[3];var M=_+R;return M<=p&&Vy(O,function(j){return j<u})?(T=D([w,_,I],3),g=T[0],y=T[1],w=T[2],{width:I,height:R,x:g,y,page:m,index:k,pageIndex:b++,row:O,col:x++}):(P=D([0,0,I,0,m+1,0,0,0],8),g=P[0],y=P[1],w=P[2],_=P[3],m=P[4],b=P[5],O=P[6],x=P[7],{width:I,height:R,x:g,y,page:m,index:k,pageIndex:b++,row:O,col:x++})})},Object.defineProperty(r.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var e=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,n=e.call(this);return n.slice(-1)[0].page>0?(this.navigatorShape=[55,0],e.call(this)):n},enumerable:!1,configurable:!0}),r.prototype.ifHorizontal=function(e,n){var i=this.attributes.orientation;return dr(i,e,n)},r.prototype.flattenPage=function(e){e.querySelectorAll(Di.item.class).forEach(function(n){e.appendChild(n)}),e.querySelectorAll(Di.page.class).forEach(function(n){var i=e.removeChild(n);i.destroy()})},r.prototype.renderItems=function(e){var n=this.attributes,i=n.click,a=n.mouseenter,o=n.mouseleave,s=n.classNamePrefix;this.flattenPage(e);var l=this.dispatchCustomEvent.bind(this),c=Ae(Di.item.name,Te.item,s);wt(e).selectAll(Di.item.class).data(this.renderData,function(u){return u.id}).join(function(u){return u.append(function(f){var d=f.style,h=De(f,["style"]);return new Mz({style:d},h)}).attr("className",c).on("click",function(){i?.(this),l("itemClick",{item:this})}).on("pointerenter",function(){a?.(this),l("itemMouseenter",{item:this})}).on("pointerleave",function(){o?.(this),l("itemMouseleave",{item:this})})},function(u){return u.each(function(f){var d=f.style;this.update(d)})},function(u){return u.remove()})},r.prototype.relayoutNavigator=function(){var e,n=this.attributes,i=n.layout,a=n.width,o=((e=this.pageViews.children[0])===null||e===void 0?void 0:e.getBBox().height)||0,s=D(this.navigatorShape,2),l=s[0],c=s[1];this.navigator.update(i==="grid"?{pageWidth:a-l,pageHeight:o-c}:{})},r.prototype.adjustLayout=function(){var e=this,n=Object.entries(R$(this.itemsLayout,"page")).map(function(a){var o=D(a,2),s=o[0],l=o[1];return{page:s,layouts:l}}),i=vt([],D(this.navigator.getContainer().children),!1);n.forEach(function(a){var o=a.layouts,s=e.pageViews.appendChild(new Ve({className:Di.page.name}));o.forEach(function(l){var c=l.x,u=l.y,f=l.index,d=l.width,h=l.height,p=i[f];s.appendChild(p),Vc(p,"__layout__",l),p.update({x:c,y:u,width:d,height:h})})}),this.relayoutNavigator()},r.prototype.renderNavigator=function(e){var n=this.attributes,i=n.orientation,a=n.classNamePrefix,o=Mt(this.attributes,"nav"),s=qn({orientation:i,classNamePrefix:a},o),l=this;return e.selectAll(Di.navigator.class).data(["nav"]).join(function(c){return c.append(function(){return new xz({style:s})}).attr("className",Di.navigator.name).each(function(){l.navigator=this})},function(c){return c.each(function(){this.update(s)})},function(c){return c.remove()}),this.navigator},r.prototype.getBBox=function(){return this.navigator.getBBox()},r.prototype.render=function(e,n){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(wt(n));this.renderItems(a.getContainer()),this.adjustLayout()}},r.prototype.dispatchCustomEvent=function(e,n){var i=new Qt(e,{detail:n});this.dispatchEvent(i)},r}(Ue),Lz=function(t){ge(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.update=function(e){this.attr(e)},r}(ca),Uy=function(t){ge(r,t);function r(e){return t.call(this,e,pz)||this}return r.prototype.renderTitle=function(e,n,i){var a=this.attributes,o=a.showTitle,s=a.titleText,l=a.classNamePrefix,c=Mt(this.attributes,"title"),u=D(Gr(c),2),f=u[0],d=u[1];this.titleGroup=e.maybeAppendByClassName(je.titleGroup,"g").styles(d);var h=J(J({width:n,height:i},f),{text:o?s:"",classNamePrefix:l});this.title=this.titleGroup.maybeAppendByClassName(je.title,function(){return new qw({style:h})}).update(h)},r.prototype.renderCustom=function(e){var n=this.attributes.data,i={innerHTML:this.attributes.render(n),pointerEvents:"auto"};e.maybeAppendByClassName(je.html,function(){return new Lz({className:je.html.name,style:i})}).update(i)},r.prototype.renderItems=function(e,n){var i=n.x,a=n.y,o=n.width,s=n.height,l=Mt(this.attributes,"title",!0),c=D(Gr(l),2),u=c[0],f=c[1],d=J(J({},u),{width:o,height:s,x:0,y:0});this.itemsGroup=e.maybeAppendByClassName(je.itemsGroup,"g").styles(J(J({},f),{transform:"translate(".concat(i,", ").concat(a,")")}));var h=this;this.itemsGroup.selectAll(je.items.class).data(["items"]).join(function(p){return p.append(function(){return new Cz({style:d})}).attr("className",je.items.name).each(function(){h.items=wt(this)})},function(p){return p.update(d)},function(p){return p.remove()})},r.prototype.adjustLayout=function(){var e=this.attributes.showTitle;if(e){var n=this.title.node().getAvailableSpace(),i=n.x,a=n.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(a,")")}},Object.defineProperty(r.prototype,"availableSpace",{get:function(){var e=this.attributes,n=e.showTitle,i=e.width,a=e.height;return n?this.title.node().getAvailableSpace():new me(0,0,i,a)},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var e,n,i=(e=this.title)===null||e===void 0?void 0:e.node(),a=(n=this.items)===null||n===void 0?void 0:n.node();return!i||!a?t.prototype.getBBox.call(this):yz(i,a)},r.prototype.render=function(e,n){var i=this.attributes,a=i.width,o=i.height,s=i.x,l=s===void 0?0:s,c=i.y,u=c===void 0?0:c,f=i.classNamePrefix,d=i.render,h=wt(n),p=n.className||"legend-category";f?n.attr("className","".concat(p," ").concat(f,"legend")):n.className||n.attr("className","legend-category"),n.style.transform="translate(".concat(l,", ").concat(u,")"),d?this.renderCustom(h):(this.renderTitle(h,a,o),this.renderItems(h,this.availableSpace),this.adjustLayout())},r}(Ue),Nz={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},yf=Fn({background:"background",labelGroup:"label-group",label:"label"},"indicator"),Rz=function(t){ge(r,t);function r(e){var n=t.call(this,e,Nz)||this;return n.point=[0,0],n.group=n.appendChild(new Ve({})),n.isMutationObserved=!0,n}return r.prototype.renderBackground=function(){if(this.label){var e=this.attributes,n=e.position,i=e.padding,a=D(Je(i),4),o=a[0],s=a[1],l=a[2],c=a[3],u=this.label.node().getLocalBounds(),f=u.min,d=u.max,h=new me(f[0]-c,f[1]-o,d[0]+s-f[0]+c,d[1]+l-f[1]+o),p=this.getPath(n,h),v=Mt(this.attributes,"background");this.background=wt(this.group).maybeAppendByClassName(yf.background,"path").styles(J(J({},v),{d:p})),this.group.appendChild(this.label.node())}},r.prototype.renderLabel=function(){var e=this.attributes,n=e.formatter,i=e.labelText,a=Mt(this.attributes,"label"),o=D(Gr(a),2),s=o[0],l=o[1];s.text;var c=De(s,["text"]);if(this.label=wt(this.group).maybeAppendByClassName(yf.labelGroup,"g").styles(l),!!i){var u=this.label.maybeAppendByClassName(yf.label,function(){return na(n(i))}).style("text",n(i).toString());u.selectAll("text").styles(c)}},r.prototype.adjustLayout=function(){var e=D(this.point,2),n=e[0],i=e[1],a=this.attributes,o=a.x,s=a.y;this.group.attr("transform","translate(".concat(o-n,", ").concat(s-i,")"))},r.prototype.getPath=function(e,n){var i=this.attributes.radius,a=n.x,o=n.y,s=n.width,l=n.height,c=[["M",a+i,o],["L",a+s-i,o],["A",i,i,0,0,1,a+s,o+i],["L",a+s,o+l-i],["A",i,i,0,0,1,a+s-i,o+l],["L",a+i,o+l],["A",i,i,0,0,1,a,o+l-i],["L",a,o+i],["A",i,i,0,0,1,a+i,o],["Z"]],u={top:4,right:6,bottom:0,left:2},f=u[e],d=this.createCorner([c[f].slice(-2),c[f+1].slice(-2)]);return c.splice.apply(c,vt([f+1,1],D(d),!1)),c[0][0]="M",c},r.prototype.createCorner=function(e,n){n===void 0&&(n=10);var i=.8,a=Q$.apply(void 0,vt([],D(e),!1)),o=D(e,2),s=D(o[0],2),l=s[0],c=s[1],u=D(o[1],2),f=u[0],d=u[1],h=D(a?[f-l,[l,f]]:[d-c,[c,d]],2),p=h[0],v=D(h[1],2),g=v[0],y=v[1],m=p/2,b=p/Math.abs(p),x=n*b,O=x/2,w=x*Math.sqrt(3)/2*i,_=D([g,g+m-O,g+m,g+m+O,y],5),S=_[0],k=_[1],E=_[2],A=_[3],T=_[4];return a?(this.point=[E,c-w],[["L",S,c],["L",k,c],["L",E,c-w],["L",A,c],["L",T,c]]):(this.point=[l+w,E],[["L",l,S],["L",l,k],["L",l+w,E],["L",l,A],["L",l,T]])},r.prototype.applyVisibility=function(){var e=this.attributes.visibility;e==="hidden"?_i(this):Ps(this)},r.prototype.bindEvents=function(){this.label.on(It.BOUNDS_CHANGED,this.renderBackground)},r.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},r}(Ue);function Iz(t,r){for(var e=1;e<t.length;e+=1){var n=t[e-1],i=t[e];if(r>=n&&r<=i)return[n,i]}return[r,r]}function jz(t,r,e){var n=Array.from(r),i=t.length;return new Array(i).fill(0).reduce(function(a,o,s){var l=n[s%n.length];return a+=" ".concat(t[s],":").concat(l).concat(s<i-1?" ".concat(t[s+1],":").concat(l):"")},"l(".concat(e==="horizontal"?"0":"270",")"))}function Xy(t,r){var e=D(Iz(t,r),2),n=e[0],i=e[1];return{tick:r>(n+i)/2?i:n,range:[n,i]}}var qi=Fn({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function Kw(t){var r=t.orientation,e=t.size,n=t.length;return dr(r,[n,e],[e,n])}function Zw(t){var r=t.type,e=D(Kw(t),2),n=e[0],i=e[1];return r==="size"?[["M",0,i],["L",0+n,0],["L",0+n,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+n,0],["L",0+n,i],["Z"]]}function Dz(t){return Zw(t)}function $z(t){var r=t.orientation,e=t.color,n=t.block,i=t.partition,a;if(Ge(e)){var o=20;a=new Array(o).fill(0).map(function(c,u,f){return e(u/(f.length-1))})}else a=e;var s=a.length,l=a.map(function(c){return ci(c).toString()});return s?s===1?l[0]:n?jz(i,l,r):l.reduce(function(c,u,f){return c+=" ".concat(f/(s-1),":").concat(u)},"l(".concat(dr(r,"0","270"),")")):""}function Fz(t){var r=t.orientation,e=t.range;if(!e)return[];var n=D(Kw(t),2),i=n[0],a=n[1],o=D(e,2),s=o[0],l=o[1],c=dr(r,s*i,0),u=dr(r,0,s*a),f=dr(r,l*i,i),d=dr(r,a,l*a);return[["M",c,u],["L",c,d],["L",f,d],["L",f,u],["Z"]]}function Bz(t,r){var e=Mt(r,"track"),n=r.classNamePrefix,i=Ae(qi.track.name,Te.track,n);t.maybeAppendByClassName(qi.track,"path").attr("className",i).styles(J({d:Zw(r)},e))}function zz(t,r){var e=Mt(r,"selection"),n=$z(r),i=r.classNamePrefix,a=Ae(qi.selection.name,Te.selection,i),o=t.maybeAppendByClassName(qi.selection,"path").attr("className",a).styles(J({d:Dz(r),fill:n},e)),s=o.maybeAppendByClassName(qi.clipPath,"path").styles({d:Fz(r)}).node();o.style("clipPath",s)}var Wz=function(t){ge(r,t);function r(e){return t.call(this,e,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return r.prototype.render=function(e,n){var i=wt(n).maybeAppendByClassName(qi.trackGroup,"g");Bz(i,e);var a=wt(n).maybeAppendByClassName(qi.selectionGroup,"g");zz(a,e)},r}(Ue);function Gz(t){return{min:Math.min.apply(Math,vt([],D(t.map(function(r){return r.value})),!1)),max:Math.max.apply(Math,vt([],D(t.map(function(r){return r.value})),!1))}}var Hz=function(t){ge(r,t);function r(e){var n=t.call(this,e,vz)||this;return n.eventToOffsetScale=new Co({}),n.innerRibbonScale=new Co({}),n.cacheLabelBBox=null,n.cacheHandleBBox=null,n.onHovering=function(i){var a=n.attributes,o=a.data,s=a.block;i.stopPropagation();var l=n.getValueByCanvasPoint(i);if(s){var c=Xy(o.map(function(d){var h=d.value;return h}),l).range,u=n.getRealSelection(c);n.showIndicator((c[0]+c[1])/2,"".concat(u[0],"-").concat(u[1])),n.dispatchIndicated(l,c)}else{var f=n.getTickValue(l);n.showIndicator(f,"".concat(n.getRealValue(f))),n.dispatchIndicated(f)}},n.onDragStart=function(i){return function(a){a.stopPropagation(),n.attributes.slidable&&(n.target=i,n.prevValue=n.getTickValue(n.getValueByCanvasPoint(a)),document.addEventListener("mousemove",n.onDragging),document.addEventListener("touchmove",n.onDragging),document.addEventListener("mouseleave",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("touchend",n.onDragEnd))}},n.onDragging=function(i){var a=n.target;n.updateMouse();var o=D(n.selection,2),s=o[0],l=o[1],c=n.getTickValue(n.getValueByCanvasPoint(i)),u=c-n.prevValue;a==="start"?s!==c&&n.updateSelection(c,l):a==="end"?l!==c&&n.updateSelection(s,c):a==="ribbon"&&u!==0&&(n.prevValue=c,n.updateSelection(u,u,!0))},n.onDragEnd=function(){n.style.cursor="pointer",document.removeEventListener("mousemove",n.onDragging),document.removeEventListener("touchmove",n.onDragging),document.removeEventListener("mouseup",n.onDragEnd),document.removeEventListener("touchend",n.onDragEnd)},n}return Object.defineProperty(r.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var e=this.attributes,n=e.width,i=e.height;return new me(0,0,n,i)},r.prototype.render=function(e,n){var i=this,a=e.classNamePrefix,o=n.className||"legend-continuous";a?n.attr("className","".concat(o," ").concat(a,"legend")):n.className||n.attr("className","legend-continuous");var s=e.showLabel;this.renderTitle(wt(n));var l=this.availableSpace,c=l.x,u=l.y,f=wt(n).maybeAppendByClassName(je.contentGroup,"g").styles({transform:"translate(".concat(c,", ").concat(u,")")}),d=f.maybeAppendByClassName(je.labelGroup,"g").styles({zIndex:1});un(!!s,d,function(p){i.renderLabel(p)});var h=f.maybeAppendByClassName(je.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=f.maybeAppendByClassName(je.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(h),this.renderIndicator(f),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(r.prototype,"range",{get:function(){var e=this.attributes,n=e.data,i=e.domain;return i?{min:i[0],max:i[1]}:Gz(n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonScale",{get:function(){var e=this.range,n=e.min,i=e.max;return this.innerRibbonScale.update({domain:[n,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonRange",{get:function(){var e=D(this.selection,2),n=e[0],i=e[1],a=this.ribbonScale;return[a.map(n),a.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){var e=this.range,n=e.min,i=e.max,a=this.attributes.defaultValue,o=a===void 0?[n,i]:a,s=D(o,2),l=s[0],c=s[1];return[l,c]},enumerable:!1,configurable:!0}),r.prototype.ifHorizontal=function(e,n){return dr(this.attributes.orientation,typeof e=="function"?e():e,typeof n=="function"?n():n)},r.prototype.renderTitle=function(e){var n=this.attributes,i=n.showTitle,a=n.titleText,o=n.width,s=n.height,l=n.classNamePrefix,c=Mt(this.attributes,"title"),u=J(J({},c),{width:o,height:s,text:a,classNamePrefix:l}),f=this;e.selectAll(je.title.class).data(i?[a]:[]).join(function(d){return d.append(function(){return new qw({style:u})}).attr("className",je.title.name).each(function(){f.title=this})},function(d){return d.update(u)},function(d){return d.each(function(){f.title=void 0}).remove()})},Object.defineProperty(r.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var e=this.attributes,n=e.width,i=e.height;return new me(0,0,n,i)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelFixedSpacing",{get:function(){var e=this.attributes.showTick;return e?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelPosition",{get:function(){var e=this.attributes,n=e.orientation,i=e.labelDirection,a={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return a[n][i]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelBBox",{get:function(){var e,n=this.attributes.showLabel;if(!n)return new me(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((e=this.label.querySelector(xt.labelGroup.class))===null||e===void 0?void 0:e.children.slice(-1)[0]).getBBox(),a=i.width,o=i.height;return this.cacheLabelBBox=new me(0,0,a,o),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelShape",{get:function(){var e=this.attributes,n=e.showLabel,i=e.labelSpacing,a=i===void 0?0:i;if(!n)return{width:0,height:0,size:0,length:0};var o=this.labelBBox,s=o.width,l=o.height,c=this.ifHorizontal(l,s)+a+this.labelFixedSpacing,u=this.ifHorizontal(s,l);return{width:s,height:l,size:c,length:u}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonBBox",{get:function(){var e=this.attributes,n=e.showHandle,i=e.ribbonSize,a=this.availableSpace,o=a.width,s=a.height,l=this.labelShape,c=l.size,u=l.length,f=D(this.ifHorizontal([s,o],[o,s]),2),d=f[0],h=f[1],p=n?this.handleShape:{size:0,length:0},v=p.size,g=p.length,y=this.handleOffsetRatio,m=0,b=this.labelPosition;i?m=i:["bottom","right"].includes(b)?m=Math.min(d-c,(d-v)/y):d*(1-y)>v?m=Math.max(d-c,0):m=Math.max((d-c-v)/y,0);var x=Math.max(g,u),O=h-x,w=D(this.ifHorizontal([O,m],[m,O]),2),_=w[0],S=w[1],k=["top","left"].includes(b)?c:0,E=D(this.ifHorizontal([x/2,k],[k,x/2]),2),A=E[0],T=E[1];return new me(A,T,_,S)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonShape",{get:function(){var e=this.ribbonBBox,n=e.width,i=e.height;return this.ifHorizontal({size:i,length:n},{size:n,length:i})},enumerable:!1,configurable:!0}),r.prototype.renderRibbon=function(e){var n=this.attributes,i=n.data,a=n.type,o=n.orientation,s=n.color,l=n.block,c=n.classNamePrefix,u=Mt(this.attributes,"ribbon"),f=this.range,d=f.min,h=f.max,p=this.ribbonBBox,v=p.x,g=p.y,y=this.ribbonShape,m=y.length,b=y.size,x=qn({transform:"translate(".concat(v,", ").concat(g,")"),length:m,size:b,type:a,orientation:o,color:s,block:l,partition:i.map(function(w){return(w.value-d)/(h-d)}),range:this.ribbonRange,classNamePrefix:c},u),O=Ae(je.ribbon.name,Te.ribbon,c);this.ribbon=e.maybeAppendByClassName(je.ribbon,function(){return new Wz({style:x,className:O})}).update(x)},r.prototype.getHandleClassName=function(e){return"".concat(je.prefix("".concat(e,"-handle")))},r.prototype.renderHandles=function(){var e=this.attributes,n=e.showHandle,i=e.orientation,a=e.classNamePrefix,o=Mt(this.attributes,"handle"),s=D(this.selection,2),l=s[0],c=s[1],u=J(J({},o),{orientation:i,classNamePrefix:a}),f=o.shape,d=f===void 0?"slider":f,h=d==="basic"?hz:Rw,p=this,v=Ae(je.handle.name,Te.handle,a);this.handlesGroup.selectAll(je.handle.class).data(n?[{value:l,type:"start"},{value:c,type:"end"}]:[],function(g){return g.type}).join(function(g){return g.append(function(){return new h({style:u,className:v})}).attr("className",function(y){var m=y.type;return"".concat(v," ").concat(p.getHandleClassName(m))}).each(function(y){var m=y.type,b=y.value;this.update({labelText:b});var x="".concat(m,"Handle");p[x]=this,this.addEventListener("pointerdown",p.onDragStart(m))})},function(g){return g.update(u).each(function(y){var m=y.value;this.update({labelText:m})})},function(g){return g.each(function(y){var m=y.type,b="".concat(m,"Handle");p[b]=void 0}).remove()})},r.prototype.adjustHandles=function(){var e=D(this.selection,2),n=e[0],i=e[1];this.setHandlePosition("start",n),this.setHandlePosition("end",i);var a=this.attributes,o=a.classNamePrefix,s=a.showHandle,l=Mt(this.attributes,"handle").shape,c=l===void 0?"slider":l;s&&c==="slider"&&o&&(this.startHandle&&this.updateSliderHandleClassNames(this.startHandle,o),this.endHandle&&this.updateSliderHandleClassNames(this.endHandle,o))},r.prototype.updateSliderHandleClassNames=function(e,n){var i=e.container||e,a=i.querySelector(".handle-icon-rect");if(a){var o=Ae("handle-icon-rect",Te.handleMarker,n);a.setAttribute("class",o);var s=a.querySelectorAll("line");s.forEach(function(u){var f=u.getAttribute("class")||"",d=f.split(" ")[0],h=Ae(d,Te.handleMarker,n);u.setAttribute("class",h)})}var l=i.querySelector(".handle-label");if(l){var c=Ae("handle-label",Te.handleLabel,n);l.setAttribute("class",c)}},Object.defineProperty(r.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new me(0,0,0,0);var e=this.startHandle.getBBox(),n=e.width,i=e.height,a=this.endHandle.getBBox(),o=a.width,s=a.height,l=D([Math.max(n,o),Math.max(i,s)],2),c=l[0],u=l[1];return this.cacheHandleBBox=new me(0,0,c,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"handleShape",{get:function(){var e=this.handleBBox,n=e.width,i=e.height,a=D(this.ifHorizontal([i,n],[n,i]),2),o=a[0],s=a[1];return{width:n,height:i,size:o,length:s}},enumerable:!1,configurable:!0}),r.prototype.setHandlePosition=function(e,n){var i=this.attributes.handleFormatter,a=this.ribbonBBox,o=a.x,s=a.y,l=this.ribbonShape.size,c=this.getOffset(n),u=D(this.ifHorizontal([o+c,s+l*this.handleOffsetRatio],[o+l*this.handleOffsetRatio,s+c]),2),f=u[0],d=u[1],h=this.handlesGroup.select(".".concat(this.getHandleClassName(e))).node();h?.update({transform:"translate(".concat(f,", ").concat(d,")"),formatter:i})},r.prototype.renderIndicator=function(e){var n=this.attributes.classNamePrefix,i=Mt(this.attributes,"indicator"),a=Ae(je.indicator.name,Te.indicator,n);this.indicator=e.maybeAppendByClassName(je.indicator,function(){return new Rz({style:i,className:a})}).update(i)},Object.defineProperty(r.prototype,"labelData",{get:function(){var e=this,n=this.attributes.data;return n.reduce(function(i,a,o,s){var l,c,u=(l=a?.id)!==null&&l!==void 0?l:o.toString();if(i.push(J(J({},a),{id:u,index:o,type:"value",label:(c=a?.label)!==null&&c!==void 0?c:a.value.toString(),value:e.ribbonScale.map(a.value)})),o<s.length-1){var f=s[o+1],d=D([a.value,f.value],2),h=d[0],p=d[1],v=(h+p)/2;i.push(J(J({},a),{id:u,index:o,type:"range",range:[h,p],label:[h,p].join("~"),value:e.ribbonScale.map(v)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelStyle",{get:function(){var e=D(["center","middle"],2),n=e[0],i=e[1],a=this.labelPosition;return a==="top"?i="bottom":a==="bottom"?i="top":a==="left"?n="end":a==="right"&&(n="start"),{labelTextAlign:n,labelTextBaseline:i}},enumerable:!1,configurable:!0}),r.prototype.renderLabel=function(e){var n=this.attributes,i=n.showTick,a=i===void 0?!1:i,o=n.labelFilter,s=n.labelFormatter,l=Mt(this.attributes,"tick"),c=Mt(this.attributes,"label"),u=c.align,f=qn(J({showLine:!1,showGrid:!1,showTick:a,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),sr(l,"tick"),sr(c,"label"),{data:this.labelData}),d={tickFilter:function(p,v,g){return p?.type!=="value"?!1:o?o(p,p.index,g.filter(function(y){return y.type!=="value"})):!0},labelFilter:function(p,v,g){return p?.type!==u?!1:o?o(p,p.index,g.filter(function(y){return y.type===u})):!0},labelFormatter:s},h=J(J(J({},f),d),{labelOverlap:[{type:"hide"}]});this.label=e.maybeAppendByClassName(je.label,function(){return new Hp({style:h})}).node(),this.label.update(h,!1)},Object.defineProperty(r.prototype,"labelAxisStyle",{get:function(){var e=this.attributes,n=e.showTick,i=e.labelDirection,a=e.labelSpacing,o=e.tickLength,s=this.ribbonShape.size,l=this.labelPosition,c=this.labelFixedSpacing,u=D([0,0,0],3),f=u[0],d=u[1],h=u[2],p=o??s;return n?(h=p,d=c,i==="positive"?l==="right"?(f=p,h=p):l==="bottom"&&(f=h):i==="negative"&&(l==="top"||l==="left")&&(f=s)):i==="positive"?l==="right"?d=p:l==="bottom"&&(f=s+c,d=a):i==="negative"&&(l==="left"||l==="top")&&(d=a),{offset:f,spacing:d,tickLength:h}},enumerable:!1,configurable:!0}),r.prototype.adjustLabel=function(){var e=this.attributes.showLabel;if(e){var n=this.ribbonBBox,i=n.x,a=n.y,o=n.width,s=n.height,l=this.labelAxisStyle,c=l.offset,u=l.spacing,f=l.tickLength,d=D(this.ifHorizontal([[i,a+c],[i+o,a+c]],[[i+c,a+s],[i+c,a]]),2),h=d[0],p=d[1];this.label.update({startPos:h,endPos:p,tickLength:f,labelSpacing:u},!1)}},r.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},r.prototype.showIndicator=function(e,n){n===void 0&&(n="".concat(e));var i=this.attributes.showIndicator;if(!i||typeof e!="number"){this.hideIndicator();return}var a=this.range,o=a.min,s=a.max,l=this.ribbonBBox,c=l.x,u=l.y,f=Pe(e,o,s),d=this.getOffset(f),h=this.ifHorizontal([d+c,u],[c,d+u]);this.indicator.update({x:h[0],y:h[1],position:this.ifHorizontal("top","left"),labelText:n}),Ps(this.indicator.node())},r.prototype.hideIndicator=function(){_i(this.indicator.node())},r.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},r.prototype.setSelection=function(e,n){this.updateSelection(e,n)},r.prototype.updateSelection=function(e,n,i){var a;i===void 0&&(i=!1);var o=D(this.selection,2),s=o[0],l=o[1],c=D([e,n],2),u=c[0],f=c[1];i&&(u+=s,f+=l);var d=this.range,h=d.min,p=d.max;a=D(dz([h,p],[u,f],this.selection),2),u=a[0],f=a[1],this.update({defaultValue:[u,f]}),this.dispatchSelection()},Object.defineProperty(r.prototype,"step",{get:function(){var e=this.attributes.step,n=e===void 0?1:e,i=this.range,a=i.min,o=i.max;return Kt(n)?Sd((o-a)*gz,0):n},enumerable:!1,configurable:!0}),r.prototype.getTickValue=function(e){var n=this.attributes,i=n.data,a=n.block,o=this.range.min;return a?Xy(i.map(function(s){var l=s.value;return l}),e).tick:lz(e,this.step,o)},r.prototype.getValueByCanvasPoint=function(e){var n=this.range,i=n.min,a=n.max,o=D(this.ribbon.node().getPosition(),2),s=o[0],l=o[1],c=this.ifHorizontal(s,l),u=this.ifHorizontal.apply(this,vt([],D(bw(e)),!1)),f=u-c,d=Pe(this.getOffset(f,!0),i,a);return d},r.prototype.getOffset=function(e,n){n===void 0&&(n=!1);var i=this.range,a=i.min,o=i.max,s=this.ribbonShape.length,l=this.eventToOffsetScale;return l.update({domain:[a,o],range:[0,s]}),n?l.invert(e):l.map(e)},r.prototype.getRealSelection=function(e){var n=this.range.max,i=D(e,2),a=i[0],o=i[1];return this.ifHorizontal([a,o],[n-o,n-a])},r.prototype.getRealValue=function(e){var n=this.range.max;return this.ifHorizontal(e,n-e)},r.prototype.dispatchSelection=function(){var e=this.getRealSelection(this.selection),n=new Qt("valuechange",{detail:{value:e}});this.dispatchEvent(n)},r.prototype.dispatchIndicated=function(e,n){var i=this,a=this.range.max,o=this.ifHorizontal(function(){return{value:e,range:n}},function(){return{value:a-e,range:n?i.getRealSelection(n):void 0}}),s=new Qt("indicate",{detail:o});this.dispatchEvent(s)},r}(Ue);function Cd(t){return t===void 0&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var qy={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function Yz(t){var r;t===void 0&&(t="");var e=Cd(t);return r={},r[".".concat(e.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},r[".".concat(e.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},r[".".concat(e.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},r[".".concat(e.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},r[".".concat(e.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},r[".".concat(e.NAME)]={display:"flex","align-items":"center","max-width":"216px"},r[".".concat(e.NAME_LABEL)]=J({flex:1},qy),r[".".concat(e.VALUE)]=J({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},qy),r[".".concat(e.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},r[".".concat(e.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},r}var Vz=function(t){ge(r,t);function r(e){var n=this,i,a,o=(a=(i=e.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,s=Cd(o);return n=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(s.NAME,`">
          <span class="`).concat(s.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(s.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(s.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:Yz(o)})||this,n.timestamp=-1,n.prevCustomContentKey=n.attributes.contentKey,n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(r.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),r.prototype.getContainer=function(){return this.element},Object.defineProperty(r.prototype,"elementSize",{get:function(){var e=this.element.offsetWidth,n=this.element.offsetHeight;return{width:e,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"HTMLTooltipItemsElements",{get:function(){var e=this.attributes,n=e.data,i=e.template;return n.map(function(a,o){var s=a.name,l=s===void 0?"":s,c=a.color,u=c===void 0?"black":c,f=a.index,d=De(a,["name","color","index"]),h=J({name:l,color:u,index:f??o},d);return lg(g2(i.item,h))})},enumerable:!1,configurable:!0}),r.prototype.render=function(e,n){this.renderHTMLTooltipElement(),this.updatePosition()},r.prototype.destroy=function(){var e;(e=this.element)===null||e===void 0||e.remove(),t.prototype.destroy.call(this)},r.prototype.show=function(e,n){var i=this;if(e!==void 0&&n!==void 0){var a=this.element.style.visibility==="hidden",o=function(){i.attributes.x=e??i.attributes.x,i.attributes.y=n??i.attributes.y,i.updatePosition()};a?this.closeTransition(o):o()}this.element.style.visibility="visible"},r.prototype.hide=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.attributes.enterable;i&&this.isCursorEntered(e,n)||(this.element.style.visibility="hidden")},r.prototype.initShape=function(){var e=this.attributes.template;this.element=lg(e.container),this.id&&this.element.setAttribute("id",this.id)},r.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var e=this.attributes.content;e&&(typeof e=="string"?this.element.innerHTML=e:wy(this.element,e))}},r.prototype.renderHTMLTooltipElement=function(){var e,n,i=this.attributes,a=i.template,o=i.title,s=i.enterable,l=i.style,c=i.content,u=Cd(a.prefixCls),f=this.element;if(this.element.style.pointerEvents=s?"auto":"none",c)this.renderCustomContent();else{o?(f.innerHTML=a.title,f.getElementsByClassName(u.TITLE)[0].innerHTML=o):(n=(e=f.getElementsByClassName(u.TITLE))===null||e===void 0?void 0:e[0])===null||n===void 0||n.remove();var d=this.HTMLTooltipItemsElements,h=document.createElement("ul");h.className=u.LIST,wy(h,d);var p=this.element.querySelector(".".concat(u.LIST));p?p.replaceWith(h):f.appendChild(h)}nF(f,l)},r.prototype.getRelativeOffsetFromCursor=function(e){var n=this.attributes,i=n.position,a=n.offset,o=e||i,s=o.split("-"),l={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},c=this.elementSize,u=c.width,f=c.height,d=[-u/2,-f/2];return s.forEach(function(h){var p=D(d,2),v=p[0],g=p[1],y=D(l[h],2),m=y[0],b=y[1];d=[v+(u/2+a[0])*m,g+(f/2+a[1])*b]}),d},r.prototype.setOffsetPosition=function(e){var n=D(e,2),i=n[0],a=n[1],o=this.attributes,s=o.x,l=s===void 0?0:s,c=o.y,u=c===void 0?0:c,f=o.container,d=f.x,h=f.y;this.element.style.left="".concat(+l+d+i,"px"),this.element.style.top="".concat(+u+h+a,"px")},r.prototype.updatePosition=function(){var e=this.attributes.showDelay,n=e===void 0?60:e,i=Date.now();this.timestamp>0&&i-this.timestamp<n||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},r.prototype.autoPosition=function(e){var n=D(e,2),i=n[0],a=n[1],o=this.attributes,s=o.x,l=o.y,c=o.bounding,u=o.position;if(!c)return[i,a];var f=this.element,d=f.offsetWidth,h=f.offsetHeight,p=D([+s+i,+l+a],2),v=p[0],g=p[1],y={left:"right",right:"left",top:"bottom",bottom:"top"},m=c.x,b=c.y,x=c.width,O=c.height,w={left:v<m,right:v+d>m+x,top:g<b,bottom:g+h>b+O},_=[];u.split("-").forEach(function(k){w[k]?_.push(y[k]):_.push(k)});var S=_.join("-");return this.getRelativeOffsetFromCursor(S)},r.prototype.isCursorEntered=function(e,n){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,o=i.y,s=i.width,l=i.height;return new me(a,o,s,l).isPointIn(e,n)}return!1},r.prototype.closeTransition=function(e){var n=this,i=this.element.style.transition;this.element.style.transition="none",e(),setTimeout(function(){n.element.style.transition=i},10)},r.tag="tooltip",r}(Ue),Uz=function(t){ge(r,t);function r(e){var n=t.call(this,e)||this;n.layoutEvents=[It.BOUNDS_CHANGED,It.INSERTED,It.REMOVED],n.$margin=Je(0),n.$padding=Je(0);var i=e.style||{},a=i.margin,o=a===void 0?0:a,s=i.padding,l=s===void 0?0:s;return n.margin=o,n.padding=l,n.isMutationObserved=!0,n.bindEvents(),n}return Object.defineProperty(r.prototype,"margin",{get:function(){return this.$margin},set:function(e){this.$margin=Je(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this.$padding},set:function(e){this.$padding=Je(e)},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var e=this.attributes,n=e.x,i=n===void 0?0:n,a=e.y,o=a===void 0?0:a,s=e.width,l=e.height,c=D(this.$margin,4),u=c[0],f=c[1],d=c[2],h=c[3];return new me(i-h,o-u,s+h+f,l+u+d)},r.prototype.appendChild=function(e,n){return e.isMutationObserved=!0,t.prototype.appendChild.call(this,e,n),e},r.prototype.getAvailableSpace=function(){var e=this.attributes,n=e.width,i=e.height,a=D(this.$padding,4),o=a[0],s=a[1],l=a[2],c=a[3],u=D(this.$margin,4),f=u[0],d=u[3];return new me(c+d,o+f,n-c-s,i-o-l)},r.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(o){return!o.isConnected}))try{var e=this.attributes,n=e.x,i=e.y;this.style.transform="translate(".concat(n,", ").concat(i,")");var a=z$(this.getAvailableSpace(),this.children.map(function(o){return o.getBBox()}),this.attributes);this.children.forEach(function(o,s){var l=a[s],c=l.x,u=l.y;o.style.transform="translate(".concat(c,", ").concat(u,")")})}catch{}},r.prototype.bindEvents=function(){var e=this;this.layoutEvents.forEach(function(n){e.addEventListener(n,function(i){i.target&&(i.target.isMutationObserved=!0,e.layout())})})},r.prototype.attributeChangedCallback=function(e,n,i){e==="margin"?this.margin=i:e==="padding"&&(this.padding=i),this.layout()},r}(Ve),mf=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Xz(t){const{min:[r,e],max:[n,i]}=t.getLocalBounds();let a=0,o=0;return r>0&&(a=r),n<0&&(a=n),e>0&&(o=e),i<0&&(o=i),[a,o]}function qz(t,r=[]){const[e=0,n=0,i=e,a=n]=r,o=t.parentNode,s=o.getEulerAngles();o.setEulerAngles(0);const{min:l,halfExtents:c}=t.getLocalBounds(),[u,f]=l,[d,h]=c;return o.setEulerAngles(s),{x:u-a,y:f-e,width:d*2+a+n,height:h*2+e+i}}function Kz(t,r,e,n,i=!0,a=!0){const o=f=>ps()(f);if(!r[0]&&!r[1])return o([Xz(t),r]);if(!e.length)return o([[0,0],r]);const[s,l]=e,c=[...l],u=[...s];if(l[0]!==s[0]){const f=i?-4:4;c[1]=l[1],a&&!i&&(c[0]=Math.max(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!a&&!i&&(c[0]=Math.max(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!a&&i&&(c[0]=Math.min(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f))),a&&i&&(c[0]=Math.min(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f)))}return o([l,c,u,s,r])}const Qw=Xa(t=>{const r=t.attributes,{className:e,class:n,transform:i,rotate:a,labelTransform:o,labelTransformOrigin:s,x:l,y:c,x0:u=l,y0:f=c,text:d,background:h,connector:p,startMarker:v,endMarker:g,coordCenter:y,innerHTML:m}=r,b=mf(r,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform=`translate(${l}, ${c})`,[l,c,u,f].some(L=>!fe(L))){t.children.forEach(L=>L.remove());return}const x=it(b,"background"),{padding:O}=x,w=mf(x,["padding"]),_=it(b,"connector"),{points:S=[]}=_,k=mf(_,["points"]);let E;m?E=yt(t).maybeAppend("html","html",e).style("zIndex",0).style("innerHTML",m).call(dt,Object.assign({transform:o,transformOrigin:s},b)).node():E=yt(t).maybeAppend("text","text").style("zIndex",0).style("text",d).call(dt,Object.assign({textBaseline:"middle",transform:o,transformOrigin:s},b)).node();const A=yt(t).maybeAppend("background","rect").style("zIndex",-1).call(dt,qz(E,O)).call(dt,h?w:{}).node(),T=+u<y[0],P=+f<y[1],N=[+u-+l,+f-+c],I=Kz(A,N,S,y,T,P),R=v&&new Ft({id:"startMarker",style:Object.assign({x:0,y:0},it(b,"startMarker"))}),C=g&&new Ft({id:"endMarker",style:Object.assign({x:0,y:0},it(b,"endMarker"))});yt(t).maybeAppend("connector","path").style("zIndex",0).style("d",I).style("markerStart",R).style("markerEnd",C).call(dt,p?k:{})}),Jw=(t,r)=>{const{coordinate:e}=r;return(n,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l},[[d,h]]=n;return yt(new Qw).style("x",d).style("y",h).call(dt,a).style("transform",`${u}rotate(${+c})`).style("coordCenter",e.getCenter()).call(dt,f).call(dt,t).node()}};Jw.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Ld=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Zz(t){const r=t/Math.sqrt(2),e=t*Math.sqrt(2),[n,i]=[-r,r-e],[a,o]=[0,0],[s,l]=[r,r-e];return[["M",n,i],["A",t,t,0,1,1,s,l],["L",a,o],["Z"]]}function Qz(t){const{min:r,max:e}=t.getLocalBounds();return[(r[0]+e[0])*.5,(r[1]+e[1])*.5]}const Jz=Xa(t=>{const r=t.attributes,{class:e,x:n,y:i,transform:a}=r,o=Ld(r,["class","x","y","transform"]),s=it(o,"marker"),{size:l=24}=s,c=()=>Zz(l/2),u=yt(t).maybeAppend("marker",()=>new Ft({})).call(h=>h.node().update(Object.assign({symbol:c},s))).node(),[f,d]=Qz(u);yt(t).maybeAppend("text","text").style("x",f).style("y",d).call(dt,o)}),t_=(t,r)=>{const e=Ld(t,[]);return(n,i,a)=>{const{color:o}=a,s=Ld(a,["color"]),{color:l=o,text:c=""}=i,u={text:String(c),stroke:l,fill:l},[[f,d]]=n;return yt(new Jz).call(dt,s).style("transform",`translate(${f},${d})`).call(dt,u).call(dt,e).node()}};t_.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const e_=(t,r)=>{const{coordinate:e}=r;return(n,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l,textAlign:"center",textBaseline:"middle"},[[d,h]]=n;return yt(new jn).style("x",d).style("y",h).call(dt,a).style("transformOrigin","center center").style("transform",`${u}rotate(${c}deg)`).style("coordCenter",e.getCenter()).call(dt,f).call(dt,t).node()}};e_.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var tW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function eW(t,r){const e=[],n=[],i=[];let a=!1,o=null;const s=t.length/2;for(let l=0;l<s;l++){const c=t[l],u=t[l+s];if([...c,...u].some(f=>!r(f)))a=!0;else{if(e.push(c),n.push(u),a&&o){a=!1;const[f,d]=o;i.push([f,c,d,u])}o=[c,u]}}return[e.concat(n),i]}const Ky=Xa(t=>{const{areaPath:r,connectPath:e,areaStyle:n,connectStyle:i}=t.attributes,a=t.ownerDocument;yt(t).maybeAppend("connect-path",()=>a.createElement("path",{})).style("d",e).call(dt,i),yt(t).maybeAppend("area-path",()=>a.createElement("path",{})).style("d",r).call(dt,n)}),Jn=(t,r)=>{const{curve:e,gradient:n=!1,defined:i=c=>!Number.isNaN(c)&&c!==void 0&&c!==null,connect:a=!1}=t,o=tW(t,["curve","gradient","defined","connect"]),{coordinate:s,document:l}=r;return(c,u,f)=>{const{color:d}=f,{color:h=d,seriesColor:p,seriesX:v,seriesY:g}=u,y=ue(s),m=IO(s,u),b=n&&p?RO(p,v,g,n,void 0,y):h,x=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:b,fill:b}),m&&{transform:m}),o),[O,w]=eW(c,i),_=it(x,"connect"),S=!!w.length,k=E=>yt(l.createElement("path",{})).style("d",E||"").call(dt,x).node();if(Jt(s)){const E=A=>{const T=s.getCenter(),P=A.slice(0,A.length/2),N=A.slice(A.length/2);return CT().angle((I,R)=>Ya(Ee(P[R],T))).outerRadius((I,R)=>Oe(P[R],T)).innerRadius((I,R)=>Oe(N[R],T)).defined((I,R)=>[...P[R],...N[R]].every(i)).curve(e)(N)};return!S||a&&!Object.keys(_).length?k(E(O)):S&&!a?k(E(c)):yt(new Ky).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},_),o)).style("areaPath",E(c)).style("connectPath",w.map(E).join("")).node()}else{const E=A=>{const T=A.slice(0,A.length/2),P=A.slice(A.length/2);return y?Qv().y((N,I)=>T[I][1]).x1((N,I)=>T[I][0]).x0((N,I)=>P[I][0]).defined((N,I)=>[...T[I],...P[I]].every(i)).curve(e)(T):Qv().x((N,I)=>T[I][0]).y1((N,I)=>T[I][1]).y0((N,I)=>P[I][1]).defined((N,I)=>[...T[I],...P[I]].every(i)).curve(e)(T)};return!S||a&&!Object.keys(_).length?k(E(O)):S&&!a?k(E(c)):yt(new Ky).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},_),o)).style("areaPath",E(c)).style("connectPath",w.map(E).join("")).node()}}};Jn.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const n_=(t,r)=>{const{coordinate:e}=r;return(...n)=>{const i=Jt(e)?yh:Ib;return Jn(Object.assign({curve:i},t),r)(...n)}};n_.props=Object.assign(Object.assign({},Jn.props),{defaultMarker:"square"});var nW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const r_=(t,r)=>{const e=nW(t,[]),{coordinate:n}=r;return(...i)=>{const a=Jt(n)?jb:ue(n)?Db:$b;return Jn(Object.assign({curve:a},e),r)(...i)}};r_.props=Object.assign(Object.assign({},Jn.props),{defaultMarker:"smooth"});const i_=(t,r)=>(...e)=>Jn(Object.assign({curve:zb},t),r)(...e);i_.props=Object.assign(Object.assign({},Jn.props),{defaultMarker:"hvh"});const a_=(t,r)=>(...e)=>Jn(Object.assign({curve:Bb},t),r)(...e);a_.props=Object.assign(Object.assign({},Jn.props),{defaultMarker:"vh"});const o_=(t,r)=>(...e)=>Jn(Object.assign({curve:Fb},t),r)(...e);o_.props=Object.assign(Object.assign({},Jn.props),{defaultMarker:"hv"});const s_=(t,r)=>{const{arrow:e=!1}=t;return(...n)=>Np(Object.assign(Object.assign({},t),{arrow:e}),r)(...n)};s_.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Zy=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const l_=(t,r)=>{const e=Zy(t,[]),{document:n}=r;return(i,a,o)=>{const{color:s}=o,l=Zy(o,["color"]),{color:c=s,transform:u}=a,[f,d]=i,h=Qn();return h.moveTo(f[0],f[1]),h.bezierCurveTo(f[0]/2+d[0]/2,f[1],f[0]/2+d[0]/2,d[1],d[0],d[1]),yt(n.createElement("path",{})).call(dt,l).style("d",h.toString()).style("stroke",c).style("transform",u).call(dt,e).node()}};l_.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Qy=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function rW(t,r,e,n){const i=Qn();if(Jt(e)){const a=e.getCenter(),o=Oe(t,a),l=(Oe(r,a)-o)*n+o;return i.moveTo(t[0],t[1]),Jo(i,t,r,a,l),i.lineTo(r[0],r[1]),i}return ue(e)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(r[0]-t[0])*n,t[1]),i.lineTo(t[0]+(r[0]-t[0])*n,r[1]),i.lineTo(r[0],r[1]),i):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(r[1]-t[1])*n),i.lineTo(r[0],t[1]+(r[1]-t[1])*n),i.lineTo(r[0],r[1]),i)}const c_=(t,r)=>{const{cornerRatio:e=1/3}=t,n=Qy(t,["cornerRatio"]),{coordinate:i,document:a}=r;return(o,s,l)=>{const{defaultColor:c}=l,u=Qy(l,["defaultColor"]),{color:f=c,transform:d}=s,[h,p]=o,v=rW(h,p,i,e);return yt(a.createElement("path",{})).call(dt,u).style("d",v.toString()).style("stroke",f).style("transform",d).call(dt,n).node()}};c_.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Jy=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const u_=(t,r)=>{const e=Jy(t,[]),{coordinate:n,document:i}=r;return(a,o,s)=>{const{color:l}=s,c=Jy(s,["color"]),{color:u=l,transform:f}=o,[d,h]=a,p=Qn();if(p.moveTo(d[0],d[1]),Jt(n)){const v=n.getCenter();p.quadraticCurveTo(v[0],v[1],h[0],h[1])}else{const v=C1(d,h),g=Oe(d,h)/2;Jo(p,d,h,v,g)}return yt(i.createElement("path",{})).call(dt,c).style("d",p.toString()).style("stroke",u).style("transform",f).call(dt,e).node()}};u_.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function f_(t={}){const{shapes:r}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:r},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function on(t={}){return[...f_(t),{name:"title",scale:"identity"}]}function Yr(){return[{type:Qc,channel:"color"},{type:Jc,channel:["x","y"]}]}function io(){return[{type:Qc,channel:"x"},{type:Jc,channel:["y"]}]}function iW(){return[{type:Qc,channel:"color"},{type:Jc,channel:["position"]}]}function ao(t={}){return f_(t)}function Me(){return[{type:i1}]}function Ne(){return[]}function bf(t,r){return t.getBandWidth(t.invert(r))}function Si(t,r,e={}){const{x:n,y:i,series:a}=r,{x:o,y:s,series:l}=t,{style:{bandOffset:c=l?0:.5,bandOffsetX:u=c,bandOffsetY:f=c}={}}=e,d=!!o?.getBandWidth,h=!!s?.getBandWidth,p=!!l?.getBandWidth;return!d&&!h?v=>v:(v,g)=>{const y=d?bf(o,n[g]):0,m=h?bf(s,i[g]):0,x=p&&a?(bf(l,a[g])/2+ +a[g])*y:0,[O,w]=v;return[O+u*y+x,w+f*m]}}function hc(t){return parseFloat(t)/100}function Yp(t,r,e,n){const{x:i,y:a}=e,{innerWidth:o,innerHeight:s}=n.getOptions(),l=Array.from(t,c=>{const u=i[c],f=a[c],d=typeof u=="string"?hc(u)*o:+u,h=typeof f=="string"?hc(f)*s:+f;return[[d,h]]});return[t,l]}function gr(t){return typeof t=="function"?t:r=>r[t]}function xf(t,r){return Array.from(t,gr(r))}function aW(t){return Array.isArray(t)?{links:t}:t&&typeof t=="object"?{links:t.links||[],nodes:t.nodes}:{links:[]}}function Vp(t,r){const e=aW(t),{source:n=f=>f.source,target:i=f=>f.target,value:a=f=>f.value}=r,{links:o,nodes:s}=e;if(!o.length)return{links:[],nodes:s||[]};const l=xf(o,n),c=xf(o,i),u=xf(o,a);return{links:o.map((f,d)=>({target:c[d],source:l[d],value:u[d]})),nodes:s||Array.from(new Set([...l,...c]),f=>({key:f}))}}var oW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const d_=(t,r)=>{const{coordinate:e,document:n}=r;return(i,a,o)=>{const{color:s}=o,l=oW(o,["color"]),{color:c=s,src:u="",size:f=32,transform:d=""}=a;let{width:h=f,height:p=f}=t;const[[v,g]]=i,[y,m]=e.getSize();h=typeof h=="string"?hc(h)*y:h,p=typeof p=="string"?hc(p)*m:p;const b=v-Number(h)/2,x=g-Number(p)/2;return yt(n.createElement("image",{})).call(dt,l).style("x",b).style("y",x).style("src",u).style("stroke",c).style("transform",d).call(dt,t).style("width",h).style("height",p).node()}};d_.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var sW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function lW(t,r){const e=Qn();if(Jt(r)){const n=r.getCenter(),i=[...t,t[0]],a=i.map(o=>Oe(o,n));return i.forEach((o,s)=>{if(s===0){e.moveTo(o[0],o[1]);return}const l=a[s],c=t[s-1],u=a[s-1];u!==void 0&&Math.abs(l-u)<1e-10?Jo(e,c,o,n,l):e.lineTo(o[0],o[1])}),e.closePath(),e}return f$(e,t)}const h_=(t,r)=>{const{coordinate:e,document:n}=r;return(i,a,o)=>{const{color:s}=o,l=sW(o,["color"]),{color:c=s,transform:u}=a,f=lW(i,e);return yt(n.createElement("path",{})).call(dt,l).style("d",f.toString()).style("stroke",c).style("fill",c).style("transform",u).call(dt,t).node()}};h_.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var tm=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function cW(t,r){const[e,n,i,a]=t,o=Qn();if(Jt(r)){const s=r.getCenter(),l=Oe(s,e);return o.moveTo(e[0],e[1]),o.quadraticCurveTo(s[0],s[1],i[0],i[1]),Jo(o,i,a,s,l),o.quadraticCurveTo(s[0],s[1],n[0],n[1]),Jo(o,n,e,s,l),o.closePath(),o}return o.moveTo(e[0],e[1]),o.bezierCurveTo(e[0]/2+i[0]/2,e[1],e[0]/2+i[0]/2,i[1],i[0],i[1]),o.lineTo(a[0],a[1]),o.bezierCurveTo(a[0]/2+n[0]/2,a[1],a[0]/2+n[0]/2,n[1],n[0],n[1]),o.lineTo(e[0],e[1]),o.closePath(),o}const p_=(t,r)=>{const e=tm(t,[]),{coordinate:n,document:i}=r;return(a,o,s)=>{const{color:l}=s,c=tm(s,["color"]),{color:u=l,transform:f}=o,d=cW(a,n);return yt(i.createElement("path",{})).call(dt,c).style("d",d.toString()).style("fill",u||l).style("stroke",u||l).style("transform",f).call(dt,e).node()}};p_.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var uW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function fW(t,r){const e=Qn();if(!Jt(r))e.moveTo(...t[0]),e.lineTo(...t[1]),e.moveTo(...t[2]),e.lineTo(...t[3]),e.moveTo(...t[4]),e.lineTo(...t[5]),e.lineTo(...t[6]),e.lineTo(...t[7]),e.closePath(),e.moveTo(...t[8]),e.lineTo(...t[9]),e.moveTo(...t[10]),e.lineTo(...t[11]),e.moveTo(...t[12]),e.lineTo(...t[13]);else{const n=r.getCenter(),[i,a]=n,o=In(Ee(t[0],n)),s=In(Ee(t[1],n)),l=Oe(n,t[2]),c=Oe(n,t[3]),u=Oe(n,t[8]),f=Oe(n,t[10]),d=Oe(n,t[11]);e.moveTo(...t[0]),e.arc(i,a,l,o,s),e.arc(i,a,l,s,o,!0),e.moveTo(...t[2]),e.lineTo(...t[3]),e.moveTo(...t[4]),e.arc(i,a,c,o,s),e.lineTo(...t[6]),e.arc(i,a,f,s,o,!0),e.closePath(),e.moveTo(...t[8]),e.arc(i,a,u,o,s),e.arc(i,a,u,s,o,!0),e.moveTo(...t[10]),e.lineTo(...t[11]),e.moveTo(...t[12]),e.arc(i,a,d,o,s),e.arc(i,a,d,s,o,!0)}return e}const v_=(t,r)=>{const{coordinate:e,document:n}=r;return(i,a,o)=>{const{color:s,transform:l}=a,{color:c,fill:u=c,stroke:f=c}=o,d=uW(o,["color","fill","stroke"]),h=fW(i,e);return yt(n.createElement("path",{})).call(dt,d).style("d",h.toString()).style("stroke",f).style("fill",s||u).style("transform",l).call(dt,t).node()}};v_.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var dW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function hW(t,r,e=4){const n=Qn();if(!Jt(r))return n.moveTo(...t[2]),n.lineTo(...t[3]),n.lineTo(t[3][0]-e,t[3][1]),n.lineTo(t[10][0]-e,t[10][1]),n.lineTo(t[10][0]+e,t[10][1]),n.lineTo(t[3][0]+e,t[3][1]),n.lineTo(...t[3]),n.closePath(),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(t[3][0]+e/2,t[8][1]),n.arc(t[3][0],t[8][1],e/2,0,Math.PI*2),n.closePath(),n;const i=r.getCenter(),[a,o]=i,s=Oe(i,t[3]),l=Oe(i,t[8]),c=Oe(i,t[10]),u=In(Ee(t[2],i)),f=Math.asin(e/l),d=u-f,h=u+f;n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(Math.cos(d)*s+a,Math.sin(d)*s+o),n.arc(a,o,s,d,h),n.lineTo(Math.cos(h)*c+a,Math.sin(h)*c+o),n.arc(a,o,c,h,d,!0),n.lineTo(Math.cos(d)*s+a,Math.sin(d)*s+o),n.closePath(),n.moveTo(...t[10]),n.lineTo(...t[11]);const p=(d+h)/2;return n.moveTo(Math.cos(p)*(l+e/2)+a,Math.sin(p)*(l+e/2)+o),n.arc(Math.cos(p)*l+a,Math.sin(p)*l+o,e/2,p,Math.PI*2+p),n.closePath(),n}const g_=(t,r)=>{const{coordinate:e,document:n}=r;return(i,a,o)=>{const{color:s,transform:l}=a,c=4,{color:u,fill:f=u,stroke:d=u}=o,h=dW(o,["color","fill","stroke"]),p=hW(i,e,c);return yt(n.createElement("path",{})).call(dt,h).style("d",p.toString()).style("stroke",d).style("fill",s||f).style("transform",l).call(dt,t).node()}};g_.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var em=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function pW(t,r,e){return t.createElement("path",{style:Object.assign({d:`M ${r},${r} L -${r},0 L ${r},-${r} L 0,0 Z`,transformOrigin:"center"},e)})}function vW(t,r){if(!Jt(r))return ps().x(n=>n[0]).y(n=>n[1])(t);const e=r.getCenter();return gh()({startAngle:0,endAngle:Math.PI*2,outerRadius:Oe(t[0],e),innerRadius:Oe(t[1],e)})}function gW(t,r){if(!Jt(t))return r;const[e,n]=t.getCenter();return`translate(${e}, ${n}) ${r||""}`}const Up=(t,r)=>{const{arrow:e,arrowSize:n=4}=t,i=em(t,["arrow","arrowSize"]),{coordinate:a,document:o}=r;return(s,l,c)=>{const{color:u,lineWidth:f}=c,d=em(c,["color","lineWidth"]),{color:h=u,size:p=f}=l,v=e?pW(o,n,Object.assign({fill:i.stroke||h,stroke:i.stroke||h},it(i,"arrow"))):null,g=vW(s,a),y=gW(a,l.transform);return yt(o.createElement("path",{})).call(dt,d).style("d",g).style("stroke",h).style("lineWidth",p).style("transform",y).style("markerEnd",v).call(dt,i).node()}};Up.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var nm=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function yW(t,r,e){return[["M",t,r],["L",t+2*e,r-e],["L",t+2*e,r+e],["Z"]]}function mW(t){return ps().x(r=>r[0]).y(r=>r[1])(t)}function bW(t,r,e,n,i,a,o=0){const[[s,l],[c,u]]=r;if(ue(t)){const g=s+e,y=c+n,m=g+o,b=l+i,x=u+a;return[[g,b],[m,b],[m,x],[y,x]]}const f=l-e,d=u-n,h=f-o,p=s-i,v=c-a;return[[p,f],[p,h],[v,h],[v,d]]}const y_=(t,r)=>{const{offsetX:e=0,sourceOffsetX:n=e,targetOffsetX:i=e,offsetY:a=0,sourceOffsetY:o=a,targetOffsetY:s=a,connectLength1:l,endMarker:c=!0}=t,u=nm(t,["offsetX","sourceOffsetX","targetOffsetX","offsetY","sourceOffsetY","targetOffsetY","connectLength1","endMarker"]),{coordinate:f}=r;return(d,h,p)=>{const{color:v,connectLength1:g}=p,y=nm(p,["color","connectLength1"]),{color:m,transform:b}=h,x=bW(f,d,o,s,n,i,l??g),O=it(Object.assign(Object.assign({},u),p),"endMarker");return yt(new He).call(dt,y).style("d",mW(x)).style("stroke",m||v).style("transform",b).style("markerEnd",c?new Ft({className:"marker",style:Object.assign(Object.assign({},O),{symbol:yW})}):null).call(dt,u).node()}};y_.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function xW(t,r,e,n){const i=r.length/2,a=r.slice(0,i),o=r.slice(i);let s=ds(a,(h,p)=>Math.abs(h[1]-o[p][1]));s=Math.max(Math.min(s,i-2),1);const l=h=>[a[h][0],(a[h][1]+o[h][1])/2],c=l(s),u=l(s-1),f=l(s+1),d=In(Ee(f,u))/Math.PI*180;return{x:c[0],y:c[1],transform:`rotate(${d})`,textAlign:"center",textBaseline:"middle"}}function m_(t,r,e,n){const{bounds:i}=e,[[a,o],[s,l]]=i,c=s-a,u=l-o,f=d=>{const{x:h,y:p}=d,v=mg(e.x,c),g=mg(e.y,u);return Object.assign(Object.assign({},d),{x:(v||h)+a,y:(g||p)+o})};return f(t==="left"?{x:0,y:u/2,textAlign:"start",textBaseline:"middle"}:t==="right"?{x:c,y:u/2,textAlign:"end",textBaseline:"middle"}:t==="top"?{x:c/2,y:0,textAlign:"center",textBaseline:"top"}:t==="bottom"?{x:c/2,y:u,textAlign:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:t==="top-right"?{x:c,y:0,textAlign:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:u,textAlign:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:c,y:u,textAlign:"end",textBaseline:"bottom"}:{x:c/2,y:u/2,textAlign:"center",textBaseline:"middle"})}function b_(t,r,e,n){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s}=e,l=n.getCenter(),c=da(n,r,[i,a]),{innerRadius:u,outerRadius:f,startAngle:d,endAngle:h}=c,p=t==="inside"?(d+h)/2:h,v=Xp(p,o,s),g=(()=>{const[y,m]=r,b=u+(f-u)*.5,[x,O]=t==="inside"?rs(l,p,b):C1(y,m);return{x,y:O}})();return Object.assign(Object.assign({},g),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:v})}function rs(t,r,e){return[t[0]+Math.sin(r)*e,t[1]-Math.cos(r)*e]}function Xp(t,r,e){if(!r)return 0;const n=e?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+n}function OW(t,r,e,n){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s,radius:l=.5,offset:c=0}=e,u=da(n,r,[i,a]),{startAngle:f,endAngle:d}=u,h=n.getCenter(),p=(f+d)/2,g={textAlign:"center",textBaseline:"middle",rotate:Xp(p,o,s)},{innerRadius:y,outerRadius:m}=u,x=y+(m-y)*l+c,[O,w]=rs(h,p,x);return Object.assign({x:O,y:w},g)}function rm(t){return t===void 0?null:t}function x_(t,r,e,n){const{bounds:i}=e,[a]=i;return{x:rm(a[0]),y:rm(a[1])}}function Ar(t,r,e,n){const{bounds:i}=e;return i.length===1?x_(t,r,e):(iu(n)?b_:eo(n)?OW:m_)(t,r,e,n)}function wW(t,r,e,n,i){const[a,o]=rs(t,r,e),[s,l]=rs(t,r,n),c=Math.sin(r)>0?1:-1;return[[a,o],[s,l],[s+c*i,l]]}function O_(t,r,e){const n=da(e,t,[r.y,r.y1]),{innerRadius:i,outerRadius:a}=n;return i+(a-i)}function w_(t,r,e){const n=da(e,t,[r.y,r.y1]),{startAngle:i,endAngle:a}=n;return(i+a)/2}function qp(t,r,e,n){const{autoRotate:i,rotateToAlignArc:a,offset:o=0,connector:s=!0,connectorLength:l=o,connectorLength2:c=0,connectorDistance:u=0}=e,f=n.getCenter(),d=w_(r,e,n),h=Math.sin(d)>0?1:-1,p=Xp(d,i,a),v={textAlign:h>0||iu(n)?"start":"end",textBaseline:"middle",rotate:p},g=O_(r,e,n),y=g+(s?l:o),[[m,b],[x,O],[w,_]]=wW(f,d,g,y,s?c:0),S=s?+u*h:0,k=w+S,E=_,A={connector:s,connectorPoints:[[x-k,O-E],[w-k,_-E]]};return Object.assign(Object.assign({x0:m,y0:b,x:w+S,y:_},v),A)}function _W(t,r,e,n){const{bounds:i}=e;return i.length===1?x_(t,r,e):(iu(n)?b_:eo(n)?qp:m_)(t,r,e,n)}function im(t,r={}){const{labelHeight:e=14,height:n}=r,i=jr(t,c=>c.y),a=i.length,o=new Array(a);for(let c=0;c<a;c++){const u=i[c],{y:f}=u;o[c]={y:f,y1:f+e,labels:[f]}}let s=!0;for(;s;){s=!1;for(let c=o.length-1;c>0;c--){const u=o[c],f=o[c-1];if(f.y1>u.y){s=!0,f.labels.push(...u.labels),o.splice(c,1),f.y1+=u.y1-u.y;const d=f.y1-f.y;f.y1=Math.max(Math.min(f.y1,n),d),f.y=f.y1-d}}}let l=0;for(const c of o){const{y:u,labels:f}=c;let d=u-e;for(const h of f){const p=i[l++],g=d+e-h;p.connectorPoints[0][1]-=g,p.y=d+e,d+=e}}}function am(t,r){const e=jr(t,s=>s.y),{height:n,labelHeight:i=14}=r,a=Math.ceil(n/i);if(e.length<=a)return im(e,r);const o=[];for(let s=0;s<e.length;s++)s<e.length-a?(e[s].opacity=0,e[s].connector=!1):o.push(e[s]);im(o,r)}var SW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const bl=new WeakMap;function kW(t,r,e){const{connectorLength:n,connectorLength2:i,connectorDistance:a}=r,o=SW(qp("outside",t,r,e),[]),s=e.getCenter(),l=O_(t,r,e),c=w_(t,r,e),u=l+n+i,f=Math.sin(c)>0?1:-1,d=s[0]+(u+ +a)*f,{x:h}=o,p=d-h;return o.x+=p,o.connectorPoints[0][0]-=p,o}function EW(t,r,e,n,i,a){if(!eo(n))return{};if(bl.has(r))return bl.get(r);const o=a.map(d=>kW(d,e,n)),{width:s,height:l}=n.getOptions(),c=o.filter(d=>d.x<s/2),u=o.filter(d=>d.x>=s/2),f=Object.assign(Object.assign({},i),{height:l});return am(c,f),am(u,f),o.forEach((d,h)=>bl.set(a[h],d)),bl.get(r)}var AW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function TW(t,r,e,n){if(!eo(n))return{};const{connectorLength:i,connectorLength2:a,connectorDistance:o}=e,s=AW(qp("outside",r,e,n),[]),{x0:l,y0:c}=s,u=n.getCenter(),d=cN(n)+i,h=Ya([l-u[0],c-u[1]]),p=Math.sin(h)>0?1:-1,[v,g]=rs(u,h,d);return s.x=v+(a+o)*p,s.y=g,s}const PW=Object.freeze(Object.defineProperty({__proto__:null,area:xW,bottom:Ar,bottomLeft:Ar,bottomRight:Ar,inside:Ar,left:Ar,outside:_W,right:Ar,spider:EW,surround:TW,top:Ar,topLeft:Ar,topRight:Ar},Symbol.toStringTag,{value:"Module"}));var om=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function MW(t,r){return t!==void 0?t:eo(r)?"inside":ue(r)?"right":"top"}function CW(t,r,e,n,i,a){const{position:o}=r,{render:s}=i,l=MW(o,e),u=n[s?"htmlLabel":l==="inside"?"innerLabel":"label"],f=Object.assign({},u,r),d=PW[dp(l)];if(!d)throw new Error(`Unknown position: ${l}`);return Object.assign(Object.assign({},u),d(l,t,f,e,i,a))}const __=(t,r)=>{const{coordinate:e,theme:n}=r,{render:i}=t;return(a,o,s,l)=>{const{text:c,x:u,y:f,transform:d="",transformOrigin:h,className:p=""}=o,v=om(o,["text","x","y","transform","transformOrigin","className"]),g=CW(a,o,e,n,t,l),{rotate:y=0,transform:m=""}=g,b=om(g,["rotate","transform"]);return yt(new Qw).call(dt,b).style("text",`${c}`).style("className",`${p} g2-label`).style("innerHTML",i?i(c,o.datum,o.index):void 0).style("labelTransform",`${m} rotate(${+y}) ${d}`.trim()).style("labelTransformOrigin",h).style("coordCenter",e.getCenter()).call(dt,v).node()}};__.props={defaultMarker:"point"};var sm=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Kp=(t,r)=>{const{arrow:e,colorAttribute:n}=t,i=sm(t,["arrow","colorAttribute"]),{coordinate:a,document:o}=r;return(s,l,c)=>{const{color:u,stroke:f}=c,d=sm(c,["color","stroke"]),{d:h,color:p=u}=l,[v,g]=a.getSize();return yt(o.createElement("path",{})).call(dt,d).style("d",typeof h=="function"?h({width:v,height:g}):h).style(n,p).call(dt,i).node()}};Kp.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const S_=(t,r)=>Kp(Object.assign({colorAttribute:"fill"},t),r);S_.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const k_=(t,r)=>Kp(Object.assign({fill:"none",colorAttribute:"stroke"},t),r);k_.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var LW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const E_=(t,r)=>{const{document:e}=r;return(n,i,a)=>{const{transform:o}=i,{color:s}=a,l=LW(a,["color"]),{color:c=s}=i,[u,...f]=n,d=Qn();return d.moveTo(...u),f.forEach(([h,p])=>{d.lineTo(h,p)}),d.closePath(),yt(e.createElement("path",{})).call(dt,l).style("d",d.toString()).style("stroke",c||s).style("fill",c||s).style("fillOpacity",.4).style("transform",o).call(dt,t).node()}};E_.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};Wb(3);function A_(t,r=(...n)=>`${n[0]}`,e=16){const n=Wb(e);return(...i)=>{const a=r(...i);let o=n.get(a);return n.has(a)?n.get(a):(o=t(...i),n.set(a,o),o)}}function NW(t){return typeof t=="string"?t.split(" ").map(r=>{const[e,n]=r.split(":");return[+e,n]}):t}function pc(t,r,e){const n=t?t():document.createElement("canvas");return n.width=r,n.height=e,n}const RW=A_((t,r,e)=>{const n=pc(e,t*2,t*2),i=n.getContext("2d"),a=t,o=t;if(r===1)i.beginPath(),i.arc(a,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const s=i.createRadialGradient(a,o,t*r,a,o,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*t,2*t)}return n},t=>`${t}`);function IW(t,r){const n=pc(r,256,1).getContext("2d"),i=n.createLinearGradient(0,0,256,1);return NW(t).forEach(([a,o])=>{i.addColorStop(a,o)}),n.fillStyle=i,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data}function jW(t,r,e,n,i,a){const{blur:o}=i;let s=n.length;for(;s--;){const{x:l,y:c,value:u,radius:f}=n[s],d=Math.min(u,e),h=l-f,p=c-f,v=RW(f,1-o,a),g=(d-r)/(e-r);t.globalAlpha=Math.max(g,.001),t.drawImage(v,h,p)}return t}function DW(t,r,e,n,i){const{minOpacity:a,opacity:o,maxOpacity:s,useGradientOpacity:l}=i,c=0,u=0,f=r,d=e,h=t.getImageData(c,u,f,d),p=h.data,v=p.length;for(let g=3;g<v;g+=4){const y=p[g],m=y*4;if(!m)continue;const b=o||Math.max(0,Math.min(s,Math.max(a,y)));p[g-3]=n[m],p[g-2]=n[m+1],p[g-1]=n[m+2],p[g]=l?n[m+3]:b}return h}function $W(t,r,e,n,i,a,o){const s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},a);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;const c=pc(o,t,r).getContext("2d"),u=IW(s.gradient,o);c.clearRect(0,0,t,r),jW(c,e,n,i,s,o);const f=DW(c,t,r,u,s),h=pc(o,t,r).getContext("2d");return h.putImageData(f,0,0),h}var FW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function BW(t,r){return Object.keys(t).reduce((e,n)=>{const i=t[n];return r(i,n)||(e[n]=i),e},{})}const T_=(t,r)=>{const{gradient:e,opacity:n,maxOpacity:i,minOpacity:a,blur:o,useGradientOpacity:s}=t,l=FW(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:c,createCanvas:u,document:f}=r;return(d,h,p)=>{const{transform:v}=h,[g,y]=c.getSize(),m=d.map(_=>({x:_[0],y:_[1],value:_[2],radius:_[3]})),b=Zn(d,_=>_[2]),x=oe(d,_=>_[2]),w=g&&y?$W(g,y,b,x,m,BW({gradient:e,opacity:n,minOpacity:a,maxOpacity:i,blur:o,useGradientOpacity:s},_=>_===void 0),u):{canvas:null};return yt(f.createElement("image",{})).call(dt,p).style("x",0).style("y",0).style("width",g).style("height",y).style("src",w.canvas.toDataURL()).style("transform",v).call(dt,l).node()}};T_.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var zW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const P_=(t,r)=>{const{render:e}=t,n=zW(t,["render"]);return i=>{const[[a,o]]=i;return e(Object.assign(Object.assign({},n),{x:a,y:o}),r)}};P_.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const lm=5e3;function cm(t,r,e){return t+(r-t)*e}function WW(t,r,e,n){return r===0?[[t+1/2*e/Math.PI/2,n/2],[t+1/2*e/Math.PI,n],[t+e/4,n]]:r===1?[[t+1/2*e/Math.PI/2*(Math.PI-2),n],[t+1/2*e/Math.PI/2*(Math.PI-1),n/2],[t+e/4,0]]:r===2?[[t+1/2*e/Math.PI/2,-n/2],[t+1/2*e/Math.PI,-n],[t+e/4,-n]]:[[t+1/2*e/Math.PI/2*(Math.PI-2),-n],[t+1/2*e/Math.PI/2*(Math.PI-1),-n/2],[t+e/4,0]]}function GW(t,r,e,n,i,a,o){const s=Math.ceil(2*t/e*4)*4,l=[];let c=n;for(;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*e;const u=a-t+c-t*2;l.push(["M",u,r]);let f=0;for(let d=0;d<s;++d){const h=d%4,p=WW(d*e/4,h,e,i);l.push(["C",p[0][0]+u,-p[0][1]+r,p[1][0]+u,-p[1][1]+r,p[2][0]+u,-p[2][1]+r]),d===s-1&&(f=p[2][0])}return l.push(["L",f+u,o+t]),l.push(["L",u,o+t]),l.push(["Z"]),l}function HW(t,r,e,n,i,a,o,s,l,c,u){const{fill:f,fillOpacity:d,opacity:h}=i;for(let p=0;p<n;p++){const v=n<=1?1:p/(n-1),g=GW(s,o+s*e,l,0,s/40,t,r),y=u.createElement("path",{style:{d:g,fill:f,opacity:cm(.2,.9,v)*Number(h||d)}});a.appendChild(y);try{const m=[{transform:"translate(0, 0)"},{transform:`translate(${l*2}, 0)`}];y.animate(m,{duration:cm(.5*lm,lm,v)*2,iterations:1/0})}catch{console.warn("off-screen group animate error!")}}}function YW(t,r,e){return`
      M ${t} ${r-e} 
      a ${e} ${e} 0 1 0 0 ${e*2}
      a ${e} ${e} 0 1 0 0 ${-e*2}
      Z
    `}function VW(t,r,e){const i=e*.618;return`
      M ${t-i} ${r-e}
      L ${t+i} ${r-e}
      L ${t+i} ${r+e}
      L ${t-i} ${r+e}
      Z
    `}function UW(t,r,e){return`
      M ${t} ${r-e}
      L ${t+e} ${r}
      L ${t} ${r+e}
      L ${t-e} ${r}
      Z
    `}function XW(t,r,e){return`
      M ${t} ${r-e}
      L ${t+e} ${r+e}
      L ${t-e} ${r+e}
      Z
    `}function qW(t,r,e){const n=e*4/3,i=Math.max(n,e*2),a=n/2,o=t,s=a+r-i/2,l=Math.asin(a/((i-a)*.85)),c=Math.sin(l)*a,u=Math.cos(l)*a,f=o-u,d=s+c,h=t,p=s+a/Math.sin(l);return`
      M ${f} ${d}
      A ${a} ${a} 0 1 1 ${f+u*2} ${d}
      Q ${h} ${p} ${t} ${r+i/2}
      Q ${h} ${p} ${f} ${d}
      Z 
    `}const um={pin:qW,rect:VW,circle:YW,diamond:UW,triangle:XW};var fm=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const KW=(t="circle")=>um[t]||um.circle,M_=(t,r)=>{if(!r)return;const{coordinate:e}=r,{liquidOptions:n,styleOptions:i}=t,{liquidShape:a,percent:o}=n,{background:s,outline:l={},wave:c={}}=i,u=fm(i,["background","outline","wave"]),{border:f=2,distance:d=0}=l,h=fm(l,["border","distance"]),{length:p=192,count:v=3}=c;return(g,y,m)=>{const{document:b}=r.canvas,{color:x,fillOpacity:O}=m,w=Object.assign(Object.assign({fill:x},m),u),_=b.createElement("g",{}),[S,k]=e.getCenter(),E=e.getSize(),A=Math.min(...E)/2,T=Ge(a)?a:KW(a),P=T(S,k,A,...E),N=T(S,k,A+f/2,...E);if(Object.keys(s).length){const C=b.createElement("path",{style:Object.assign({d:P,fill:"#fff"},s)});_.appendChild(C)}if(o>0){const C=b.createElement("path",{style:{d:N}});_.appendChild(C),_.style.clipPath=C,HW(S,k,1-o,v,w,_,C.getBBox().y,A*2,p,!0,b)}const I=b.createElement("path",{style:{d:P,fill:"transparent",lineWidth:f+2*d,stroke:"#fff"}}),R=b.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:P,stroke:x,strokeOpacity:O,lineWidth:f},w),h),{fill:"transparent"})});return _.appendChild(I),_.appendChild(R),_}};M_.props={};const dm=(t,r)=>Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))/2,ZW=(t,r,e)=>{const n=Math.atan2(t[1]-e[1],t[0]-e[0]);let a=Math.atan2(r[1]-e[1],r[0]-e[0])-n;return a<0&&(a+=Math.PI*2),a},QW=(t,r)=>{if(!r)return;const{coordinate:e}=r;if(!e?.getCenter)return;const n=e.getCenter();return(i,a,o)=>{const{document:s}=r.canvas,{color:l,index:c}=a,u=s.createElement("g",{}),f=dm(i[0],i[1]),d=dm(i[0],n)*2,h=ZW(i[3],i[0],n)>Math.PI,p=s.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",f,f,0,1,0,...i[1]],["A",d+f*2,d+f*2,0,h?1:0,0,...i[2]],["A",f,f,0,1,c===0?0:1,...i[3]],["A",d,d,0,h?1:0,1,...i[0]],["Z"]]},o),Sh(t,["shape","last","first"])),{fill:l||o.color})});return u.appendChild(p),u}},hm="main-layer",Nd="label-layer",or="element",vc="view",hi="plot",pm="component",Rd="label",vm="area",Of="axis-breaks",C_="axis-breaks-group";var xl=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},JW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const tG=.03,eG={fill:"#fff",stroke:"#aaa",lineDash:"4 3",lineWidth:.5,fillOpacity:1,strokeOpacity:1},$i=0,nG=(t,r,e,n,i,a)=>{const o=[],s=[],l=n-1;for(let c=1;c<l;c++){const u=c/l*r,f=t+(c%2===0?e:-e);o.push(`${u},${f}`),s.push(`${u},${i?f-a:f+a}`)}return o.push(`${r},${t}`),s.push(`${r+a},${t}`),[o,s]},L_=(t,r)=>{const{context:e,selection:n,view:i}=r,a=n.select(`.${hi}`).node(),{document:o}=e.canvas,{scale:s}=i,l=new Map,c=(f,d,h)=>xl(void 0,void 0,void 0,function*(){const{update:p,setState:v}=e.externals;v("options",g=>{const{marks:y}=g;if(!y||!y.length)return g;const m=y.map(b=>{const x=mt(b,"scale.y.breaks",[]),O=x.filter(w=>w.start!==d&&w.end!==h&&!w.collapsed);return x.forEach(w=>{w.start===d&&w.end===h&&(w.collapsed=!0)}),console.log("breaks group:",x,O),X({},b,{scale:{y:{breaks:O}}})});return l.set(f,{start:d,end:h}),Object.assign(Object.assign({},g),{marks:m})}),yield p()}),u=()=>xl(void 0,void 0,void 0,function*(){if(!l.size)return;const{update:f,setState:d}=e.externals;d("options",h=>{const{marks:p}=h,v=p.map(g=>{const y=mt(g,"scale.y.breaks",[]);return Vc(g,"scale.y.breaks",y.map(m=>Object.assign(Object.assign({},m),{collapsed:!1}))),g});return l.clear(),Object.assign(Object.assign({},h),{marks:v})}),yield f()});return f=>{const{key:d,start:h,end:p,gap:v=tG,vertices:g=50,lineWidth:y=.5,verticeOffset:m=3}=f,b=JW(f,["key","start","end","gap","vertices","lineWidth","verticeOffset"]),x=o.createElement("g",{id:`break-group-${d}`,className:C_}),O=mt(s,"x.sortedDomain",[]),w=s.y.getOptions(),{range:_,domain:S}=w,k=S.indexOf(h),E=S.indexOf(p),{width:A,height:T}=a.getBBox();if(k===-1||E===-1||!O.length)return x;const P=_[0]>_[1],N=_[k]*T,I=_[E]*T;let R="",C="";for(const[M,{y:j,isLower:F}]of[{y:I,isLower:!1},{y:N,isLower:!0}].entries()){const $=P?y:-y,[B,z]=nG(j,A-$i,m,g,F,$);M===0?(R=`M ${$i},${j} L ${B.join(" L ")} `,C=`M ${$i-y},${j+$} L ${z.join(" L ")} `):(R+=`L ${A-$i},${j} L ${[...B].reverse().join(" L ")} L ${$i},${j} Z`,C+=`L ${A-$i+y+2},${j-$} L ${[...z].reverse().join(" L ")} L ${$i-y},${j-$} Z`)}const L=Object.assign(Object.assign({},eG),b);try{const M=new He({style:Object.assign(Object.assign({},L),{d:R})}),j=new He({style:Object.assign(Object.assign({},L),{d:C,lineWidth:0,cursor:"pointer"})});j.addEventListener("click",F=>xl(void 0,void 0,void 0,function*(){F.stopPropagation(),F.detail===2&&(yield c(d,h,p))})),x.appendChild(M),x.appendChild(j),a.addEventListener("click",F=>xl(void 0,void 0,void 0,function*(){F.detail===2&&(yield u())})),a.appendChild(x)}catch(M){console.error("Failed to create break path:",M)}return x}};L_.props={};function gm(t,r){return t.getBandWidth(t.invert(r))}const ym={rect:ha,hollow:vu,funnel:ip,pyramid:DO},N_=()=>(t,r,e,n)=>{const{x:i,y1:a,series:o,size:s}=e;let{y:l}=e;l=l.map(v=>v!==void 0?v:1);const c=r.x,u=r.series,[f]=n.getSize(),d=s?s.map(v=>+v/f):null,h=s?(v,g,y)=>{const m=v+g/2,b=d[y];return[m-b/2,m+b/2]}:(v,g,y)=>[v,v+g],p=Array.from(t,v=>{const g=gm(c,i[v]),y=u?gm(u,o?.[v]):1,m=g*y,b=(+o?.[v]||0)*g,x=+i[v]+b,[O,w]=h(x,m,v),_=+l[v],S=+a[v];return[[O,_],[w,_],[w,S],[O,S]].map(P=>n.map(P))});return[t,p]};N_.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:ym,channels:[...on({shapes:Object.keys(ym)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...Me(),{type:xs},{type:bi}],postInference:[...Ne(),...io()],interaction:{shareTooltip:!0}};const mm={rect:ha,hollow:vu},R_=()=>(t,r,e,n)=>{const{x:i,x1:a,y:o,y1:s}=e,l=Array.from(t,c=>{const u=[+i[c],+o[c]],f=[+a[c],+o[c]],d=[+a[c],+s[c]],h=[+i[c],+s[c]];return[u,f,d,h].map(p=>n.map(p))});return[t,l]};R_.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:mm,channels:[...on({shapes:Object.keys(mm)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Me(),{type:xs}],postInference:[...Ne(),...io()],interaction:{shareTooltip:!0}};const bm={line:$O,smooth:FO,hv:BO,vh:zO,hvh:WO,trail:GO},rG=(t,r,e,n)=>{var i,a;const{series:o,x:s,y:l}=e,{x:c,y:u}=r;if(s===void 0||l===void 0)throw new Error("Missing encode for x or y channel.");const f=o?Array.from(ce(t,g=>o[g]).values()):[t],d=f.map(g=>g[0]).filter(g=>g!==void 0),h=(((i=c?.getBandWidth)===null||i===void 0?void 0:i.call(c))||0)/2,p=(((a=u?.getBandWidth)===null||a===void 0?void 0:a.call(u))||0)/2,v=Array.from(f,g=>g.map(y=>n.map([+s[y]+h,+l[y]+p])));return[d,v,f]},iG=(t,r,e,n)=>{const i=Object.entries(e).filter(([o])=>o.startsWith("position")).map(([,o])=>o);if(i.length===0)throw new Error("Missing encode for position channel.");Jt(n)&&i.push(i[0]);const a=Array.from(t,o=>{const s=i.map(u=>+u[o]),l=n.map(s),c=[];for(let u=0;u<l.length;u+=2)c.push([l[u],l[u+1]]);return c});return[t,a]},I_=()=>(t,r,e,n)=>(au(n)?iG:rG)(t,r,e,n);I_.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:bm,channels:[...on({shapes:Object.keys(bm)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Me(),{type:d1},{type:jh}],postInference:[...Ne(),...io(),...iW()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const xm={hollow:gp,hollowDiamond:pp,hollowHexagon:vp,hollowSquare:yp,hollowTriangleDown:bp,hollowTriangle:mp,hollowBowtie:hp,hollowCircle:xp,point:Tp,plus:Ap,diamond:_p,square:Pp,triangle:Cp,hexagon:Sp,cross:wp,bowtie:Op,hyphen:kp,line:Ep,tick:Mp,triangleDown:Lp,circle:yu},j_=t=>(r,e,n,i)=>{const{x:a,y:o,x1:s,y1:l,size:c,dx:u,dy:f}=n,[d,h]=i.getSize(),p=Si(e,n,t),v=y=>{const m=+(u?.[y]||0),b=+(f?.[y]||0),x=s?(+a[y]+ +s[y])/2:+a[y],O=l?(+o[y]+ +l[y])/2:+o[y],w=x+m,_=O+b;return[w,_]},g=c?Array.from(r,y=>{const[m,b]=v(y),x=+c[y],O=x/d,w=x/h,_=[m-O,b-w],S=[m+O,b+w];return[i.map(p(_,y)),i.map(p(S,y))]}):Array.from(r,y=>[i.map(p(v(y),y))]);return[r,g]};j_.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:xm,channels:[...on({shapes:Object.keys(xm)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...Me(),{type:bi},{type:Ss}],postInference:[...Ne(),{type:Ih},...Yr()]};const Om={text:Jw,badge:t_,tag:e_},D_=t=>{const{cartesian:r=!1}=t;return r?Yp:(e,n,i,a)=>{const{x:o,y:s}=i,l=Si(n,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};D_.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:Om,channels:[...on({shapes:Object.keys(Om)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...Me(),{type:eu},{type:tu}],postInference:[...Ne(),...Yr()]};const wm={cell:ha,hollow:vu},$_=()=>(t,r,e,n)=>{const{x:i,y:a}=e,o=r.x,s=r.y,l=Array.from(t,c=>{const u=o.getBandWidth(o.invert(+i[c])),f=s.getBandWidth(s.invert(+a[c])),d=+i[c],h=+a[c],p=[d,h],v=[d+u,h],g=[d+u,h+f],y=[d,h+f];return[p,v,g,y].map(m=>n.map(m))});return[t,l]};$_.props={defaultShape:"cell",defaultLabelShape:"label",shape:wm,composite:!1,channels:[...on({shapes:Object.keys(wm)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...Me(),{type:bi},{type:Ss},{type:Dh}],postInference:[...Ne(),...Yr()]};const _m={area:n_,smooth:r_,hvh:i_,vh:a_,hv:o_},F_=()=>(t,r,e,n)=>{var i,a;const{x:o,y:s,y1:l,series:c}=e,{x:u,y:f}=r,d=c?Array.from(ce(t,y=>c[y]).values()):[t],h=d.map(y=>y[0]).filter(y=>y!==void 0),p=(((i=u?.getBandWidth)===null||i===void 0?void 0:i.call(u))||0)/2,v=(((a=f?.getBandWidth)===null||a===void 0?void 0:a.call(f))||0)/2,g=Array.from(d,y=>{const m=y.length,b=new Array(m*2);for(let x=0;x<y.length;x++){const O=y[x];b[x]=n.map([+o[O]+p,+s[O]+v]),b[m+x]=n.map([+o[O]+p,+l[O]+v])}return b});return[h,g,d]};F_.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:_m,channels:[...on({shapes:Object.keys(_m)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Me(),{type:jh},{type:xs},{type:Dh}],postInference:[...Ne(),...io()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const Sm={link:s_,arc:u_,smooth:l_,vhv:c_},Zp=t=>(r,e,n,i)=>{const{x:a,y:o,x1:s=a,y1:l=o}=n,c=Si(e,n,t),u=r.map(f=>[i.map(c([+a[f],+o[f]],f)),i.map(c([+s[f],+l[f]],f))]);return[r,u]};Zp.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:Sm,channels:[...on({shapes:Object.keys(Sm)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Me(),{type:s1},{type:l1}],postInference:[...Ne(),...Yr()]};const km={image:d_},B_=t=>{const{cartesian:r}=t;return r?Yp:(e,n,i,a)=>{const{x:o,y:s}=i,l=Si(n,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};B_.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:km,channels:[...on({shapes:Object.keys(km)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...Me(),{type:eu},{type:tu}],postInference:[...Ne(),...Yr()]};const Em={polygon:h_,ribbon:p_},z_=()=>(t,r,e,n)=>{const i=Object.entries(e).filter(([s])=>s.startsWith("x")).map(([,s])=>s),a=Object.entries(e).filter(([s])=>s.startsWith("y")).map(([,s])=>s),o=t.map(s=>{const l=[];for(let c=0;c<i.length;c++){const u=i[c][s];if(u===void 0)break;const f=a[c][s];l.push(n.map([+u,+f]))}return l});return[t,o]};z_.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:Em,channels:[...on({shapes:Object.keys(Em)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Me()],postInference:[...Ne(),...Yr()]};const Am={box:v_,violin:g_},W_=()=>(t,r,e,n)=>{const{x:i,y:a,y1:o,y2:s,y3:l,y4:c,series:u}=e,f=r.x,d=r.series,h=Array.from(t,p=>{const v=f.getBandWidth(f.invert(+i[p])),g=d?d.getBandWidth(d.invert(+u?.[p])):1,y=v*g,m=(+u?.[p]||0)*v,b=+i[p]+m+y/2,[x,O,w,_,S]=[+a[p],+o[p],+s[p],+l[p],+c[p]];return[[b-y/2,S],[b+y/2,S],[b,S],[b,_],[b-y/2,_],[b+y/2,_],[b+y/2,O],[b-y/2,O],[b-y/2,w],[b+y/2,w],[b,O],[b,x],[b-y/2,x],[b+y/2,x]].map(E=>n.map(E))});return[t,h]};W_.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:Am,channels:[...on({shapes:Object.keys(Am)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...Me(),{type:bi}],postInference:[...Ne(),...io()],interaction:{shareTooltip:!0}};const Tm={vector:Np},G_=()=>(t,r,e,n)=>{const{x:i,y:a,size:o,rotate:s}=e,[l,c]=n.getSize(),u=t.map(f=>{const d=+s[f]/180*Math.PI,h=+o[f],p=h/l,v=h/c,g=p*Math.cos(d),y=-v*Math.sin(d);return[n.map([+i[f]-g/2,+a[f]-y/2]),n.map([+i[f]+g/2,+a[f]+y/2])]});return[t,u]};G_.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:Tm,channels:[...on({shapes:Object.keys(Tm)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...Me()],postInference:[...Ne(),...Yr()]};const Pm={line:Up},H_=t=>(r,e,n,i)=>{const{y:a}=n,o=Si(e,n,X({style:{bandOffset:0}},t)),s=Array.from(r,l=>{const c=[0,a[l]],u=[1,a[l]];return[c,u].map(f=>i.map(o(f,l)))});return[r,s]};H_.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Pm,channels:[...ao({shapes:Object.keys(Pm)}),{name:"y",required:!0}],preInference:[...Me(),{type:a1}],postInference:[...Ne()]};const Mm={line:Up},Y_=t=>(r,e,n,i)=>{const{x:a}=n,o=Si(e,n,X({style:{bandOffset:0}},t)),s=Array.from(r,l=>{const c=[a[l],1],u=[a[l],0];return[c,u].map(f=>i.map(o(f,l)))});return[r,s]};Y_.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Mm,channels:[...ao({shapes:Object.keys(Mm)}),{name:"x",required:!0}],preInference:[...Me(),{type:o1}],postInference:[...Ne()]};const Cm={connector:y_},V_=(...t)=>Zp(...t);V_.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:Cm,channels:[...ao({shapes:Object.keys(Cm)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Me()],postInference:[...Ne()]};function Lm(t,r,e,n){if(r)return()=>[0,1];const{[t]:i,[`${t}1`]:a}=e;return o=>{var s;const l=((s=n.getBandWidth)===null||s===void 0?void 0:s.call(n,n.invert(+a[o])))||0;return[i[o],a[o]+l]}}function Qp(t={}){const{extendX:r=!1,extendY:e=!1}=t;return(n,i,a,o)=>{const s=Lm("x",r,a,i.x),l=Lm("y",e,a,i.y),c=Array.from(n,u=>{const[f,d]=s(u),[h,p]=l(u);return[[f,h],[d,h],[d,p],[f,p]].map(b=>o.map(b))});return[n,c]}}const Nm={range:ha},U_=()=>Qp();U_.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:Nm,channels:[...ao({shapes:Object.keys(Nm)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Me()],postInference:[...Ne()]};const Rm={range:ha},X_=()=>Qp({extendY:!0});X_.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:Rm,channels:[...ao({shapes:Object.keys(Rm)}),{name:"x",required:!0}],preInference:[...Me(),{type:c1}],postInference:[...Ne()]};const Im={range:ha},q_=()=>Qp({extendX:!0});q_.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:Im,channels:[...ao({shapes:Object.keys(Im)}),{name:"y",required:!0}],preInference:[...Me(),{type:u1}],postInference:[...Ne()]};function aG(t){return t.target.depth}function oG(t){return t.depth}function sG(t,r){return r-1-t.height}function gc(t,r){return t.sourceLinks.length?t.depth:r-1}function lG(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Zn(t.sourceLinks,aG)-1:0}function Ol(t){return function(){return t}}function jm(t,r){return yc(t.source,r.source)||t.index-r.index}function Dm(t,r){return yc(t.target,r.target)||t.index-r.index}function yc(t,r){return t.y0-r.y0}function wf(t){return t.value}function cG(t){return t.index}function uG(t){return t.nodes}function fG(t){return t.links}function $m(t,r){const e=t.get(r);if(!e)throw new Error("missing: "+r);return e}function Fm({nodes:t}){for(const r of t){let e=r.y0,n=e;for(const i of r.sourceLinks)i.y0=e+i.width/2,e+=i.width;for(const i of r.targetLinks)i.y1=n+i.width/2,n+=i.width}}function dG(){let t=0,r=0,e=1,n=1,i=24,a=8,o,s=cG,l=gc,c,u,f,d=uG,h=fG,p=6;function v(R){const C={nodes:d(R),links:h(R)};return g(C),y(C),m(C),b(C),w(C),Fm(C),C}v.update=function(R){return Fm(R),R},v.nodeId=function(R){return arguments.length?(s=typeof R=="function"?R:Ol(R),v):s},v.nodeAlign=function(R){return arguments.length?(l=typeof R=="function"?R:Ol(R),v):l},v.nodeDepth=function(R){return arguments.length?(c=R,v):c},v.nodeSort=function(R){return arguments.length?(u=R,v):u},v.nodeWidth=function(R){return arguments.length?(i=+R,v):i},v.nodePadding=function(R){return arguments.length?(a=o=+R,v):a},v.nodes=function(R){return arguments.length?(d=typeof R=="function"?R:Ol(R),v):d},v.links=function(R){return arguments.length?(h=typeof R=="function"?R:Ol(R),v):h},v.linkSort=function(R){return arguments.length?(f=R,v):f},v.size=function(R){return arguments.length?(t=r=0,e=+R[0],n=+R[1],v):[e-t,n-r]},v.extent=function(R){return arguments.length?(t=+R[0][0],e=+R[1][0],r=+R[0][1],n=+R[1][1],v):[[t,r],[e,n]]},v.iterations=function(R){return arguments.length?(p=+R,v):p};function g({nodes:R,links:C}){R.forEach((M,j)=>{M.index=j,M.sourceLinks=[],M.targetLinks=[]});const L=new Map(R.map(M=>[s(M),M]));if(C.forEach((M,j)=>{M.index=j;let{source:F,target:$}=M;typeof F!="object"&&(F=M.source=$m(L,F)),typeof $!="object"&&($=M.target=$m(L,$)),F.sourceLinks.push(M),$.targetLinks.push(M)}),f!=null)for(const{sourceLinks:M,targetLinks:j}of R)M.sort(f),j.sort(f)}function y({nodes:R}){for(const C of R)C.value=C.fixedValue===void 0?Math.max(Nn(C.sourceLinks,wf),Nn(C.targetLinks,wf)):C.fixedValue}function m({nodes:R}){const C=R.length;let L=new Set(R),M=new Set,j=0;for(;L.size;){if(L.forEach(F=>{F.depth=j;for(const{target:$}of F.sourceLinks)M.add($)}),++j>C)throw new Error("circular link");L=M,M=new Set}if(c){const F=Math.max(oe(R,B=>B.depth)+1,0);let $;for(let B=0;B<R.length;B++)$=R[B],$.depth=c.call(null,$,F)}}function b({nodes:R}){const C=R.length;let L=new Set(R),M=new Set,j=0;for(;L.size;){if(L.forEach(F=>{F.height=j;for(const{source:$}of F.targetLinks)M.add($)}),++j>C)throw new Error("circular link");L=M,M=new Set}}function x({nodes:R}){const C=Math.max(oe(R,j=>j.depth)+1,0),L=(e-t-i)/(C-1),M=new Array(C).fill(0).map(()=>[]);for(const j of R){const F=Math.max(0,Math.min(C-1,Math.floor(l.call(null,j,C))));j.layer=F,j.x0=t+F*L,j.x1=j.x0+i,M[F]?M[F].push(j):M[F]=[j]}if(u)for(const j of M)j.sort(u);return M}function O(R){const C=Zn(R,L=>(n-r-(L.length-1)*o)/Nn(L,wf));for(const L of R){let M=r;for(const j of L){j.y0=M,j.y1=M+j.value*C,M=j.y1+o;for(const F of j.sourceLinks)F.width=F.value*C}M=(n-M+o)/(L.length+1);for(let j=0;j<L.length;++j){const F=L[j];F.y0+=M*(j+1),F.y1+=M*(j+1)}P(L)}}function w(R){const C=x(R);o=Math.min(a,(n-r)/(oe(C,L=>L.length)-1)),O(C);for(let L=0;L<p;++L){const M=Math.pow(.99,L),j=Math.max(1-M,(L+1)/p);S(C,M,j),_(C,M,j)}}function _(R,C,L){for(let M=1,j=R.length;M<j;++M){const F=R[M];for(const $ of F){let B=0,z=0;for(const{source:Y,value:V}of $.targetLinks){const G=V*($.layer-Y.layer);B+=N(Y,$)*G,z+=G}if(!(z>0))continue;const W=(B/z-$.y0)*C;$.y0+=W,$.y1+=W,T($)}u===void 0&&F.sort(yc),F.length&&k(F,L)}}function S(R,C,L){for(let M=R.length,j=M-2;j>=0;--j){const F=R[j];for(const $ of F){let B=0,z=0;for(const{target:Y,value:V}of $.sourceLinks){const G=V*(Y.layer-$.layer);B+=I($,Y)*G,z+=G}if(!(z>0))continue;const W=(B/z-$.y0)*C;$.y0+=W,$.y1+=W,T($)}u===void 0&&F.sort(yc),F.length&&k(F,L)}}function k(R,C){const L=R.length>>1,M=R[L];A(R,M.y0-o,L-1,C),E(R,M.y1+o,L+1,C),A(R,n,R.length-1,C),E(R,r,0,C)}function E(R,C,L,M){for(;L<R.length;++L){const j=R[L],F=(C-j.y0)*M;F>1e-6&&(j.y0+=F,j.y1+=F),C=j.y1+o}}function A(R,C,L,M){for(;L>=0;--L){const j=R[L],F=(j.y1-C)*M;F>1e-6&&(j.y0-=F,j.y1-=F),C=j.y0-o}}function T({sourceLinks:R,targetLinks:C}){if(f===void 0){for(const{source:{sourceLinks:L}}of C)L.sort(Dm);for(const{target:{targetLinks:L}}of R)L.sort(jm)}}function P(R){if(f===void 0)for(const{sourceLinks:C,targetLinks:L}of R)C.sort(Dm),L.sort(jm)}function N(R,C){let L=R.y0-(R.sourceLinks.length-1)*o/2;for(const{target:M,width:j}of R.sourceLinks){if(M===C)break;L+=j+o}for(const{source:M,width:j}of C.targetLinks){if(M===R)break;L-=j}return L}function I(R,C){let L=C.y0-(C.targetLinks.length-1)*o/2;for(const{source:M,width:j}of C.targetLinks){if(M===R)break;L+=j+o}for(const{target:M,width:j}of R.sourceLinks){if(M===C)break;L-=j}return L}return v}const hG={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},pG={left:oG,right:sG,center:lG,justify:gc};function vG(t){const r=typeof t;return r==="string"?pG[t]||gc:r==="function"?t:gc}const K_=t=>r=>{const{nodeId:e,nodeSort:n,nodeAlign:i,nodeWidth:a,nodePadding:o,nodeDepth:s,nodes:l,links:c,linkSort:u,iterations:f}=Object.assign({},hG,t),d=dG().nodeSort(n).linkSort(u).links(c).nodes(l).nodeWidth(a).nodePadding(o).nodeDepth(s).nodeAlign(vG(i)).iterations(f).extent([[0,0],[1,1]]);typeof e=="function"&&d.nodeId(e);const h=d(r),{nodes:p,links:v}=h,g=p.map(m=>{const{x0:b,x1:x,y0:O,y1:w}=m;return Object.assign(Object.assign({},m),{x:[b,x,x,b],y:[O,O,w,w]})}),y=v.map(m=>{const{source:b,target:x}=m,O=b.x1,w=x.x0,_=m.width/2;return Object.assign(Object.assign({},m),{x:[O,O,w,w],y:[m.y0+_,m.y0-_,m.y1+_,m.y1-_]})});return{nodes:g,links:y}};K_.props={};function wr(t,r,e={},n=!1){if(Wr(t)||Array.isArray(t)&&n)return t;const i=it(t,r);return X(e,i)}function mc(t,r={}){return Wr(t)||Array.isArray(t)||!Z_(t)?t:X(r,t)}function Z_(t){if(Object.keys(t).length===0)return!0;const{title:r,items:e}=t;return r!==void 0||e!==void 0}function _r(t,r){return typeof t=="object"?it(t,r):t}var gG=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const yG={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},Bm={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},zm={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},mG={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},Q_=t=>{const{data:r,encode:e={},scale:n,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={},interaction:u,state:f={},viewStyle:d={}}=t,{links:h,nodes:p}=Vp(r,e);if(!h||h.length===0)return[X({},Bm,{data:[],encode:{},scale:n,style:it(i,"node"),viewStyle:d,labels:[],tooltip:!1,animate:!1,axis:!1,interaction:u,state:{}}),X({},zm,{data:[],encode:{},labels:[],style:it(i,"link"),tooltip:!1,animate:!1,interaction:u,state:{}})];const v=it(e,"node"),g=it(e,"link"),{key:y=N=>N.key,color:m=y}=v,{links:b,nodes:x}=K_(Object.assign(Object.assign(Object.assign({},yG),{nodeId:gr(y)}),a))({links:h,nodes:p}),O=it(i,"label"),{text:w=y,spacing:_=5}=O,S=gG(O,["text","spacing"]),k=gr(y),E=wr(c,"node",{title:k,items:[{field:"value"}]},!0),A=wr(c,"link",{title:"",items:[N=>({name:"source",value:k(N.source)}),N=>({name:"target",value:k(N.target)})]}),[T,P]=Object.entries(f).reduce((N,[I,R])=>{const C=Ml(R,"node","link"),L=it(R,"node");N[0][I]=Object.assign(Object.assign({},C),L);const M=it(R,"link");return N[1][I]=Object.assign(Object.assign({},C),M),N},[{},{}]);return[X({},Bm,{data:x,encode:Object.assign(Object.assign({},v),{color:m}),scale:n,style:it(i,"node"),viewStyle:d,labels:[Object.assign(Object.assign(Object.assign({},mG),{text:w,dx:N=>N.x[0]<.5?_:-_}),S),...o],tooltip:E,animate:_r(l,"node"),axis:!1,interaction:u,state:T}),X({},zm,{data:b,encode:g,labels:s,style:Object.assign({fill:g.color?void 0:"#aaa",lineWidth:0},it(i,"link")),tooltip:A,animate:_r(l,"link"),interaction:u,state:P})]};Q_.props={};function bG(t,r){return r.value-t.value}function xG(t,r){return r.frequency-t.frequency}function OG(t,r){return`${t.id}`.localeCompare(`${r.id}`)}function wG(t,r){return`${t.name}`.localeCompare(`${r.name}`)}const _G=Object.freeze(Object.defineProperty({__proto__:null,frequency:xG,id:OG,name:wG,weight:bG},Symbol.toStringTag,{value:"Module"})),SG={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function kG(t){const{y:r,thickness:e,weight:n,marginRatio:i,id:a,source:o,target:s,sourceWeight:l,targetWeight:c,sortBy:u}=Object.assign(Object.assign({},SG),t);function f(g){const y=g.nodes.map(b=>Object.assign({},b)),m=g.edges.map(b=>Object.assign({},b));return d(y,m),h(y),p(y,m),v(y,m),{nodes:y,edges:m}}function d(g,y){y.forEach(x=>{x.source=o(x),x.target=s(x),x.sourceWeight=l(x),x.targetWeight=c(x)});const m=ce(y,x=>x.source),b=ce(y,x=>x.target);return g.forEach(x=>{x.id=a(x);const O=m.has(x.id)?m.get(x.id):[],w=b.has(x.id)?b.get(x.id):[];x.frequency=O.length+w.length,x.value=Nn(O,_=>_.sourceWeight)+Nn(w,_=>_.targetWeight)}),{nodes:g,edges:y}}function h(g,y){const m=typeof u=="function"?u:_G[u];m&&g.sort(m)}function p(g,y){const m=g.length;if(!m)throw Ga("Invalid nodes: it's empty!");if(!n){const O=1/m;return g.forEach((w,_)=>{w.x=(_+.5)*O,w.y=r}),{nodes:g,edges:y}}const b=i/(2*m),x=g.reduce((O,w)=>O+=w.value,0);return g.reduce((O,w)=>{w.weight=w.value/x,w.width=w.weight*(1-i),w.height=e;const _=b+O,S=_+w.width,k=r-e/2,E=k+e;return w.x=[_,S,S,_],w.y=[k,k,E,E],O+w.width+2*b},0),{nodes:g,edges:y}}function v(g,y){const m=new Map(g.map(O=>[O.id,O]));if(!n)return y.forEach(O=>{const w=o(O),_=s(O),S=m.get(w),k=m.get(_);S&&k&&(O.x=[S.x,k.x],O.y=[S.y,k.y])}),{nodes:g,edges:y};y.forEach(O=>{O.x=[0,0,0,0],O.y=[r,r,r,r]});const b=ce(y,O=>O.source),x=ce(y,O=>O.target);g.forEach(O=>{const{edges:w,width:_,x:S,y:k,value:E,id:A}=O,T=b.get(A)||[],P=x.get(A)||[];let N=0;T.map(I=>{const R=I.sourceWeight/E*_;I.x[0]=S[0]+N,I.x[1]=S[0]+N+R,N+=R}),P.forEach(I=>{const R=I.targetWeight/E*_;I.x[3]=S[0]+N,I.x[2]=S[0]+N+R,N+=R})})}return f}const Jp=t=>r=>kG(t)(r);Jp.props={};var Wm=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const _f={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},EG={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},AG={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},TG={position:"outside",fontSize:10},J_=(t,r)=>{const{data:e,encode:n={},scale:i,style:a={},layout:o={},nodeLabels:s=[],linkLabels:l=[],animate:c={},tooltip:u={}}=t,{nodes:f,links:d}=Vp(e,n),h=it(n,"node"),p=it(n,"link"),{key:v=I=>I.key,color:g=v}=h,{linkEncodeColor:y=I=>I.source}=p,{nodeWidthRatio:m=_f.thickness,nodePaddingRatio:b=_f.marginRatio}=o,x=Wm(o,["nodeWidthRatio","nodePaddingRatio"]),{nodes:O,edges:w}=Jp(Object.assign(Object.assign(Object.assign(Object.assign({},_f),{id:gr(v),thickness:m,marginRatio:b}),x),{weight:!0}))({nodes:f,edges:d}),_=it(a,"label"),{text:S=v}=_,k=Wm(_,["text"]),E=wr(u,"node",{title:"",items:[I=>({name:I.key,value:I.value})]},!0),A=wr(u,"link",{title:"",items:[I=>({name:`${I.source} -> ${I.target}`,value:I.value})]}),{height:T,width:P}=r,N=Math.min(T,P);return[X({},AG,{data:w,encode:Object.assign(Object.assign({},p),{color:y}),labels:l,style:Object.assign({fill:y?void 0:"#aaa"},it(a,"link")),tooltip:A,animate:_r(c,"link")}),X({},EG,{data:O,encode:Object.assign(Object.assign({},h),{color:g}),scale:i,style:it(a,"node"),coordinate:{type:"polar",outerRadius:(N-20)/N,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},TG),{text:S}),k),...s],tooltip:E,animate:_r(c,"node"),axis:!1})]};J_.props={};const Gm={path:S_,hollow:k_},tS=t=>(r,e,n,i)=>[r,r.map(()=>[[0,0]])];tS.props={defaultShape:"path",defaultLabelShape:"label",shape:Gm,composite:!1,channels:[...on({shapes:Object.keys(Gm)}),{name:"d",scale:"identity"}],preInference:[...Me()],postInference:[...Ne()]};function PG(t,r){return Array.isArray(t)?typeof r=="function"?Zf().path(r)(t):Zf()(t):Hc(t)}function eS(t,r=[t.data.name]){t.id=t.id||t.data.name,t.path=r,t.children&&t.children.forEach(e=>{e.id=`${t.id}/${e.data.name}`,e.path=[...r,e.data.name],eS(e,e.path)})}function nS(t){const r=mt(t,["data","name"]);r.replaceAll&&(t.path=r.replaceAll(".","/").split("/")),t.children&&t.children.forEach(e=>{nS(e)})}function MG(t,r){const e={treemapBinary:$T,treemapDice:DT,treemapSlice:jT,treemapSliceDice:IT,treemapSquarify:RT,treemapResquarify:NT},n=t==="treemapSquarify"?e[t].ratio(r):e[t];if(!n)throw new TypeError("Invalid tile method!");return n}function rS(t,r,e){const{value:n}=e,i=MG(r.tile,r.ratio),a=PG(t,r.path);Le(t)?nS(a):eS(a),n?a.sum(l=>r.ignoreParentValue&&l.children?0:gr(n)(l)).sort(r.sort):a.count(),LT().tile(i).size(r.size).round(r.round).paddingInner(r.paddingInner).paddingOuter(r.paddingOuter).paddingTop(r.paddingTop).paddingRight(r.paddingRight).paddingBottom(r.paddingBottom).paddingLeft(r.paddingLeft)(a);const o=a.descendants().map(l=>Object.assign(l,{id:l.id.replace(/^\//,""),x:[l.x0,l.x1],y:[l.y0,l.y1]}));return[o.filter(typeof r.layer=="function"?r.layer:l=>l.height===r.layer),o]}var CG=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const LG=(t,r)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,r],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(e,n)=>n.value-e.value,layer:0}),NG=(t,r)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:e=>e.path[1]},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,r],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),RG={fontSize:10,text:t=>xn(t.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0,isTreemapLabel:!0},IG={title:t=>{var r,e;return(e=(r=t.path)===null||r===void 0?void 0:r.join)===null||e===void 0?void 0:e.call(r,".")},items:[{field:"value"}]},jG={title:t=>xn(t.path),items:[{field:"value"}]},iS=(t,r)=>{const{width:e,height:n,options:i}=r,{data:a,encode:o={},scale:s,style:l={},layout:c={},labels:u=[],tooltip:f={}}=t,d=CG(t,["data","encode","scale","style","layout","labels","tooltip"]),h=mt(i,["interaction","treemapDrillDown"])||mt(i,["marks",0,"interaction","treemapDrillDown"]),p=X({},LG(e,n),c,{layer:h?m=>m.depth===1:c.layer}),[v,g]=rS(a,p,o),y=it(l,"label");return X({},NG(e,n),Object.assign(Object.assign({data:v,scale:s,style:l,labels:[Object.assign(Object.assign(Object.assign({},RG),y),h&&{cursor:"pointer"}),...u]},d),{encode:o,tooltip:mc(f,IG),axis:!1}),h?{interaction:Object.assign(Object.assign({},d.interaction),{treemapDrillDown:h?Object.assign(Object.assign({},h),{originData:g,layout:p}):void 0}),encode:Object.assign({color:m=>xn(m.path)},o),tooltip:mc(f,jG)}:{})};iS.props={};var DG=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const $G=(t,r)=>({size:[t,r],padding:0,sort:(e,n)=>n.value-e.value}),FG=(t,r,e)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,r]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:e.color?void 0:n=>n.height===0?"#ddd":"#fff",stroke:e.color?void 0:n=>n.height===0?"":"#000"}}),BG={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},zG={title:t=>t.data.name,items:[{field:"value"}]},WG=(t,r,e)=>{const{value:n}=e,i=Le(t)?Zf().path(r.path)(t):Hc(t);return n?i.sum(a=>gr(n)(a)).sort(r.sort):i.count(),FT().size(r.size).padding(r.padding)(i),i.descendants()},aS=(t,r)=>{const{width:e,height:n}=r,{data:i,encode:a={},scale:o={},style:s={},layout:l={},labels:c=[],tooltip:u={}}=t,f=DG(t,["data","encode","scale","style","layout","labels","tooltip"]),d=FG(e,n,a),h=WG(i,X({},$G(e,n),l),X({},d.encode,a)),p=it(s,"label");return X({},d,Object.assign(Object.assign({data:h,encode:a,scale:o,style:s,labels:[Object.assign(Object.assign({},BG),p),...c]},f),{tooltip:mc(u,zG),axis:!1}))};aS.props={};var Hm=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function GG(t,r){return Zn(t,e=>r[e])}function HG(t,r){return oe(t,e=>r[e])}function oS(t,r){const e=tv(t,r)*2.5-ev(t,r)*1.5;return Zn(t,n=>r[n]>=e?r[n]:NaN)}function tv(t,r){return mh(t,.25,e=>r[e])}function YG(t,r){return mh(t,.5,e=>r[e])}function ev(t,r){return mh(t,.75,e=>r[e])}function sS(t,r){const e=ev(t,r)*2.5-tv(t,r)*1.5;return oe(t,n=>r[n]<=e?r[n]:NaN)}function VG(){return(t,r)=>{const{encode:e}=r,{y:n,x:i}=e,{value:a}=n,{value:o}=i;return[Array.from(ce(t,c=>o[+c]).values()).flatMap(c=>{const u=oS(c,a),f=sS(c,a);return c.filter(d=>a[d]<u||a[d]>f)}),r]}}const lS=t=>{const{data:r,encode:e,style:n={},tooltip:i={},transform:a,animate:o}=t,s=Hm(t,["data","encode","style","tooltip","transform","animate"]),{point:l=!0}=n,c=Hm(n,["point"]),{y:u}=e,f={y:u,y1:u,y2:u,y3:u,y4:u},d={y1:tv,y2:YG,y3:ev},h=wr(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),p=wr(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:r,transform:[Object.assign(Object.assign({type:"groupX",y:GG},d),{y4:HG})],encode:Object.assign(Object.assign({},e),f),style:c,tooltip:h},s);const v=it(c,"box"),g=it(c,"point");return[Object.assign({type:"box",data:r,transform:[Object.assign(Object.assign({type:"groupX",y:oS},d),{y4:sS})],encode:Object.assign(Object.assign({},e),f),style:v,tooltip:h,animate:_r(o,"box")},s),{type:"point",data:r,transform:[{type:VG}],encode:e,style:Object.assign({},g),tooltip:p,animate:_r(o,"point")}]};lS.props={};const UG={shape:P_},cS=t=>{const{cartesian:r}=t;return r?Yp:(e,n,i,a)=>{const{x:o,y:s}=i,l=Si(n,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};cS.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:UG,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Me(),{type:eu},{type:tu},{type:f1}]};var XG=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const qG={joint:!0},KG={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},ZG={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},QG={text:""};function JG(t,r,e){const{nodes:n,links:i}=t,{joint:a,nodeStrength:o,linkStrength:s}=r,{nodeKey:l=p=>p.id,linkKey:c=p=>p.id}=e,u=BT(),f=zT(i).id(gr(c));typeof o=="function"&&u.strength(o),typeof s=="function"&&f.strength(s);const d=Gb(n).force("link",f).force("charge",u);a?d.force("center",WT()):d.force("x",Hb()).force("y",Yb()),d.stop();const h=Math.ceil(Math.log(d.alphaMin())/Math.log(1-d.alphaDecay()));for(let p=0;p<h;p++)d.tick();return{nodesData:n,linksData:i}}const uS=t=>{const{data:r,encode:e={},scale:n,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,{nodeKey:u=w=>w.id,linkKey:f=w=>w.id}=e,d=XG(e,["nodeKey","linkKey"]),h=Object.assign({nodeKey:u,linkKey:f},d),p=it(h,"node"),v=it(h,"link"),{links:g,nodes:y}=Vp(r,h),{nodesData:m,linksData:b}=JG({links:g,nodes:y},X({},qG,a),h),x=wr(c,"link",{items:[w=>({name:"source",value:gr(f)(w.source)}),w=>({name:"target",value:gr(f)(w.target)})]}),O=wr(c,"node",{items:[w=>({name:"key",value:gr(u)(w)})]},!0);return[X({},KG,{data:b,encode:v,labels:s,style:it(i,"link"),tooltip:x,animate:_r(l,"link")}),X({},ZG,{data:m,encode:Object.assign({},p),scale:n,style:it(i,"node"),tooltip:O,labels:[Object.assign(Object.assign({},QG),it(i,"label")),...o],animate:_r(l,"link")})]};uS.props={};const fS=t=>r=>e=>{const{field:n="value",nodeSize:i,separation:a,sortBy:o,as:s=["x","y"]}=r,[l,c]=s,u=Hc(e,p=>p.children).sum(p=>p[n]).sort(o),f=t();f.size([1,1]),i&&f.nodeSize(i),a&&f.separation(a),f(u);const d=[];u.each(p=>{p[l]=p.x,p[c]=p.y,p.name=p.data.name,d.push(p)});const h=u.links();return h.forEach(p=>{p[l]=[p.source[l],p.target[l]],p[c]=[p.source[c],p.target[c]]}),{nodes:d,edges:h}},dS=t=>fS(GT)(t);dS.props={};const hS=t=>fS(HT)(t);hS.props={};const t5={sortBy:(t,r)=>r.value-t.value},e5={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},n5={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},r5={text:"",fontSize:10},pS=t=>{const{data:r,encode:e={},scale:n={},style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,u=e?.value,{nodes:f,edges:d}=hS(Object.assign(Object.assign(Object.assign({},t5),a),{field:u}))(r),h=wr(c,"node",{title:"name",items:["value"]},!0),p=wr(c,"link",{title:"",items:[v=>({name:"source",value:v.source.name}),v=>({name:"target",value:v.target.name})]});return[X({},n5,{data:d,encode:it(e,"link"),scale:it(n,"link"),labels:s,style:Object.assign({stroke:"#999"},it(i,"link")),tooltip:p,animate:_r(l,"link")}),X({},e5,{data:f,scale:it(n,"node"),encode:it(e,"node"),labels:[Object.assign(Object.assign({},r5),it(i,"label")),...o],style:Object.assign({},it(i,"node")),tooltip:h,animate:_r(l,"node")})]};pS.props={};var i5=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},a5=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function o5(t,r){const{text:e="text",value:n="value"}=r;return t.map(i=>Object.assign(Object.assign({},i),{text:i[e],value:i[n]}))}const s5=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:t=>t.fontFamily},tooltip:{items:[t=>({name:t.text,value:t.value})]}}),nv=(t,r)=>i5(void 0,void 0,void 0,function*(){const{width:e,height:n}=r,{data:i,encode:a={},scale:o,style:s={},layout:l={}}=t,c=a5(t,["data","encode","scale","style","layout"]),u=o5(i,a);return X({},s5(),Object.assign(Object.assign({data:{value:u,transform:[Object.assign({type:"wordCloud",size:[e,n]},l)]},encode:a,scale:o,style:s},c),{axis:!1}))});nv.props={};var Lo=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const l5=(t,r)=>{const{shape:e,radius:n}=t,i=Lo(t,["shape","radius"]),a=it(i,"pointer"),o=it(i,"pin"),{shape:s}=a,l=Lo(a,["shape"]),{shape:c}=o,u=Lo(o,["shape"]),{coordinate:f,theme:d}=r;return(h,p)=>{const v=h.map(N=>f.invert(N)),[g,y,m]=uN(f,"polar"),b=f.clone(),{color:x}=p,O=Oh({startAngle:g,endAngle:y,innerRadius:m,outerRadius:n});O.push(["cartesian"]),b.update({transformations:O});const w=v.map(N=>b.map(N)),[_,S]=rp(w),[k,E]=f.getCenter(),A=Object.assign(Object.assign({x1:_,y1:S,x2:k,y2:E,stroke:x},l),i),T=Object.assign(Object.assign({cx:k,cy:E,stroke:x},u),i),P=yt(new Ve);return Wr(s)||(typeof s=="function"?P.append(()=>s(w,p,b,d)):P.append("line").call(dt,A).node()),Wr(c)||(typeof c=="function"?P.append(()=>c(w,p,b,d)):P.append("circle").call(dt,T).node()),P.node()}},Ym={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},c5={style:{shape:l5,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},u5={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function f5(t){if(fe(t)){const r=Math.max(0,Math.min(t,1));return{percent:r,target:r,total:1}}return t}function d5(t,r){const{name:e="score",target:n,total:i,percent:a,thresholds:o=[]}=f5(t),s=a||n,l=a?1:i,c=Object.assign({y:{domain:[0,l]}},r);return o.length?{targetData:[{x:e,y:s,color:"target"}],totalData:o.map((u,f)=>({x:e,y:f>=1?u-o[f-1]:u,color:f})),target:s,total:l,scale:c}:{targetData:[{x:e,y:s,color:"target"}],totalData:[{x:e,y:s,color:"target"},{x:e,y:l-s,color:"total"}],target:s,total:l,scale:c}}function h5(t,{target:r,total:e}){const{content:n}=t;return n?n(r,e):r.toString()}const vS=t=>{const{data:r={},scale:e={},style:n={},animate:i={},transform:a=[]}=t,o=Lo(t,["data","scale","style","animate","transform"]),{targetData:s,totalData:l,target:c,total:u,scale:f}=d5(r,e),d=it(n,"text"),{tooltip:h}=d,p=Lo(d,["tooltip"]),v=vL(n,["pointer","pin"]),g=it(n,"arc"),y=g.shape;return[X({},Ym,Object.assign({type:"interval",transform:[{type:"stackY"}],data:l,scale:f,style:y==="round"?Object.assign(Object.assign({},g),{shape:QW}):g,animate:typeof i=="object"?it(i,"arc"):i},o)),X({},Ym,c5,Object.assign({type:"point",data:s,scale:f,style:v,animate:typeof i=="object"?it(i,"indicator"):i},o)),X({},u5,{style:Object.assign({text:h5(p,{target:c,total:u})},p),tooltip:h,animate:typeof i=="object"?it(i,"text"):i})]};vS.props={};const Vm={density:E_},gS=()=>(t,r,e,n)=>{const{x:i,series:a}=e,o=Object.entries(e).filter(([f])=>f.startsWith("y")).map(([,f])=>f),s=Object.entries(e).filter(([f])=>f.startsWith("size")).map(([,f])=>f);if(i===void 0||o===void 0||s===void 0)throw new Error("Missing encode for x or y or size channel.");const l=r.x,c=r.series,u=Array.from(t,f=>{const d=l.getBandWidth(l.invert(+i[f])),h=c?c.getBandWidth(c.invert(+a?.[f])):1,p=d*h,v=(+a?.[f]||0)*d,g=+i[f]+v+p/2;return[...o.map((m,b)=>[g+ +s[b][f]/t.length,+o[b][f]]),...o.map((m,b)=>[g-+s[b][f]/t.length,+o[b][f]]).reverse()].map(m=>n.map(m))});return[t,u]};gS.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:Vm,channels:[...on({shapes:Object.keys(Vm)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...Me(),{type:xs},{type:bi}],postInference:[...Ne(),...io()],interaction:{shareTooltip:!0}};const Um={heatmap:T_},yS=t=>(r,e,n,i)=>{const{x:a,y:o,size:s,color:l}=n,c=Array.from(r,u=>{const f=s?+s[u]:40;return[...i.map([+a[u],+o[u]]),l[u],f]});return[[0],[c]]};yS.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:Um,channels:[...on({shapes:Object.keys(Um)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...Me(),{type:bi},{type:Ss}],postInference:[...Ne(),...Yr()]};var p5=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const v5={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:M_},animate:{enter:{type:"fadeIn"}}},g5={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},mS=t=>{const{data:r={},style:e={},animate:n}=t,i=p5(t,["data","style","animate"]),a=Math.max(0,fe(r)?r:r?.percent),o=[{percent:a,type:"liquid"}],s=Object.assign(Object.assign({},it(e,"text")),it(e,"content")),l=it(e,"outline"),c=it(e,"wave"),u=it(e,"background");return[X({},v5,Object.assign({type:"interval",data:o,style:{liquidOptions:{percent:a,liquidShape:e?.shape},styleOptions:Object.assign(Object.assign({},e),{outline:l,wave:c,background:u})},animate:n},i)),X({},g5,{style:Object.assign({text:`${cc(a*100)} %`},s),animate:n})]};mS.props={};const Xm={hollow:gp,hollowDiamond:pp,hollowHexagon:vp,hollowSquare:yp,hollowTriangleDown:bp,hollowTriangle:mp,hollowBowtie:hp,hollowCircle:xp,point:Tp,plus:Ap,diamond:_p,square:Pp,triangle:Cp,hexagon:Sp,cross:wp,bowtie:Op,hyphen:kp,line:Ep,tick:Mp,triangleDown:Lp,circle:yu},y5=4,m5=200,bS=t=>(r,e,n,i)=>{const{x:a,y:o,size:s}=n;if(!a.length||!o.length)return[r,o.map(()=>[[]])];const[l,c]=i.getSize(),u=Si(e,n,t),f=Array.from(r,v=>{const g=+a[v]*l,y=+o[v]*c,m=+s[v]||y5;return{i:v,x:g,y,r:m}}),d=Gb(f).stop().force("collide",YT().radius(v=>v.r+1).strength(1));d.force("x",Hb(v=>v.x).strength(.5)),d.force("y",Yb(v=>v.y).strength(5));for(let v=0;v<m5;v++)d.tick();d.stop();const h=v=>{const g=f.find(y=>y.i===v);return[g.x/l,g.y/c]},p=s?Array.from(r,v=>{const[g,y]=h(v),m=+s[v],b=m/l,x=m/c,O=[g-b,y-x],w=[g+b,y+x];return[i.map(u(O,v)),i.map(u(w,v))]}):Array.from(r,v=>[i.map(u(h(v),v))]);return[r,p]};bS.props={defaultShape:"point",defaultLabelShape:"label",composite:!1,shape:Xm,channels:[...on({shapes:Object.keys(Xm)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"}],preInference:[...Me(),{type:bi},{type:Ss}],postInference:[...Ne(),{type:Ih},...Yr()]};var b5=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function x5(t,r={}){const{valueField:e="value",sort:n,fillParent:i=!0,nameField:a="name"}=r;if(!t||t.length===0)return[];const o=(c,u=null,f=0)=>{const d={data:c,depth:f,parent:u,children:[],x0:0,x1:0,value:c[e]||0};return c.children&&c.children.length>0&&(d.children=c.children.map(h=>o(h,d,f+1))),d},s=[];let l=0;return t.forEach(c=>{const u=o(c),f=(p,v=0,g=!1,y=0)=>{if(g||p.depth===0)p.x0=g?v:0,p.x1=p.x0+p.value;else if(p.x0=v,i&&y>0){const O=p.parent?p.parent.children.reduce((S,k)=>S+k.value,0):p.value,w=p.parent?p.parent.children.length:1,_=O>0?p.value/O:1/w;p.x1=v+y*_}else p.x1=v+p.value;let m=p.x0;const b=p.x1-p.x0,x=n?[...p.children].sort((O,w)=>n(O.data,w.data)):p.children;if(i&&x.length>0){const O=p.children.reduce((w,_)=>w+_.value,0);x.forEach(w=>{f(w,m,!1,b);const _=O>0?w.value/O:1/x.length;m+=b*_})}else x.forEach(O=>{f(O,m,!1,0),m+=O.x1-O.x0})};f(u,l,!0),l+=u.value;const d=p=>{var v,g,y;const m=O=>{var w;return(w=O[a])!==null&&w!==void 0?w:O.name},b=[m(p.data)];let x=p;for(;x.parent;)b.unshift(m(x.parent.data)),x=x.parent;return Object.assign(Object.assign({},ms(p.data,[e])),{[xS]:b,[iv]:(y=(g=(v=x.parent)===null||v===void 0?void 0:v.data)===null||g===void 0?void 0:g[a])!==null&&y!==void 0?y:p.data[a],name:p.data[a],depth:p.depth,value:p.value,x:[p.x0,p.x1],y:[p.depth,p.depth+1],[bc]:p.children.length})},h=p=>{s.push(d(p)),p.children.forEach(h)};h(u)}),s}const Na="partition",rv="markType",xS="path",iv="ancestor-node",bc="childNodeCount";function O5(t){const{data:r,encode:e,fillParent:n,sort:i}=t,{color:a,value:o,name:s}=e;return x5(r,{valueField:o,fillParent:n,nameField:s,sort:i}).map(c=>{const u=Object.assign({},c);return a&&a!==iv&&(u[a]=c[a]),u})}const qm={id:Na,encode:{x:"x",y:"y",key:xS,color:iv,value:"value",name:"name"},labels:[{style:{pointerEvents:"none"},text:"value",position:"inside",transform:[{type:"overflowHide"}]}],axis:{x:{title:"Time/Order",label:!0},y:!1},style:{[rv]:Na,[bc]:"childNodeCount"},state:{active:{zIndex:2},inactive:{zIndex:1}},legend:!1,coordinate:{type:"cartesian",grid:!1},interaction:{drillDown:!0}},OS=t=>{const{encode:r,data:e=[],layout:n={}}=t,i=b5(t,["encode","data","layout"]),{fillParent:a=!0,sort:o}=n,s=Object.assign(Object.assign({},qm.encode),r),{value:l}=s,c=O5({encode:s,data:e,fillParent:a,sort:o});return[X({},qm,Object.assign({type:"rect",data:c,encode:s,tooltip:{title:"path",items:[u=>({name:l,value:u[l]})]},interaction:{elementHighlight:!0}},i))]};OS.props={};const wS=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];wS.props={};const _S=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];_S.props={};const SS=t=>new qo(t);SS.props={};const kS=t=>new zr(t);kS.props={};const ES=t=>new Cx(t);ES.props={};const AS=t=>new Ix(t);AS.props={};const TS=t=>new UC(t);TS.props={};const PS=t=>new iL(t);PS.props={};const MS=t=>new JC(t);MS.props={};const CS=t=>new Fx(t);CS.props={};const LS=t=>new qc(t);LS.props={};const NS=t=>new Vx(t);NS.props={};const RS=t=>new Hx(t);RS.props={};const IS=t=>new ZC(t);IS.props={};const jS=t=>new ad(t);jS.props={};const DS=t=>new Mh(t);DS.props={};const Vr="g2-";function Wi(t){return`.${Vr}${t}`}const w5=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]],_5=["lineX","lineY","rangeX","rangeY","range","connector"];function av({colorDefault:t,colorBlack:r,colorWhite:e,colorStroke:n,colorBackground:i,padding1:a,padding2:o,padding3:s,alpha90:l,alpha65:c,alpha45:u,alpha25:f,alpha10:d,category10:h,category20:p,sizeDefault:v=1,padding:g="auto",margin:y=16}){return{padding:g,margin:y,size:v,color:t,category10:h,category20:p,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:r,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:n,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:n,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:n,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:n,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:n,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:n,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:n,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:n,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:n,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:r,gridStrokeOpacity:d,labelAlign:"horizontal",labelFill:r,labelOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:a,line:!1,lineLineWidth:.5,lineStroke:r,lineStrokeOpacity:u,tickLength:4,tickLineWidth:1,tickStroke:r,tickOpacity:u,titleFill:r,titleOpacity:l,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:r,itemLabelFillOpacity:l,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,focusMarkerSize:12,itemSpacing:[a,a,a/2],itemValueFill:r,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:r,navButtonFillOpacity:.65,navPageNumFill:r,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:r,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:r,tickStrokeOpacity:.25,rowPadding:a,colPadding:o,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:r,handleLabelFillOpacity:u,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:r,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:r,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:r,labelFillOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:l,tickStroke:r,tickStrokeOpacity:u},label:{fill:r,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:e,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:r,fontWeight:"normal"},slider:{trackSize:16,trackFill:n,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:r,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:r,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:r,titleFillOpacity:l,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:r,subtitleFillOpacity:c,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{[Wi("tooltip")]:{"font-family":"sans-serif"}}}}}const S5={colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},k5=av(S5),ov=t=>X({},k5,t);ov.props={};const $S=t=>X({},ov(),{category10:"category10",category20:"category20"},t);$S.props={};const E5={colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25},A5=av(E5),FS=t=>X({},A5,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{[Wi("tooltip")]:{background:"#1f1f1f",opacity:.95},[Wi("tooltip-title")]:{color:"#A6A6A6"},[Wi("tooltip-list-item-name-label")]:{color:"#A6A6A6"},[Wi("tooltip-list-item-value")]:{color:"#A6A6A6"}}}},t),BS=t=>Object.assign({},FS(),{category10:"category10",category20:"category20"},t);BS.props={};const T5={colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},P5=av(T5),zS=t=>X({},P5,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(r,e)=>e!==0},axisRight:{gridFilter:(r,e)=>e!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);zS.props={};var M5=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function C5(t){return class extends la{constructor(r){super(r),this.descriptor=t}connectedCallback(){var r,e;(e=(r=this.descriptor).render)===null||e===void 0||e.call(r,this.attributes,this)}update(r={}){var e,n;this.attr(X({},this.attributes,r)),(n=(e=this.descriptor).render)===null||n===void 0||n.call(e,this.attributes,this)}}}function Km(t,r,e){return t.querySelector(r)?yt(t).select(r):yt(t).append(e)}function Su(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function WS(t,r){const e={flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:n,justifyContent:i,alignItems:a}=e;const o={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return t in o&&([n,i,a]=o[t]),Object.assign({display:"flex",flexDirection:n,justifyContent:i,alignItems:a},r)}class GS extends Uz{get child(){var r;return(r=this.children)===null||r===void 0?void 0:r[0]}update(r){var e;this.attr(r);const{subOptions:n}=r;(e=this.child)===null||e===void 0||e.update(n)}}class L5 extends GS{update(r){var e;const{subOptions:n}=r;this.attr(r),(e=this.child)===null||e===void 0||e.update(n)}}function yr(t,r){var e;return(e=t.filter(n=>n.getOptions().name===r))===null||e===void 0?void 0:e[0]}function N5(t){return t==="horizontal"||t===0}function R5(t){return t==="vertical"||t===-Math.PI/2}function HS(t,r,e){const{bbox:n}=t,{position:i="top",size:a,length:o}=r,s=["top","bottom","center"].includes(i),[l,c]=s?[n.height,n.width]:[n.width,n.height],{defaultSize:u,defaultLength:f}=e.props,d=a||u||l,h=o||f||c,p=s?"horizontal":"vertical",[v,g]=s?[h,d]:[d,h];return{orientation:p,width:v,height:g,size:d,length:h}}function I5(t){return t.find(r=>r.getOptions().domain.length>0).getOptions().domain}function ku(t){const r=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:e}=t,n=M5(t,["style"]),i={};return Object.entries(n).forEach(([a,o])=>{r.includes(a)?i[`show${yi(a)}`]=o:i[a]=o}),Object.assign(Object.assign({},i),e)}var YS=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function VS(t,r){const{eulerAngles:e,origin:n}=r;n&&t.setOrigin(n),e&&t.rotate(e[0],e[1],e[2])}function US(t){const{innerWidth:r,innerHeight:e,depth:n}=t.getOptions();return[r,e,n]}function j5(t,r){const{width:e,height:n}=r.getOptions();return i=>{if(!D1(r))return i;const a=t==="bottom"?[i,1]:[0,i],o=r.map(a);if(t==="bottom"){const s=o[0];return new zr({domain:[0,e],range:[0,1]}).map(s)}else if(t==="left"){const s=o[1];return new zr({domain:[0,n],range:[0,1]}).map(s)}return i}}function D5(t,r,e){if(t.getTicks)return t.getTicks();if(!e)return r;const[n,i]=to(r,o=>+o),{tickCount:a}=t.getOptions();return e(n,i,a)}function $5(t,r){if(Jt(r))return h=>h;const e=r.getOptions(),{innerWidth:n,innerHeight:i,insetTop:a,insetBottom:o,insetLeft:s,insetRight:l}=e,[c,u,f]=t==="left"||t==="right"?[a,o,i]:[s,l,n],d=new zr({domain:[0,1],range:[c/f,1-u/f]});return h=>d.map(h)}function XS(t,r,e,n,i,a,o,s){var l;(e!==void 0||a!==void 0)&&t.update(Object.assign(Object.assign({},e&&{tickCount:e}),a&&{tickMethod:a}));const c=D5(t,r,a),u=i?c.filter(i):c,f=y=>y instanceof Date?String(y):typeof y=="object"&&y?y:String(y),d=n||((l=t.getFormatter)===null||l===void 0?void 0:l.call(t))||f,h=$5(o,s),p=j5(o,s),v=y=>["top","bottom","center","outer"].includes(y),g=y=>["left","right"].includes(y);return Jt(s)||ue(s)?u.map((y,m,b)=>{var x,O;const w=((x=t.getBandWidth)===null||x===void 0?void 0:x.call(t,y))/2||0,_=h(t.map(y)+w);return{value:iu(s)&&o==="center"||ue(s)&&((O=t.getTicks)===null||O===void 0?void 0:O.call(t))&&v(o)||ue(s)&&g(o)?1-_:_,label:f(d(cc(y),m,b)),id:String(m)}}):u.map((y,m,b)=>{var x;const O=((x=t.getBandWidth)===null||x===void 0?void 0:x.call(t,y))/2||0,w=p(h(t.map(y)+O));return{value:g(o)?1-w:w,label:f(d(cc(y),m,b)),id:String(m)}})}function F5(t,r,e="xy"){const[n,i,a]=US(r);return e==="xy"?t.includes("bottom")||t.includes("top")?i:n:e==="xz"?t.includes("bottom")||t.includes("top")?a:n:t.includes("bottom")||t.includes("top")?i:a}function B5(t=[],r){if(t.length>0)return t;const{labelAutoRotate:e,labelAutoHide:n,labelAutoEllipsis:i,labelAutoWrap:a}=r,o=[],s=(l,c)=>{c&&o.push(Object.assign(Object.assign({},l),c))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},e),s({type:"ellipsis",minLength:20},i),s({type:"hide"},n),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},a),o}function z5(t,r,e,n,i){const{x:a,y:o,width:s,height:l}=r,c=[a+s/2,o+l/2],u=Math.min(s,l)/2,[f,d]=zh(i),[h,p]=US(i),v=Math.min(h,p)/2,g={center:c,radius:u,startAngle:f,endAngle:d,gridLength:(n-e)*v};if(t==="inner"){const{insetLeft:y,insetTop:m}=i.getOptions();return Object.assign(Object.assign({},g),{center:[c[0]-y,c[1]-m],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},g),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function W5(t,r,e){return lN(r)||au(r)?!1:t===void 0?!!e.getTicks:t}function G5(t){const{depth:r}=t.getOptions();return r?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function H5(t,r,e,n,i){const{x:a,y:o,width:s,height:l}=e;if(t==="bottom")return{startPos:[a,o],endPos:[a+s,o]};if(t==="left")return{startPos:[a+s,o+l],endPos:[a+s,o]};if(t==="right")return{startPos:[a,o+l],endPos:[a,o]};if(t==="top")return{startPos:[a,o+l],endPos:[a+s,o+l]};if(t==="center"){if(r==="vertical")return{startPos:[a,o],endPos:[a,o+l]};if(r==="horizontal")return{startPos:[a,o],endPos:[a+s,o]};if(typeof r=="number"){const[c,u]=n.getCenter(),[f,d]=ou(n),[h,p]=zh(n),v=Math.min(s,l)/2,{insetLeft:g,insetTop:y}=n.getOptions(),m=f*v,b=d*v,[x,O]=[c+a-g,u+o-y],[w,_]=[Math.cos(r),Math.sin(r)],S=[x+b*w,O+b*_],k=[x+m*w,O+m*_],E=()=>{const{domain:T}=i.getOptions();return T.length},A=Jt(n)&&i?E():3;return{startPos:S,endPos:k,gridClosed:Math.abs(p-h-360)<1e-6,gridCenter:[x,O],gridControlAngles:new Array(A).fill(0).map((T,P,N)=>(p-h)/A*P)}}}return{}}const Y5=t=>{const{order:r,size:e,position:n,orientation:i,labelFormatter:a,tickFilter:o,tickCount:s,tickMethod:l,tickLength:c,important:u={},style:f={},indexBBox:d,title:h,grid:p=!1}=t,v=YS(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","tickLength","important","style","indexBBox","title","grid"]);return({scales:[g],value:y,coordinate:m,theme:b})=>{const{bbox:x}=y,{domain:O}=g.getOptions(),w=XS(g,O,s,a,o,l,n,m),_=d?w.map((N,I)=>{const R=d.get(I);return!R||R[0]!==N.label?N:Object.assign(Object.assign({},N),{bbox:R[1]})}):w,[S,k]=ou(m),E=z5(n,x,S,k,m),{axis:A,axisArc:T={}}=b,P=ku(X({},A,T,E,Object.assign(Object.assign(Object.assign({type:"arc",data:_,titleText:Su(h),grid:p,classNamePrefix:Vr},c!==void 0?{tickLength:c}:null),v),u)));return new Hp({style:Sh(P,["transform"])})}};function V5(t,r,e,n,i,a){const o=e.axis,s=["top","right","bottom","left"].includes(i)?e[`axis${Rh(i)}`]:e.axisLinear,l=t.getOptions().name,c=e[`axis${yi(l)}`]||{};return Object.assign({},o,s,c)}function U5(t,r,e,n,i,a){const o=V5(t,r,e,n,i);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},o),{labelDirection:n==="right"?"negative":"positive"}),n==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:n==="right"?"negative":"positive",labelSpacing:n==="center"?0:4,titleSpacing:R5(a)?10:0,tick:n==="center"?!1:void 0}):o}const X5=t=>{const{direction:r="left",important:e={},labelFormatter:n,order:i,orientation:a,actualPosition:o,position:s,size:l,style:c={},title:u,tickCount:f,tickFilter:d,tickMethod:h,tickLength:p,transform:v,indexBBox:g}=t,y=YS(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","tickLength","transform","indexBBox"]);return({scales:m,value:b,coordinate:x,theme:O})=>{const{bbox:w}=b,[_]=m,{domain:S,xScale:k}=_.getOptions(),E=U5(_,x,O,r,s,a),A=Object.assign(Object.assign(Object.assign({},E),c),y),T=F5(o||s,x,t.plane),P=H5(s,a,w,x,k),N=G5(x),I=XS(_,S,f,n,d,h,s,x),R=g?I.map((M,j)=>{const F=g.get(j);return!F||F[0]!==M.label?M:Object.assign(Object.assign({},M),{bbox:F[1]})}):I,C=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},A),{type:"linear",data:R,crossSize:l,titleText:Su(u),labelOverlap:B5(v,A),grid:W5(A.grid,x,_),gridLength:T,line:!0,indexBBox:g,classNamePrefix:Vr}),p!==void 0?{tickLength:p}:null),A.line?null:{lineOpacity:0}),P),N),e);return C.labelOverlap.find(M=>M.type==="hide")&&(C.crossSize=!1),new Hp({className:"axis",style:ku(C)})}},qS=t=>r=>{const{labelFormatter:e,labelFilter:n=()=>!0}=r;return i=>{var a;const{scales:[o]}=i,s=((a=o.getTicks)===null||a===void 0?void 0:a.call(o))||o.getOptions().domain,l=typeof e=="string"?aa(e):e,c=(f,d,h)=>n(s[d],d,s),u=Object.assign(Object.assign({},r),{labelFormatter:l,labelFilter:c,scale:o});return t(u)(i)}},ki=qS(X5),KS=qS(Y5);ki.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};KS.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const ZS=t=>(...r)=>{const e=ki(Object.assign({},{crossPadding:50},t))(...r);return VS(e,t),e};ZS.props=Object.assign(Object.assign({},ki.props),{defaultPosition:"bottom"});const QS=t=>(...r)=>{const e=ki(Object.assign({},{crossPadding:10},t))(...r);return VS(e,t),e};QS.props=Object.assign(Object.assign({},ki.props),{defaultPosition:"left"});var q5=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function K5(t){const r=t%(Math.PI*2);return r===Math.PI/2?{titleTransform:"translate(0, 50%)"}:r>-Math.PI/2&&r<Math.PI/2?{titleTransform:"translate(50%, 0)"}:r>Math.PI/2&&r<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function Z5(t,r,e,n){const{radar:i}=t,[a]=n,o=a.getOptions().name,[s,l]=zh(e),{axisRadar:c={}}=r;return Object.assign(Object.assign({},c),{grid:o==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((u,f)=>(l-s)/i.count*f)})}const JS=t=>{const{important:r={}}=t,e=q5(t,["important"]);return n=>{const{theme:i,coordinate:a,scales:o}=n;return ki(Object.assign(Object.assign(Object.assign({},e),K5(t.orientation)),{important:Object.assign(Object.assign({},Z5(t,i,a,o)),r)}))(n)}};JS.props=Object.assign(Object.assign({},ki.props),{defaultPosition:"center"});/*!
 * @antv/g-canvas
 * @description A renderer implemented by Canvas 2D API
 * @version 2.2.0
 * @date 12/24/2025, 11:55:53 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Re=UT("renderState"),tk=function(){function t(r){Z(this,t),this.renderQueue=[],Object.defineProperty(this,Re,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Zt(),this.dprMatrix=Zt(),this.tmpMat4=Zt(),this.vec3a=Nt(),this.vec3b=Nt(),this.vec3c=Nt(),this.vec3d=Nt(),this.canvasRendererPluginOptions=r}return K(t,[{key:"apply",value:function(e,n){var i=this;this.context=e;var a=this.context,o=a.config,s=a.camera,l=a.renderingService,c=a.renderingContext,u=a.pathGeneratorFactory,f=o.renderer.getConfig().enableRenderingOptimization;o.renderer.getConfig().enableDirtyCheck=!1,o.renderer.getConfig().enableDirtyRectangleRendering=!1,this.pathGeneratorFactory=u;var d=e.contextService,h=c.root.ownerDocument.defaultView;l.hooks.init.tap(t.tag,function(){var g=d.getDPR(),y=o.width,m=o.height,b=d.getContext();i.clearRect(b,0,0,y*g,m*g,o.background)}),l.hooks.destroy.tap(t.tag,function(){i.renderQueue=[],tr(i,Re)[Re]={restoreStack:[],prevObject:null,currentContext:null}});var p=function(){var y,m=d.getContext(),b=d.getDPR(),x=o.width,O=o.height,w=i.canvasRendererPluginOptions,_=w.dirtyObjectNumThreshold,S=w.dirtyObjectRatioThreshold,k=l.getStats(),E=k.total,A=k.rendered,T=A/E;i.clearFullScreen=i.clearFullScreenLastFrame||!((y=h.context.renderingPlugins[1])!==null&&y!==void 0&&y.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||A>_&&T>S,m&&(typeof m.resetTransform=="function"?m.resetTransform():m.setTransform(1,0,0,1,0,0),i.clearFullScreen&&i.clearRect(m,0,0,x*b,O*b,o.background))},v=function(y,m){for(var b=[y];b.length>0;){var x,O=b.pop();O.isVisible()&&!O.isCulled()&&(f?i.renderDisplayObjectOptimized(O,m,i.context,tr(i,Re)[Re],n):i.renderDisplayObject(O,m,i.context,tr(i,Re)[Re],n));for(var w=((x=O.sortable)===null||x===void 0||(x=x.sorted)===null||x===void 0?void 0:x.length)>0?O.sortable.sorted:O.childNodes,_=w.length-1;_>=0;_--)b.push(w[_])}};l.hooks.endFrame.tap(t.tag,function(){if(p(),c.root.childNodes.length===0){i.clearFullScreenLastFrame=!0;return}f=o.renderer.getConfig().enableRenderingOptimization,tr(i,Re)[Re]={restoreStack:[],prevObject:null,currentContext:tr(i,Re)[Re].currentContext},tr(i,Re)[Re].currentContext.clear(),i.clearFullScreenLastFrame=!1;var g=d.getContext(),y=d.getDPR();if(Fi(i.dprMatrix,[y,y,1]),vn(i.vpMatrix,i.dprMatrix,s.getOrthoMatrix()),i.clearFullScreen)f?(g.save(),v(c.root,g),g.restore()):v(c.root,g);else{var m=i.safeMergeAABB(i.mergeDirtyAABBs(i.renderQueue));if(ze.isEmpty(m)){i.renderQueue=[];return}var b=i.convertAABB2Rect(m),x=b.x,O=b.y,w=b.width,_=b.height,S=ke(i.vec3a,[x,O,0],i.vpMatrix),k=ke(i.vec3b,[x+w,O,0],i.vpMatrix),E=ke(i.vec3c,[x,O+_,0],i.vpMatrix),A=ke(i.vec3d,[x+w,O+_,0],i.vpMatrix),T=Math.min(S[0],k[0],A[0],E[0]),P=Math.min(S[1],k[1],A[1],E[1]),N=Math.max(S[0],k[0],A[0],E[0]),I=Math.max(S[1],k[1],A[1],E[1]),R=Math.floor(T),C=Math.floor(P),L=Math.ceil(N-T),M=Math.ceil(I-P);g.save(),i.clearRect(g,R,C,L,M,o.background),g.beginPath(),g.rect(R,C,L,M),g.clip(),g.setTransform(i.vpMatrix[0],i.vpMatrix[1],i.vpMatrix[4],i.vpMatrix[5],i.vpMatrix[12],i.vpMatrix[13]);var j=o.renderer.getConfig(),F=j.enableDirtyRectangleRenderingDebug;F&&h.dispatchEvent(new Qt(Mn.DIRTY_RECTANGLE,{dirtyRect:{x:R,y:C,width:L,height:M}}));var $=m.getMin(),B=_t($,2),z=B[0],W=B[1],Y=m.getMax(),V=_t(Y,2),G=V[0],q=V[1],Q=c.root.ownerDocument.elementsFromBBox(z,W,G,q);Q.sort(function(nt,et){return nt.sortable.renderOrder-et.sortable.renderOrder}).forEach(function(nt){nt&&nt.isVisible()&&!nt.isCulled()&&i.renderDisplayObject(nt,g,i.context,tr(i,Re)[Re],n)}),g.restore(),i.renderQueue.forEach(function(nt){i.saveDirtyAABB(nt)}),i.renderQueue=[]}tr(i,Re)[Re].restoreStack.forEach(function(){g.restore()}),tr(i,Re)[Re].restoreStack=[]}),l.hooks.render.tap(t.tag,function(g){i.clearFullScreen||i.renderQueue.push(g)})}},{key:"clearRect",value:function(e,n,i,a,o,s){e.clearRect(n,i,a,o),s&&(e.fillStyle=s,e.fillRect(n,i,a,o))}},{key:"renderDisplayObjectOptimized",value:function(e,n,i,a,o){var s=e.nodeName,l=!1,c=!1,u=this.context.styleRendererFactory[s],f=this.pathGeneratorFactory[s],d=e.parsedStyle.clipPath;if(d){l=!a.prevObject||!Jv(d.getWorldTransform(),a.prevObject.getWorldTransform()),l&&(this.applyWorldTransform(n,d),a.prevObject=null);var h=this.pathGeneratorFactory[d.nodeName];h&&(n.save(),c=!0,n.beginPath(),h(n,d.parsedStyle),n.closePath(),n.clip())}if(u){l=!a.prevObject||!Jv(e.getWorldTransform(),a.prevObject.getWorldTransform()),l&&this.applyWorldTransform(n,e);var p=!a.prevObject;if(!p){var v=a.prevObject.nodeName;s===U.TEXT?p=v!==U.TEXT:s===U.IMAGE?p=v!==U.IMAGE:p=v===U.TEXT||v===U.IMAGE}u.applyStyleToContext(n,e,p,a),a.prevObject=e}f&&(n.beginPath(),f(n,e.parsedStyle),s!==U.LINE&&s!==U.PATH&&s!==U.POLYLINE&&n.closePath()),u&&u.drawToContext(n,e,tr(this,Re)[Re],this,o),c&&n.restore(),e.dirty(!1)}},{key:"renderDisplayObject",value:function(e,n,i,a,o){var s=e.nodeName,l=a.restoreStack[a.restoreStack.length-1];l&&!(e.compareDocumentPosition(l)&xe.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),a.restoreStack.pop());var c=this.context.styleRendererFactory[s],u=this.pathGeneratorFactory[s],f=e.parsedStyle.clipPath;if(f){this.applyWorldTransform(n,f);var d=this.pathGeneratorFactory[f.nodeName];d&&(n.save(),a.restoreStack.push(e),n.beginPath(),d(n,f.parsedStyle),n.closePath(),n.clip())}c&&(this.applyWorldTransform(n,e),n.save(),this.applyAttributesToContext(n,e)),u&&(n.beginPath(),u(n,e.parsedStyle),s!==U.LINE&&s!==U.PATH&&s!==U.POLYLINE&&n.closePath()),c&&(c.render(n,e.parsedStyle,e,i,this,o),n.restore()),e.dirty(!1)}},{key:"applyAttributesToContext",value:function(e,n){var i=n.parsedStyle,a=i.stroke,o=i.fill,s=i.opacity,l=i.lineDash,c=i.lineDashOffset;l&&e.setLineDash(l),gt(c)||(e.lineDashOffset=c),gt(s)||(e.globalAlpha*=s),!gt(a)&&!Array.isArray(a)&&!a.isNone&&(e.strokeStyle=n.attributes.stroke),!gt(o)&&!Array.isArray(o)&&!o.isNone&&(e.fillStyle=n.attributes.fill)}},{key:"convertAABB2Rect",value:function(e){var n=e.getMin(),i=e.getMax(),a=Math.floor(n[0]),o=Math.floor(n[1]),s=Math.ceil(i[0]),l=Math.ceil(i[1]),c=s-a,u=l-o;return{x:a,y:o,width:c,height:u}}},{key:"mergeDirtyAABBs",value:function(e){var n=new ze;return e.forEach(function(i){var a=i.getRenderBounds();n.add(a);var o=i.renderable.dirtyRenderBounds;o&&n.add(o)}),n}},{key:"saveDirtyAABB",value:function(e){var n=e.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new ze);var i=e.getRenderBounds();i&&n.dirtyRenderBounds.update(i.center,i.halfExtents)}},{key:"applyWorldTransform",value:function(e,n,i){i?(zo(this.tmpMat4,n.getLocalTransform()),vn(this.tmpMat4,i,this.tmpMat4),vn(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(zo(this.tmpMat4,n.getWorldTransform()),vn(this.tmpMat4,this.vpMatrix,this.tmpMat4)),e.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var e=new ze,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.forEach(function(o){e.add(o)}),e}}])}();tk.tag="CanvasRenderer";function xc(t,r,e,n,i,a,o){var s,l;if(t.image.nodeName==="rect"){var c=t.image.parsedStyle,u=c.width,f=c.height;l=n.contextService.getDPR();var d=n.config.offscreenCanvas;s=a.offscreenCanvasCreator.getOrCreateCanvas(d),s.width=u*l,s.height=f*l;var h=a.offscreenCanvasCreator.getOrCreateContext(d),p={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach(function(g){i.renderDisplayObject(g,h,n,p,a)}),p.restoreStack.forEach(function(){h.restore()})}var v=o.getOrCreatePatternSync(r,t,e,s,l,r.getGeometryBounds().min,function(){r.dirty(),n.renderingService.dirty()});return v}function Oc(t,r,e,n){var i;if(t.type===ni.LinearGradient||t.type===ni.RadialGradient){var a=r.getGeometryBounds(),o=a&&a.halfExtents[0]*2||1,s=a&&a.halfExtents[1]*2||1,l=a&&a.min||[0,0];i=n.getOrCreateGradient(Ot(Ot({type:t.type},t.value),{},{min:l,width:o,height:s}),e)}return i}var wl=["shadowBlur","shadowOffsetX","shadowOffsetY"],Zm=["lineCap","lineJoin","miterLimit"],Be={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},Qm={};function we(t,r,e,n){var i=n.has(r)?n.get(r):Be[r];return i!==e&&(r==="lineDash"?t.setLineDash(e):t[r]=e,n.set(r,e)),i}var Q5=function(){function t(r){Z(this,t),this.imagePool=r}return K(t,[{key:"applyAttributesToContext",value:function(e,n){}},{key:"render",value:function(e,n,i,a,o,s){}},{key:"applyCommonStyleToContext",value:function(e,n,i,a){var o=i?Qm:a.prevObject.parsedStyle,s=n.parsedStyle;(i||s.opacity!==o.opacity)&&we(e,"globalAlpha",gt(s.opacity)?Be.globalAlpha:s.opacity,a.currentContext),(i||s.blend!==o.blend)&&we(e,"globalCompositeOperation",gt(s.blend)?Be.globalCompositeOperation:s.blend,a.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(e,n,i,a){var o=i?Qm:a.prevObject.parsedStyle,s=n.parsedStyle,l=s.lineWidth,c=l===void 0?Be.lineWidth:l,u=s.fill&&!s.fill.isNone,f=s.stroke&&!s.stroke.isNone&&c>0;if(f){if(i||n.attributes.stroke!==a.prevObject.attributes.stroke){var d=!gt(s.stroke)&&!Array.isArray(s.stroke)&&!s.stroke.isNone?n.attributes.stroke:Be.strokeStyle;we(e,"strokeStyle",d,a.currentContext)}(i||s.lineWidth!==o.lineWidth)&&we(e,"lineWidth",gt(s.lineWidth)?Be.lineWidth:s.lineWidth,a.currentContext),(i||s.lineDash!==o.lineDash)&&we(e,"lineDash",s.lineDash||Be.lineDash,a.currentContext),(i||s.lineDashOffset!==o.lineDashOffset)&&we(e,"lineDashOffset",gt(s.lineDashOffset)?Be.lineDashOffset:s.lineDashOffset,a.currentContext);for(var h=0;h<Zm.length;h++){var p=Zm[h];(i||s[p]!==o[p])&&we(e,p,gt(s[p])?Be[p]:s[p],a.currentContext)}}if(u&&(i||n.attributes.fill!==a.prevObject.attributes.fill)){var v=!gt(s.fill)&&!Array.isArray(s.fill)&&!s.fill.isNone?n.attributes.fill:Be.fillStyle;we(e,"fillStyle",v,a.currentContext)}}},{key:"applyStyleToContext",value:function(e,n,i,a){var o=n.nodeName;this.applyCommonStyleToContext(e,n,i,a),o===U.IMAGE||this.applyStrokeFillStyleToContext(e,n,i,a)}},{key:"applyShadowAndFilterStyleToContext",value:function(e,n,i,a){var o=n.parsedStyle;if(i){we(e,"shadowColor",o.shadowColor.toString(),a.currentContext);for(var s=0;s<wl.length;s++){var l=wl[s];we(e,l,o[l]||Be[l],a.currentContext)}}o.filter&&o.filter.length&&we(e,"filter",n.attributes.filter,a.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(e,n,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(n){we(e,"shadowColor",Be.shadowColor,a.currentContext);for(var s=0;s<wl.length;s++){var l=wl[s];we(e,l,Be[l],a.currentContext)}}if(i)if(n&&o){var c=e.filter;!gt(c)&&c.indexOf("drop-shadow")>-1&&we(e,"filter",c.replace(/drop-shadow\([^)]*\)/,"").trim()||Be.filter,a.currentContext)}else we(e,"filter",Be.filter,a.currentContext)}},{key:"fillToContext",value:function(e,n,i,a,o){var s=this,l=n.parsedStyle,c=l.fill,u=l.fillRule,f=null;if(Array.isArray(c)&&c.length>0)c.forEach(function(h){var p=we(e,"fillStyle",Oc(h,n,e,s.imagePool),i.currentContext);f=f??p,u?e.fill(u):e.fill()});else{if(ea(c)){var d=xc(c,n,e,n.ownerDocument.defaultView.context,a,o,this.imagePool);d&&(e.fillStyle=d,f=!0)}u?e.fill(u):e.fill()}f!==null&&we(e,"fillStyle",f,i.currentContext)}},{key:"strokeToContext",value:function(e,n,i,a,o){var s=this,l=n.parsedStyle.stroke,c=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(d){var h=we(e,"strokeStyle",Oc(d,n,e,s.imagePool),i.currentContext);c=c??h,e.stroke()});else{if(ea(l)){var u=xc(l,n,e,n.ownerDocument.defaultView.context,a,o,this.imagePool);if(u){var f=we(e,"strokeStyle",u,i.currentContext);c=c??f}}e.stroke()}c!==null&&we(e,"strokeStyle",c,i.currentContext)}},{key:"drawToContext",value:function(e,n,i,a,o){var s,l=n.nodeName,c=n.parsedStyle,u=c.opacity,f=u===void 0?Be.globalAlpha:u,d=c.fillOpacity,h=d===void 0?Be.fillOpacity:d,p=c.strokeOpacity,v=p===void 0?Be.strokeOpacity:p,g=c.lineWidth,y=g===void 0?Be.lineWidth:g,m=c.fill&&!c.fill.isNone,b=c.stroke&&!c.stroke.isNone&&y>0;if(!(!m&&!b)){var x=!gt(c.shadowColor)&&c.shadowBlur>0,O=c.shadowType==="inner",w=((s=c.fill)===null||s===void 0?void 0:s.alpha)===0,_=!!(c.filter&&c.filter.length),S=x&&b&&(l===U.PATH||l===U.LINE||l===U.POLYLINE||w||O),k=null;if(m){S||this.applyShadowAndFilterStyleToContext(e,n,x,i);var E=f*h;k=we(e,"globalAlpha",E,i.currentContext),this.fillToContext(e,n,i,a,o),S||this.clearShadowAndFilterStyleForContext(e,x,_,i)}if(b){var A=!1,T=f*v,P=we(e,"globalAlpha",T,i.currentContext);if(k=m?k:P,S&&(this.applyShadowAndFilterStyleToContext(e,n,x,i),A=!0,O)){var N=e.globalCompositeOperation;e.globalCompositeOperation="source-atop",this.strokeToContext(e,n,i,a,o),e.globalCompositeOperation=N,this.clearShadowAndFilterStyleForContext(e,x,_,i,!0)}this.strokeToContext(e,n,i,a,o),A&&this.clearShadowAndFilterStyleForContext(e,x,_,i)}k!==null&&we(e,"globalAlpha",k,i.currentContext)}}}])}(),sv=function(t){function r(){return Z(this,r),At(this,r,arguments)}return Et(r,t),K(r,[{key:"render",value:function(n,i,a,o,s,l){var c=i.fill,u=i.fillRule,f=i.opacity,d=f===void 0?1:f,h=i.fillOpacity,p=h===void 0?1:h,v=i.stroke,g=i.strokeOpacity,y=g===void 0?1:g,m=i.lineWidth,b=m===void 0?1:m,x=i.lineCap,O=i.lineJoin,w=i.shadowType,_=i.shadowColor,S=i.shadowBlur,k=i.filter,E=i.miterLimit,A=c&&!c.isNone,T=v&&!v.isNone&&b>0,P=c?.alpha===0,N=!!(k&&k.length),I=!gt(_)&&S>0,R=a.nodeName,C=w==="inner",L=T&&I&&(R===U.PATH||R===U.LINE||R===U.POLYLINE||P||C);A&&(n.globalAlpha=d*p,L||wc(a,n,I),ek(n,a,c,u,o,s,l,this.imagePool),L||this.clearShadowAndFilter(n,N,I)),T&&(n.globalAlpha=d*y,n.lineWidth=b,gt(E)||(n.miterLimit=E),gt(x)||(n.lineCap=x),gt(O)||(n.lineJoin=O),L&&(C&&(n.globalCompositeOperation="source-atop"),wc(a,n,!0),C&&(Id(n,a,v,o,s,l,this.imagePool),n.globalCompositeOperation=Be.globalCompositeOperation,this.clearShadowAndFilter(n,N,!0))),Id(n,a,v,o,s,l,this.imagePool))}},{key:"clearShadowAndFilter",value:function(n,i,a){if(a&&(n.shadowColor="transparent",n.shadowBlur=0),i){var o=n.filter;!gt(o)&&o.indexOf("drop-shadow")>-1&&(n.filter=o.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(Q5);function wc(t,r,e){var n=t.parsedStyle,i=n.filter,a=n.shadowColor,o=n.shadowBlur,s=n.shadowOffsetX,l=n.shadowOffsetY;i&&i.length&&(r.filter=t.style.filter),e&&(r.shadowColor=a.toString(),r.shadowBlur=o||0,r.shadowOffsetX=s||0,r.shadowOffsetY=l||0)}function ek(t,r,e,n,i,a,o,s){var l=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(e)?e.forEach(function(c){t.fillStyle=Oc(c,r,t,s),l||(n?t.fill(n):t.fill())}):(ea(e)&&(t.fillStyle=xc(e,r,t,i,a,o,s)),l||(n?t.fill(n):t.fill()))}function Id(t,r,e,n,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(e)?e.forEach(function(l){t.strokeStyle=Oc(l,r,t,o),s||t.stroke()}):(ea(e)&&(t.strokeStyle=xc(e,r,t,n,i,a,o)),s||t.stroke())}function J5(t,r){var e=_t(t,4),n=e[0],i=e[1],a=e[2],o=e[3],s=_t(r,4),l=s[0],c=s[1],u=s[2],f=s[3],d=Math.max(n,l),h=Math.max(i,c),p=Math.min(n+a,l+u),v=Math.min(i+o,c+f);return p<=d||v<=h?null:[d,h,p-d,v-h]}function t3(t,r){var e=ke(Nt(),[t[0],t[1],0],r),n=ke(Nt(),[t[0]+t[2],t[1],0],r),i=ke(Nt(),[t[0],t[1]+t[3],0],r),a=ke(Nt(),[t[0]+t[2],t[1]+t[3],0],r);return[Math.min(e[0],n[0],i[0],a[0]),Math.min(e[1],n[1],i[1],a[1]),Math.max(e[0],n[0],i[0],a[0])-Math.min(e[0],n[0],i[0],a[0]),Math.max(e[1],n[1],i[1],a[1])-Math.min(e[1],n[1],i[1],a[1])]}var e3=function(t){function r(){return Z(this,r),At(this,r,arguments)}return Et(r,t),K(r,[{key:"renderDownSampled",value:function(n,i,a,o){var s=o.src,l=o.imageCache;if(!l.downSampled){this.imagePool.createDownSampledImage(s,a).then(function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirty())}).catch(function(c){console.error(c)});return}n.drawImage(l.downSampled,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}},{key:"renderTile",value:function(n,i,a,o){var s=o.src,l=o.imageCache,c=o.imageRect,u=o.drawRect,f=l.size,d=n.getTransform(),h=d.a,p=d.b,v=d.c,g=d.d,y=d.e,m=d.f;if(n.resetTransform(),!(l!=null&&l.gridSize)){this.imagePool.createImageTiles(s,[],function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirty())},a).catch(function(I){console.error(I)});return}for(var b=[f[0]/c[2],f[1]/c[3]],x=[l.tileSize[0]/b[0],l.tileSize[1]/b[1]],O=[Math.floor((u[0]-c[0])/x[0]),Math.ceil((u[0]+u[2]-c[0])/x[0])],w=O[0],_=O[1],S=[Math.floor((u[1]-c[1])/x[1]),Math.ceil((u[1]+u[3]-c[1])/x[1])],k=S[0],E=S[1],A=k;A<=E;A++)for(var T=w;T<=_;T++){var P=l.tiles[A][T];if(P){var N=[Math.floor(c[0]+P.tileX*x[0]),Math.floor(c[1]+P.tileY*x[1]),Math.ceil(x[0]),Math.ceil(x[1])];n.drawImage(P.data,N[0],N[1],N[2],N[3])}}n.setTransform(h,p,v,g,y,m)}},{key:"render",value:function(n,i,a){var o=i.x,s=o===void 0?0:o,l=i.y,c=l===void 0?0:l,u=i.width,f=i.height,d=i.src,h=i.shadowColor,p=i.shadowBlur,v=this.imagePool.getImageSync(d,a),g=v?.img,y=u,m=f;if(g){y||(y=g.width),m||(m=g.height);var b=!gt(h)&&p>0;wc(a,n,b);try{var x=a.ownerDocument.defaultView.getContextService().getDomElement(),O=x.width,w=x.height,_=n.getTransform(),S=_.a,k=_.b,E=_.c,A=_.d,T=_.e,P=_.f,N=VT(S,E,0,0,k,A,0,0,0,0,1,0,T,P,0,1),I=t3([s,c,y,m],N),R=J5([0,0,O,w],I);if(!R)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){r.renderFull(n,i,a,{image:g,drawRect:[s,c,y,m]});return}var C=I[2]/v.size[0];if(C<(v.downSamplingRate||.5)){this.renderDownSampled(n,i,a,{src:d,imageCache:v,drawRect:[s,c,y,m]});return}if(!ImagePool.isSupportTile){r.renderFull(n,i,a,{image:g,drawRect:[s,c,y,m]});return}this.renderTile(n,i,a,{src:d,imageCache:v,imageRect:I,drawRect:R})}catch{}}}},{key:"drawToContext",value:function(n,i,a,o,s){this.render(n,i.parsedStyle,i)}}],[{key:"renderFull",value:function(n,i,a,o){n.drawImage(o.image,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}}])}(sv),n3=function(t){function r(){return Z(this,r),At(this,r,arguments)}return Et(r,t),K(r,[{key:"render",value:function(n,i,a,o,s,l){a.getBounds();var c=i.lineWidth,u=c===void 0?1:c,f=i.textAlign,d=f===void 0?"start":f,h=i.textBaseline,p=h===void 0?"alphabetic":h,v=i.lineJoin,g=v===void 0?"miter":v,y=i.miterLimit,m=y===void 0?10:y,b=i.letterSpacing,x=b===void 0?0:b,O=i.stroke,w=i.fill,_=i.fillRule,S=i.fillOpacity,k=S===void 0?1:S,E=i.strokeOpacity,A=E===void 0?1:E,T=i.opacity,P=T===void 0?1:T,N=i.metrics,I=i.x,R=I===void 0?0:I,C=i.y,L=C===void 0?0:C,M=i.dx,j=i.dy,F=i.shadowColor,$=i.shadowBlur,B=i.textDecorationLine,z=N.font,W=N.lines,Y=N.height,V=N.lineHeight,G=N.lineMetrics;n.font=z,n.lineWidth=u,n.textAlign=d==="middle"?"center":d;var q=p;q==="alphabetic"&&(q="bottom"),n.lineJoin=g,gt(m)||(n.miterLimit=m);var Q=L;p==="middle"?Q+=-Y/2-V/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?Q+=-Y:(p==="top"||p==="hanging")&&(Q+=-V);var nt=R+(M||0);Q+=j||0,W.length===1&&(q==="bottom"?(q="middle",Q-=.5*Y):q==="top"&&(q="middle",Q+=.5*Y)),n.textBaseline=q;var et=!gt(F)&&$>0;wc(a,n,et);for(var at=0;at<W.length;at++){var lt=u/2+nt;Q+=V,!gt(O)&&!O.isNone&&u&&this.drawLetterSpacing(n,a,W[at],G[at],d,lt,Q,x,w,_,k,O,A,P,!0,o,s,l),gt(w)||this.drawLetterSpacing(n,a,W[at],G[at],d,lt,Q,x,w,_,k,O,A,P,!1,o,s,l)}B&&B!=="none"&&this.drawTextDecorations(n,i,a,W,V,nt,L+(j||0),o,s,l)}},{key:"drawLetterSpacing",value:function(n,i,a,o,s,l,c,u,f,d,h,p,v,g,y,m,b,x){if(u===0){y?this.strokeText(n,i,a,l,c,p,v,m,b,x):this.fillText(n,i,a,l,c,f,d,h,g,m,b,x);return}var O=n.textAlign;n.textAlign="left";var w=l;s==="center"||s==="middle"?w=l-o.width/2:(s==="right"||s==="end")&&(w=l-o.width);for(var _=Array.from(a),S=n.measureText(a).width,k=0,E=0;E<_.length;++E){var A=_[E];y?this.strokeText(n,i,A,w,c,p,v,m,b,x):this.fillText(n,i,A,w,c,f,d,h,g,m,b,x),k=n.measureText(a.substring(E+1)).width,w+=S-k+u,S=k}n.textAlign=O}},{key:"fillText",value:function(n,i,a,o,s,l,c,u,f,d,h,p){ek(n,i,l,c,d,h,p,this.imagePool,!0);var v,g=!gt(u)&&u!==1;g&&(v=n.globalAlpha,n.globalAlpha=u*f),n.fillText(a,o,s),g&&(n.globalAlpha=v)}},{key:"strokeText",value:function(n,i,a,o,s,l,c,u,f,d){Id(n,i,l,u,f,d,this.imagePool,!0);var h,p=!gt(c)&&c!==1;p&&(h=n.globalAlpha,n.globalAlpha=c),n.strokeText(a,o,s),p&&(n.globalAlpha=h)}},{key:"drawTextDecorations",value:function(n,i,a,o,s,l,c,u,f,d){var h=i.textDecorationLine,p=i.textDecorationColor,v=i.textDecorationStyle,g=i.textDecorationThickness,y=g===void 0?1:g,m=i.textAlign,b=m===void 0?"start":m,x=i.lineWidth,O=x===void 0?1:x,w=i.metrics;if(!(!h||h==="none")){var _=w.lineMetrics,S=h.split(" ");switch(n.lineWidth=y,p&&(n.strokeStyle="rgba(".concat(p.r,", ").concat(p.g,", ").concat(p.b,", ").concat(p.alpha,")")),v){case"dashed":n.setLineDash([5,5]);break;case"dotted":n.setLineDash([2,2]);break;case"wavy":n.setLineDash([]);break;default:n.setLineDash([]);break}var k=c,E=i.textBaseline,A=E===void 0?"alphabetic":E;A==="middle"?k+=-w.height/2-s/2:A==="bottom"||A==="alphabetic"||A==="ideographic"?k+=-w.height:(A==="top"||A==="hanging")&&(k+=-s);for(var T=0;T<o.length;T++){k+=s;var P=_[T];if(P){var N=O/2,I=l,R=l+P.width;b==="center"||b==="middle"?(I=l-P.width/2,R=l+P.width/2):(b==="right"||b==="end")&&(I=l-P.width,R=l),I+=N,R+=N;var C=Qr(S),L;try{for(C.s();!(L=C.n()).done;){var M=L.value,j=k;switch(M){case"underline":j+=2;break;case"overline":j-=s-2;break;case"line-through":j-=s/2;break;default:continue}v==="wavy"?this.drawWavyLine(n,I,R,j):(n.beginPath(),n.moveTo(I,j),n.lineTo(R,j),n.stroke())}}catch(F){C.e(F)}finally{C.f()}}}n.setLineDash([])}}},{key:"drawWavyLine",value:function(n,i,a,o){var s=2,l=10,c=Math.floor((a-i)/l);n.beginPath(),n.moveTo(i,o);for(var u=0;u<c;u++){var f=i+u*l+l/4,d=o+s,h=i+u*l+l/2,p=o;n.quadraticCurveTo(f,d,h,p);var v=i+u*l+l*3/4,g=o-s,y=i+(u+1)*l,m=o;n.quadraticCurveTo(v,g,y,m)}n.stroke()}},{key:"drawToContext",value:function(n,i,a,o,s){this.render(n,i.parsedStyle,i,i.ownerDocument.defaultView.context,o,s)}}])}(sv),r3=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Z(this,r),e=At(this,r),e.name="canvas-renderer",e.options=n,e}return Et(r,t),K(r,[{key:"init",value:function(){var n,i=Ot({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),a=this.context.imagePool,o=new sv(a),s=(n={},ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(n,U.CIRCLE,o),U.ELLIPSE,o),U.RECT,o),U.IMAGE,new e3(a)),U.TEXT,new n3(a)),U.LINE,o),U.POLYLINE,o),U.POLYGON,o),U.PATH,o),U.GROUP,void 0),ct(ct(ct(n,U.HTML,void 0),U.MESH,void 0),U.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=s,this.context.styleRendererFactory=s,this.addRenderingPlugin(new tk(i))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(Oi),i3=Nt(),a3=Nt(),o3=Nt(),s3=Zt(),nk=function(){function t(){var r=this;Z(this,t),this.isHit=function(e,n,i,a){var o=r.context.pointInPathPickerFactory[e.nodeName];if(o){var s=ur(s3,i),l=ke(a3,nn(o3,n[0],n[1],0),s);if(o(e,new Qe(l[0],l[1]),a,r.isPointInPath,r.context,r.runtime))return!0}return!1},this.isPointInPath=function(e,n){var i=r.runtime.offscreenCanvasCreator.getOrCreateContext(r.context.config.offscreenCanvas),a=r.context.pathGeneratorFactory[e.nodeName];return a&&(i.beginPath(),a(i,e.parsedStyle),i.closePath()),i.isPointInPath(n.x,n.y)}}return K(t,[{key:"apply",value:function(e,n){var i,a=this,o=e.renderingService,s=e.renderingContext;this.context=e,this.runtime=n;var l=(i=s.root)===null||i===void 0?void 0:i.ownerDocument;o.hooks.pick.tapPromise(t.tag,function(){var c=fi(rn().mark(function u(f){return rn().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",a.pick(l,f));case 1:case"end":return d.stop()}},u)}));return function(u){return c.apply(this,arguments)}}()),o.hooks.pickSync.tap(t.tag,function(c){return a.pick(l,c)})}},{key:"pick",value:function(e,n){var i=n.topmost,a=n.position,o=a.x,s=a.y,l=nn(i3,o,s,0),c=e.elementsFromBBox(l[0],l[1],l[0],l[1]),u=[],f=Qr(c),d;try{for(f.s();!(d=f.n()).done;){var h=d.value,p=h.getWorldTransform(),v=this.isHit(h,l,p,!1);if(v){var g=cO(h);if(g){var y=g.parsedStyle.clipPath,m=this.isHit(y,l,y.getWorldTransform(),!0);if(m){if(i)return n.picked=[h],n;u.push(h)}}else{if(i)return n.picked=[h],n;u.push(h)}}}}catch(b){f.e(b)}finally{f.f()}return n.picked=u,n}}])}();nk.tag="CanvasPicker";function l3(t,r,e){var n=t.parsedStyle,i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.r,c=n.fill,u=n.stroke,f=n.lineWidth,d=f===void 0?1:f,h=n.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=n.pointerEvents,g=v===void 0?"auto":v,y=(d+p)/2,m=Dr(a,s,r.x,r.y),b=sa(g,c,u),x=_t(b,2),O=x[0],w=x[1];return O&&w||e?m<=l+y:O?m<=l:w?m>=l-y&&m<=l+y:!1}function _l(t,r,e,n){return t/(e*e)+r/(n*n)}function c3(t,r,e){var n=t.parsedStyle,i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.rx,c=n.ry,u=n.fill,f=n.stroke,d=n.lineWidth,h=d===void 0?1:d,p=n.increasedLineWidthForHitTesting,v=p===void 0?0:p,g=n.pointerEvents,y=g===void 0?"auto":g,m=r.x,b=r.y,x=sa(y,u,f),O=_t(x,2),w=O[0],_=O[1],S=(h+v)/2,k=(m-a)*(m-a),E=(b-s)*(b-s);return w&&_||e?_l(k,E,l+S,c+S)<=1:w?_l(k,E,l,c)<=1:_?_l(k,E,l-S,c-S)>=1&&_l(k,E,l+S,c+S)<=1:!1}function Gi(t,r,e,n,i,a){return i>=t&&i<=t+e&&a>=r&&a<=r+n}function u3(t,r,e,n,i,a,o){var s=i/2;return Gi(t-s,r-s,e,i,a,o)||Gi(t+e-s,r-s,i,n,a,o)||Gi(t+s,r+n-s,e,i,a,o)||Gi(t-s,r+s,i,n,a,o)}function Sl(t,r,e,n,i,a,o,s){var l=(Math.atan2(s-r,o-t)+Math.PI*2)%(Math.PI*2),c={x:t+e*Math.cos(l),y:r+e*Math.sin(l)};return Dr(c.x,c.y,o,s)<=a/2}function ri(t,r,e,n,i,a,o){var s=Math.min(t,e),l=Math.max(t,e),c=Math.min(r,n),u=Math.max(r,n),f=i/2;return a>=s-f&&a<=l+f&&o>=c-f&&o<=u+f?yN(t,r,e,n,a,o)<=i/2:!1}function rk(t,r,e,n,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],l=t[o][1],c=t[o+1][0],u=t[o+1][1];if(ri(s,l,c,u,r,e,n))return!0}if(i){var f=t[0],d=t[a-1];if(ri(f[0],f[1],d[0],d[1],r,e,n))return!0}return!1}var f3=1e-6;function Sf(t){return Math.abs(t)<f3?0:t<0?-1:1}function d3(t,r,e){return(e[0]-t[0])*(r[1]-t[1])===(r[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],r[0])<=e[0]&&e[0]<=Math.max(t[0],r[0])&&Math.min(t[1],r[1])<=e[1]&&e[1]<=Math.max(t[1],r[1])}function ik(t,r,e){var n=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(d3(o,s,[r,e]))return!0;Sf(o[1]-e)>0!=Sf(s[1]-e)>0&&Sf(r-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function Jm(t,r,e){for(var n=!1,i=0;i<t.length;i++){var a=t[i];if(n=ik(a,r,e),n)break}return n}function h3(t,r,e){var n=t.parsedStyle,i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.lineWidth,c=l===void 0?1:l,u=n.increasedLineWidthForHitTesting,f=u===void 0?0:u,d=n.pointerEvents,h=d===void 0?"auto":d,p=n.fill,v=n.stroke,g=sa(h,p,v),y=_t(g,2),m=y[1];return!m&&!e||!c?!1:ri(i,a,o,s,c+f,r.x,r.y)}function p3(t,r,e,n,i){for(var a=!1,o=r/2,s=0;s<t.length;s++){var l=t[s],c=l.currentPoint,u=l.params,f=l.prePoint,d=l.box;if(!(d&&!Gi(d.x-o,d.y-o,d.width+r,d.height+r,e,n)))switch(l.command){case"L":case"Z":if(a=ri(f[0],f[1],c[0],c[1],r,e,n),a)return!0;break;case"Q":var h=SN(f[0],f[1],u[1],u[2],u[3],u[4],e,n);if(a=h<=r/2,a)return!0;break;case"C":var p=_g(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],e,n,i);if(a=p<=r/2,a)return!0;break;case"A":l.cubicParams||(l.cubicParams=kh(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0));for(var v=l.cubicParams,g=f,y=0;y<v.length;y+=6){var m=_g(g[0],g[1],v[y],v[y+1],v[y+2],v[y+3],v[y+4],v[y+5],e,n,i);if(g=[v[y+4],v[y+5]],a=m<=r/2,a)return!0}break}}return a}function v3(t,r,e,n,i,a){var o=t.parsedStyle,s=o.lineWidth,l=s===void 0?1:s,c=o.increasedLineWidthForHitTesting,u=c===void 0?0:c,f=o.stroke,d=o.fill,h=o.d,p=o.pointerEvents,v=p===void 0?"auto":p,g=h.segments,y=h.hasArc,m=h.polylines,b=h.polygons,x=sa(v,b?.length&&d,f),O=_t(x,2),w=O[0],_=O[1],S=hd(t),k=!1;return w||e?(y?k=n(t,r):k=Jm(b,r.x,r.y)||Jm(m,r.x,r.y),k):((_||e)&&(k=p3(g,l+u,r.x,r.y,S)),k)}function g3(t,r,e){var n=t.parsedStyle,i=n.stroke,a=n.fill,o=n.lineWidth,s=o===void 0?1:o,l=n.increasedLineWidthForHitTesting,c=l===void 0?0:l,u=n.points,f=n.pointerEvents,d=f===void 0?"auto":f,h=sa(d,a,i),p=_t(h,2),v=p[0],g=p[1],y=!1;return(g||e)&&(y=rk(u.points,s+c,r.x,r.y,!0)),!y&&(v||e)&&(y=ik(u.points,r.x,r.y)),y}function y3(t,r,e){var n=t.parsedStyle,i=n.lineWidth,a=i===void 0?1:i,o=n.increasedLineWidthForHitTesting,s=o===void 0?0:o,l=n.points,c=n.pointerEvents,u=c===void 0?"auto":c,f=n.fill,d=n.stroke,h=sa(u,f,d),p=_t(h,2),v=p[1];return!v&&!e||!a?!1:rk(l.points,a+s,r.x,r.y,!1)}function m3(t,r,e,n,i){var a=t.parsedStyle,o=a.radius,s=a.fill,l=a.stroke,c=a.lineWidth,u=c===void 0?1:c,f=a.increasedLineWidthForHitTesting,d=f===void 0?0:f,h=a.x,p=h===void 0?0:h,v=a.y,g=v===void 0?0:v,y=a.width,m=a.height,b=a.pointerEvents,x=b===void 0?"auto":b,O=sa(x,s,l),w=_t(O,2),_=w[0],S=w[1],k=o&&o.some(function(P){return P!==0}),E=u+d;if(k){var T=!1;return(S||e)&&(T=b3(p,g,y,m,o.map(function(P){return Pe(P,0,Math.min(Math.abs(y)/2,Math.abs(m)/2))}),E,r.x,r.y)),!T&&(_||e)&&(T=n(t,r)),T}else{var A=E/2;if(_&&S||e)return Gi(p-A,g-A,y+A,m+A,r.x,r.y);if(_)return Gi(p,g,y,m,r.x,r.y);if(S)return u3(p,g,y,m,E,r.x,r.y)}return!1}function b3(t,r,e,n,i,a,o,s){var l=_t(i,4),c=l[0],u=l[1],f=l[2],d=l[3];return ri(t+c,r,t+e-u,r,a,o,s)||ri(t+e,r+u,t+e,r+n-f,a,o,s)||ri(t+e-f,r+n,t+d,r+n,a,o,s)||ri(t,r+n-d,t,r+c,a,o,s)||Sl(t+e-u,r+u,u,1.5*Math.PI,2*Math.PI,a,o,s)||Sl(t+e-f,r+n-f,f,0,.5*Math.PI,a,o,s)||Sl(t+d,r+n-d,d,.5*Math.PI,Math.PI,a,o,s)||Sl(t+c,r+c,c,Math.PI,1.5*Math.PI,a,o,s)}function x3(t,r,e,n,i,a){var o=t.parsedStyle,s=o.pointerEvents,l=s===void 0?"auto":s,c=o.x,u=c===void 0?0:c,f=o.y,d=f===void 0?0:f,h=o.width,p=o.height;if(l==="non-transparent-pixel"){var v=i.config.offscreenCanvas,g=a.offscreenCanvasCreator.getOrCreateCanvas(v),y=a.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});g.width=h,g.height=p,i.defaultStyleRendererFactory[U.IMAGE].render(y,Ot(Ot({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0);var m=y.getImageData(r.x-u,r.y-d,1,1).data;return m.every(function(b){return b!==0})}return!0}function O3(t,r,e,n){var i=t.getGeometryBounds();return r.x>=i.min[0]&&r.y>=i.min[1]&&r.x<=i.max[0]&&r.y<=i.max[1]}var w3=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.name="canvas-picker",e}return Et(r,t),K(r,[{key:"init",value:function(){var n,i=(n={},ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(n,U.CIRCLE,l3),U.ELLIPSE,c3),U.RECT,m3),U.LINE,h3),U.POLYLINE,y3),U.POLYGON,g3),U.PATH,v3),U.TEXT,O3),U.GROUP,null),U.IMAGE,x3),ct(ct(n,U.HTML,null),U.MESH,null));this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new nk)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(Oi);function _3(t,r){var e=r.cx,n=e===void 0?0:e,i=r.cy,a=i===void 0?0:i,o=r.r;t.arc(n,a,o,0,Math.PI*2,!1)}function S3(t,r){var e=r.cx,n=e===void 0?0:e,i=r.cy,a=i===void 0?0:i,o=r.rx,s=r.ry;if(t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,c=o>s?1:o/s,u=o>s?s/o:1;t.save(),t.scale(c,u),t.arc(n,a,l,0,Math.PI*2)}}function k3(t,r){var e=r.x1,n=r.y1,i=r.x2,a=r.y2,o=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,u=0,f=0,d=0,h=0,p=0,v,g;o&&zt(o)&&l&&(v=i-e,g=a-n,p=Math.atan2(g,v),u=Math.cos(p)*(l||0),f=Math.sin(p)*(l||0)),s&&zt(s)&&c&&(v=e-i,g=n-a,p=Math.atan2(g,v),d=Math.cos(p)*(c||0),h=Math.sin(p)*(c||0)),t.moveTo(e+u,n+f),t.lineTo(i+d,a+h)}function E3(t,r){var e=r.markerStart,n=r.markerEnd,i=r.markerStartOffset,a=r.markerEndOffset,o=r.d,s=o.absolutePath,l=o.segments,c=0,u=0,f=0,d=0,h=0,p,v;if(e&&zt(e)&&i){var g=e.parentNode.getStartTangent(),y=_t(g,2),m=y[0],b=y[1];p=m[0]-b[0],v=m[1]-b[1],h=Math.atan2(v,p),c=Math.cos(h)*(i||0),u=Math.sin(h)*(i||0)}if(n&&zt(n)&&a){var x=n.parentNode.getEndTangent(),O=_t(x,2),w=O[0],_=O[1];p=w[0]-_[0],v=w[1]-_[1],h=Math.atan2(v,p),f=Math.cos(h)*(a||0),d=Math.sin(h)*(a||0)}for(var S=0;S<s.length;S++){var k=s[S],E=k[0],A=s[S+1],T=S===0&&(c!==0||u!==0),P=(S===s.length-1||A&&(A[0]==="M"||A[0]==="Z"))&&f!==0&&d!==0,N=T?[c,u]:[0,0],I=_t(N,2),R=I[0],C=I[1],L=P?[f,d]:[0,0],M=_t(L,2),j=M[0],F=M[1];switch(E){case"M":t.moveTo(k[1]+R,k[2]+C);break;case"L":t.lineTo(k[1]+j,k[2]+F);break;case"Q":t.quadraticCurveTo(k[1],k[2],k[3]+j,k[4]+F);break;case"C":t.bezierCurveTo(k[1],k[2],k[3],k[4],k[5]+j,k[6]+F);break;case"A":{var $=l[S].arcParams,B=$.cx,z=$.cy,W=$.rx,Y=$.ry,V=$.startAngle,G=$.endAngle,q=$.xRotation,Q=$.sweepFlag;if(t.ellipse)t.ellipse(B,z,W,Y,q,V,G,!!(1-Q));else{var nt=W>Y?W:Y,et=W>Y?1:W/Y,at=W>Y?Y/W:1;t.translate(B,z),t.rotate(q),t.scale(et,at),t.arc(0,0,nt,V,G,!!(1-Q)),t.scale(1/et,1/at),t.rotate(-q),t.translate(-B,-z)}P&&t.lineTo(k[6]+f,k[7]+d);break}case"Z":t.closePath();break}}}function A3(t,r){var e=r.markerStart,n=r.markerEnd,i=r.markerStartOffset,a=r.markerEndOffset,o=r.points.points,s=o.length,l=o[0][0],c=o[0][1],u=o[s-1][0],f=o[s-1][1],d=0,h=0,p=0,v=0,g=0,y,m;e&&zt(e)&&i&&(y=o[1][0]-o[0][0],m=o[1][1]-o[0][1],g=Math.atan2(m,y),d=Math.cos(g)*(i||0),h=Math.sin(g)*(i||0)),n&&zt(n)&&a&&(y=o[s-1][0]-o[0][0],m=o[s-1][1]-o[0][1],g=Math.atan2(m,y),p=Math.cos(g)*(a||0),v=Math.sin(g)*(a||0)),t.moveTo(l+(d||p),c+(h||v));for(var b=1;b<s-1;b++){var x=o[b];t.lineTo(x[0],x[1])}t.lineTo(u,f)}function T3(t,r){var e=r.markerStart,n=r.markerEnd,i=r.markerStartOffset,a=r.markerEndOffset,o=r.points.points,s=o.length,l=o[0][0],c=o[0][1],u=o[s-1][0],f=o[s-1][1],d=0,h=0,p=0,v=0,g=0,y,m;e&&zt(e)&&i&&(y=o[1][0]-o[0][0],m=o[1][1]-o[0][1],g=Math.atan2(m,y),d=Math.cos(g)*(i||0),h=Math.sin(g)*(i||0)),n&&zt(n)&&a&&(y=o[s-2][0]-o[s-1][0],m=o[s-2][1]-o[s-1][1],g=Math.atan2(m,y),p=Math.cos(g)*(a||0),v=Math.sin(g)*(a||0)),t.moveTo(l+d,c+h);for(var b=1;b<s-1;b++){var x=o[b];t.lineTo(x[0],x[1])}t.lineTo(u+p,f+v)}function P3(t,r){var e=r.x,n=e===void 0?0:e,i=r.y,a=i===void 0?0:i,o=r.radius,s=r.width,l=r.height,c=s,u=l,f=o&&o.some(function(O){return O!==0});if(!f)t.rect(n,a,c,u);else{var d=s>0?1:-1,h=l>0?1:-1,p=d+h===0,v=o.map(function(O){return Pe(O,0,Math.min(Math.abs(c)/2,Math.abs(u)/2))}),g=_t(v,4),y=g[0],m=g[1],b=g[2],x=g[3];t.moveTo(d*y+n,a),t.lineTo(c-d*m+n,a),m!==0&&t.arc(c-d*m+n,h*m+a,m,-h*Math.PI/2,d>0?0:Math.PI,p),t.lineTo(c+n,u-h*b+a),b!==0&&t.arc(c-d*b+n,u-h*b+a,b,d>0?0:Math.PI,h>0?Math.PI/2:1.5*Math.PI,p),t.lineTo(d*x+n,u+a),x!==0&&t.arc(d*x+n,u-h*x+a,x,h>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,p),t.lineTo(n,h*y+a),y!==0&&t.arc(d*y+n,h*y+a,y,d>0?Math.PI:0,h>0?Math.PI*1.5:Math.PI/2,p)}}var M3=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.name="canvas-path-generator",e}return Et(r,t),K(r,[{key:"init",value:function(){var n,i=(n={},ct(ct(ct(ct(ct(ct(ct(ct(ct(ct(n,U.CIRCLE,_3),U.ELLIPSE,S3),U.RECT,P3),U.LINE,k3),U.POLYLINE,T3),U.POLYGON,A3),U.PATH,E3),U.TEXT,void 0),U.GROUP,void 0),U.IMAGE,void 0),ct(ct(ct(n,U.HTML,void 0),U.MESH,void 0),U.FRAGMENT,void 0));this.context.pathGeneratorFactory=i}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(Oi),C3=function(){function t(r){Z(this,t),this.renderingContext=r.renderingContext,this.canvasConfig=r.config}return K(t,[{key:"init",value:function(){var e=this.canvasConfig,n=e.container,i=e.canvas;if(i)this.$canvas=i,n&&i.parentElement!==n&&n.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=pe(n)?document.getElementById(n):n,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(e,n){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*e,this.$canvas.height=this.dpr*n,NI(this.$canvas,e,n)),this.renderingContext.renderReasons.add(La.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(e){this.$container&&this.$container.style&&(this.$container.style.cursor=e)}},{key:"toDataURL",value:function(){var r=fi(rn().mark(function n(){var i,a,o,s=arguments;return rn().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=s.length>0&&s[0]!==void 0?s[0]:{},a=i.type,o=i.encoderOptions,l.abrupt("return",this.context.canvas.toDataURL(a,o));case 1:case"end":return l.stop()}},n,this)}));function e(){return r.apply(this,arguments)}return e}()}])}(),L3=function(t){function r(){var e;Z(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=At(this,r,[].concat(i)),e.name="canvas-context-register",e}return Et(r,t),K(r,[{key:"init",value:function(){this.context.ContextService=C3}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(Oi),ak=function(t){function r(e){var n;return Z(this,r),n=At(this,r,[e]),n.registerPlugin(new L3),n.registerPlugin(new cD.Plugin),n.registerPlugin(new M3),n.registerPlugin(new r3),n.registerPlugin(new pD.Plugin),n.registerPlugin(new w3),n.registerPlugin(new dD.Plugin),n}return Et(r,t),K(r)}(kN);/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.1.1
 * @date 12/24/2025, 11:56:44 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var ok=function(){function t(r){Z(this,t),this.dragndropPluginOptions=r}return K(t,[{key:"apply",value:function(e){var n=this,i=e.renderingService,a=e.renderingContext,o=a.root.ownerDocument,s=o.defaultView,l=function(u){var f=u.target,d=f===o,h=d&&n.dragndropPluginOptions.isDocumentDraggable?o:f.closest&&f.closest("[draggable=true]");if(h){var p=!1,v=u.timeStamp,g=[u.clientX,u.clientY],y=null,m=[u.clientX,u.clientY],b=function(){var O=fi(rn().mark(function w(_){var S,k,E,A,T,P;return rn().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(p){N.next=2;break}if(S=_.timeStamp-v,k=hn([_.clientX,_.clientY],g),!(S<=n.dragndropPluginOptions.dragstartTimeThreshold||k<=n.dragndropPluginOptions.dragstartDistanceThreshold)){N.next=1;break}return N.abrupt("return");case 1:_.type="dragstart",h.dispatchEvent(_),p=!0;case 2:if(_.type="drag",_.dx=_.clientX-m[0],_.dy=_.clientY-m[1],h.dispatchEvent(_),m=[_.clientX,_.clientY],d){N.next=4;break}return E=n.dragndropPluginOptions.overlap==="pointer"?[_.canvasX,_.canvasY]:f.getBounds().center,N.next=3,o.elementsFromPoint(E[0],E[1]);case 3:A=N.sent,T=A[A.indexOf(f)+1],P=T?.closest("[droppable=true]")||(n.dragndropPluginOptions.isDocumentDroppable?o:null),y!==P&&(y&&(_.type="dragleave",_.target=y,y.dispatchEvent(_)),P&&(_.type="dragenter",_.target=P,P.dispatchEvent(_)),y=P,y&&(_.type="dragover",_.target=y,y.dispatchEvent(_)));case 4:case"end":return N.stop()}},w)}));return function(_){return O.apply(this,arguments)}}();s.addEventListener("pointermove",b);var x=function(w){if(p){w.detail={preventClick:!0};var _=w.clone();y&&(_.type="drop",_.target=y,y.dispatchEvent(_)),_.type="dragend",h.dispatchEvent(_),p=!1}s.removeEventListener("pointermove",b)};f.addEventListener("pointerup",x,{once:!0}),f.addEventListener("pointerupoutside",x,{once:!0})}};i.hooks.init.tap(t.tag,function(){s.addEventListener("pointerdown",l)}),i.hooks.destroy.tap(t.tag,function(){s.removeEventListener("pointerdown",l)})}}])}();ok.tag="Dragndrop";var sk=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Z(this,r),e=At(this,r),e.name="dragndrop",e.options=n,e}return Et(r,t),K(r,[{key:"init",value:function(){this.addRenderingPlugin(new ok(Ot({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)}}])}(Oi),N3="*",lv=function(){function t(){this._events={}}return t.prototype.on=function(r,e,n){return this._events[r]||(this._events[r]=[]),this._events[r].push({callback:e,once:!!n}),this},t.prototype.once=function(r,e){return this.on(r,e,!0)},t.prototype.emit=function(r){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[r]||[],o=this._events[N3]||[],s=function(l){for(var c=l.length,u=0;u<c;u++)if(l[u]){var f=l[u],d=f.callback,h=f.once;h&&(l.splice(u,1),l.length===0&&delete e._events[r],c--,u--),d.apply(e,n)}};s(a),s(o)},t.prototype.off=function(r,e){if(!r)this._events={};else if(!e)delete this._events[r];else{for(var n=this._events[r]||[],i=n.length,a=0;a<i;a++)n[a].callback===e&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[r]}return this},t.prototype.getEvents=function(){return this._events},t}();const Vt={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"},R3={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};class We extends Error{constructor(r,e,n){super(r),this.position=e,this.token=n,this.name="ExpressionError"}}var kt;(function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.NULL=3]="NULL",t[t.IDENTIFIER=4]="IDENTIFIER",t[t.OPERATOR=5]="OPERATOR",t[t.FUNCTION=6]="FUNCTION",t[t.DOT=7]="DOT",t[t.BRACKET_LEFT=8]="BRACKET_LEFT",t[t.BRACKET_RIGHT=9]="BRACKET_RIGHT",t[t.PAREN_LEFT=10]="PAREN_LEFT",t[t.PAREN_RIGHT=11]="PAREN_RIGHT",t[t.COMMA=12]="COMMA",t[t.QUESTION=13]="QUESTION",t[t.COLON=14]="COLON",t[t.DOLLAR=15]="DOLLAR"})(kt||(kt={}));const I3=new Set([32,9,10,13]),j3=new Set([43,45,42,47,37,33,38,124,61,60,62]),D3=new Map([["true",kt.BOOLEAN],["false",kt.BOOLEAN],["null",kt.NULL]]),kf=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),$3=new Map([[46,kt.DOT],[91,kt.BRACKET_LEFT],[93,kt.BRACKET_RIGHT],[40,kt.PAREN_LEFT],[41,kt.PAREN_RIGHT],[44,kt.COMMA],[63,kt.QUESTION],[58,kt.COLON],[36,kt.DOLLAR]]),lk=new Map;for(const[t,r]of $3.entries())lk.set(t,{type:r,value:String.fromCharCode(t)});function ko(t){return t>=48&&t<=57}function jd(t){return t>=97&&t<=122||t>=65&&t<=90||t===95}function t0(t){return jd(t)||ko(t)}function F3(t){return j3.has(t)}var Se;(function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"})(Se||(Se={}));const B3=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),z3={type:Se.Literal,value:null},W3={type:Se.Literal,value:!0},G3={type:Se.Literal,value:!1},H3=t=>{let r=0;const e=t.length,n=()=>r>=e?null:t[r],i=()=>t[r++],a=f=>{const d=n();return d!==null&&d.type===f},o=f=>f.type===kt.OPERATOR?B3.get(f.value)||-1:f.type===kt.DOT||f.type===kt.BRACKET_LEFT?9:f.type===kt.QUESTION?1:-1,s=f=>{let d,h;if(i().type===kt.DOT){if(!a(kt.IDENTIFIER)){const v=n();throw new We("Expected property name",r,v?v.value:"<end of input>")}const p=i();d={type:Se.Identifier,name:p.value},h=!1}else{if(d=c(0),!a(kt.BRACKET_RIGHT)){const p=n();throw new We("Expected closing bracket",r,p?p.value:"<end of input>")}i(),h=!0}return{type:Se.MemberExpression,object:f,property:d,computed:h}},l=()=>{const f=n();if(!f)throw new We("Unexpected end of input",r,"<end of input>");if(f.type===kt.OPERATOR&&(f.value==="!"||f.value==="-")){i();const d=l();return{type:Se.UnaryExpression,operator:f.value,argument:d,prefix:!0}}switch(f.type){case kt.NUMBER:return i(),{type:Se.Literal,value:Number(f.value)};case kt.STRING:return i(),{type:Se.Literal,value:f.value};case kt.BOOLEAN:return i(),f.value==="true"?W3:G3;case kt.NULL:return i(),z3;case kt.IDENTIFIER:return i(),{type:Se.Identifier,name:f.value};case kt.FUNCTION:return(()=>{const d=i(),h=[];if(!a(kt.PAREN_LEFT)){const p=n();throw new We("Expected opening parenthesis after function name",r,p?p.value:"<end of input>")}for(i();;){if(a(kt.PAREN_RIGHT)){i();break}if(!n()){const v=n();throw new We("Expected closing parenthesis",r,v?v.value:"<end of input>")}if(h.length>0){if(!a(kt.COMMA)){const v=n();throw new We("Expected comma between function arguments",r,v?v.value:"<end of input>")}i()}const p=c(0);h.push(p)}return{type:Se.CallExpression,callee:{type:Se.Identifier,name:d.value},arguments:h}})();case kt.PAREN_LEFT:{i();const d=c(0);if(!a(kt.PAREN_RIGHT)){const h=n();throw new We("Expected closing parenthesis",r,h?h.value:"<end of input>")}return i(),d}default:throw new We(`Unexpected token: ${f.type}`,r,f.value)}},c=(f=0)=>{let d=l();for(;r<e;){const h=t[r],p=o(h);if(p<=f)break;if(h.type!==kt.QUESTION)if(h.type!==kt.OPERATOR){if(h.type!==kt.DOT&&h.type!==kt.BRACKET_LEFT)break;d=s(d)}else{i();const v=c(p);d={type:Se.BinaryExpression,operator:h.value,left:d,right:v}}else{i();const v=c(0);if(!a(kt.COLON)){const y=n();throw new We("Expected : in conditional expression",r,y?y.value:"<end of input>")}i();const g=c(0);d={type:Se.ConditionalExpression,test:d,consequent:v,alternate:g}}}return d},u=c();return{type:Se.Program,body:u}},Y3=(t,r,e)=>{let n=r;e&&(n={...r,context:{...r.context,...e}});const i=a=>{switch(a.type){case Se.Literal:return(o=>o.value)(a);case Se.Identifier:return(o=>{if(!(o.name in n.context))throw new We(`Undefined variable: ${o.name}`);return n.context[o.name]})(a);case Se.MemberExpression:return(o=>{const s=i(o.object);if(s==null)throw new We("Cannot access property of null or undefined");return s[o.computed?i(o.property):o.property.name]})(a);case Se.CallExpression:return(o=>{const s=n.functions[o.callee.name];if(!s)throw new We(`Undefined function: ${o.callee.name}`);return s(...o.arguments.map(l=>i(l)))})(a);case Se.BinaryExpression:return(o=>{if(o.operator==="&&"){const c=i(o.left);return c&&i(o.right)}if(o.operator==="||")return i(o.left)||i(o.right);const s=i(o.left),l=i(o.right);switch(o.operator){case"+":return s+l;case"-":return s-l;case"*":return s*l;case"/":return s/l;case"%":return s%l;case"===":return s===l;case"!==":return s!==l;case">":return s>l;case">=":return s>=l;case"<":return s<l;case"<=":return s<=l;default:throw new We(`Unknown operator: ${o.operator}`)}})(a);case Se.UnaryExpression:return(o=>{const s=i(o.argument);if(o.prefix)switch(o.operator){case"!":return!s;case"-":if(typeof s!="number")throw new We(`Cannot apply unary - to non-number: ${s}`);return-s;default:throw new We(`Unknown operator: ${o.operator}`)}throw new We(`Postfix operators are not supported: ${o.operator}`)})(a);case Se.ConditionalExpression:return(o=>{const s=i(o.test);return i(s?o.consequent:o.alternate)})(a);default:throw new We(`Evaluation error: Unsupported node type: ${a.type}`)}};return i(t.body)};function V3(t){const r=(i=>{const a=i,o=a.length,s=new Array(Math.ceil(o/3));let l=0,c=0;function u(g){const y=c+1;c++;let m="",b=!1;for(;c<o;){const x=a.charCodeAt(c);if(x===g)return b||(m=a.substring(y,c)),c++,{type:kt.STRING,value:m};x===92?(b||(m=a.substring(y,c),b=!0),c++,m+=a[c]):b&&(m+=a[c]),c++}throw new We(`Unterminated string starting with ${String.fromCharCode(g)}`,c,a.substring(Math.max(0,c-10),c))}function f(){const g=c;for(a.charCodeAt(c)===45&&c++;c<o&&ko(a.charCodeAt(c));)c++;if(c<o&&a.charCodeAt(c)===46)for(c++;c<o&&ko(a.charCodeAt(c));)c++;const y=a.slice(g,c);return{type:kt.NUMBER,value:y}}function d(){c++;const g=c;if(c<o&&jd(a.charCodeAt(c)))for(c++;c<o&&t0(a.charCodeAt(c));)c++;const y=a.slice(g,c);return{type:kt.FUNCTION,value:y}}function h(){const g=c++;for(;c<o&&t0(a.charCodeAt(c));)c++;const y=a.slice(g,c),m=D3.get(y);return m?{type:m,value:y}:{type:kt.IDENTIFIER,value:y}}function p(){if(c+2<o){const y=a.substring(c,c+3);if(kf.has(y))return c+=3,{type:kt.OPERATOR,value:y}}if(c+1<o){const y=a.substring(c,c+2);if(kf.has(y))return c+=2,{type:kt.OPERATOR,value:y}}const g=a[c];if(kf.has(g))return c++,{type:kt.OPERATOR,value:g};throw new We(`Unknown operator at position ${c}: ${a.substring(c,c+1)}`,c,a.substring(Math.max(0,c-10),c))}for(;c<o;){const g=a.charCodeAt(c);if(v=g,I3.has(v)){c++;continue}const y=lk.get(g);if(y)s[l++]=y,c++;else if(g!==34&&g!==39)if(ko(g)||g===45&&c+1<o&&ko(a.charCodeAt(c+1)))s[l++]=f();else if(g!==64)if(jd(g))s[l++]=h();else{if(!F3(g))throw new We(`Unexpected character: ${a[c]}`,c,a.substring(Math.max(0,c-10),c));s[l++]=p()}else s[l++]=d();else s[l++]=u(g)}var v;return l===s.length?s:s.slice(0,l)})(t),e=H3(r),n=((i={},a={})=>({context:i,functions:a}))({},R3);return(i={})=>Y3(e,n,i)}const U3=["style","encode","labels","children"],X3=A_(t=>{const r=V3(t);return(...e)=>{const n=Array.from({length:e.length},(a,o)=>String.fromCharCode(97+o)),i=Object.fromEntries(e.map((a,o)=>[n[o],a]));return r(Object.assign(Object.assign({},i),{global:Object.assign({},i)}))}},t=>t,128);function Il(t,r=!0){if(Array.isArray(t))return t.map((e,n)=>Il(t[n],r));if(typeof t=="object"&&t)return _2(t,(e,n)=>r&&U3.includes(n)?Il(e,n==="children"):r?e:Il(e,!1));if(typeof t=="string"){const e=t.trim();if(e.startsWith("{")&&e.endsWith("}"))return X3(e.slice(1,-1))}return t}var q3={}.toString,Eu=function(t,r){return q3.call(t)==="[object "+r+"]"};const ck=function(t){return Eu(t,"Function")},uk=function(t){return Array.isArray?Array.isArray(t):Eu(t,"Array")},K3=function(t){var r=typeof t;return t!==null&&r==="object"||r==="function"};function Z3(t,r){if(t){var e;if(uk(t))for(var n=0,i=t.length;n<i&&(e=r(t[n],n),e!==!1);n++);else if(K3(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=r(t[a],a),e===!1))break}}}var Q3=function(t){return typeof t=="object"&&t!==null},e0=function(t){if(!Q3(t)||!Eu(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r};const J3=function(t){return Eu(t,"String")};var tH=Object.values?function(t){return Object.values(t)}:function(t){var r=[];return Z3(t,function(e,n){ck(t)&&n==="prototype"||r.push(e)}),r};const eH=function(t,r){if(!ck(t))throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=r?r.apply(this,n):n[0],o=e.cache;if(o.has(a))return o.get(a);var s=t.apply(this,n);return o.set(a,s),s};return e.cache=new Map,e};var nH=5;function fk(t,r,e,n){e=e||0,n=n||nH;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a!==null&&e0(a)?(e0(t[i])||(t[i]={}),e<n?fk(t[i],a,e+1,n):t[i]=r[i]):uk(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var dk=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var n=0;n<r.length;n+=1)fk(t,r[n]);return t};const cv=function(t){return t};var kl;eH(function(t,r){r===void 0&&(r={});var e=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return kl||(kl=document.createElement("canvas").getContext("2d")),kl.font=[a,o,i,e+"px",n].join(" "),kl.measureText(J3(t)?t:"").width},function(t,r){return r===void 0&&(r={}),XT([t],tH(r)).join("")});function hk(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t?r.reduce(function(n,i){return function(a){return i(n(a))}},t):cv}function pk(t){return t instanceof Float32Array||t instanceof Array}var vk=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},gk=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))};function rH(t){return function(r){for(var e=[],n=0;n<r.length-1;n+=2){var i=[r[n],r[n+1]],a=t(i);e.push.apply(e,gk([],vk(a),!1))}return e}}function iH(t){return function(r){for(var e=[],n=0;n<r.length-1;n+=3){var i=[r[n],r[n+1],r[n+2]],a=t(i);e.push.apply(e,gk([],vk(a),!1))}return e}}function yk(t,r,e){for(;t<r;)t+=Math.PI*2;for(;t>e;)t-=Math.PI*2;return t}var aH=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},oH=function(t,r,e,n,i){var a=aH(t,2),o=a[0],s=a[1],l=hs();return qT(l,[o,s])};function _c(t,...r){return r.reduce((e,n)=>i=>e(n(i)),t)}function Dd(t,r){return r-t?e=>(e-t)/(r-t):e=>.5}function sH(t,r){const e=r<t?r:t,n=t>r?t:r;return i=>Math.min(Math.max(e,i),n)}function lH(t,r,e,n,i){let a=e,o=n||t.length;const s=l=>l;for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>r?o=l:a=l+1}return a}const n0=Math.sqrt(50),r0=Math.sqrt(10),i0=Math.sqrt(2);function jl(t,r,e){const n=(r-t)/Math.max(0,e),i=Math.floor(Math.log(n)/Math.LN10),a=n/10**i;return i>=0?(a>=n0?10:a>=r0?5:a>=i0?2:1)*10**i:-(10**-i)/(a>=n0?10:a>=r0?5:a>=i0?2:1)}const cH=(t,r,e=5)=>{const n=[t,r];let i=0,a=n.length-1,o=n[i],s=n[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=jl(o,s,e),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=jl(o,s,e)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=jl(o,s,e)),l>0?(n[i]=Math.floor(o/l)*l,n[a]=Math.ceil(s/l)*l):l<0&&(n[i]=Math.ceil(o*l)/l,n[a]=Math.floor(s*l)/l),n};function uH(t){return Array.isArray(t)}var fH=function(t){return typeof t=="object"&&t!==null},dH={}.toString,hH=function(t,r){return dH.call(t)==="[object "+r+"]"},a0=function(t){if(!fH(t)||!hH(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r};function pH(t){return t===null}var vH=function(t){return t===void 0},gH=5;function yH(t,r){if(Object.hasOwn)return Object.hasOwn(t,r);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),r)}function mk(t,r,e,n){e=e||0,n=n||gH;for(var i in r)if(yH(r,i)){var a=r[i];a!==null&&a0(a)?(a0(t[i])||(t[i]={}),e<n?mk(t[i],a,e+1,n):t[i]=r[i]):uH(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var o0=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var n=0;n<r.length;n+=1)mk(t,r[n]);return t};const $d=function(t){return t};function s0(t){return!vH(t)&&!pH(t)&&!Number.isNaN(t)}function Ef(t,r,e){let n=e;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(r-t)*6*n:n<1/2?r:n<2/3?t+(r-t)*(2/3-n)*6:t}function mH(t){const r=t[0]/360,e=t[1]/100,n=t[2]/100,i=t[3];if(e===0)return[n*255,n*255,n*255,i];const a=n<.5?n*(1+e):n+e-n*e,o=2*n-a,s=Ef(o,a,r+1/3),l=Ef(o,a,r),c=Ef(o,a,r-1/3);return[s*255,l*255,c*255,i]}function l0(t){const r=hh.get(t);if(!r)return null;const{model:e,value:n}=r;return e==="rgb"?n:e==="hsl"?mH(n):null}const Sc=(t,r)=>e=>t*(1-e)+r*e,bH=(t,r)=>{const e=l0(t),n=l0(r);return e===null||n===null?e?()=>t:()=>r:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=e[u],d=n[u];a[u]=f*(1-i)+d*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},xH=(t,r)=>typeof t=="number"&&typeof r=="number"?Sc(t,r):typeof t=="string"&&typeof r=="string"?bH(t,r):()=>t,OH=(t,r)=>{const e=Sc(t,r);return n=>Math.round(e(n))};function c0({map:t,initKey:r},e){const n=r(e);return t.has(n)?t.get(n):e}function wH({map:t,initKey:r},e){const n=r(e);return t.has(n)?t.get(n):(t.set(n,e),e)}function _H({map:t,initKey:r},e){const n=r(e);return t.has(n)&&(e=t.get(n),t.delete(n)),e}function SH(t){return typeof t=="object"?t.valueOf():t}class u0 extends Map{constructor(r){if(super(),this.map=new Map,this.initKey=SH,r!==null)for(const[e,n]of r)this.set(e,n)}get(r){return super.get(c0({map:this.map,initKey:this.initKey},r))}has(r){return super.has(c0({map:this.map,initKey:this.initKey},r))}set(r,e){return super.set(wH({map:this.map,initKey:this.initKey},r),e)}delete(r){return super.delete(_H({map:this.map,initKey:this.initKey},r))}}let bk=class{constructor(r){this.options=o0({},this.getDefaultOptions()),this.update(r)}getOptions(){return this.options}update(r={}){this.options=o0({},this.options,r),this.rescale(r)}rescale(r){}};const Au=Symbol("defaultUnknown");function f0(t,r,e){for(let n=0;n<r.length;n+=1)t.has(r[n])||t.set(e(r[n]),n)}function d0(t){const{value:r,from:e,to:n,mapper:i,notFoundReturn:a}=t;let o=i.get(r);if(o===void 0){if(a!==Au)return a;o=e.push(r)-1,i.set(r,o)}return n[o%n.length]}function h0(t){return t instanceof Date?r=>`${r}`:typeof t=="object"?r=>JSON.stringify(r):r=>r}class uv extends bk{getDefaultOptions(){return{domain:[],range:[],unknown:Au}}constructor(r){super(r)}map(r){return this.domainIndexMap.size===0&&f0(this.domainIndexMap,this.getDomain(),this.domainKey),d0({value:this.domainKey(r),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(r){return this.rangeIndexMap.size===0&&f0(this.rangeIndexMap,this.getRange(),this.rangeKey),d0({value:this.rangeKey(r),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(r){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=h0(e),this.rangeKey=h0(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!r||r.range)&&this.rangeIndexMap.clear(),(!r||r.domain||r.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new uv(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:r,compare:e}=this.options;return this.sortedDomain=e?[...r].sort(e):r,this.sortedDomain}}function kH(t){const r=Math.min(...t);return t.map(e=>e/r)}function EH(t,r){const e=t.length,n=r-e;return n>0?[...t,...new Array(n).fill(1)]:n<0?t.slice(0,r):t}function AH(t){return Math.round(t*1e12)/1e12}function TH(t){const{domain:r,range:e,paddingOuter:n,paddingInner:i,flex:a,round:o,align:s}=t,l=r.length,c=EH(a,l),[u,f]=e,d=f-u,h=2/l*n+1-1/l*i,p=d/h,v=p*i/l,g=p-l*v,y=kH(c),m=y.reduce((T,P)=>T+P),b=g/m,x=new u0(r.map((T,P)=>{const N=y[P]*b;return[T,o?Math.floor(N):N]})),O=new u0(r.map((T,P)=>{const I=y[P]*b+v;return[T,o?Math.floor(I):I]})),w=Array.from(O.values()).reduce((T,P)=>T+P),S=(d-(w-w/l*i))*s,k=u+S;let E=o?Math.round(k):k;const A=new Array(l);for(let T=0;T<l;T+=1){A[T]=AH(E);const P=r[T];E+=O.get(P)}return{valueBandWidth:x,valueStep:O,adjustedRange:A}}function PH(t){var r;const{domain:e}=t,n=e.length;if(n===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((r=t.flex)===null||r===void 0)&&r.length))return TH(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,d=a[0];const p=a[1]-d,v=o*2,g=n-s;u=p/Math.max(1,v+g),l&&(u=Math.floor(u)),d+=(p-u*(n-s))*c,f=u*(1-s),l&&(d=Math.round(d),f=Math.round(f));const y=new Array(n).fill(0).map((m,b)=>d+b*u);return{valueStep:u,valueBandWidth:f,adjustedRange:y}}class fv extends uv{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:Au,flex:[]}}constructor(r){super(r)}clone(){return new fv(this.options)}getStep(r){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:r===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(r)}getBandWidth(r){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:r===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(r)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:r,paddingInner:e}=this.options;return r>0?r:e}getPaddingOuter(){const{padding:r,paddingOuter:e}=this.options;return r>0?r:e}rescale(){super.rescale();const{align:r,domain:e,range:n,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=PH({align:r,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}}const MH=(t,r,e)=>{let n,i,a=t,o=r;if(a===o&&e>0)return[a];let s=jl(a,o,e);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(n=Math.ceil(o-a+1));for(let l=0;l<n;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(n=Math.ceil(o-a+1));for(let l=0;l<n;l+=1)i[l]=(a+l)/s}return i},CH=(t,r,e)=>{const[n,i]=t,[a,o]=r;let s,l;return n<i?(s=Dd(n,i),l=e(a,o)):(s=Dd(i,n),l=e(o,a)),_c(l,s)},LH=(t,r,e)=>{const n=Math.min(t.length,r.length)-1,i=new Array(n),a=new Array(n),o=t[0]>t[n],s=o?[...t].reverse():t,l=o?[...r].reverse():r;for(let c=0;c<n;c+=1)i[c]=Dd(s[c],s[c+1]),a[c]=e(l[c],l[c+1]);return c=>{const u=lH(t,c,1,n)-1,f=i[u],d=a[u];return _c(d,f)(c)}},p0=(t,r,e,n)=>(Math.min(t.length,r.length)>2?LH:CH)(t,r,n?OH:e);class NH extends bk{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Sc,tickCount:5}}map(r){return s0(r)?this.output(r):this.options.unknown}invert(r){return s0(r)?this.input(r):this.options.unknown}nice(){if(!this.options.nice)return;const[r,e,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(r,e,n,...i)}getTicks(){const{tickMethod:r}=this.options,[e,n,i,...a]=this.getTickMethodOptions();return r(e,n,i,...a)}getTickMethodOptions(){const{domain:r,tickCount:e}=this.options,n=r[0],i=r[r.length-1];return[n,i,e]}chooseNice(){return cH}rescale(){this.nice();const[r,e]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r)),this.composeInput(r,e,this.chooseClamp(e))}chooseClamp(r){const{clamp:e,range:n}=this.options,i=this.options.domain.map(r),a=Math.min(i.length,n.length);return e?sH(i[0],i[a-1]):$d}composeOutput(r,e){const{domain:n,range:i,round:a,interpolate:o}=this.options,s=p0(n.map(r),i,o,a);this.output=_c(s,e,r)}composeInput(r,e,n){const{domain:i,range:a}=this.options,o=p0(a,i.map(r),Sc);this.input=_c(e,n,o)}}class fn extends NH{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:xH,tickMethod:MH,tickCount:5}}chooseTransforms(){return[$d,$d]}clone(){return new fn(this.options)}}class dv extends fv{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:Au,paddingInner:1,paddingOuter:0}}constructor(r){super(r)}getPaddingInner(){return 1}clone(){return new dv(this.options)}update(r){super.update(r)}getPaddingOuter(){return this.options.padding}}var v0=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},RH=function(t,r,e,n,i){var a=new fn({range:[r,r+n]}),o=new fn({range:[e,e+i]});return{transform:function(s){var l=v0(s,2),c=l[0],u=l[1];return[a.map(c),o.map(u)]},untransform:function(s){var l=v0(s,2),c=l[0],u=l[1];return[a.invert(c),o.invert(u)]}}},IH=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},jH=function(t,r,e,n,i){var a=IH(t,1),o=a[0];return o(r,e,n,i)},DH=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},$H=function(t,r,e,n,i){var a=DH(t,1),o=a[0];return o},Af=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},FH=function(t,r,e,n,i){var a=Af(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=new fn({range:[l,c]}),f=new fn({range:[o,s]}),d=i/n,h=d>1?1:d,p=d>1?1/d:1;return{transform:function(v){var g=Af(v,2),y=g[0],m=g[1],b=f.map(y),x=u.map(m),O=x*Math.cos(b)*h,w=x*Math.sin(b)*p,_=O*.5+.5,S=w*.5+.5;return[_,S]},untransform:function(v){var g=Af(v,2),y=g[0],m=g[1],b=(y-.5)*2/h,x=(m-.5)*2/p,O=Math.sqrt(Math.pow(b,2)+Math.pow(x,2)),w=Math.atan2(x,b),_=yk(w,o,s),S=f.invert(_),k=u.invert(O);return[S,k]}}},g0=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},BH=function(t,r,e,n,i){return{transform:function(a){var o=g0(a,2),s=o[0],l=o[1];return[l,s]},untransform:function(a){var o=g0(a,2),s=o[0],l=o[1];return[l,s]}}},zH=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Tu=function(t,r,e,n,i){var a=zH(t,2),o=a[0],s=a[1],l=hs();return KT(l,[o,s])},hv=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},pv=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},WH=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return Tu.apply(void 0,pv([[-1,-1]],hv(r),!1))},GH=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return Tu.apply(void 0,pv([[-1,1]],hv(r),!1))},HH=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return Tu.apply(void 0,pv([[1,-1]],hv(r),!1))},YH=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},VH=function(t,r,e,n,i){var a=YH(t,1),o=a[0],s=hs();return ZT(s,o)},Tf=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},UH=function(t,r,e,n,i){var a=Tf(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=(s-0)/(2*Math.PI)+1,f=(c-l)/u,d=f/(Math.PI*2),h=new fn({range:[l,l+f*.99]}),p=new fn({range:[o,s]}),v=i/n,g=v>1?1:v,y=v>1?1/v:1;return{transform:function(m){var b=Tf(m,2),x=b[0],O=b[1],w=p.map(x),_=h.map(O),S=Math.cos(w)*(d*w+_)*g,k=Math.sin(w)*(d*w+_)*y,E=S*.5+.5,A=k*.5+.5;return[E,A]},untransform:function(m){var b=Tf(m,2),x=b[0],O=b[1],w=(x-.5)*2/g,_=(O-.5)*2/y,S=Math.sqrt(Math.pow(w,2)+Math.pow(_,2)),k=Math.atan2(_,w)+Math.floor(S/f)*Math.PI*2,E=yk(k,o,s),A=S-d*E,T=p.invert(E),P=h.invert(A);return[T,P]}}},XH=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},qH=function(t,r,e,n,i){var a=XH(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=new fn({range:[l,c]});return{transform:function(f){for(var d=[],h=f.length,p=new dv({domain:new Array(h).fill(0).map(function(b,x){return x}),range:[o,s]}),v=0;v<h;v++){var g=f[v],y=p.map(v),m=u.map(g);d.push(y,m)}return d},untransform:function(f){for(var d=[],h=0;h<f.length;h+=2){var p=f[h+1];d.push(u.invert(p))}return d}}},Ra=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};function xk(t){return 1/Math.tan(t)}var KH=function(t,r,e,n,i){var a=Ra(t,1),o=a[0],s=xk(o);return{transform:function(l){var c=Ra(l,2),u=c[0],f=c[1],d=u+f*s;return[d,f]},untransform:function(l){var c=Ra(l,2),u=c[0],f=c[1],d=u-f*s;return[d,f]}}},ZH=function(t,r,e,n,i){var a=Ra(t,1),o=a[0],s=xk(o);return{transform:function(l){var c=Ra(l,2),u=c[0],f=c[1],d=f+u*s;return[u,d]},untransform:function(l){var c=Ra(l,2),u=c[0],f=c[1],d=f-u*s;return[u,d]}}},Rn=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};function is(t,r,e,n,i){var a=t<r,o=(a?r-n:i-r)||i-n,s=a?-1:1;return s*o*(e+1)/(e+o/((t-r)*s))+r}function as(t,r,e,n,i){var a=t<r,o=(a?r-n:i-r)||i-n,s=a?-1:1;return o/(o*(e+1)/(t-r)-e*s)+r}function kc(t,r,e){if(!e)return t;var n=new fn({range:[0,1],domain:[0,r]});return n.map(t)}var QH=function(t,r,e,n,i){var a=Rn(t,3),o=a[0],s=a[1],l=a[2],c=l===void 0?!1:l,u=kc(o,n,c);return{transform:function(f){var d=Rn(f,2),h=d[0],p=d[1],v=is(h,u,s,0,1);return[v,p]},untransform:function(f){var d=Rn(f,2),h=d[0],p=d[1],v=as(h,u,s,0,1);return[v,p]}}},JH=function(t,r,e,n,i){var a=Rn(t,3),o=a[0],s=a[1],l=a[2],c=l===void 0?!1:l,u=kc(o,i,c);return{transform:function(f){var d=Rn(f,2),h=d[0],p=d[1],v=is(p,u,s,0,1);return[h,v]},untransform:function(f){var d=Rn(f,2),h=d[0],p=d[1],v=as(p,u,s,0,1);return[h,v]}}},tY=function(t,r,e,n,i){var a=Rn(t,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],f=u===void 0?!1:u,d=kc(o,n,f),h=kc(s,i,f);return{transform:function(p){var v=Rn(p,2),g=v[0],y=v[1],m=is(g,d,l,0,1),b=is(y,h,c,0,1);return[m,b]},untransform:function(p){var v=Rn(p,2),g=v[0],y=v[1],m=as(g,d,l,0,1),b=as(y,h,c,0,1);return[m,b]}}},eY=function(t,r,e,n,i){var a=Rn(t,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],f=u===void 0?!1:u,d=new fn({range:[0,n]}),h=new fn({range:[0,i]}),p=f?o:d.map(o),v=f?s:h.map(s);return{transform:function(g){var y=Rn(g,2),m=y[0],b=y[1],x=d.map(m)-p,O=h.map(b)-v,w=Math.sqrt(x*x+O*O);if(w>l)return[m,b];var _=is(w,0,c,0,l),S=Math.atan2(O,x),k=p+_*Math.cos(S),E=v+_*Math.sin(S);return[d.invert(k),h.invert(E)]},untransform:function(g){var y=Rn(g,2),m=y[0],b=y[1],x=d.map(m)-p,O=h.map(b)-v,w=Math.sqrt(x*x+O*O);if(w>l)return[m,b];var _=as(w,0,c,0,l),S=Math.atan2(O,x),k=p+_*Math.cos(S),E=v+_*Math.sin(S);return[d.invert(k),h.invert(E)]}}},y0=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},nY=function(t,r,e,n,i,a,o){var s=new fn({range:[r,r+i]}),l=new fn({range:[e,e+a]}),c=new fn({range:[n,n+o]});return{transform:function(u){var f=y0(u,3),d=f[0],h=f[1],p=f[2];return[s.map(d),l.map(h),c.map(p)]},untransform:function(u){var f=y0(u,3),d=f[0],h=f[1],p=f[2];return[s.invert(d),l.invert(h),c.invert(p)]}}},rY=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},iY=function(t,r,e,n,i,a,o){var s=rY(t,3),l=s[0],c=s[1],u=s[2];return Jr(Zt(),[l,c,u])},m0=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},aY=function(t,r,e,n,i,a,o){return{transform:function(s){var l=m0(s,3),c=l[0],u=l[1],f=l[2];return[u,c,f]},untransform:function(s){var l=m0(s,3),c=l[0],u=l[1],f=l[2];return[u,c,f]}}},oY=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},sY=function(t,r,e,n,i,a,o){var s=oY(t,3),l=s[0],c=s[1],u=s[2];return Fi(Zt(),[l,c,u])},ba=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},xa=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},lY=function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},cY=function(){function t(r){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:RH,translate:oH,custom:jH,matrix:$H,polar:FH,transpose:BH,scale:Tu,"shear.x":KH,"shear.y":ZH,reflect:WH,"reflect.x":GH,"reflect.y":HH,rotate:VH,helix:UH,parallel:qH,fisheye:tY,"fisheye.x":QH,"fisheye.y":JH,"fisheye.circular":eY},this.update(r)}return t.prototype.update=function(r){this.options=dk({},this.options,r),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var r=this.options,e=r.width,n=r.height;return[e,n]},t.prototype.getCenter=function(){var r=this.options,e=r.x,n=r.y,i=r.width,a=r.height;return[(e*2+i)/2,(n*2+a)/2]},t.prototype.transform=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:xa(xa([],ba(n),!1),[xa([],ba(r),!1)],!1)}),this},t.prototype.map=function(r){return this.output(r)},t.prototype.invert=function(r){return this.input(r)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(r){var e,n;r===void 0&&(r=!1);var i=r?xa([],ba(this.options.transformations),!1).reverse():this.options.transformations,a=r?function(_){return _.untransform}:function(_){return _.transform},o=[],s=[],l=function(_,S){return S===void 0&&(S=!0),s.push(S?rH(_):_)};try{for(var c=lY(i),u=c.next();!u.done;u=c.next()){var f=ba(u.value),d=f[0],h=f.slice(1),p=this.transformers[d];if(p){var v=this.options,g=v.x,y=v.y,m=v.width,b=v.height,x=p(xa([],ba(h),!1),g,y,m,b);if(pk(x))o.push(x);else{if(o.length){var O=this.createMatrixTransform(o,r);l(O),o.splice(0,o.length)}var w=a(x)||cv;l(w,d!=="parallel")}}}}catch(_){e={error:_}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(o.length){var w=this.createMatrixTransform(o,r);l(w)}return hk.apply(void 0,xa([],ba(s),!1))},t.prototype.createMatrixTransform=function(r,e){var n=hs();return e&&r.reverse(),r.forEach(function(i){return QT(n,n,i)}),e&&JT(n,tP(n)),function(i){var a=[i[0],i[1],1];return Lb(a,a,n),[a[0],a[1]]}},t}(),Oa=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},wa=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},uY=function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},fY=function(){function t(r){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:nY,translate3D:iY,scale3D:sY,transpose3D:aY},this.update(r)}return t.prototype.update=function(r){this.options=dk({},this.options,r),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var r=this.options,e=r.width,n=r.height,i=r.depth;return[e,n,i]},t.prototype.getCenter=function(){var r=this.options,e=r.x,n=r.y,i=r.z,a=r.width,o=r.height,s=r.depth;return[(e*2+a)/2,(n*2+o)/2,(i*2+s)/2]},t.prototype.transform=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:wa(wa([],Oa(n),!1),[wa([],Oa(r),!1)],!1)}),this},t.prototype.map=function(r){return this.output(r)},t.prototype.invert=function(r){return this.input(r)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(r){var e,n;r===void 0&&(r=!1);var i=r?wa([],Oa(this.options.transformations),!1).reverse():this.options.transformations,a=r?function(k){return k.untransform}:function(k){return k.transform},o=[],s=[],l=function(k,E){return E===void 0&&(E=!0),s.push(E?iH(k):k)};try{for(var c=uY(i),u=c.next();!u.done;u=c.next()){var f=Oa(u.value),d=f[0],h=f.slice(1),p=this.transformers[d];if(p){var v=this.options,g=v.x,y=v.y,m=v.z,b=v.width,x=v.height,O=v.depth,w=p(wa([],Oa(h),!1),g,y,m,b,x,O);if(pk(w))o.push(w);else{if(o.length){var _=this.createMatrixTransform(o,r);l(_),o.splice(0,o.length)}var S=a(w)||cv;l(S,!0)}}}}catch(k){e={error:k}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(o.length){var S=this.createMatrixTransform(o,r);l(S)}return hk.apply(void 0,wa([],Oa(s),!1))},t.prototype.createMatrixTransform=function(r,e){var n=Zt();return e&&r.reverse(),r.forEach(function(i){return Pb(n,n,i)}),e&&ur(n,Rb(n)),function(i){var a=[i[0],i[1],i[2],1];return fr(a,a,n),[a[0],a[1],a[2]]}},t}(),dY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Ms(t){return(r,...e)=>X({},t(r,...e),r)}function pa(t){return(r,...e)=>X({},r,t(r,...e))}function hY(t){return t instanceof Date?!1:typeof t=="object"}function Pu(t,r){if(!t)return r;if(Array.isArray(t))return t;if(hY(t)){const{value:e=r}=t,n=dY(t,["value"]);return Object.assign(Object.assign({},n),{value:e})}return t}var pY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Ok=()=>t=>{const{children:r}=t;if(!Array.isArray(r))return[];const{x:e=0,y:n=0,width:i,height:a,data:o}=t;return r.map(s=>{var{data:l,x:c,y:u,width:f,height:d}=s,h=pY(s,["data","x","y","width","height"]);return Object.assign(Object.assign({},h),{data:Pu(l,o),x:c??e,y:u??n,width:f??i,height:d??a})})};Ok.props={};var vY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const wk=()=>t=>{const{children:r}=t;if(!Array.isArray(r))return[];const{direction:e="row",ratio:n=r.map(()=>1),padding:i=0,data:a}=t,[o,s,l,c]=e==="col"?["y","height","width","x"]:["x","width","height","y"],u=n.reduce((v,g)=>v+g),f=t[s]-i*(r.length-1),d=n.map(v=>f*(v/u)),h=[];let p=t[o]||0;for(let v=0;v<d.length;v+=1){const g=r[v],{data:y}=g,m=vY(g,["data"]),b=Pu(y,a);h.push(Object.assign({[o]:p,[s]:d[v],[c]:t[c]||0,[l]:t[l],data:b},m)),p+=d[v]+i}return h};wk.props={};var Pf=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const _k=()=>t=>{const{children:r}=t,e=Pf(t,["children"]);if(!Array.isArray(r))return[];const{data:n,scale:i={},axis:a={},legend:o={},encode:s={},transform:l=[],slider:c={}}=e,u=Pf(e,["data","scale","axis","legend","encode","transform","slider"]),f=r.map(d=>{var{data:h,scale:p={},axis:v={},legend:g={},encode:y={},transform:m=[],slider:b={}}=d,x=Pf(d,["data","scale","axis","legend","encode","transform","slider"]);return Object.assign({data:Pu(h,n),scale:X({},i,p),encode:X({},s,y),transform:[...l,...m],axis:v&&a?X({},a,v):!1,legend:g&&o?X({},o,g):!1,slider:X({},c,b)},x)});return[Object.assign(Object.assign({},u),{marks:f,type:"standardView",slider:c})]};_k.props={};var gY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Sk=({static:t=!1}={})=>r=>{const{width:e,height:n,depth:i,paddingLeft:a,paddingRight:o,paddingTop:s,paddingBottom:l,padding:c,inset:u,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,margin:v,marginLeft:g,marginBottom:y,marginTop:m,marginRight:b,data:x,coordinate:O,theme:w,component:_,interaction:S,x:k,y:E,z:A,key:T,frame:P,labelTransform:N,parentKey:I,clip:R,viewStyle:C,title:L}=r,M=gY(r,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:k,y:E,z:A,key:T,width:e,height:n,depth:i,padding:c,paddingLeft:a,paddingRight:o,paddingTop:s,inset:u,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,paddingBottom:l,theme:w,coordinate:O,component:_,interaction:S,frame:P,labelTransform:N,margin:v,marginLeft:g,marginBottom:y,marginTop:m,marginRight:b,parentKey:I,clip:R,style:C},!t&&{title:L}),{marks:[Object.assign(Object.assign(Object.assign({},M),{key:`${T}-0`,data:x}),t&&{title:L})]})]};Sk.props={};class Cs{constructor(r){this.$value=r}static of(r){return new Cs(r)}call(r,...e){return this.$value=r(this.$value,...e),this}value(){return this.$value}}var yY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const mY=Ms(t=>{const{encode:r,data:e,scale:n,shareSize:i=!1}=t,{x:a,y:o}=r,s=(l,c)=>{var u;if(l===void 0||!i)return{};const f=ce(e,p=>p[l]),d=((u=n?.[c])===null||u===void 0?void 0:u.domain)||Array.from(f.keys()),h=d.map(p=>f.has(p)?f.get(p).length:1);return{domain:d,flex:h}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"top"}},a===void 0&&{paddingInner:0}),s(a,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:o===void 0?null:{position:"right"}},o===void 0&&{paddingInner:0}),s(o,"y"))}}}),vv=pa(t=>{const{data:r,scale:e,legend:n}=t,i=[t];let a,o,s;for(;i.length;){const d=i.shift(),{children:h,encode:p={},scale:v={},legend:g={}}=d,{color:y}=p,{color:m}=v,{color:b}=g;y!==void 0&&(a=y),m!==void 0&&(o=m),b!==void 0&&(s=b),Array.isArray(h)&&i.push(...h)}const l=()=>{var d;const h=(d=e?.color)===null||d===void 0?void 0:d.domain;if(h!==void 0)return[h];if(a===void 0)return[void 0];const p=typeof a=="function"?a:g=>g[a],v=r.map(p);return v.some(g=>typeof g=="number")?[to(v)]:[Array.from(new Set(v)),"ordinal"]},c=typeof a=="string"?a:"",[u,f]=l();return Object.assign({encode:{color:{type:"column",value:u??[]}},scale:{color:X({},o,{domain:u,type:f})}},n===void 0&&{legend:{color:X({title:c},s)}})}),gv=Ms(()=>({animate:{enterType:"fadeIn"}})),yv=pa(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),mv=pa(()=>({type:"cell"})),kk=pa(t=>{const{data:r}=t;return{data:{type:"inline",value:r,transform:[{type:"custom",callback:()=>{const{data:n,encode:i}=t,{x:a,y:o}=i,s=a?Array.from(new Set(n.map(u=>u[a]))):[],l=o?Array.from(new Set(n.map(u=>u[o]))):[];return(()=>{if(s.length&&l.length){const u=[];for(const f of s)for(const d of l)u.push({[a]:f,[o]:d});return u}if(s.length)return s.map(u=>({[a]:u}));if(l.length)return l.map(u=>({[o]:u}))})()}}]}}}),Ek=pa((t,r=bY,e=xY,n=OY,i={})=>{const{data:a,encode:o,children:s,scale:l,x:c=0,y:u=0,shareData:f=!1,key:d}=t,{value:h}=a,{x:p,y:v}=o,{color:g}=l,{domain:y}=g;return{children:(b,x,O)=>{const{x:w,y:_}=x,{paddingLeft:S,paddingTop:k,marginLeft:E,marginTop:A}=O,{domain:T}=w.getOptions(),{domain:P}=_.getOptions(),N=oa(b),I=b.map(r),R=b.map(({x:$,y:B})=>[w.invert($),_.invert(B)]),L=R.map(([$,B])=>z=>{const{[p]:W,[v]:Y}=z;return(p!==void 0?W===$:!0)&&(v!==void 0?Y===B:!0)}).map($=>h.filter($)),M=f?oe(L,$=>$.length):void 0,j=R.map(([$,B])=>({columnField:p,columnIndex:T.indexOf($),columnValue:$,columnValuesLength:T.length,rowField:v,rowIndex:P.indexOf(B),rowValue:B,rowValuesLength:P.length})),F=j.map($=>Array.isArray(s)?s:[s($)].flat(1));return N.flatMap($=>{const[B,z,W,Y]=I[$],V=j[$],G=L[$];return F[$].map(Q=>{var nt,et,{scale:at,key:lt,facet:st=!0,axis:ft={},legend:ht={}}=Q,ut=yY(Q,["scale","key","facet","axis","legend"]);const pt=((nt=at?.y)===null||nt===void 0?void 0:nt.guide)||ft.y,Bt=((et=at?.x)===null||et===void 0?void 0:et.guide)||ft.x,Wt={x:{tickCount:p?5:void 0},y:{tickCount:v?5:void 0}},Rt=st?G:G.length===0?[]:h,te={color:{domain:y}},ee={x:b0(Bt,e)(V,Rt),y:b0(pt,n)(V,Rt)};return Object.assign(Object.assign({key:`${lt}-${$}`,data:Rt,margin:0,x:B+S+c+E,y:z+k+u+A,parentKey:d,width:W,height:Y,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!Rt.length,dataDomain:M,scale:X(Wt,at,te),axis:X({},ft,ee),legend:!1},ut),i)})})}}});function bY(t){const{points:r}=t;return Fh(r)}function Mu(t,r){return r.length?X({title:!1,tick:null,label:null},t):X({title:!1,tick:null,label:null,grid:null},t)}function xY(t){return(r,e)=>{const{rowIndex:n,rowValuesLength:i,columnIndex:a,columnValuesLength:o}=r;if(n!==i-1)return Mu(t,e);const s=a!==o-1?!1:void 0,l=e.length?void 0:null;return X({title:s,grid:l},t)}}function OY(t){return(r,e)=>{const{rowIndex:n,columnIndex:i}=r;if(i!==0)return Mu(t,e);const a=n!==0?!1:void 0,o=e.length?void 0:null;return X({title:a,grid:o},t)}}function b0(t,r){return typeof t=="function"?t:t===null||t===!1?()=>null:r(t)}const Ak=()=>t=>[Cs.of(t).call(mv).call(vv).call(gv).call(mY).call(yv).call(kk).call(Ek).value()];Ak.props={};var Fd=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const wY=Ms(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),_Y=pa(t=>{const{data:r,children:e,x:n=0,y:i=0,key:a}=t;return{children:(s,l,c)=>{const{x:u,y:f}=l,{paddingLeft:d,paddingTop:h,marginLeft:p,marginTop:v}=c,{domain:g}=u.getOptions(),{domain:y}=f.getOptions(),m=oa(s),b=s.map(({points:_})=>Fh(_)),x=s.map(({x:_,y:S})=>[u.invert(_),f.invert(S)]),O=x.map(([_,S])=>({columnField:_,columnIndex:g.indexOf(_),columnValue:_,columnValuesLength:g.length,rowField:S,rowIndex:y.indexOf(S),rowValue:S,rowValuesLength:y.length})),w=O.map(_=>Array.isArray(e)?e:[e(_)].flat(1));return m.flatMap(_=>{const[S,k,E,A]=b[_],[T,P]=x[_],N=O[_];return w[_].map(R=>{var C,L;const{scale:M,key:j,encode:F,axis:$,interaction:B}=R,z=Fd(R,["scale","key","encode","axis","interaction"]),W=(C=M?.y)===null||C===void 0?void 0:C.guide,Y=(L=M?.x)===null||L===void 0?void 0:L.guide,V={x:{facet:!1},y:{facet:!1}},G={x:kY(Y)(N,r),y:EY(W)(N,r)},q={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:r,parentKey:a,key:`${j}-${_}`,x:S+d+n+p,y:k+h+i+v,width:E,height:A,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:X(V,M),axis:X(q,$,G),legend:!1,encode:X({},F,{x:T,y:P}),interaction:X({},B,{legendFilter:!1})},z)})})}}}),SY=pa(t=>{const{encode:r}=t,e=Fd(t,["encode"]),{position:n=[],x:i=n,y:a=[...n].reverse()}=r,o=Fd(r,["position","x","y"]),s=[];for(const l of[i].flat(1))for(const c of[a].flat(1))s.push({$x:l,$y:c});return Object.assign(Object.assign({},e),{data:s,encode:Object.assign(Object.assign({},o),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[a].flat(1).length===1&&{y:{paddingInner:0}})})});function kY(t){return typeof t=="function"?t:t===null?()=>null:(r,e)=>{const{rowIndex:n,rowValuesLength:i}=r;if(n!==i-1)return Mu(t,e)}}function EY(t){return typeof t=="function"?t:t===null?()=>null:(r,e)=>{const{columnIndex:n}=r;if(n!==0)return Mu(t,e)}}const AY=()=>t=>[Cs.of(t).call(mv).call(vv).call(_Y).call(SY).call(gv).call(yv).call(wY).value()];var TY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const PY=Ms(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),MY=Ms(t=>({coordinate:{type:"polar"}})),CY=t=>{const{encode:r}=t,e=TY(t,["encode"]),{position:n}=r;return Object.assign(Object.assign({},e),{encode:{x:n}})};function x0(t){return r=>null}function LY(t){const{points:r}=t,[e,n,i,a]=r,o=Oe(e,a),s=Ee(e,a),l=Ee(n,i),c=M1(s,l),u=1/Math.sin(c/2),f=o/(1+u),d=f*Math.sqrt(2),[h,p]=i,g=Ya(s)+c/2,y=f*u,m=h+y*Math.sin(g),b=p-y*Math.cos(g);return[m-d/2,b-d/2,d,d]}const NY=()=>t=>[Cs.of(t).call(mv).call(CY).call(vv).call(MY).call(kk).call(Ek,LY,x0,x0,{frame:!1}).call(gv).call(yv).call(PY).value()];function RY(t,r,e){const i=e,a=[0,i],o=[-i+1,1];if(t==="normal")return a;if(t==="reverse")return o;if(t==="alternate")return r%2===0?a:o;if(t==="reverse-alternate")return r%2===0?o:a}function IY(t,r,e){const n=[t];for(;n.length;){const i=n.pop();i.animate=X({enter:{duration:r},update:{duration:r,easing:e,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:r}},i.animate||{});const{children:a}=i;Array.isArray(a)&&n.push(...a)}return t}const Tk=()=>t=>{const{children:r=[],duration:e=1e3,iterationCount:n=1,direction:i="normal",easing:a="ease-in-out-sine"}=t,o=r.length;if(!Array.isArray(r)||o===0)return[];const{key:s}=r[0],l=r.map(c=>Object.assign(Object.assign({},c),{key:s})).map(c=>IY(c,e,a));return function*(){let c=0,u;for(;n==="infinite"||c<n;){const[f,d]=RY(i,c,o);for(let h=f;h<d;h+=1){const p=Math.abs(h);u!==p&&(yield l[p]),u=p}c++}}};Tk.props={};var jY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Pk=()=>t=>{const{type:r,data:e,scale:n,encode:i,style:a,animate:o,key:s,state:l,tooltip:c}=t,u=jY(t,["type","data","scale","encode","style","animate","key","state","tooltip"]);return[Object.assign(Object.assign({type:"geoView"},u),{children:[{type:"geoPath",key:`${s}-0`,data:{value:e},scale:n,encode:i,style:a,animate:o,state:l,tooltip:c}]})]};Pk.props={};const DY=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:eP,geoAlbersUsa:nP,geoAzimuthalEqualArea:rP,geoAzimuthalEqualAreaRaw:iP,geoAzimuthalEquidistant:aP,geoAzimuthalEquidistantRaw:oP,geoConicConformal:sP,geoConicConformalRaw:lP,geoConicEqualArea:cP,geoConicEqualAreaRaw:uP,geoConicEquidistant:fP,geoConicEquidistantRaw:dP,geoEqualEarth:hP,geoEqualEarthRaw:pP,geoEquirectangular:vP,geoEquirectangularRaw:gP,geoGnomonic:yP,geoGnomonicRaw:mP,geoIdentity:bP,geoMercator:xP,geoMercatorRaw:OP,geoNaturalEarth1:wP,geoNaturalEarth1Raw:_P,geoOrthographic:SP,geoOrthographicRaw:kP,geoProjection:EP,geoProjectionMutator:AP,geoStereographic:TP,geoStereographicRaw:PP,geoTransverseMercator:MP,geoTransverseMercatorRaw:CP},Symbol.toStringTag,{value:"Module"}));var $Y=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function FY(t){if(typeof t=="function")return t;const r=`geo${yi(t)}`,e=DY[r];if(!e)throw new Error(`Unknown coordinate: ${t}`);return e}function BY(t){return{type:"FeatureCollection",features:t.flatMap(r=>zY(r).features)}}function zY(t){const r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const e=r[t.type];if(!e)return null;if(e==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(e==="feature")return{type:"FeatureCollection",features:[t]};if(e==="featureCollection")return t}function WY(t,r){var e;for(const[n,i]of Object.entries(r))(e=t[n])===null||e===void 0||e.call(t,i)}function GY(t,r,e,n){const i=()=>{const s=r.filter(Mk);return s.find(c=>c.sphere)?{type:"Sphere"}:BY(s.filter(c=>!c.sphere).flatMap(c=>c.data.value))},{outline:a=i()}=n,{size:o="fitExtent"}=n;if(o==="fitExtent")return HY(t,a,e);if(o==="fitWidth")return YY(t,a,e)}function HY(t,r,e){const{x:n,y:i,width:a,height:o}=e;t.fitExtent([[n,i],[a,o]],r)}function YY(t,r,e){const{width:n,height:i}=e,[[a,o],[s,l]]=Vb(t.fitWidth(n,r)).bounds(r),c=Math.ceil(l-o),u=Math.min(Math.ceil(s-a),c),f=t.scale()*(u-1)/u,[d,h]=t.translate(),p=h+(i-c)/2;t.scale(f).translate([d,p]).precision(.2)}function VY(t){const{data:r}=t;if(Array.isArray(r))return Object.assign(Object.assign({},t),{data:{value:r}});const{type:e}=r;return e==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[LP()]}}):e==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function Mk(t){return t.type==="geoPath"}const Ck=()=>t=>{const{children:r,coordinate:e={}}=t;if(!Array.isArray(r))return[];const{type:n="equalEarth"}=e,i=$Y(e,["type"]),a=FY(n),o=r.map(f=>Object.assign(Object.assign({},f),{data:Pu(f.data,t.data)})).map(VY);let s;function l(){return[["custom",(f,d,h,p)=>{const v=a();GY(v,o,{x:f,y:d,width:h,height:p},i),WY(v,i),s=Vb(v);const y=new zr({domain:[f,f+h]}),m=new zr({domain:[d,d+p]}),b=O=>{const w=v(O);if(!w)return[null,null];const[_,S]=w;return[y.map(_),m.map(S)]},x=O=>{if(!O)return null;const[w,_]=O,S=[y.invert(w),m.invert(_)];return v.invert(S)};return{transform:O=>b(O),untransform:O=>x(O)}}]]}function c(f){const{style:d,tooltip:h={}}=f;return Object.assign(Object.assign({},f),{type:"path",tooltip:mc(h,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},d),{d:p=>s(p)||[]})})}const u=f=>Mk(f)?c(f):f;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:l},children:o.flatMap(u)})]};Ck.props={};function UY(t){return Ns(t,r=>r.className==="component")}function XY(t){return Ns(t,r=>r.className==="element")}function qY(t){return Ns(t,r=>r.className==="label")}function Xe(t,r,e,n=i=>!0){return i=>{if(!n(i))return;e.emit(`plot:${t}`,i);const{target:a}=i;if(!a)return;const{className:o}=a;if(o==="plot")return;const s=XY(a),l=UY(a),c=qY(a),u=s||l||c;if(!u)return;const{className:f,markType:d}=u,h=Object.assign(Object.assign({},i),{nativeEvent:!0});f==="element"?(h.data={data:Lh(u,r)},e.emit(`element:${t}`,h),e.emit(`${d}:${t}`,h)):f==="label"?(h.data={data:u.attributes.datum},e.emit(`label:${t}`,h),o.split(/\s+/).filter(Boolean).forEach(v=>{e.emit(`${v}:${t}`,h)})):(e.emit(`component:${t}`,h),o.split(/\s+/).filter(Boolean).forEach(v=>{e.emit(`${v}:${t}`,h)}))}}function Lk(){return(t,r,e)=>{const{container:n,view:i}=t,a=Xe(Vt.CLICK,i,e,_=>_.detail===1),o=Xe(Vt.DBLCLICK,i,e,_=>_.detail===2),s=Xe(Vt.POINTER_TAP,i,e),l=Xe(Vt.POINTER_DOWN,i,e),c=Xe(Vt.POINTER_UP,i,e),u=Xe(Vt.POINTER_OVER,i,e),f=Xe(Vt.POINTER_OUT,i,e),d=Xe(Vt.POINTER_MOVE,i,e),h=Xe(Vt.POINTER_ENTER,i,e),p=Xe(Vt.POINTER_LEAVE,i,e),v=Xe(Vt.POINTER_UPOUTSIDE,i,e),g=Xe(Vt.DRAG_START,i,e),y=Xe(Vt.DRAG,i,e),m=Xe(Vt.DRAG_END,i,e),b=Xe(Vt.DRAG_ENTER,i,e),x=Xe(Vt.DRAG_LEAVE,i,e),O=Xe(Vt.DRAG_OVER,i,e),w=Xe(Vt.DROP,i,e);return n.addEventListener("click",a),n.addEventListener("click",o),n.addEventListener("pointertap",s),n.addEventListener("pointerdown",l),n.addEventListener("pointerup",c),n.addEventListener("pointerover",u),n.addEventListener("pointerout",f),n.addEventListener("pointermove",d),n.addEventListener("pointerenter",h),n.addEventListener("pointerleave",p),n.addEventListener("pointerupoutside",v),n.addEventListener("dragstart",g),n.addEventListener("drag",y),n.addEventListener("dragend",m),n.addEventListener("dragenter",b),n.addEventListener("dragleave",x),n.addEventListener("dragover",O),n.addEventListener("drop",w),()=>{n.removeEventListener("click",a),n.removeEventListener("click",o),n.removeEventListener("pointertap",s),n.removeEventListener("pointerdown",l),n.removeEventListener("pointerup",c),n.removeEventListener("pointerover",u),n.removeEventListener("pointerout",f),n.removeEventListener("pointermove",d),n.removeEventListener("pointerenter",h),n.removeEventListener("pointerleave",p),n.removeEventListener("pointerupoutside",v),n.removeEventListener("dragstart",g),n.removeEventListener("drag",y),n.removeEventListener("dragend",m),n.removeEventListener("dragenter",b),n.removeEventListener("dragleave",x),n.removeEventListener("dragover",O),n.removeEventListener("drop",w)}}}Lk.props={reapplyWhenUpdate:!0};function KY(){return{"component.axisRadar":JS,"component.axisLinear":ki,"component.axisArc":KS,"component.legendContinuousBlock":yE,"component.legendContinuousBlockSize":mE,"component.legendContinuousSize":Mv,"interaction.event":Lk,"composition.mark":Sk,"composition.view":_k,"shape.label.label":__,"shape.break":L_}}var ZY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function ve(t,r){const e=Object.assign(Object.assign({},KY()),r),n=a=>{if(typeof a!="string")return a;const o=`${t}.${a}`;return e[o]||Ga(`Unknown Component: ${o}`)};return[(a,o)=>{const{type:s}=a,l=ZY(a,["type"]);s||Ga("Plot type is required!");const c=n(s);return c?.(l,o)},n]}function Nk(t){const{canvas:r,group:e}=t;return r?.document||e?.ownerDocument||Ga("Cannot find library document")}var O0=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function QY(t,r,e){const[n]=ve("coordinate",e),{innerHeight:i,innerWidth:a,insetLeft:o,insetTop:s,insetRight:l,insetBottom:c}=t,{coordinates:u=[]}=r,f=rV(u),d=f[0].type==="cartesian3D",h=Object.assign(Object.assign({},t),{x:o,y:s,width:a-o-l,height:i-c-s,transformations:f.flatMap(n)});return d?new fY(h):new cY(h)}function Rk(t,r){const{coordinate:e={},coordinates:n}=t,i=O0(t,["coordinate","coordinates"]);if(n)return t;const{type:a,transform:o=[]}=e,s=O0(e,["type","transform"]);if(!a)return Object.assign(Object.assign({},i),{coordinates:o});const[,l]=ve("coordinate",r),{transform:c=!1}=l(a).props||{};if(c)throw new Error(`Unknown coordinate: ${a}.`);return Object.assign(Object.assign({},i),{coordinates:[Object.assign({type:a},s),...o]})}function Kn(t,r){return t.filter(e=>e.type===r)}function Hi(t){return Kn(t,"polar").length>0}function JY(t){return Kn(t,"helix").length>0}function Ia(t){return Kn(t,"transpose").length%2===1}function tV(t){return Kn(t,"parallel").length>0}function Ik(t){return Kn(t,"theta").length>0}function eV(t){return Kn(t,"reflect").length>0}function No(t){return Kn(t,"radial").length>0}function jk(t){return Kn(t,"radar").length>0}function nV(t){return Kn(t,"reflectY").length>0}function rV(t){return t.find(r=>r.type==="cartesian"||r.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}const Bd=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:NP,interpolateBrBG:RP,interpolateBuGn:IP,interpolateBuPu:jP,interpolateCividis:DP,interpolateCool:$P,interpolateCubehelixDefault:FP,interpolateGnBu:BP,interpolateGreens:zP,interpolateGreys:WP,interpolateInferno:GP,interpolateMagma:HP,interpolateOrRd:YP,interpolateOranges:VP,interpolatePRGn:UP,interpolatePiYG:XP,interpolatePlasma:qP,interpolatePuBu:KP,interpolatePuBuGn:ZP,interpolatePuOr:QP,interpolatePuRd:JP,interpolatePurples:tM,interpolateRainbow:eM,interpolateRdBu:nM,interpolateRdGy:rM,interpolateRdPu:iM,interpolateRdYlBu:aM,interpolateRdYlGn:oM,interpolateReds:sM,interpolateSinebow:lM,interpolateSpectral:cM,interpolateTurbo:uM,interpolateViridis:fM,interpolateWarm:dM,interpolateYlGn:hM,interpolateYlGnBu:pM,interpolateYlOrBr:vM,interpolateYlOrRd:gM,schemeAccent:yM,schemeBlues:mM,schemeBrBG:bM,schemeBuGn:xM,schemeBuPu:OM,schemeCategory10:wM,schemeDark2:_M,schemeGnBu:SM,schemeGreens:kM,schemeGreys:EM,schemeObservable10:AM,schemeOrRd:TM,schemeOranges:PM,schemePRGn:MM,schemePaired:CM,schemePastel1:LM,schemePastel2:NM,schemePiYG:RM,schemePuBu:IM,schemePuBuGn:jM,schemePuOr:DM,schemePuRd:$M,schemePurples:FM,schemeRdBu:BM,schemeRdGy:zM,schemeRdPu:WM,schemeRdYlBu:GM,schemeRdYlGn:HM,schemeReds:YM,schemeSet1:VM,schemeSet2:UM,schemeSet3:XM,schemeSpectral:qM,schemeTableau10:KM,schemeYlGn:ZM,schemeYlGnBu:QM,schemeYlOrBr:JM,schemeYlOrRd:t2},Symbol.toStringTag,{value:"Module"}));function iV(t,r,e,n,i,a){const{guide:o={}}=e,s=pV(t,r,e);if(typeof s!="string")return e;const l=vV(s,t,r,e),c=fV(s,l,e);return Object.assign(Object.assign(Object.assign({},e),yV(s,t,r,e,n)),{domain:c,range:gV(s,t,r,e,c,i,a),expectedDomain:l,guide:o,name:t,type:s})}function aV(t,r){const e={};for(const n of t){const{values:i,name:a}=n,o=r[a];for(const s of i){const{name:l,value:c}=s;e[l]=c.map(u=>o.map(u))}}return e}function oV(t,r){const e=Array.from(t.values()).flatMap(i=>i.channels);vh(e,i=>i.map(a=>r.get(a.scale.uid)),i=>i.name).filter(([,i])=>i.some(a=>typeof a.getOptions().groupTransform=="function")&&i.every(a=>a.getTicks)).map(i=>i[1]).forEach(i=>{const a=i.map(o=>o.getOptions().groupTransform)[0];a(i)})}function sV(t,r){var e;const{components:n=[]}=r,i=["scale","encode","axis","legend","data","transform"],a=Array.from(new Set(t.flatMap(s=>s.channels.map(l=>l.scale)))),o=new Map(a.map(s=>[s.name,s]));for(const s of n){const l=uV(s);for(const c of l){const u=o.get(c),f=((e=s.scale)===null||e===void 0?void 0:e[c])||{},{independent:d=!1}=f;if(u&&!d){const{guide:h}=u,p=typeof h=="boolean"?{}:h;u.guide=X({},p,s),Object.assign(u,f)}else{const h=Object.assign(Object.assign({},f),{expectedDomain:f.domain,name:c,guide:Sh(s,i)});a.push(h)}}}return a}function lV(t){if(!t||!Array.isArray(t))return[Ji,Ji];let r,e;return[a=>{var o;r=a.map.bind(a),e=(o=a.invert)===null||o===void 0?void 0:o.bind(a);const s=t.filter(([d])=>typeof d=="function"),l=t.filter(([d])=>typeof d!="function"),c=new Map(l);if(a.map=d=>{for(const[h,p]of s)if(h(d))return p;return c.has(d)?c.get(d):r(d)},!e)return a;const u=new Map(l.map(([d,h])=>[h,d])),f=new Map(s.map(([d,h])=>[h,d]));return a.invert=d=>f.has(d)?d:u.has(d)?u.get(d):e(d),a},a=>(r!==null&&(a.map=r),e!==null&&(a.invert=e),a)]}function w0(t,r){const e=Object.keys(t);for(const n of Object.values(r)){const{name:i}=n.getOptions();if(!(i in t))t[i]=n;else{const a=e.filter(l=>l.startsWith(i)).map(l=>+(l.replace(i,"")||0)),o=oe(a)+1,s=`${i}${o}`;t[s]=n,n.getOptions().key=s}}return t}function _0(t,r){const[e]=ve("scale",r),{relations:n}=t,[i]=lV(n),a=e(t);return i(a)}function cV(t){const r=t.flatMap(e=>Array.from(e.values())).flatMap(e=>e.channels.map(n=>n.scale));S0(r,"x"),S0(r,"y")}function uV(t){const{channels:r=[],type:e,scale:n={}}=t,i=["shape","color","opacity","size"];return r.length!==0?r:e==="axisX"?["x"]:e==="axisY"?["y"]:e==="legends"?Object.keys(n).filter(a=>i.includes(a)):[]}function S0(t,r){const e=t.filter(({name:a,facet:o=!0})=>o&&a===r),n=e.flatMap(a=>a.domain),i=e.every(Dk)?to(n):e.every($k)?Array.from(new Set(n)):null;if(i!==null)for(const a of e)a.domain=i}function fV(t,r,e){const{ratio:n}=e;return n==null?r:Dk({type:t})?dV(r,n,t):$k({type:t})?hV(r,n):r}function dV(t,r,e){const n=t.map(Number),i=new zr({domain:n,range:[n[0],n[0]+(n[n.length-1]-n[0])*r]});return e==="time"?t.map(a=>new Date(i.map(a))):t.map(a=>i.map(a))}function hV(t,r){const e=Math.round(t.length*r);return t.slice(0,e)}function Dk(t){const{type:r}=t;return typeof r!="string"?!1:["linear","log","pow","time"].includes(r)}function $k(t){const{type:r}=t;return typeof r!="string"?!1:["band","point","ordinal"].includes(r)}function pV(t,r,e){const{type:n,domain:i,range:a,quantitative:o,ordinal:s}=e;return n!==void 0?n:PV(r)?"identity":typeof a=="string"?"linear":(i||a||[]).length>2?Mf(t,s):i!==void 0?T0([i])?Mf(t,s):P0(r)?"time":E0(t,a,o):T0(r)?Mf(t,s):P0(r)?"time":E0(t,a,o)}function vV(t,r,e,n){const{domain:i}=n;if(i!==void 0)return i;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return A0(SV(e,n),n);case"band":case"ordinal":case"point":return kV(e);case"quantile":return EV(e);case"sequential":return A0(AV(e),n);default:return[]}}function gV(t,r,e,n,i,a,o){const{range:s}=n;if(typeof s=="string")return mV(s);if(s!==void 0)return s;const{rangeMin:l,rangeMax:c}=n;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const u=k0(e,n,i,a,o),[f,d]=TV(r,u);return[l??f,c??d]}case"band":case"point":return[l??(r==="size"?5:0),c??(r==="size"?10:1)];case"ordinal":return k0(e,n,i,a,o);case"sequential":return;case"constant":return[e[0][0]];default:return[]}}function yV(t,r,e,n,i){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return OV(i,n);case"band":case"point":return wV(t,r,i,n);case"sequential":return xV(n);default:return n}}function k0(t,r,e,n,i){const[a]=ve("palette",i),{category10:o,category20:s}=n,l=yL(e).length<=o.length?o:s,{palette:c=l,offset:u}=r;if(Array.isArray(c))return c;try{return a({type:c})}catch{const d=bV(c,e,u);if(d)return d;throw new Error(`Unknown Component: ${c} `)}}function mV(t){return t.split("-")}function bV(t,r,e=n=>n){if(!t)return null;const n=yi(t),i=Bd[`scheme${n}`],a=Bd[`interpolate${n}`];if(!i&&!a)return null;if(i){if(!i.some(Array.isArray))return i;const o=i[r.length];if(o)return o}return r.map((o,s)=>a(e(s/r.length)))}function xV(t){const{palette:r="ylGnBu",offset:e}=t,n=yi(r),i=Bd[`interpolate${n}`];if(!i)throw new Error(`Unknown palette: ${n}`);return{interpolator:e?a=>i(e(a)):i}}function OV(t,r){const{interpolate:e=Os,nice:n=!1,tickCount:i=5}=r;return Object.assign(Object.assign({},r),{interpolate:e,nice:n,tickCount:i})}function wV(t,r,e,n){if(n.padding!==void 0||n.paddingInner!==void 0||n.paddingOuter!==void 0)return Object.assign(Object.assign({},n),{unknown:NaN});const i=_V(t,r,e),{paddingInner:a=i,paddingOuter:o=i}=n;return Object.assign(Object.assign({},n),{paddingInner:a,paddingOuter:o,padding:i,unknown:NaN})}function _V(t,r,e){return r==="enterDelay"||r==="enterDuration"||r==="size"?0:t==="band"?Ik(e)?0:.1:t==="point"?.5:0}function Mf(t,r){return r||(MV(t)?"point":"ordinal")}function E0(t,r,e){return e||(t!=="color"||r?"linear":"sequential")}function A0(t,r){if(t.length===0)return t;const{domainMin:e,domainMax:n}=r,[i,a]=t;return[e??i,n??a]}function SV(t,r){const{zero:e=!1}=r;let n=1/0,i=-1/0;for(const a of t)for(const o of a)le(o)&&(n=Math.min(n,+o),i=Math.max(i,+o));return n===1/0?[]:e?[Math.min(0,n),i]:[n,i]}function kV(t){return Array.from(new Set(t.flat()))}function EV(t){return t.flat().sort()}function AV(t){let r=1/0,e=-1/0;for(const n of t)for(const i of n)le(i)&&(r=Math.min(r,+i),e=Math.max(e,+i));return r===1/0?[]:[r<0?-e:r,e]}function TV(t,r){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[gL(r),Zx(r)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function T0(t){return bv(t,r=>{const e=typeof r;return e==="string"||e==="boolean"})}function P0(t){return bv(t,r=>r instanceof Date)}function PV(t){return bv(t,Ha)}function bv(t,r){for(const e of t)if(e.some(r))return!0;return!1}function MV(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function CV(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function LV(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:r,domain:e,range:n,interpolator:i}=t,a=e&&e.length>0,o=n&&n.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(r)&&a&&o||["sequential"].includes(r)&&a&&(o||i)||["constant","identity"].includes(r)&&o)}const NV={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},RV={threshold:"threshold",quantize:"quantize",quantile:"quantile"},IV={ordinal:"ordinal",band:"band",point:"point"},jV={constant:"constant"};var Ei=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function DV(t,r,e){const{coordinates:n=[],title:i}=r,[,a]=ve("component",e),o=t.filter(({guide:u})=>u!==null),s=[],l=UV(r,t,e);if(s.push(...l),i){const{props:u}=a("title"),{defaultPosition:f,defaultOrientation:d,defaultOrder:h,defaultSize:p,defaultCrossPadding:v}=u,g=typeof i=="string"?{title:i}:i;s.push(Object.assign({type:"title",position:f,orientation:d,order:h,crossPadding:v[0],defaultSize:p},g))}return WV(o,n).forEach(([u,f])=>{const{props:d}=a(u),{defaultPosition:h,defaultPlane:p="xy",defaultOrientation:v,defaultSize:g,defaultOrder:y,defaultLength:m,defaultPadding:b=[0,0],defaultCrossPadding:x=[0,0]}=d,O=X({},...f),{guide:w,field:_}=O,S=Array.isArray(w)?w:[w];for(const k of S){const[E,A]=YV(u,h,v,k,f,o,n);if(!E&&!A)continue;const T=E==="left"||E==="right",P=T?b[1]:b[0],N=T?x[1]:x[0],{size:I,order:R=y,length:C=m,padding:L=P,crossPadding:M=N}=k;s.push(Object.assign(Object.assign({title:_},k),{defaultSize:g,length:C,position:E,plane:p,orientation:A,padding:L,order:R,crossPadding:M,size:I,type:u,scales:f}))}}),s}function M0(t,r,e,n,i){const[a]=ve("component",n),{scaleInstances:o,scale:s,bbox:l}=t,c=Ei(t,["scaleInstances","scale","bbox"]),u={bbox:l,library:n};return a(c)({coordinate:r,library:n,markState:i,scales:o,theme:e,value:u,scale:s})}function $V(t){return t.map(r=>{const e=X(r,r.style);return delete e.style,e})}function Fk(t,r){const e=["left","right","bottom","top"];return bh(t,({type:a,position:o,group:s})=>e.includes(o)?s===void 0?a.startsWith("legend")?`legend-${o}`:Symbol("independent"):s==="independent"?Symbol("independent"):s:Symbol("independent")).flatMap(([,a])=>{if(a.length===1)return a[0];if(r!==void 0){const u=a.filter(v=>v.length!==void 0).map(v=>v.length),f=Nn(u);if(f>r)return a.forEach(v=>v.group=Symbol("independent")),a;const d=r-f,h=a.length-u.length,p=d/h;a.forEach(v=>{v.length===void 0&&(v.length=p)})}const o=oe(a,u=>u.size),s=oe(a,u=>u.order),l=oe(a,u=>u.crossPadding),c=a[0].position;return{type:"group",size:o,order:s,position:c,children:a,crossPadding:l}})}function FV(t,r){const e=["shape","size","color","opacity"],n=(d,h)=>d==="constant"&&h==="size",i=t.filter(({type:d,name:h})=>typeof d=="string"&&e.includes(h)&&!n(d,h)),a=i.filter(({type:d})=>d==="constant"),o=i.filter(({type:d})=>d!=="constant"),l=bh(o,d=>d.field?d.field:Symbol("independent")).map(([d,h])=>[d,[...h,...a]]).filter(([,d])=>d.some(h=>h.type!=="constant")),c=new Map(l);if(c.size===0)return[];const u=d=>d.sort(([h],[p])=>h.localeCompare(p));return Array.from(c).map(([,d])=>{const p=mL(d).sort((v,g)=>g.length-v.length).map(v=>({combination:v,option:v.map(g=>[g.name,BV(g)])}));for(const{option:v,combination:g}of p)if(!v.every(y=>y[1]==="constant")&&v.every(y=>y[1]==="discrete"||y[1]==="constant"))return["legendCategory",g];for(const[v,g]of w5)for(const{option:y,combination:m}of p)if(g.some(b=>Go(u(b),u(y))))return[v,m];return null}).filter(le)}function BV(t){const{type:r}=t;return typeof r!="string"?null:r in NV?"continuous":r in IV?"discrete":r in RV?"distribution":r in jV?"constant":null}function zV(t,r){return t.map(e=>{const{name:n}=e;if(JY(r)||Ik(r)||Ia(r)&&(Hi(r)||No(r)))return null;if(n.startsWith("x"))return Hi(r)?["axisArc",[e]]:No(r)?["axisLinear",[e]]:[Ia(r)?"axisY":"axisX",[e]];if(n.startsWith("y"))return Hi(r)?["axisLinear",[e]]:No(r)?["axisArc",[e]]:[Ia(r)?"axisX":"axisY",[e]];if(n.startsWith("z"))return["axisZ",[e]];if(n.startsWith("position")){if(jk(r))return["axisRadar",[e]];if(!Hi(r))return["axisY",[e]]}return null}).filter(le)}function WV(t,r){const e=t.filter(n=>LV(n));return[...FV(e),...zV(e,r)]}function zd(t){const r=Kn(t,"polar");if(r.length){const n=r[r.length-1],{startAngle:i,endAngle:a}=qb(n);return[i,a]}const e=Kn(t,"radial");if(e.length){const n=e[e.length-1],{startAngle:i,endAngle:a}=Qb(n);return[i,a]}return[-Math.PI/2,Math.PI/2*3]}function GV(t){const r=/position(\d*)/g.exec(t);return r?+r[1]:null}function HV(t,r,e,n,i){const{name:a}=e[0];if(t==="axisRadar"){const o=n.filter(d=>d.name.startsWith("position")),s=GV(a);if(s===null)return[null,null];const[l,c]=zd(i),u=jk(i)?o.length:o.length-1;return["center",(c-l)/u*s+l]}if(t==="axisY"&&tV(i))return Ia(i)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[o]=zd(i);return["center",o]}return t==="axisArc"?r[0]==="inner"?["inner",null]:["outer",null]:Hi(i)?["center",null]:No(i)?["center",null]:t==="axisX"&&eV(i)||t==="axisX"&&nV(i)?["top",null]:r}function YV(t,r,e,n,i,a,o){const[s]=zd(o),l=[n.position||r,s??e];return typeof t=="string"&&t.startsWith("axis")?HV(t,l,i,a,o):typeof t=="string"&&t.startsWith("legend")&&Hi(o)&&n.position==="center"?["center","vertical"]:l}function VV(t,r,e=[]){return t==="x"?Ia(e)?`${r}Y`:`${r}X`:t==="y"?Ia(e)?`${r}X`:`${r}Y`:null}function UV(t,r,e){const[,n]=ve("component",e),{coordinates:i}=t;function a(o,s,l,c){const u=VV(s,o,i);if(!c||!u)return;const{props:f}=n(u),{defaultPosition:d,defaultSize:h,defaultOrder:p,defaultCrossPadding:[v]}=f;return Object.assign(Object.assign({position:d,defaultSize:h,order:p,type:u,crossPadding:v},c),{scales:[l]})}return r.filter(o=>o.slider||o.scrollbar).flatMap(o=>{const{slider:s,scrollbar:l,name:c}=o;return[a("slider",c,o,s),a("scrollbar",c,o,l)]}).filter(o=>!!o)}function Bk(t,r,e,n,i,a){const{type:o}=t;if(!["left","right","bottom","top"].includes(n)||typeof o!="string")return;const l=o;return(l.startsWith("axis")?QV:l.startsWith("group")?XV:l.startsWith("legendContinuous")?JV:l==="legendCategory"?t4:l.startsWith("slider")?ZV:l==="title"?KV:l.startsWith("scrollbar")?qV:()=>{})(t,r,e,n,i,a)}function XV(t,r,e,n,i,a){const{children:o}=t,s=oe(o,c=>c.crossPadding);o.forEach(c=>c.crossPadding=s),o.forEach(c=>Bk(c,r,e,n,i,a));const l=oe(o,c=>c.size);t.size=l,o.forEach(c=>c.size=l)}function qV(t,r,e,n,i,a){const{trackSize:o=6}=X({},i.scrollbar,t);t.size=o}function KV(t,r,e,n,i,a){const o=X({},i.title,t),{title:s,subtitle:l,spacing:c=0}=o,u=Ei(o,["title","subtitle","spacing"]);if(s){const f=it(u,"title"),d=Ec(s,f);t.size=d.height}if(l){const f=it(u,"subtitle"),d=Ec(l,f);t.size+=c+d.height}}function ZV(t,r,e,n,i,a){const o=()=>{const{slider:u}=i;return X({},u,t)},{trackSize:s,handleIconSize:l}=o(),c=Math.max(s,l*2.4);t.size=c}function QV(t,r,e,n,i,a){var o,s;t.transform=t.transform||[{type:"hide"}];const l=n==="left"||n==="right",c=zk(t,n,i),{tickLength:u=0,labelSpacing:f=0,titleSpacing:d=0,labelAutoRotate:h}=c,p=Ei(c,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),v=Cu(t,a),g=Lu(p,v);let y=u;if(typeof t.tickLength=="function"){const O=(((o=v.getTicks)===null||o===void 0?void 0:o.call(v))||v.getOptions().domain).map((w,_,S)=>t.tickLength(w,_,S));y=Math.max(...O,0)}const m=y+f;if(g&&g.length){const x=oe(g,w=>w.width),O=oe(g,w=>w.height);if(l)t.size=x+m;else{const{tickFilter:w,labelTransform:_}=t;r4(v,g,r,e,w)&&!_&&h!==!1&&h!==null?(t.labelTransform="rotate(90)",t.size=x+m):(t.labelTransform=(s=t.labelTransform)!==null&&s!==void 0?s:"rotate(0)",t.size=O+m)}}else t.size=y;const b=Nu(p);b&&(l?t.size+=d+b.width:t.size+=d+b.height)}function JV(t,r,e,n,i,a){const s=(()=>{const{legendContinuous:x}=i;return X({},x,t)})(),{labelSpacing:l=0,titleSpacing:c=0}=s,u=Ei(s,["labelSpacing","titleSpacing"]),f=n==="left"||n==="right",d=it(u,"ribbon"),{size:h}=d,p=it(u,"handleIcon"),{size:v}=p,g=Math.max(h,v*2.4);t.size=g;const y=Cu(t,a),m=Lu(u,y);if(m){const x=f?"width":"height",O=oe(m,w=>w[x]);t.size+=O+l}const b=Nu(u);b&&(f?t.size=Math.max(t.size,b.width):t.size+=c+b.height)}function t4(t,r,e,n,i,a){const s=(()=>{const{legendCategory:R}=i,{title:C}=t,[L,M]=Array.isArray(C)?[C,void 0]:[void 0,C];return X({title:L},R,Object.assign(Object.assign({},t),{title:M}))})(),{focus:l,itemSpacing:c,focusMarkerSize:u,itemMarkerSize:f,titleSpacing:d,rowPadding:h,colPadding:p,maxCols:v=1/0,maxRows:g=1/0}=s,y=Ei(s,["focus","itemSpacing","focusMarkerSize","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:m,length:b}=t,x=R=>Math.min(R,g),O=R=>Math.min(R,v),w=n==="left"||n==="right",_=b===void 0?r+(w?0:e[0]+e[1]):b,S=Nu(y),k=Cu(t,a),E=Lu(y,k,"itemLabel"),A=Math.max(E[0].height,f)+h,T=(R,C=0)=>f+R+c[0]+C+(l?u+c[2]:0);w?(()=>{let R=-1/0,C=0,L=1,M=0,j=-1/0,F=-1/0;const $=S?S.height:0,B=_-$;for(const{width:z}of E){const W=T(z,p);R=Math.max(R,W),C+A>B?(L++,j=Math.max(j,M),F=Math.max(F,C),M=1,C=A):(C+=A,M++)}L<=1&&(j=M,F=C),t.size=R*O(L),t.length=F+$,X(t,{cols:O(L),gridRow:j})})():typeof m=="number"?(()=>{const R=Math.ceil(E.length/m),C=oe(E,L=>T(L.width))*m;t.size=A*x(R)-h,t.length=Math.min(C,_)})():(()=>{let R=1,C=0,L=-1/0;for(const{width:M}of E){const j=T(M,p);C+j>_?(L=Math.max(L,C),C=j,R++):C+=j}R===1&&(L=C),t.size=A*x(R)-h,t.length=L})(),S&&(w?t.size=Math.max(t.size,S.width):t.size+=d+S.height)}function Cu(t,r){const[e]=ve("scale",r),{scales:n,tickCount:i,tickMethod:a}=t,o=n.find(s=>s.type!=="constant"&&s.type!=="identity");return i!==void 0&&(o.tickCount=i),a!==void 0&&(o.tickMethod=a),e(o)}function Lu(t,r,e="label"){const{labelFormatter:n,tickFilter:i,label:a=!0}=t,o=Ei(t,["labelFormatter","tickFilter","label"]);if(!a)return null;const s=e4(r,n,i),l=it(o,e),c=s.map((d,h)=>Object.fromEntries(Object.entries(l).map(([p,v])=>[p,typeof v=="function"?v(d,h):v]))),u=s.map((d,h)=>{const p=c[h];return Ec(d,p)});if(!c.some(d=>d.transform)){const d=s.map((h,p)=>p);t.indexBBox=new Map(d.map(h=>[h,[s[h],u[h]]]))}return u}function Nu(t){const r=c=>c===!1||c===null,{title:e}=t,n=Ei(t,["title"]);if(r(e)||e===void 0)return null;const i=it(n,"title"),{direction:a,transform:o}=i,s=Array.isArray(e)?e.join(","):e;return typeof s!="string"?null:Ec(s,Object.assign(Object.assign({},i),{transform:o||(a==="vertical"?"rotate(-90)":"")}))}function zk(t,r,e){const{title:n}=t,[i,a]=Array.isArray(n)?[n,void 0]:[void 0,n],{axis:o,[`axis${Rh(r)}`]:s}=e;return X({title:i},o,s,Object.assign(Object.assign({},t),{title:a}))}function Wk(t,r){const e=t.getTicks?t.getTicks():t.getOptions().domain;return r?e.filter(r):e}function e4(t,r,e){const i=Wk(t,e).map(o=>typeof o=="number"?cc(o):o),a=r?typeof r=="string"?aa(r):r:t.getFormatter?t.getFormatter():o=>`${o}`;return i.map(a)}function n4(t,r){return t.getBandWidth?t.getBandWidth(r)/2:0}function r4(t,r,e,n,i){if(Nn(r,h=>h.width)>e)return!0;const o=t.clone();o.update({range:[0,e]});const s=Wk(t,i),l=s.map(h=>o.map(h)+n4(o,h)),c=s.map((h,p)=>p),u=-n[0],f=e+n[1],d=(h,p)=>{const{width:v}=p;return[h-v/2,h+v/2]};for(let h=0;h<c.length;h++){const p=l[h],[v,g]=d(p,r[h]);if(v<u||g>f)return!0;const y=l[h+1];if(y){const[m]=d(y,r[h+1]);if(g>m)return!0}}return!1}function Ec(t,r){const e=i4(t),{filter:n}=r,i=Ei(r,["filter"]);return e.attr(Object.assign(Object.assign({},i),{visibility:"none"})),e.getBBox()}function i4(t){return t instanceof de?t:new jn({style:{text:`${t}`}})}const C0=16;function a4(t){const r=t.find(({type:i})=>i==="axisX"),e=t.find(({type:i})=>i==="axisY"),n=t.find(({type:i})=>i==="axisZ");r&&e&&n&&(r.plane="xy",e.plane="xy",n.plane="yz",n.origin=[r.bbox.x,r.bbox.y,0],n.eulerAngles=[0,-90,0],n.bbox.x=r.bbox.x,n.bbox.y=r.bbox.y,t.push(Object.assign(Object.assign({},r),{plane:"xz",showLabel:!1,showTitle:!1,origin:[r.bbox.x,r.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},e),{plane:"yz",showLabel:!1,showTitle:!1,origin:[e.bbox.x+e.bbox.width,e.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},n),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function o4(t,r,e,n){var i,a,o,s;const{width:l,height:c,depth:u,x:f=0,y:d=0,z:h=0,inset:p=(i=e.inset)!==null&&i!==void 0?i:0,insetLeft:v=p,insetTop:g=p,insetBottom:y=p,insetRight:m=p,margin:b=(a=e.margin)!==null&&a!==void 0?a:0,marginLeft:x=b,marginBottom:O=b,marginTop:w=b,marginRight:_=b,padding:S=e.padding,paddingBottom:k=S,paddingLeft:E=S,paddingRight:A=S,paddingTop:T=S}=l4(t,r,e,n),P=x===C0&&E==="auto",N=_===C0&&A==="auto",I=mt(r,"coordinates",[]).some(ut=>ut.type==="transpose"),R=t.find(({type:ut})=>ut==="axisX"),{size:C,labelTransform:L}=R||{},M=1/4,j=(ut,pt,Bt,Wt,Rt)=>{const{marks:te}=r;if(te.length===0)return[Wt,Rt];if(ut-Wt-Rt-ut*M>0)return[Wt,Rt];const Dt=ut*(1-M);return[pt==="auto"?Dt*Wt/(Wt+Rt):Wt,Bt==="auto"?Dt*Rt/(Wt+Rt):Rt]},F=ut=>ut==="auto"?20:ut??20,$=F(T),B=F(k),z=L0(t,c-$-B,[$+w,B+O],["left","right"],r,e,n),{paddingLeft:W,paddingRight:Y}=z,V=l-x-_;let[G,q]=j(V,E,A,W,Y),Q=V-G-q;const nt=L0(t,Q,[G+x,q+_],["bottom","top"],r,e,n),{paddingTop:et,paddingBottom:at}=nt,lt=c-O-w,[st,ft]=j(lt,k,T,at,et),ht=lt-st-ft;if(C&&!I&&!L){const{fontSize:ut=12,fontFamily:pt="sans-serif",scales:Bt=[]}=R,Wt=(s=(o=Bt?.[0])===null||o===void 0?void 0:o.domain)!==null&&s!==void 0?s:[];if(!Wt.length)return;const Rt=(te,ee,ne,Dt)=>{const Gt=vw(ee,{fontSize:ut,fontFamily:pt}),he=Gt/2-ne-Dt;he>0&&(Q-=he,te==="left"?G+=Gt/2-ne:q+=Gt/2-ne)};P&&Rt("left",d2(Wt),x,G),N&&Rt("right",xn(Wt),_,q)}return{width:l,height:c,depth:u,insetLeft:v,insetTop:g,insetBottom:y,insetRight:m,innerWidth:Q,innerHeight:ht,paddingLeft:G,paddingRight:q,paddingTop:ft,paddingBottom:st,marginLeft:x,marginBottom:O,marginTop:w,marginRight:_,x:f,y:d,z:h}}function s4(t){const{height:r,width:e,padding:n=0,paddingLeft:i=n,paddingRight:a=n,paddingTop:o=n,paddingBottom:s=n,margin:l=16,marginLeft:c=l,marginRight:u=l,marginTop:f=l,marginBottom:d=l,inset:h=0,insetLeft:p=h,insetRight:v=h,insetTop:g=h,insetBottom:y=h}=t,m=O=>O==="auto"?20:O,b=e-m(i)-m(a)-c-u-p-v,x=r-m(o)-m(s)-f-d-g-y;return{width:b,height:x}}function l4(t,r,e,n){const{coordinates:i}=r;if(!Hi(i)&&!No(i))return r;const a=t.filter(y=>typeof y.type=="string"&&y.type.startsWith("axis"));if(a.length===0)return r;const o=a.map(y=>{const m=y.type==="axisArc"?"arc":"linear";return zk(y,m,e)}),s=oe(o,y=>{var m;return(m=y.labelSpacing)!==null&&m!==void 0?m:0}),l=a.flatMap((y,m)=>{const b=o[m],x=Cu(y,n);return Lu(b,x)}).filter(le),c=oe(l,y=>y.height)+s,u=a.flatMap((y,m)=>{const b=o[m];return Nu(b)}).filter(y=>y!==null),f=u.length===0?0:oe(u,y=>y.height),{inset:d=c,insetLeft:h=d,insetBottom:p=d,insetTop:v=d+f,insetRight:g=d}=r;return Object.assign(Object.assign({},r),{insetLeft:h,insetBottom:p,insetTop:v,insetRight:g})}function L0(t,r,e,n,i,a,o){const s=ce(t,p=>p.position),{padding:l=a.padding,paddingLeft:c=l,paddingRight:u=l,paddingBottom:f=l,paddingTop:d=l}=i,h={paddingBottom:f,paddingLeft:c,paddingTop:d,paddingRight:u};for(const p of n){const v=`padding${Rh(dp(p))}`,g=s.get(p)||[],y=h[v],m=k=>{k.size===void 0&&(k.size=k.defaultSize)},b=k=>{k.type==="group"?(k.children.forEach(m),k.size=oe(k.children,E=>E.size)):k.size=k.defaultSize},x=k=>{k.size||(y!=="auto"?b(k):(Bk(k,r,e,p,a,o),m(k)))},O=k=>{k.type.startsWith("axis")&&k.labelAutoHide===void 0&&(k.labelAutoHide=!0)},w=p==="bottom"||p==="top",_=Zn(g,k=>k.order),S=g.filter(k=>k.type.startsWith("axis")&&k.order==_);if(S.length&&(S[0].crossPadding=0),typeof y=="number")g.forEach(m),g.forEach(O);else if(g.length===0)h[v]=0;else{const k=w?r+e[0]+e[1]:r,E=Fk(g,k);E.forEach(x);const A=E.reduce((T,{size:P,crossPadding:N=12})=>T+P+N,0);h[v]=A}}return h}function c4(t,r,e){const n=ce(t,w=>`${w.plane||"xy"}-${w.position}`),{paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:v,insetRight:g,insetTop:y,height:m,width:b,depth:x}=e,O={xy:Cf({width:b,height:m,paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:v,insetRight:g,insetTop:y}),yz:Cf({width:x,height:m,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:x,innerHeight:m,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:Cf({width:b,height:x,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:b,innerHeight:x,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[w,_]of n.entries()){const[S,k]=w.split("-"),E=O[S][k],[A,T]=Qx(_,P=>typeof P.type!="string"?!1:!!(k==="center"||P.type.startsWith("axis")&&["inner","outer"].includes(k)));A.length&&u4(A,r,E,k),T.length&&b4(_,r,E)}}function Cf({width:t,height:r,paddingLeft:e,paddingRight:n,paddingTop:i,paddingBottom:a,marginLeft:o,marginTop:s,marginBottom:l,marginRight:c,innerHeight:u,innerWidth:f,insetBottom:d,insetLeft:h,insetRight:p,insetTop:v}){const g=e+o,y=i+s,m=n+c,b=a+l,x=t-o-c,O=[g+h,y+v,f-h-p,u-v-d,"center",null,null];return{top:[g,0,f,y,"vertical",!0,Hn,o,x],right:[t-m,y,m,u,"horizontal",!1,Hn],bottom:[g,r-b,f,b,"vertical",!1,Hn,o,x],left:[0,y,g,u,"horizontal",!0,Hn],"top-left":[g,0,f,y,"vertical",!0,Hn],"top-right":[g,0,f,y,"vertical",!0,Hn],"bottom-left":[g,r-b,f,b,"vertical",!1,Hn],"bottom-right":[g,r-b,f,b,"vertical",!1,Hn],center:O,inner:O,outer:O}}function u4(t,r,e,n){const[i,a]=Qx(t,o=>!!(typeof o.type=="string"&&o.type.startsWith("axis")));f4(i,r,e,n),x4(a,r,e)}function f4(t,r,e,n){n==="center"?sN(r)?m4(t,r,e):Jt(r)?p4(t,r,e):au(r)&&v4(t,r,e,t[0].orientation):n==="inner"?d4(t,r,e):n==="outer"&&h4(t,r,e)}function d4(t,r,e){const[n,i,,a]=e,[o,s]=r.getCenter(),[l]=ou(r),c=a/2,u=l*c,f=o-u,d=s-u;for(let h=0;h<t.length;h++){const p=t[h];p.bbox={x:n+f,y:i+d,width:u*2,height:u*2}}}function h4(t,r,e){const[n,i,a,o]=e;for(const s of t)s.bbox={x:n,y:i,width:a,height:o}}function p4(t,r,e){const[n,i,a,o]=e;for(const s of t)s.bbox={x:n,y:i,width:a,height:o}}function v4(t,r,e,n){n==="horizontal"?y4(t,r,e):n==="vertical"&&g4(t,r,e)}function g4(t,r,e){const[n,i,,a]=e,o=new Array(t.length).fill(0),l=r.map(o).filter((c,u)=>u%2===0).map(c=>c+n);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],d=l[c+1]-f;u.bbox={x:f,y:i,width:d,height:a}}}function y4(t,r,e){const[n,i,a]=e,o=new Array(t.length).fill(0),l=r.map(o).filter((c,u)=>u%2===1).map(c=>c+i);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],d=l[c+1]-f;u.bbox={x:n,y:f,width:a,height:d}}}function m4(t,r,e,n){const[i,a,o,s]=e;for(const l of t)l.bbox={x:i,y:a,width:o,height:s},l.radar={index:t.indexOf(l),count:t.length}}function b4(t,r,e){const[n,i,a,o,s,l,c,u,f]=e,[d,h,p,v,g,y,m,b]=s==="vertical"?["y",i,"x",n,"height",o,"width",a]:["x",n,"y",i,"width",a,"height",o];t.sort((k,E)=>c?.(k.order,E.order));const x=k=>k==="title"||k==="group"||k.startsWith("legend"),O=(k,E,A)=>A===void 0?E:x(k)?A:E,w=(k,E,A)=>A===void 0?E:x(k)?A:E,_=l?h+y:h;for(let k=0,E=_;k<t.length;k++){const A=t[k],{crossPadding:T=0,type:P}=A,{size:N}=A;A.bbox={[d]:l?E-N-T:E+T,[p]:w(P,v,u),[g]:N,[m]:O(P,b,f)},E+=(N+T)*(l?-1:1)}const S=t.filter(k=>k.type==="group");for(const k of S){const{bbox:E,children:A}=k,T=E[m],P=T/A.length,N=A.reduce((M,j)=>{var F;const $=(F=j.layout)===null||F===void 0?void 0:F.justifyContent;return $||M},"flex-start"),I=A.map((M,j)=>{const{length:F=P,padding:$=0}=M;return F+(j===A.length-1?0:$)}),R=Nn(I),C=T-R,L=N==="flex-start"?0:N==="center"?C/2:C;for(let M=0,j=E[p]+L;M<A.length;M++){const F=A[M],{padding:$=0}=F,B=M===A.length-1?0:$;F.bbox={[g]:E[g],[d]:E[d],[p]:j,[m]:I[M]-B},X(F,{layout:{justifyContent:N}}),j+=I[M]}}}function x4(t,r,e){if(t.length===0)return;const[n,i,a,o]=e,[s]=ou(r),l=o/2*s/Math.sqrt(2),c=n+a/2,u=i+o/2;for(let f=0;f<t.length;f++){const d=t[f];d.bbox={x:c-l,y:u-l,width:l*2,height:l*2}}}var O4=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},Za=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const xv=Symbol("CALLBACK_ITEM");function w4(t,r,e){const{encode:n={},scale:i={},transform:a=[]}=r,o=Za(r,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},o),{encode:n,scale:i,transform:a})]}function Gk(t,r,e){return O4(this,void 0,void 0,function*(){const{library:n}=e,{data:i}=r,[a]=ve("data",n),o=j4(i),{transform:s=[]}=o,u=[Za(o,["transform"]),...s].map(h=>a(h,e)),f=yield dL(u)(i),d=i&&!Array.isArray(i)&&!Array.isArray(f)?{value:f}:f;return[Array.isArray(f)?oa(f):[],Object.assign(Object.assign({},r),{data:d})]})}function _4(t,r,e){const{encode:n}=r;if(!n)return[t,r];const i={};for(const[a,o]of Object.entries(n))if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=`${a}${s===0?"":s}`;i[l]=o[s]}else i[a]=o;return[t,Object.assign(Object.assign({},r),{encode:i})]}function S4(t,r,e){const{encode:n,data:i}=r;if(!n)return[t,r];const a=br(n,o=>N4(o)?o:{type:R4(i,o),value:o});return[t,Object.assign(Object.assign({},r),{encode:a})]}function k4(t,r,e){const{encode:n}=r;if(!n)return[t,r];const i=br(n,(a,o)=>{const{type:s}=a;return s!=="constant"||CV(o)?a:Object.assign(Object.assign({},a),{constant:!0})});return[t,Object.assign(Object.assign({},r),{encode:i})]}function E4(t,r,e){const{encode:n,data:i}=r;if(!n)return[t,r];const{library:a}=e,o=F4(a),s=br(n,l=>o(i,l));return[t,Object.assign(Object.assign({},r),{encode:s})]}function A4(t,r,e){const{tooltip:n={}}=r;return Wr(n)?[t,r]:Array.isArray(n)?[t,Object.assign(Object.assign({},r),{tooltip:{items:n}})]:Ha(n)&&Z_(n)?[t,Object.assign(Object.assign({},r),{tooltip:n})]:[t,Object.assign(Object.assign({},r),{tooltip:{items:[n]}})]}function T4(t,r,e){const{data:n,encode:i,tooltip:a={}}=r;if(Wr(a))return[t,r];const o=f=>{if(!f)return f;if(typeof f=="string")return t.map(d=>({name:f,value:n[d][f]}));if(Ha(f)){const{field:d,channel:h,color:p,name:v=d,valueFormatter:g=w=>w}=f,y=typeof g=="string"?aa(g):g,m=h&&i[h],b=m&&i[h].field,x=v||b||h,O=[];for(const w of t){const _=d?n[w][d]:m?i[h].value[w]:null;O[w]={name:x,color:p,value:y(_)}}return O}if(typeof f=="function"){const d=[];for(const h of t){const p=f(n[h],h,n,i);Ha(p)?d[h]=Object.assign(Object.assign({},p),{[xv]:!0}):d[h]={value:p}}return d}return f},{title:s,items:l=[]}=a,c=Za(a,["title","items"]),u=Object.assign({title:o(s),items:Array.isArray(l)?l.map(o):[]},c);return[t,Object.assign(Object.assign({},r),{tooltip:u})]}function P4(t,r,e){const{encode:n}=r,i=Za(r,["encode"]);if(!n)return[t,r];const a=Object.entries(n),o=a.filter(([,l])=>{const{value:c}=l;return Array.isArray(c[0])}).flatMap(([l,c])=>{const u=[[l,new Array(t.length).fill(void 0)]],{value:f}=c,d=Za(c,["value"]);for(let h=0;h<f.length;h++){const p=f[h];if(Array.isArray(p))for(let v=0;v<p.length;v++){const g=u[v]||[`${l}${v}`,new Array(t).fill(void 0)];g[1][h]=p[v],u[v]=g}}return u.map(([h,p])=>[h,Object.assign({type:"column",value:p},d)])}),s=Object.fromEntries([...a,...o]);return[t,Object.assign(Object.assign({},i),{encode:s})]}function M4(t,r,e){const{axis:n={},legend:i={},slider:a={},scrollbar:o={}}=r,s=(c,u)=>{if(typeof c=="boolean")return c?{}:null;const f=c[u];return f===void 0||f?f:null},l=typeof n=="object"?Array.from(new Set(["x","y","z",...Object.keys(n)])):["x","y","z"];return X(r,{scale:Object.assign(Object.assign({},Object.fromEntries(l.map(c=>{const u=s(o,c);return[c,Object.assign({guide:s(n,c),slider:s(a,c),scrollbar:u},u&&{ratio:u.ratio===void 0?.5:u.ratio})]}))),{color:{guide:s(i,"color")},size:{guide:s(i,"size")},shape:{guide:s(i,"shape")},opacity:{guide:s(i,"opacity")}})}),[t,r]}function C4(t,r,e){const{animate:n}=r;return n||n===void 0?[t,r]:(X(r,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,r])}function L4(t,r,e){var n,i;return X(r,{scale:{series:Object.assign({key:`DEFAULT_${r.type}_SERIES_KEY`},(i=(n=r?.scale)===null||n===void 0?void 0:n.series)!==null&&i!==void 0?i:{})}}),[t,r]}function N4(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:r}=t;return le(r)}function R4(t,r){return typeof r=="function"?"transform":typeof r=="string"&&I4(t,r)?"field":"constant"}function I4(t,r){return Array.isArray(t)?t.some(e=>e[r]!==void 0):!1}function j4(t){if(fe(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:r="inline"}=t,e=Za(t,["type"]);return Object.assign(Object.assign({},e),{type:r})}var Hk=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},D4=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function $4(t,r,e){return Hk(this,void 0,void 0,function*(){const[n,i]=yield B4(t,r,e),{encode:a,scale:o,data:s,tooltip:l,key:c}=i;if(Array.isArray(s)===!1)return null;const{channels:u}=r,f=vh(Object.entries(a).filter(([,h])=>le(h)),h=>h.map(([p,v])=>Object.assign({name:p},v)),([h])=>{var p;const v=(p=/([^\d]+)\d*$/.exec(h))===null||p===void 0?void 0:p[1],g=u.find(y=>y.name===v);return g?.independent?h:v}),d=u.filter(h=>{const{name:p,required:v}=h;if(f.find(([g])=>g===p))return!0;if(v)throw new Error(`Missing encoding for channel: ${p}.`);return!1}).flatMap(h=>{const{name:p,scale:v,scaleKey:g,range:y,quantitative:m,ordinal:b}=h;return f.filter(([O])=>O.startsWith(p)).map(([O,w],_)=>{const S=w.some(C=>C.visual),k=w.some(C=>C.constant),E=o[O]||{},{independent:A=!1,key:T=g||O,type:P=k?"constant":S?"identity":v}=E,N=D4(E,["independent","key","type"]),I=P==="constant",R=I?void 0:y;return{name:O,values:w,scaleKey:A||I?Symbol("independent"):T,scale:Object.assign(Object.assign({type:P,markKey:c,range:R},N),{quantitative:m,ordinal:b})}})});return[i,Object.assign(Object.assign({},r),{index:n,channels:d,tooltip:l})]})}function F4(t){const[r]=ve("encode",t);return(e,n)=>n===void 0||e===void 0?null:Object.assign(Object.assign({},n),{type:"column",value:r(n)(e),field:z4(n)})}function B4(t,r,e){return Hk(this,void 0,void 0,function*(){const{library:n}=e,[i]=ve("transform",n),{preInference:a=[],postInference:o=[]}=r,{transform:s=[]}=t,l=[w4,Gk,_4,S4,k4,E4,P4,C4,M4,A4,L4,...a.map(i),...s.map(i),...o.map(i),T4];let c=[],u=t;for(const f of l)[c,u]=yield f(c,u,e);return[c,u]})}function z4(t){const{type:r,value:e}=t;return r==="field"&&typeof e=="string"?e:null}var $r=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},pi=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Ov(t,r,e){return $r(this,void 0,void 0,function*(){var n;const{library:i}=e,[a]=ve("composition",i),[o]=ve("interaction",i),s=new Set(Object.keys(i).map(P=>{var N;return(N=/mark\.(.*)/.exec(P))===null||N===void 0?void 0:N[1]}).filter(le)),l=new Set(Object.keys(i).map(P=>{var N;return(N=/component\.(.*)/.exec(P))===null||N===void 0?void 0:N[1]}).filter(le)),c=P=>{const{type:N}=P;if(typeof N=="function"){const{props:I={}}=N,{composite:R=!0}=I;if(R)return"mark"}return typeof N!="string"?N:s.has(N)||l.has(N)?"mark":N},u=P=>c(P)==="mark",f=P=>c(P)==="standardView",d=P=>{const{type:N}=P;return typeof N!="string"?!1:!!l.has(N)},h=P=>{if(f(P))return[P];const N=c(P);return a({type:N,static:d(P)})(P)},p=[],v=new Map,g=new Map,y=[t],m=[];for(;y.length;){const P=y.shift();if(f(P)){const N=g.get(P),[I,R]=N?Uk(N,P,i):yield Yk(P,e);v.set(I,P),p.push(I);const C=R.flatMap(h).map(L=>Rk(L,i));if(y.push(...C),C.every(f)){const L=yield Promise.all(C.map(M=>Vk(M,e)));cV(L);for(let M=0;M<C.length;M++){const j=C[M],F=L[M];g.set(j,F)}}}else{const N=u(P)?P:yield Zk(P,e),I=h(N);Array.isArray(I)?y.push(...I):typeof I=="function"&&m.push(I())}}e.emitter.emit(Vt.BEFORE_PAINT);const b=new Map,x=new Map,O=[];r.selectAll(Ln(vc)).data(p,P=>P.key).join(P=>P.append("g").attr("className",vc).attr("id",N=>N.key).call(N0).each(function(N,I,R){Gd(N,yt(R),O,e),b.set(N,R)}),P=>P.call(N0).each(function(N,I,R){Gd(N,yt(R),O,e),x.set(N,R)}),P=>P.each(function(N,I,R){const C=R.nameInteraction.values();for(const L of C)L.destroy()}).remove());const w=(P,N,I)=>Array.from(P.entries()).map(([R,C])=>{const L=I||new Map,M=(B,z=W=>W)=>L.set(B,z),j=v.get(R),F=G4(yt(C),j,e),$={view:R,container:C,options:j,setState:M,update:(B,z)=>$r(this,void 0,void 0,function*(){const Y=Nh(Array.from(L.values()))(j);return yield F(Y,B,()=>{Le(z)&&N(P,z,L)})})};return e.externals.update=$.update,e.externals.setState=M,$}),_=(P=x,N,I)=>{var R;const C=w(P,_,I);for(const L of C){const{options:M,container:j}=L,F=j.nameInteraction;let $=Ac(M);N&&($=$.filter(B=>N.includes(B[0])));for(const B of $){const[z,W]=B,Y=F.get(z);if(Y&&((R=Y.destroy)===null||R===void 0||R.call(Y)),W){const G=Wd(L.view,z,W,o)(L,C,e.emitter);F.set(z,{destroy:G})}}}},S=w(b,_);for(const P of S){const{options:N}=P,I=new Map;P.container.nameInteraction=I;for(const R of Ac(N)){const[C,L]=R;if(L){const j=Wd(P.view,C,L,o)(P,S,e.emitter);I.set(C,{destroy:j})}}}_();const{width:k,height:E}=t,A=[];for(const P of m){const N=new Promise(I=>$r(this,void 0,void 0,function*(){for(const R of P){const C=Object.assign({width:k,height:E},R);yield Ov(C,r,e)}I()}));A.push(N)}e.views=p,(n=e.animations)===null||n===void 0||n.forEach(P=>P?.cancel()),e.animations=O,e.emitter.emit(Vt.AFTER_PAINT);const T=O.filter(le).map(aU).map(P=>P.finished);return Promise.all([...T,...A])})}function N0(t){t.style("transform",r=>`translate(${r.layout.x}, ${r.layout.y})`)}function W4(t){const[,r]=ve("interaction",t);return e=>{const[n,i]=e;try{return[n,r(n)]}catch{return[n,i.type]}}}function G4(t,r,e){const{library:n}=e,i=W4(n),a=l=>l[1]&&l[1].props&&l[1].props.reapplyWhenUpdate,s=Ac(r).map(i).filter(a).map(l=>l[0]);return(l,c,u)=>$r(this,void 0,void 0,function*(){const f=[],[d,h]=yield Yk(l,e);Gd(d,t,f,e);for(const p of s.filter(v=>v!==c))H4(p,t,l,d,e);for(const p of h)Ov(p,t,e);return u(),{options:l,view:d}})}function H4(t,r,e,n,i){var a;const{library:o}=i,[s]=ve("interaction",o),c=r.node().nameInteraction,u=Ac(e).find(([v])=>v===t),f=c.get(t);if(!f||((a=f.destroy)===null||a===void 0||a.call(f),!u[1]))return;const d=Wd(n,t,u[1],s),h={options:e,view:n,container:r.node(),update:v=>Promise.resolve(v)},p=d(h,[],i.emitter);c.set(t,{destroy:p})}function Yk(t,r){return $r(this,void 0,void 0,function*(){const{library:e}=r,n=yield V4(t,r),i=Y4(n);t.interaction=i.interaction,t.coordinate=i.coordinate,t.marks=[...i.marks,...i.components];const a=Rk(i,e),o=yield Vk(a,r);return Uk(o,a,e)})}function Y4(t){const{coordinate:r={},interaction:e={},style:n={},marks:i}=t,a=pi(t,["coordinate","interaction","style","marks"]),o=i.map(d=>d.coordinate||{}),s=i.map(d=>d.interaction||{}),l=i.map(d=>d.viewStyle||{}),c=[...o,r].reduceRight((d,h)=>X(d,h),{}),u=[e,...s].reduce((d,h)=>X(d,h),{}),f=[...l,n].reduce((d,h)=>X(d,h),{});return Object.assign(Object.assign({},a),{marks:i,coordinate:c,interaction:u,style:f})}function V4(t,r){return $r(this,void 0,void 0,function*(){const{library:e}=r,[n,i]=ve("mark",e),a=new Set(Object.keys(e).map(h=>{var p;return(p=/component\.(.*)/.exec(h))===null||p===void 0?void 0:p[1]}).filter(le)),{marks:o}=t,s=[],l=[],c=[...o],{width:u,height:f}=s4(t),d={options:t,width:u,height:f};for(;c.length;){const[h]=c.splice(0,1),p=yield Zk(h,r),{type:v=Ga("G2Mark type is required."),key:g}=p;if(a.has(v))l.push(p);else{const{props:y={}}=i(v),{composite:m=!0}=y;if(!m)s.push(p);else{const{data:b}=p,x=Object.assign(Object.assign({},p),{data:b&&(Array.isArray(b)?b:b.value)}),O=yield n(x,d),w=Array.isArray(O)?O:[O];c.unshift(...w.map((_,S)=>Object.assign(Object.assign({},_),{key:`${g}-${S}`})))}}}return Object.assign(Object.assign({},t),{marks:s,components:l})})}function Vk(t,r){return $r(this,void 0,void 0,function*(){const{library:e}=r,[n]=ve("theme",e),[,i]=ve("mark",e),{theme:a,marks:o,coordinates:s=[]}=t,l=n(Kk(a)),c=new Map;for(const f of o){const{type:d}=f,{props:h={}}=i(d),p=yield $4(f,h,r);if(p){const[v,g]=p;c.set(v,g)}}const u=ce(Array.from(c.values()).flatMap(f=>f.channels),({scaleKey:f})=>f);for(const f of u.values()){const d=f.reduce((x,{scale:O})=>X(x,O),{}),{scaleKey:h}=f[0],{values:p}=f[0],v=Array.from(new Set(p.map(x=>x.field).filter(le))),g=X({guide:{title:v.length===0?void 0:v},field:v[0]},d),{name:y}=f[0],m=f.flatMap(({values:x})=>x.map(O=>O.value)),b=Object.assign(Object.assign({},iV(y,m,g,s,l,e)),{uid:Symbol("scale"),key:h});f.forEach(x=>x.scale=b)}return c})}function Wd(t,r,e,n){const i=t.theme,a=typeof r=="string"?i[r]||{}:{};return n(X(a,Object.assign({type:r},e)))}function Uk(t,r,e){var n;const[i]=ve("mark",e),[a]=ve("theme",e),[o]=ve("labelTransform",e),{key:s,frame:l=!1,theme:c,clip:u,style:f={},labelTransform:d=[]}=r,h=a(Kk(c)),p=Array.from(t.values()),v=sV(p,r),g=$V(DV(lU(Array.from(v),p,t),r,e)),y=o4(g,r,h,e),m=QY(y,r,e),b=l?X({mainLineWidth:1,mainStroke:"#000"},f):f;c4(Fk(g),m,y),a4(g);const x=new Map(Array.from(t.values()).flatMap(k=>{const{channels:E}=k;return E.map(({scale:A})=>[A.uid,_0(A,e)])}));oV(t,x);const O={};for(const k of g){const{scales:E=[]}=k,A=[];for(const T of E){const{name:P,uid:N}=T,I=(n=x.get(N))!==null&&n!==void 0?n:_0(T,e);A.push(I),P==="y"&&I.update(Object.assign(Object.assign({},I.getOptions()),{xScale:O.x})),w0(O,{[P]:I})}k.scaleInstances=A}const w=[],_=new Map;for(const[k,E]of t.entries()){const{children:A,dataDomain:T,modifier:P,key:N,data:I}=k;_.set(N,I);const{index:R,channels:C,tooltip:L}=E,M=Object.fromEntries(C.map(({name:et,scale:at})=>[et,at])),j=br(M,({uid:et})=>x.get(et));w0(O,j);const F=aV(C,j),$=i(k),[B,z,W]=K4($(R,j,F,m)),Y=T||B.length,V=P?P(z,Y,y):[],G=et=>{var at,lt;return(lt=(at=L.title)===null||at===void 0?void 0:at[et])===null||lt===void 0?void 0:lt.value},q=et=>L.items.map(at=>at[et]),Q=B.map((et,at)=>{const lt=Object.assign({points:z[at],transform:V[at],index:et,markKey:N,viewKey:s,data:I[et]},L&&{title:G(et),items:q(et)});for(const[st,ft]of Object.entries(F))lt[st]=ft[et],W&&(lt[`series${yi(st)}`]=W[at].map(ht=>ft[ht]));return W&&(lt.seriesIndex=W[at]),W&&L&&(lt.seriesItems=W[at].map(st=>q(st)),lt.seriesTitle=W[at].map(st=>G(st))),lt});E.data=Q,E.index=B;const nt=A?.(Q,j,y);w.push(...nt||[])}return[{layout:y,theme:h,coordinate:m,markState:t,key:s,clip:u,scale:O,style:b,components:g,data:_,options:r,labelTransform:Nh(d.map(o))},w]}function Gd(t,r,e,n){return $r(this,void 0,void 0,function*(){const{library:i}=n,{components:a,theme:o,layout:s,markState:l,coordinate:c,key:u,style:f,clip:d,scale:h}=t,{x:p,y:v,width:g,height:y}=s,m=pi(s,["x","y","width","height"]),b=["view","plot","main","content"],x=b.map((L,M)=>M),O=["a","margin","padding","inset"],w=b.map(L=>qx(Object.assign({},o.view,f),L)),_=O.map(L=>it(m,L)),S=L=>L.style("x",M=>P[M].x).style("y",M=>P[M].y).style("width",M=>P[M].width).style("height",M=>P[M].height).each(function(M,j,F){cU(yt(F),w[M])});let k=0,E=0,A=g,T=y;const P=x.map(L=>{const M=_[L],{left:j=0,top:F=0,bottom:$=0,right:B=0}=M;return k+=j,E+=F,A-=j+B,T-=F+$,{x:k,y:E,width:A,height:T}});r.selectAll(Ln(vm)).data(x.filter(L=>le(w[L])),L=>b[L]).join(L=>L.append("rect").attr("className",vm).style("zIndex",-2).call(S),L=>L.call(S),L=>L.remove());const N=tU(l),I=N?{duration:N[1]}:!1;for(const[,L]of bh(a,M=>`${M.type}-${M.position}`))L.forEach((M,j)=>M.index=j);const R=r.selectAll(Ln(pm)).data(a,L=>`${L.type}-${L.position}-${L.index}`).join(L=>L.append("g").style("zIndex",({zIndex:M})=>M||-1).attr("className",pm).append(M=>M0(X({animate:I,scale:h},M),c,o,i,l)),L=>L.transition(function(M,j,F){const{preserve:$=!1}=M;if($)return;const B=M0(X({animate:I,scale:h},M),c,o,i,l),{attributes:z}=B,[W]=F.childNodes;return W.update(z,!1)})).transitions();e.push(...R.flat().filter(le));const C=r.selectAll(Ln(hi)).data([s],()=>u).join(L=>L.append("rect").style("zIndex",0).style("fill","transparent").attr("className",hi).call(R0).call(I0,Array.from(l.keys())).call(j0,d),L=>L.call(I0,Array.from(l.keys())).call(R0).call(j0,d)).transitions();e.push(...C.flat());for(const[L,M]of l.entries()){const{data:j}=M,{key:F,class:$,type:B}=L,z=r.select(`#${F}`),W=rU(L,M,t,n),Y=iU(L,M,t,i),V=oU(L,M,t,i),G=sU(L,M,t,i),q=eU(r,z,$,"element"),Q=z.selectAll(Ln(or)).selectFacetAll(q).data(j,nt=>nt.key,nt=>nt.groupKey).join(nt=>nt.append(W).attr("className",or).attr("markType",B).transition(function(et,at,lt){return Y(et,[lt])}),nt=>nt.call(et=>{const at=et.parent(),lt=hL(st=>{const[ft,ht]=st.getBounds().min;return[ft,ht]});et.transition(function(st,ft,ht){nU(ht,at,lt);const ut=W(st,ft),pt=V(st,[ht],[ut]);return pt?.length||(ht.nodeName===ut.nodeName&&ut.nodeName!=="g"?Zc(ht,ut):(ht.parentNode.replaceChild(ut,ht),ut.className=or,ut.markType=B,ut.__data__=ht.__data__)),pt}).each(function(st,ft,ht){ht.__removed__&&(ht.__removed__=!1)}).attr("markType",B).attr("className",or)}),nt=>nt.each(function(et,at,lt){lt.__removed__=!0}).transition(function(et,at,lt){return G(et,[lt])}).remove(),nt=>nt.append(W).attr("className",or).attr("markType",B).transition(function(et,at,lt){const{__fromElements__:st}=lt,ft=V(et,st,[lt]);return new lc(st,null,lt.parentNode).transition(ft).remove(),ft}),nt=>nt.transition(function(et,at,lt){const ft=new lc([],lt.__toData__,lt.parentNode).append(W).attr("className",or).attr("markType",B).nodes();return V(et,[lt],ft)}).remove()).transitions();e.push(...Q.flat())}U4(t,r,e,i,n),q4(t,r,i,n)})}function U4(t,r,e,n,i){const[a]=ve("labelTransform",n),{markState:o,labelTransform:s}=t,l=r.select(Ln(Nd)).node(),c=new Map,u=new Map,f=Array.from(o.entries()).flatMap(([y,m])=>{const{labels:b=[],key:x}=y,O=J4(y,m,t,n,i),w=r.select(`#${x}`).selectAll(Ln(or)).nodes().filter(_=>{var S;return _.__removed__?!1:!(((S=_.style)===null||S===void 0?void 0:S.visibility)==="hidden"||_.children&&_.children.some(E=>{var A;return((A=E.style)===null||A===void 0?void 0:A.visibility)==="hidden"}))});return b.flatMap((_,S)=>{const{transform:k=[]}=_,E=pi(_,["transform"]);return w.flatMap(A=>{const T=X4(E,S,A);return T.forEach(P=>{c.set(P,N=>O(Object.assign(Object.assign({},N),{element:A}))),u.set(P,_)}),T})})}),d=yt(l).selectAll(Ln(Rd)).data(f,y=>y.key).join(y=>y.append(m=>c.get(m)(m)).attr("className",Rd),y=>y.each(function(m,b,x){const w=c.get(m)(m);Zc(x,w)}),y=>y.remove()).nodes(),h=ce(d,y=>u.get(y.__data__)),{coordinate:p,layout:v}=t,g={canvas:i.canvas,coordinate:p,layout:v};for(const[y,m]of h){const{transform:b=[]}=y;Nh(b.map(a))(m,g)}s&&s(d,g)}function X4(t,r,e){const{seriesIndex:n,seriesKey:i,points:a,key:o,index:s}=e.__data__,l=Q4(e);if(!n)return[Object.assign(Object.assign({},t),{key:`${o}-${r}`,bounds:l,index:s,points:a,dependentElement:e})];const c=Z4(t),u=n.map((f,d)=>Object.assign(Object.assign({},t),{key:`${i[d]}-${r}`,bounds:[a[d]],index:f,points:a,dependentElement:e}));return c?c(u):u}function q4(t,r,e,n){const i=t.scale,a=mt(i,"y.options.breaks",[]),{document:o}=n.canvas;if([Of,C_].forEach(u=>{o.getElementsByClassName(u).forEach(f=>{f.remove()})}),!a.length)return;const s=r.select(Ln(hi)).node(),[l]=ve("shape",e),c=new Map;a.forEach((u,f)=>{c.set(u,l({type:"break"},{view:t,selection:r,context:n}))}),yt(s).selectAll(Ln(Of)).data(a,u=>u.key).join(u=>u.append((f,d)=>c.get(f)(f,d)).attr("className",Of),u=>u.each(function(f,d,h){const v=c.get(f)(f,d);Zc(h,v)}),u=>u.remove()).nodes()}function K4([t,r,e]){if(e)return[t,r,e];const n=[],i=[];for(let a=0;a<t.length;a++){const o=t[a],s=r[a];s.every(([l,c])=>le(l)&&le(c))&&(n.push(o),i.push(s))}return[n,i]}function Z4(t){const{selector:r}=t;if(!r)return null;if(typeof r=="function")return r;if(r==="first")return e=>[e[0]];if(r==="last")return e=>[e[e.length-1]];throw new Error(`Unknown selector: ${r}`)}function Q4(t){const r=t.cloneNode(!0),e=t.getAnimations();r.style.visibility="hidden",e.forEach(o=>{const s=o.effect.getKeyframes();r.attr(s[s.length-1])}),t.parentNode.appendChild(r);const n=r.getLocalBounds();r.destroy();const{min:i,max:a}=n;return[i,a]}function J4(t,r,e,n,i){const[a]=ve("shape",n),{data:o,encode:s}=t,{data:l,defaultLabelShape:c}=r,u=l.map(v=>v.points),f=br(s,v=>v.value),{theme:d,coordinate:h}=e,p=Object.assign(Object.assign({},i),{document:Nk(i),theme:d,coordinate:h});return v=>{const{index:g,points:y}=v,m=o[g],{formatter:b=M=>`${M}`,transform:x,style:O,render:w,selector:_,element:S}=v,k=pi(v,["formatter","transform","style","render","selector","element"]),E=br(Object.assign(Object.assign({},k),O),M=>Xk(M,m,g,o,{channel:f,element:S})),{shape:A=c,text:T}=E,P=pi(E,["shape","text"]),N=typeof b=="string"?aa(b):b,I=Object.assign(Object.assign({},P),{text:N(T,m,g,o),datum:m}),R=Object.assign({type:`label.${A}`,render:w},P),C=a(R,p),L=qk(d,"label",A,"label");return C(y,I,L,u)}}function Xk(t,r,e,n,i){return typeof t=="function"?t(r,e,n,i):typeof t!="string"?t:Ha(r)&&r[t]!==void 0?r[t]:t}function tU(t){let r=-1/0,e=1/0;for(const[n,i]of t){const{animate:a={}}=n,{data:o}=i,{enter:s={},update:l={},exit:c={}}=a,{type:u,duration:f=300,delay:d=0}=l,{type:h,duration:p=300,delay:v=0}=s,{type:g,duration:y=300,delay:m=0}=c;for(const b of o){const{updateType:x=u,updateDuration:O=f,updateDelay:w=d,enterType:_=h,enterDuration:S=p,enterDelay:k=v,exitDuration:E=y,exitDelay:A=m,exitType:T=g}=b;(x===void 0||x)&&(r=Math.max(r,O+w),e=Math.min(e,w)),(T===void 0||T)&&(r=Math.max(r,E+A),e=Math.min(e,A)),(_===void 0||_)&&(r=Math.max(r,S+k),e=Math.min(e,k))}}return r===-1/0?null:[e,r-e]}function eU(t,r,e,n){const i=t.node().parentElement;return!i||typeof i.findAll!="function"?[]:i.findAll(a=>a.style.facet!==void 0&&a.style.facet===e&&a!==r.node()).flatMap(a=>a.getElementsByClassName(n))}function nU(t,r,e){if(!t.__facet__)return;const n=t.parentNode.parentNode,i=r.parentNode,[a,o]=e(n),[s,l]=e(i),c=`translate(${a-s}, ${o-l})`;pL(t,c),r.append(t)}function rU(t,r,e,n){const{library:i}=n,[a]=ve("shape",i),{data:o,encode:s}=t,{defaultShape:l,data:c,shape:u}=r,f=br(s,m=>m.value),d=c.map(m=>m.points),{theme:h,coordinate:p}=e,{type:v,style:g={}}=t,y=Object.assign(Object.assign({},n),{document:Nk(n),coordinate:p,theme:h});return m=>{const{shape:b=l}=g,{shape:x=b,points:O,seriesIndex:w,index:_}=m,S=pi(m,["shape","points","seriesIndex","index"]),k=Object.assign(Object.assign({},S),{index:_}),E=w?w.map(I=>o[I]):o[_],A=w||_,T=br(g,I=>Xk(I,E,A,o,{channel:f})),P=u[x]?u[x](T,y):a(Object.assign(Object.assign({},T),{type:Qk(t,x)}),y),N=qk(h,v,x,l);return P(O,k,N,d)}}function qk(t,r,e,n){if(typeof r!="string")return;const{color:i}=t,a=t[r]||{},o=a[e]||a[n];return Object.assign({color:i},o)}function wv(t,r,e,n,i){var a,o;const[,s]=ve("shape",i),[l]=ve("animation",i),{defaultShape:c,shape:u}=e,{theme:f,coordinate:d}=n,p=`default${yi(t)}Animation`,{[p]:v}=((a=u[c])===null||a===void 0?void 0:a.props)||s(Qk(r,c)).props,{[t]:g={}}=f,y=((o=r.animate)===null||o===void 0?void 0:o[t])||{},m={coordinate:d};return(b,x,O)=>{const{[`${t}Type`]:w,[`${t}Delay`]:_,[`${t}Duration`]:S,[`${t}Easing`]:k}=b,E=Object.assign({type:w||v},y);if(!E.type)return null;const P=l(E,m)(x,O,X(g,{delay:_,duration:S,easing:k}));let N=[];return Array.isArray(P)?N=P:N=[P],N.filter(Boolean)}}function iU(t,r,e,n){return wv("enter",t,r,e,n)}function aU(t){return t.finished.then(()=>{t.cancel()}),t}function oU(t,r,e,n){return wv("update",t,r,e,n)}function sU(t,r,e,n){return wv("exit",t,r,e,n)}function Kk(t={}){if(typeof t=="string")return{type:t};const{type:r="light"}=t,e=pi(t,["type"]);return Object.assign(Object.assign({},e),{type:r})}function Ac(t){const r={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:e={}}=t;return Object.entries(X(r,e)).reverse()}function Zk(t,r){return $r(this,void 0,void 0,function*(){const{data:e}=t,n=pi(t,["data"]);if(e==null)return t;const[,{data:i}]=yield Gk([],{data:e},r);return Object.assign({data:i},n)})}function R0(t){t.style("transform",r=>`translate(${r.paddingLeft+r.marginLeft}, ${r.paddingTop+r.marginTop})`).style("width",r=>r.innerWidth).style("height",r=>r.innerHeight)}function Qk(t,r){const{type:e}=t;return typeof r=="string"?`${e}.${r}`:r}function I0(t,r){const e=a=>a.class!==void 0?`${a.class}`:"";t.nodes().length===0||(t.selectAll(Ln(hm)).data(r,a=>a.key).join(a=>a.append("g").attr("className",hm).attr("id",o=>o.key).style("facet",e).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.style("facet",e).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.remove()),t.select(Ln(Nd)).node())||t.append("g").attr("className",Nd).style("zIndex",0)}function Ln(...t){return t.map(r=>`.${r}`).join("")}function j0(t,r){t.node()&&t.style("clipPath",e=>{if(!r)return null;const{paddingTop:n,paddingLeft:i,marginLeft:a,marginTop:o,innerWidth:s,innerHeight:l}=e;return new wi({style:{x:i+a,y:n+o,width:s,height:l}})})}function lU(t,r,e){var n;for(const[c]of e.entries())if(c.type==="cell")return t.filter(u=>u.name!=="shape");if(r.length!==1||t.some(c=>c.name==="shape"))return t;const{defaultShape:i}=r[0];if(!["point","line","rect","hollow"].includes(i))return t;const o={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},l={field:((n=t.find(c=>c.name==="color"))===null||n===void 0?void 0:n.field)||null,name:"shape",type:"constant",domain:[],range:[o[i]]};return[...t,l]}function cU(t,r){for(const[e,n]of Object.entries(r))t.style(e,n)}function uU(...t){return r=>t.reduce((e,n)=>n(e),r)}function fU(t){const{style:r,scale:e,type:n}=t,i={},a=mt(r,"columnWidthRatio");return a&&n==="interval"&&(i.x=Object.assign(Object.assign({},e?.x),{padding:1-a})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},e),i)})}const dU=t=>{if(!t||typeof t!="string")return t;const r=t.endsWith("%")?parseFloat(t.slice(0,-1))/100:parseFloat(t);if(isNaN(r)||r<0||r>1)throw new Error(`Invalid gap value: ${t}. It should be between 0 and 1.`);return r};function hU(t){const{axis:r}=t,e=mt(r,"y.breaks");return e&&Vc(t,"scale.y.breaks",e.map(n=>Object.assign(Object.assign({key:`break-${n.start}-${n.end}`},n),{gap:dU(n.gap)}))),t}function Jk(t){const r=pU(t);return r.children&&Array.isArray(r.children)&&(r.children=r.children.map(e=>Jk(e))),r}function pU(t){return uU(fU,hU)(t)}function vU(t){const r=X({},t),e=new Map([[r,null]]),n=new Map([[null,-1]]),i=[r];for(;i.length;){const a=i.shift();if(a.key===void 0){const s=e.get(a),l=n.get(a),c=s===null?"0":`${s.key}-${l}`;a.key=c}const{children:o=[]}=a;if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=X({},o[s]);o[s]=l,e.set(l,a),n.set(l,s),i.push(l)}}return r}function gU(t,r){const e=new ak;return e.registerPlugin(new sk),new OO({width:t,height:r,container:document.createElement("div"),renderer:e})}function yU(t,r={},e=()=>{},n=i=>{throw i}){const i=Il(t),{width:a=640,height:o=480,depth:s=0}=i,l=Jk(i),c=vU(l),{canvas:u=gU(a,o),emitter:f=new lv,library:d}=r;r.canvas=u,r.emitter=f,r.externals={};const{width:h,height:p}=u.getConfig();(h!==a||p!==o)&&u.resize(a,o),f.emit(Vt.BEFORE_RENDER);const v=yt(u.document.documentElement);return u.ready.then(()=>Ov(Object.assign(Object.assign({},c),{width:a,height:o,depth:s}),v,r)).then(()=>{if(s){const[g,y]=u.document.documentElement.getPosition();u.document.documentElement.setPosition(g,y,-s/2)}u.requestAnimationFrame(()=>{u.requestAnimationFrame(()=>{f.emit(Vt.AFTER_RENDER),e?.()})})}).catch(g=>{n?.(g)}),bU(u.getConfig().container)}function D0(t,r={},e=!1,n=!0){const{canvas:i,emitter:a}=r;i&&(mU(i),e?i.destroy():i.destroyChildren()),n&&a.off()}function mU(t){const r=t.getRoot().querySelectorAll(`.${vc}`);r?.forEach(e=>{const{nameInteraction:n=new Map}=e;n?.size>0&&Array.from(n?.values()).forEach(i=>{i?.destroy()})})}function bU(t){return typeof t=="string"?document.getElementById(t):t}function xU(t,r,e){return Math.min(e,Math.max(r,t))}function Fr(t){return!!t.getBandWidth}function Qa(t,r,e){if(!Fr(t))return t.invert(r);const{adjustedRange:n}=t;if(n.includes(r))return t.invert(r);const{domain:i}=t.getOptions(),a=e?-1:0,o=t.getStep(),s=e?n:n.map(u=>u+o),l=e2(s,r),c=xU(l+a,0,i.length-1);return i[c]}function ii(t,r,e){if(!r)return t.getOptions().domain;if(!Fr(t)){const l=jr(r);if(!e)return l;const[c]=l,{range:u}=t.getOptions(),[f,d]=u,h=f>d?-1:1,p=t.invert(t.map(c)+h*e);return[c,p]}const{domain:n}=t.getOptions(),i=r[0],a=n.indexOf(i);if(e){const l=a+Math.round(n.length*e);return n.slice(a,l)}const o=r[r.length-1],s=n.indexOf(o);return n.slice(a,s+1)}function Dl(t,r,e,n,i,a){const{x:o,y:s}=i,l=(h,p)=>{const[v,g]=a.invert(h);return[Qa(o,v,p),Qa(s,g,p)]},c=l([t,r],!0),u=l([e,n],!1),f=ii(o,[c[0],u[0]]),d=ii(s,[c[1],u[1]]);return[f,d]}function $0(t,r){const[e,n]=t,i=a=>a.getStep?a.getStep():0;return[r.map(e),r.map(n)+i(r)]}const F0=(t,r)=>{var e,n;const[i,a]=t,o=((n=(e=r.getOptions)===null||e===void 0?void 0:e.call(r))===null||n===void 0?void 0:n.domain)||[],s=o.indexOf(i),l=o.indexOf(a);if(s===-1||l===-1)return[r.map(i),r.map(a)];const c=o.length;return c<=1?[0,1]:[s/(c-1),l/(c-1)]};function OU(t,r,e){const{x:n,y:i}=r,[a,o]=t,s=$0(a,n),l=$0(o,i),c=[s[0],l[0]],u=[s[1],l[1]],[f,d]=e.map(c),[h,p]=e.map(u);return[f,d,h,p]}function os(t,r){if(r(t))return!0;if(t.tagName==="g"){const{childNodes:e=[]}=t;for(const n of e)if(os(n,r))return!0}return!1}const wU={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function _U(t,r){let e;return os(t,n=>{var i;return n.tagName!=="g"&&((i=n.style)===null||i===void 0?void 0:i[r])!==void 0?(e=n.style[r],!0):!1}),e??wU[r]}function _v(t,r,e,n){t.style[r]=e,t.children.forEach(i=>_v(i,r,e))}function Sv(t){_v(t,"visibility","hidden")}function Ru(t){_v(t,"visibility","visible")}var Ro=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Hr(t){return yt(t).selectAll(`.${or}`).nodes().filter(r=>!r.__removed__)}function tE(t,r){return Hd(t,r).flatMap(({container:e})=>Hr(e))}function Hd(t,r){return r.filter(e=>e!==t&&e.options.parentKey===t.options.key)}function Bn(t){return yt(t).select(`.${hi}`).node()}function ss(t){if(t.tagName==="g")return t.getRenderBounds();const r=t.getGeometryBounds(),e=new ze;return e.setFromTransformedAABB(r,t.getWorldTransform()),e}function ra(t,r){const{offsetX:e,offsetY:n}=r,i=ss(t),{min:[a,o],max:[s,l]}=i,c=e<a||e>s,u=n<o||n>l;return c||u?null:[e-a,n-o]}function Lf(t,r){const{offsetX:e,offsetY:n}=r,[i,a,o,s]=SU(t);return[Math.min(o,Math.max(i,e))-i,Math.min(s,Math.max(a,n))-a]}function SU(t){const r=t.getRenderBounds(),{min:[e,n],max:[i,a]}=r;return[e,n,i,a]}function eE(t){return r=>r.__data__.color}function Ls(t){return r=>r.__data__.x}function vi(t){const r=Array.isArray(t)?t:[t],e=new Map(r.flatMap(n=>Array.from(n.markState.keys()).map(a=>[Tc(n.key,a.key),a.data])));return n=>{const{index:i,markKey:a,viewKey:o}=n.__data__;return e.get(Tc(o,a))[i]}}const B0={selected:3,unselected:3,active:2,inactive:2,default:1},kU={selection:["selected","unselected"],highlight:["active","inactive"]},nE=(t,r,e)=>{os(t,n=>{"setAttribute"in n&&typeof n.setAttribute=="function"&&n.setAttribute(r,e)})};function kv(t,r){return r.forEach(e=>{const n=e.__interactionStyle__;n?e.__interactionStyle__=Object.assign(Object.assign({},n),t):e.__interactionStyle__=t}),(e=(i,a)=>i,n=nE)=>ui(void 0,e,n)}function ui(t,r=(n,i)=>n,e=nE){const n="__states__",i="__ordinal__",a=h=>B0[h]||B0.default,o=h=>{var p;return(p=Object.entries(kU).find(([v,g])=>g.includes(h)))===null||p===void 0?void 0:p[0]},s=h=>{var p;const{[n]:v=[],[i]:g={}}=h,y=[...v].sort((x,O)=>a(O)-a(x)),m=new Map;for(const x of y){const O=((p=t??h.__interactionStyle__)===null||p===void 0?void 0:p[x])||{};for(const[w,_]of Object.entries(O))m.has(w)||m.set(w,_)}const b=Object.assign({},g);for(const[x,O]of m.entries())b[x]=O;if(Object.keys(b).length!==0){for(const[x,O]of Object.entries(b)){const w=_U(h,x),_=r(O,h);e(h,x,_),x in g||(g[x]=w)}h[i]=g}},l=h=>{h[n]||(h[n]=[])};return{setState:(h,...p)=>{l(h),h[n]=[...p],s(h)},updateState:(h,...p)=>{l(h);const v=h[n],g=new Set(p.map(m=>o(m)).filter(m=>m!==void 0)),y=v.filter(m=>!g.has(o(m)));h[n]=[...y,...p],s(h)},removeState:(h,...p)=>{l(h);for(const v of p){const g=h[n].indexOf(v);g!==-1&&h[n].splice(g,1)}s(h)},hasState:(h,p)=>(l(h),h[n].indexOf(p)!==-1)}}function EU(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function Tc(t,r){return`${t},${r}`}function ia(t,r){const n=(Array.isArray(t)?t:[t]).flatMap(a=>a.marks.map(o=>[Tc(a.key,o.key),o.state])),i={};for(const a of r){const[o,s]=Array.isArray(a)?a:[a,{}];i[o]=n.reduce((l,c)=>{const[u,f={}]=c,d=EU(f[o])?s:f[o];for(const[h,p]of Object.entries(d)){const v=l[h],g=(y,m,b,x)=>{const O=Tc(x.__data__.viewKey,x.__data__.markKey);return u!==O?v?.(y,m,b,x):typeof p!="function"?p:p(y,m,b,x)};l[h]=g}return l},{})}return i}function oo(t,r){const e=new Map(t.map((i,a)=>[i,a])),n=r?t.map(r):t;return(i,a)=>{if(typeof i!="function")return i;const o=e.get(a),s=r?r(a):a;return i(s,o,n,a)}}function rE(t){var{link:r=!1,valueof:e=(u,f)=>u,coordinate:n}=t,i=Ro(t,["link","valueof","coordinate"]);const a="element-link";if(!r)return[()=>{},()=>{}];const o=u=>u.__data__.points,s=(u,f)=>{const[,d,h]=u,[p,,,v]=f;return[d,p,v,h]};return[u=>{var f;if(u.length<=1)return;const d=jr(u,(h,p)=>{const{x:v}=h.__data__,{x:g}=p.__data__;return v-g});for(let h=1;h<d.length;h++){const p=Qn(),v=d[h-1],g=d[h],[y,m,b,x]=s(o(v),o(g));p.moveTo(...y),p.lineTo(...m),p.lineTo(...b),p.lineTo(...x),p.closePath();const O=br(i,k=>e(k,v)),{fill:w=v.getAttribute("fill")}=O,_=Ro(O,["fill"]),S=new He({className:a,style:Object.assign({d:p.toString(),fill:w,zIndex:-2},_)});(f=v.link)===null||f===void 0||f.remove(),v.parentNode.appendChild(S),v.link=S}},u=>{var f;(f=u.link)===null||f===void 0||f.remove(),u.link=null}]}function iE(t,r,e){const n=i=>{const{transform:a}=t.style;return a?`${a} ${i}`:i};if(Jt(e)){const{points:i}=t.__data__,[a,o]=ue(e)?pu(i):i,s=e.getCenter(),l=Ee(a,s),c=Ee(o,s),u=In(l),f=M1(l,c),d=u+f/2,h=r*Math.cos(d),p=r*Math.sin(d);return n(`translate(${h}, ${p})`)}return ue(e)?n(`translate(${r}, 0)`):n(`translate(0, ${-r})`)}function aE(t){var{document:r,background:e,scale:n,coordinate:i,valueof:a}=t,o=Ro(t,["document","background","scale","coordinate","valueof"]);const s="element-background";if(!e)return[()=>{},()=>{}];const l=(y,m,b)=>{const x=y.invert(m),O=m+y.getBandWidth(x)/2,w=y.getStep(x)/2,_=w*b;return[O-w+_,O+w-_]},c=(y,m)=>{const{x:b}=n;if(!Fr(b))return[0,1];const{__data__:x}=y,{x:O}=x,[w,_]=l(b,O,m);return[w,_]},u=(y,m)=>{const{y:b}=n;if(!Fr(b))return[0,1];const{__data__:x}=y,{y:O}=x,[w,_]=l(b,O,m);return[w,_]},f=(y,m)=>{const{padding:b}=m,[x,O]=c(y,b),[w,_]=u(y,b),S=[[x,w],[O,w],[O,_],[x,_]].map(T=>i.map(T)),{__data__:k}=y,{y:E,y1:A}=k;return jO(r,S,{y:E,y1:A},i,m)},d=(y,m)=>{const{transform:b="scale(1.2, 1.2)",transformOrigin:x="center center",stroke:O=""}=m,w=Ro(m,["transform","transformOrigin","stroke"]),_=Object.assign({transform:b,transformOrigin:x,stroke:O},w),S=y.cloneNode(!0);for(const[k,E]of Object.entries(_))S.style[k]=E;return S},h=()=>{const{x:y,y:m}=n;return[y,m].some(Fr)};return[y=>{y.background&&y.background.remove();const m=br(o,T=>a(T,y)),{fill:b="#CCD6EC",fillOpacity:x=.3,zIndex:O=-2,padding:w=.001,lineWidth:_=0}=m,S=Ro(m,["fill","fillOpacity","zIndex","padding","lineWidth"]),k=Object.assign(Object.assign({},S),{fill:b,fillOpacity:x,zIndex:O,padding:w,lineWidth:_}),A=(h()?f:d)(y,k);A.className=s,y.parentNode.parentNode.appendChild(A),y.background=A},y=>{var m;(m=y.background)===null||m===void 0||m.remove(),y.background=null},y=>y.className===s]}function Kr(t,r){const n=t.getRootNode().defaultView.getContextService().getDomElement();n?.style&&(t.cursor=n.style.cursor,n.style.cursor=r)}function AU(t){Kr(t,t.cursor)}function Iu(t,r,e){return t.find(n=>Object.entries(r).every(([i,a])=>e(n)[i]===a))}function Pc(t,r){return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}function mo(t,r=!1){const e=ax(t,n=>!!n).map((n,i)=>[i===0?"M":"L",...n]);return r&&e.push(["Z"]),e}function oE(t){return t.querySelectorAll(".element")}function TU(t,r,e=0){const n=[["M",...r[1]]],i=Pc(t,r[1]),a=Pc(t,r[0]);return i===0?n.push(["L",...r[3]],["A",a,a,0,e,1,...r[0]],["Z"]):n.push(["A",i,i,0,e,0,...r[2]],["L",...r[3]],["A",a,a,0,e,1,...r[0]],["Z"]),n}function Ns(t,r){if(r(t))return t;let e=t.parent;for(;e&&!r(e);)e=e.parent;return e}const Ev=["interval","point","density"];function sE({elementsof:t,root:r,coordinate:e,scale:n,validFindByXMarks:i=Ev}){var a,o;let s=t(r);const l=u=>i.includes(u.markType);if(s.find(l)){s=s.filter(l);const u=n.x,f=n.series,d=(o=(a=u?.getBandWidth)===null||a===void 0?void 0:a.call(u))!==null&&o!==void 0?o:0,h=f?p=>{var v,g;const y=Math.round(1/((v=f.valueBandWidth)!==null&&v!==void 0?v:1));return p.__data__.x+((g=p.__data__.series)!==null&&g!==void 0?g:0)*d+d/(y*2)}:p=>p.__data__.x+d/2;return s.sort((p,v)=>h(p)-h(v)),p=>{const v=ra(r,p);if(!v)return;const[g]=e.invert(v),y=Ui(h).center,m=y(s,g);return s[m]}}return u=>{const{target:f}=u;return Ns(f,d=>d.classList?d.classList.includes("element"):!1)}}function PU(t){const a=.01/Math.max(t,1e-4);return Math.max(.1,Math.min(100,a))}function lE(t){return t===!1||t===null||t===void 0}function MU(t){var r,e;const n=[],i=[],a=[],o=t.markState;if(o){for(const[s,l]of o.entries())if(l?.channels){const c={};for(const d of l.channels)if(d?.name==="x"&&((r=d.values)===null||r===void 0?void 0:r.length)>0){let h=[];for(const p of d.values)p?.value&&(h=h.concat(p.value),n.push(p.value));c.x=h}else if(d&&(d.name==="y"||d.name.startsWith("y"))&&((e=d.values)===null||e===void 0?void 0:e.length)>0){const h=d.name,p=[];for(const v of d.values)if(v?.value){const g=v.value;p.push(g),(h==="y"||h==="y1")&&(Array.isArray(g)?i.push(g.flat()):i.push([g]))}c[h]=p}const u=c.x||[],f=c.y||[];u.length>0&&f.length>0&&a.push({markKey:s.key||`mark_${a.length}`,channelData:c})}}return{xChannelValues:n.flat(),yChannelValues:i.flat(),markDataPairs:a}}function z0(t,r){const e=new Set;for(const n of r){const{scale:i}=n,a=i?.[t];if(!a)continue;if(a.independent)return!0;const o=a.key||"default";if(e.add(o),e.size>1)return!0}return!1}function CU(t,r,e,n,i){var a,o,s,l;const c={x:r.x||e.getOptions().domain||[],y:r.y||n.getOptions().domain||[]},u=i||cE(t),{hasIndependentX:f,hasIndependentY:d}=u;if(f||d){let h=1,p=1;for(const[v,g]of t.markState.entries())if(g?.channels){if(f){const y=g.channels.find(m=>m.name==="x");if(!((o=(a=v?.scale)===null||a===void 0?void 0:a.x)===null||o===void 0)&&o.independent){const m=`x${h}`;c[m]=y.scale.domain,h++}}if(d){const y=g.channels.find(m=>m.name==="y");if(!((l=(s=v?.scale)===null||s===void 0?void 0:s.y)===null||l===void 0)&&l.independent){const m=`y${p}`;c[m]=y.scale.domain,p++}}}}return c}function cE(t){var r,e,n,i,a,o,s,l;const c=Array.from(t.markState.keys()),u=z0("x",c),f=z0("y",c),d=[],h=[],p=[],v=[],g=new Map,y=new Map,m=new Map,b=new Map;let x=1,O=1;for(const[w]of t.markState.entries()){const _=w.key,S=((e=(r=w?.scale)===null||r===void 0?void 0:r.x)===null||e===void 0?void 0:e.key)||"x";if(!!(!((i=(n=w?.scale)===null||n===void 0?void 0:n.x)===null||i===void 0)&&i.independent)||u&&S!=="x"){h.push(_),m.has(S)||m.set(S,x++);const T=m.get(S);g.set(_,`x${T}`)}else d.push(_),g.set(_,"x");const E=((o=(a=w?.scale)===null||a===void 0?void 0:a.y)===null||o===void 0?void 0:o.key)||"y";if(!!(!((l=(s=w?.scale)===null||s===void 0?void 0:s.y)===null||l===void 0)&&l.independent)||f&&E!=="y"){v.push(_),b.has(E)||b.set(E,O++);const T=b.get(E);y.set(_,`y${T}`)}else p.push(_),y.set(_,"y")}return{hasIndependentX:u,hasIndependentY:f,marksWithSharedX:d,marksWithIndependentX:h,marksWithSharedY:p,marksWithIndependentY:v,markToXScaleMap:g,markToYScaleMap:y}}var lr=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};const uE="legend-category",Av="legend-html-category",LU="legend-continuous",NU="items-item",RU="legend-category-item-marker",IU="legend-category-item-label",jU="legend-category-item-focus-group";function fE(t){return t.getElementsByClassName(RU)[0]}function dE(t){return t.getElementsByClassName(IU)[0]}function W0(t){return t.getElementsByClassName(jU)[0]}function hE(t){return t.getElementsByClassName(NU)}function Tv(t){return t.getElementsByClassName(uE)}function DU(t){return t.getElementsByClassName(Av)}function pE(t){return t.getElementsByClassName(LU)}function $U(t,r){[...Tv(t),...pE(t)].forEach(n=>{r(n,i=>i)})}function Yd(t){let r=t.parentNode;for(;r&&!r.__data__;)r=r.parentNode;return r.__data__}function FU(t,r,e){var n;const i=Object.keys(t).find(a=>{if(a.startsWith(e)){const o=t[a].getOptions();return o.name===e&&o.markKey===r}});return(n=t[i])!==null&&n!==void 0?n:t[e]}function BU(t,{legends:r,marker:e,label:n,datum:i,filter:a,defaultSelect:o,emitter:s,channel:l,state:c={}}){const u=new Map,f=new Map,d=new Map,h=new Map,{unselected:p={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=c,v={unselected:it(p,"marker")},g={unselected:it(p,"label")},{setState:y,removeState:m}=ui(v,void 0),{setState:b,removeState:x}=ui(g,void 0),O=Array.from(r(t));let w=O.map(i);const _=()=>{for(const A of O){const T=i(A),P=e(A),N=n(A);w.includes(T)?(m(P,"unselected"),x(N,"unselected")):(y(P,"unselected"),b(N,"unselected"))}};for(const A of O){const T=()=>{Kr(t,"pointer")},P=()=>{AU(t)},N=R=>lr(this,void 0,void 0,function*(){const C=i(A),L=w.indexOf(C);L===-1?w.push(C):w.splice(L,1),yield a(w),_();const{nativeEvent:M=!0}=R;M&&(w.length===O.length?s.emit("legend:reset",{nativeEvent:M}):s.emit("legend:filter",Object.assign(Object.assign({},R),{nativeEvent:M,data:{channel:l,values:w}})))});A.addEventListener("click",N),A.addEventListener("pointerenter",T),A.addEventListener("pointerout",P),u.set(A,N),f.set(A,T),d.set(A,P);const I=W0(A);if(I){const R=C=>lr(this,void 0,void 0,function*(){C.stopPropagation();const L=i(A),M=w.indexOf(L),{nativeEvent:j=!0}=C;if(M!==-1&&w.length===1){if(!j)return;w=O.map(i),yield a(w),_(),s.emit("legend:reset",{nativeEvent:j})}else{if(w=[L],yield a(w),_(),!j)return;s.emit("legend:focus",Object.assign(Object.assign({},C),{nativeEvent:j,data:{channel:l,value:L}}))}});I.addEventListener("click",R),h.set(A,R)}}const S=A=>lr(this,void 0,void 0,function*(){const{nativeEvent:T}=A;if(T)return;const{data:P}=A,{channel:N,value:I}=P;N===l&&(w=[I],yield a(w),_())}),k=A=>lr(this,void 0,void 0,function*(){const{nativeEvent:T}=A;if(T)return;const{data:P}=A,{channel:N,values:I}=P;N===l&&(w=I,yield a(w),_())}),E=A=>lr(this,void 0,void 0,function*(){const{nativeEvent:T}=A;T||(w=O.map(i),yield a(w),_())});return s.on("legend:filter",k),s.on("legend:focus",S),s.on("legend:reset",E),o&&s.emit("legend:filter",{data:{channel:l,values:o}}),()=>{for(const A of O){A.removeEventListener("click",u.get(A)),A.removeEventListener("pointerenter",f.get(A)),A.removeEventListener("pointerout",d.get(A));const T=W0(A);T&&T.removeEventListener("click",h.get(A))}s.off("legend:focus",S),s.off("legend:filter",k),s.off("legend:reset",E)}}function zU(t,{domain:r,filter:e,defaultSelect:n,emitter:i,channel:a}){const o=new Map,s=new Map,l=new Map;let c=[...r];const u=()=>{var g;const y=(g=t.ownerDocument)===null||g===void 0?void 0:g.defaultView;return y&&y.getContextService().getDomElement().parentElement||document.body},f=()=>{const y=u().querySelector(".legend-html"),m=b=>lr(this,void 0,void 0,function*(){let x=b.target;for(;x&&!x.hasAttribute("legend-value")&&(x=x.parentElement,x!==y););if(!x||!x.hasAttribute("legend-value"))return;b.preventDefault(),b.stopPropagation();const O=x.getAttribute("legend-value");if(!O)return;const w=c.indexOf(O);w===-1?c.push(O):c.splice(w,1),yield e(c),d(),c.length===r.length?i.emit("legend:reset",{nativeEvent:!0}):i.emit("legend:filter",{nativeEvent:!0,data:{channel:a,values:c}})});y.addEventListener("click",m),o.set(y,m)},d=()=>{u().querySelectorAll("[legend-value]").forEach(m=>{const b=m.getAttribute("legend-value");if(!b||!r.includes(b))return;const x=c.includes(b),O=m;x?(O.style.opacity="1",O.classList.remove("legend-item-inactive")):(O.style.opacity="0.4",O.classList.add("legend-item-inactive"))})};f();const h=g=>lr(this,void 0,void 0,function*(){const{nativeEvent:y}=g;if(y)return;const{data:m}=g,{channel:b,value:x}=m;b===a&&(c=[x],yield e(c),d())}),p=g=>lr(this,void 0,void 0,function*(){const{nativeEvent:y}=g;if(y)return;const{data:m}=g,{channel:b,values:x}=m;b===a&&(c=x,yield e(c),d())}),v=g=>lr(this,void 0,void 0,function*(){const{nativeEvent:y}=g;y||(c=[...r],yield e(c),d())});return i.on("legend:filter",p),i.on("legend:focus",h),i.on("legend:reset",v),n&&i.emit("legend:filter",{data:{channel:a,values:n}}),()=>{u().querySelectorAll("[legend-value]").forEach(m=>{const b=m.getAttribute("legend-value");if(!b||!r.includes(b))return;const x=o.get(m),O=s.get(m),w=l.get(m);x&&m.removeEventListener("click",x),O&&m.removeEventListener("pointerenter",O),w&&m.removeEventListener("pointerout",w)}),o.clear(),s.clear(),l.clear(),i.off("legend:filter",p),i.off("legend:focus",h),i.off("legend:reset",v)}}function WU(t,{legend:r,filter:e,emitter:n,channel:i}){const{attributes:a}=r,o=s=>{const{value:l}=s.detail,c=l.map(u=>{var f,d;const h=(f=a.data)===null||f===void 0?void 0:f.find(p=>p.value===u);return h&&(d=h.domainValue)!==null&&d!==void 0?d:u});e(c),n.emit({nativeEvent:!0,data:{channel:i,values:c}})};return r.addEventListener("valuechange",o),()=>{r.removeEventListener("valuechange",o)}}function vE(t,r){return lr(this,arguments,void 0,function*(e,{legend:n,channel:i,value:a,ordinal:o,channels:s,allChannels:l,facet:c=!1}){const{view:u,update:f,setState:d}=e;d(n,h=>{var p,v;const{marks:g}=h,y=(v=(p=n.attributes)===null||p===void 0?void 0:p.scales)===null||v===void 0?void 0:v.find(b=>b.name===i),m=g.map(b=>{var x,O;if(((x=b.scale[i].key)!==null&&x!==void 0?x:i)!==((O=y?.key)!==null&&O!==void 0?O:y?.name)||b.type==="legends"||_5.includes(b.type))return b;const{transform:w=[],data:_=[]}=b,S=w.findIndex(({type:A})=>A.startsWith("group")||A.startsWith("bin")),k=[...w];_.length&&k.splice(S+1,0,{type:"filter",[i]:{value:a,ordinal:o}});const E=Object.fromEntries(s.map(A=>{const T=FU(u.scale,h.key,A);return[A,{domain:T.getOptions().domain}]}));return X({},b,Object.assign(Object.assign({transform:k,scale:E},!o&&{animate:!1}),{legend:c?!1:Object.fromEntries(l.map(A=>[A,{preserve:!0}]))}))});return Object.assign(Object.assign({},h),{marks:m})}),yield f()})}function GU(t,r){for(const e of t)vE(e,Object.assign(Object.assign({},r),{facet:!0}))}function HU(){return(t,r,e)=>{const{container:n}=t,i=r.filter(f=>f!==t),a=i.length>0,o=f=>Yd(f).scales.map(d=>d.name),s=[...Tv(n),...DU(n),...pE(n)],l=s.flatMap(o),c=a?Zi(GU,50,{trailing:!0}):Zi(vE,50,{trailing:!0}),u=s.map(f=>{const{name:d,domain:h}=Yd(f).scales[0],p=o(f),v={legend:f,channel:d,channels:p,allChannels:l};return f.className===uE?BU(f,{legends:hE,marker:fE,label:dE,datum:g=>{const{__data__:y}=g,{index:m}=y;return h[m]},filter:g=>{const y=Object.assign(Object.assign({},v),{value:g,ordinal:!0});c(a?i:t,y)},state:f.attributes.state,defaultSelect:f.attributes.defaultSelect,channel:d,emitter:e}):f.className===Av?zU(n,{domain:h,filter:g=>{const y=Object.assign(Object.assign({},v),{value:g,ordinal:!0});c(a?i:t,y)},defaultSelect:f.attributes.defaultSelect,channel:d,emitter:e}):WU(n,{legend:f,filter:g=>{const y=Object.assign(Object.assign({},v),{value:g,ordinal:!1});c(a?i:t,y)},emitter:e,channel:d})});return()=>{u.forEach(f=>f())}}}var YU=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function gE(t,r){const e=yr(t,"shape"),n=yr(t,"color"),i=e?e.clone():null,a=[];for(const[s,l]of r){const c=s.type,f=(n?.getOptions().domain.length>0?n?.getOptions().domain:l.data).map((d,h)=>{var p;return i?i.map(d||"point"):((p=s?.style)===null||p===void 0?void 0:p.shape)||l.defaultShape||"point"});typeof c=="string"&&a.push([c,f])}if(a.length===0)return["point",["point"]];if(a.length===1||!e)return a[0];const{range:o}=e.getOptions();return a.map(([s,l])=>{let c=0;for(let u=0;u<a.length;u++){const f=o[u%o.length];l[u]===f&&c++}return[c/l.length,[s,l]]}).sort((s,l)=>l[0]-s[0])[0][1]}function VU(t,r){const{scales:e,library:n,markState:i}=r,[a,o]=gE(e,i),{itemMarker:s,itemMarkerSize:l}=t,c=(d,h)=>{var p,v,g;const y=((g=(v=(p=n[`mark.${a}`])===null||p===void 0?void 0:p.props)===null||v===void 0?void 0:v.shape[d])===null||g===void 0?void 0:g.props.defaultMarker)||xn(d.split(".")),m=typeof l=="function"?l(h):l;return()=>_$(y,{color:h.color})(0,0,m)},u=d=>`${o[d]}`;return yr(e,"shape")&&!s?(d,h)=>c(u(h),d):typeof s=="function"?(d,h)=>{const p=s(d.id,h);return typeof p=="string"?c(p,d):p}:(d,h)=>c(s||u(h),d)}function UU(t){const r=yr(t,"opacity");if(r){const{range:e}=r.getOptions();return(n,i)=>e[i]}}function XU(t,r){const e=yr(t,"size");return e instanceof Ix?e.map(NaN)*2:r}function qU(t,r){const{scales:e,markState:n}=r,[i,a]=gE(e,n),{itemMarker:o,itemMarkerLineWidth:s}=t;if(s!==void 0)return s;const l=["line","hyphen","dash","smooth","hv","hvh","vh","vhv"];if(typeof o=="string"&&l.includes(o))return 4;if(typeof o=="function")return(f,d)=>{const h=o(f.id,d);if(typeof h=="string"&&l.includes(h))return 4};if((Array.isArray(a)?a:[a]).some(f=>l.includes(f)))return 4}function KU(t,r){const{labelFormatter:e=d=>`${d}`}=t,{scales:n,theme:i}=r,a=i.legendCategory.itemMarkerSize,o=XU(n,a),s={itemMarker:VU(Object.assign(Object.assign({},t),{itemMarkerSize:o}),r),itemMarkerSize:o,itemMarkerOpacity:UU(n),itemMarkerLineWidth:qU(t,r)},l=typeof e=="string"?aa(e):e,c=yr(n,"color"),u=I5(n),f=c?d=>c.map(d):()=>r.theme.color;return Object.assign(Object.assign({},s),{data:u.map(d=>({id:d,label:l(d),color:f(d)}))})}function ZU(t,r,e){const{position:n}=r;if(n==="center"){const{bbox:o}=t,{width:s,height:l}=o;return{width:s,height:l}}const{width:i,height:a}=HS(t,r,e);return{width:i,height:a}}function QU(t){return Object.assign(Object.assign({},t),{data:t?.data.filter(r=>r.id!==""&&r.id!==void 0)||[]})}const Pv=t=>{const{labelFormatter:r,layout:e,order:n,orientation:i,position:a,size:o,title:s,cols:l,itemMarker:c,render:u}=t,f=YU(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker","render"]),{gridRow:d}=f;return h=>{const{value:p,theme:v}=h,{bbox:g}=p,{width:y,height:m}=ZU(p,t,Pv),b=WS(a,e),x=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(a)?"vertical":"horizontal",width:y,height:m,layout:l!==void 0?"grid":"flex"},l!==void 0&&{gridCol:l}),d!==void 0&&{gridRow:d}),{titleText:Su(s)}),KU(t,h)),{legendCategory:O={}}=v,w=ku(Object.assign({},O,QU(x),f,{classNamePrefix:Vr}));if(u)return new Uy({className:Av,style:Object.assign(Object.assign({},w),{x:g.x,y:g.y,render:u})});const _=new L5({style:Object.assign(Object.assign({x:g.x,y:g.y,width:g.width,height:g.height},b),{subOptions:w})});return _.appendChild(new Uy({className:"legend-category",style:w})),_}};Pv.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var JU=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function tX(t,r,e){return t.size=r,N5(e)?t.height=r:t.width=r,t}function eX(t,r,e){const{size:n}=r,i=HS(t,r,e);return tX(i,n,i.orientation)}function nX(t){return r=>({value:r/t,label:String(r),domainValue:r})}function rX(t,r,e,n,i){const a=r.thresholds,o=nX(n);return Object.assign(Object.assign({},t),{color:i,data:[e,...a,n].map(o)})}function iX(t,r,e){const i=[-1/0,...r.thresholds,1/0].map((a,o)=>({value:o,domainValue:a,label:a}));return Object.assign(Object.assign({},t),{data:i,color:e,labelFilter:(a,o)=>o>0&&o<i.length-1})}function Vd(t){const{domain:r}=t.getOptions(),[e,n]=[r[0],Zx(r)];return[e,n]}function aX(t,r){const e=t.getOptions(),n=t.clone();return n.update(Object.assign(Object.assign({},e),{range:[ci(r).toString()]})),n}function oX(t,r,e,n,i,a){const{length:o}=t,s=e||n,l=i.color?a.legendContinuous.ribbonFill||"black":a.color,c=r||aX(s,l),[u,f]=Vd(c),[d,h]=Vd([r,e,n].filter(p=>p!==void 0).find(p=>!(p instanceof Mh)));return Object.assign(Object.assign({},t),{domain:[d,h],data:c.getTicks().map(p=>({value:p})),color:new Array(Math.floor(o)).fill(0).map((p,v)=>{const g=(f-u)/(o-1)*v+u,y=c.map(g)||l,m=n?n.map(g):1;return y.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(b,x,O,w)=>`rgba(${x}, ${O}, ${w}, ${m})`)})})}function sX(t,r,e,n,i,a){const o=yr(t,"color"),s=eX(e,n,i);if(o instanceof qc){const{range:u}=o.getOptions(),[f,d]=Vd(o);return o instanceof Hx||o instanceof Vx?rX(s,o,f,d,u):iX(s,o,u)}const l=yr(t,"size"),c=yr(t,"opacity");return oX(s,o,l,c,r,a)}const Ai=t=>{const{labelFormatter:r,layout:e,order:n,orientation:i,position:a,size:o,title:s,style:l,crossPadding:c,padding:u}=t,f=JU(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:d,value:h,theme:p,scale:v})=>{const{bbox:g}=h,{x:y,y:m,width:b,height:x}=g,O=WS(a,e),{legendContinuous:w={}}=p,_=ku(Object.assign({},w,Object.assign(Object.assign(Object.assign({titleText:Su(s),labelAlign:"value",labelFormatter:typeof r=="string"?k=>aa(r)(k.label):r},sX(d,v,h,t,Ai,p)),l),{classNamePrefix:Vr}),f)),S=new GS({style:Object.assign(Object.assign({x:y,y:m,width:b,height:x},O),{subOptions:_})});return S.appendChild(new Hz({className:"legend-continuous",style:_})),S}};Ai.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const yE=t=>(...r)=>Ai(Object.assign({},{block:!0},t))(...r);yE.props=Object.assign(Object.assign({},Ai.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const Mv=t=>r=>{const{scales:e}=r,n=yr(e,"size");return Ai(Object.assign({},{type:"size",data:n.getTicks().map((i,a)=>({value:i,label:String(i)}))},t))(r)};Mv.props=Object.assign(Object.assign({},Ai.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const mE=t=>Mv(Object.assign({},{block:!0},t));mE.props=Object.assign(Object.assign({},Ai.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var lX=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function G0(t,r,e,n){switch(n){case"center":return{x:t+e/2,y:r,textAlign:"middle"};case"right":return{x:t+e,y:r,textAlign:"right"};default:return{x:t,y:r,textAlign:"left"}}}const cX=C5({render(t,r){const{width:e,title:n,subtitle:i,spacing:a=2,align:o="left",x:s,y:l}=t,c=lX(t,["width","title","subtitle","spacing","align","x","y"]);r.style.transform=`translate(${s}, ${l})`;const u=it(c,"title"),f=it(c,"subtitle"),h=Km(r,".title","text").attr("className","title").call(dt,Object.assign(Object.assign(Object.assign({},G0(0,0,e,o)),{fontSize:14,textBaseline:"top",text:n}),u)).node().getLocalBounds();Km(r,".sub-title","text").attr("className","sub-title").call(p=>{if(!i)return p.node().remove();p.node().attr(Object.assign(Object.assign(Object.assign({},G0(0,h.max[1]+a,e,o)),{fontSize:12,textBaseline:"top",text:i}),f))})}}),bE=t=>({value:r,theme:e})=>{const{x:n,y:i,width:a,height:o}=r.bbox;return new cX({style:X({},e.title,Object.assign({x:n,y:i,width:a,height:o},t))})};bE.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var uX=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function fX(t,r,e){const{x:n,y:i,width:a,height:o}=t;if(r==="left")return[n+a-e,i];if(r==="right")return[n,i];if(r==="bottom")return[n,i];if(r==="top")return[n,i+o-e]}const Rs=t=>{const{orientation:r,labelFormatter:e,size:n,style:i={},position:a}=t,o=uX(t,["orientation","labelFormatter","size","style","position"]);return s=>{var l;const{scales:[c],value:u,theme:f,coordinate:d}=s,{bbox:h}=u,{width:p,height:v}=h,{slider:g={}}=f,y=((l=c.getFormatter)===null||l===void 0?void 0:l.call(c))||(S=>S+""),m=typeof e=="string"?aa(e):e,b=r==="horizontal",x=ue(d)&&b,{trackSize:O=g.trackSize}=i,[w,_]=fX(h,a,O);return new Iw({className:"slider",style:Object.assign({},g,Object.assign(Object.assign({x:w,y:_,trackLength:b?p:v,orientation:r,formatter:S=>{const k=m||y,E=x?1-S:S,A=Qa(c,E,!0);return k(A)},sparklineData:hX(t,s)},i),o))})}};function dX(t,r){const[e]=Array.from(t.entries()).filter(([i])=>i.type==="line"||i.type==="area"||i.type==="interval").filter(([i])=>i.slider).map(([i])=>{const{encode:a,slider:o}=i;if(o?.x){const s=l=>{const c=a[l];return[l,c?c.value:void 0]};return Object.fromEntries(r.map(s))}});if(!e?.series)return e?.y;const n=e.series.reduce((i,a,o)=>(i[a]=i[a]||[],i[a].push(e.y[o]),i),{});return Object.values(n)}function hX(t,r){const{markState:e}=r;return Le(t.sparklineData)?t.sparklineData:dX(e,["y","series"])}Rs.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const xE=t=>Rs(Object.assign(Object.assign({},t),{orientation:"horizontal"}));xE.props=Object.assign(Object.assign({},Rs.props),{defaultPosition:"bottom"});const OE=t=>Rs(Object.assign(Object.assign({},t),{orientation:"vertical"}));OE.props=Object.assign(Object.assign({},Rs.props),{defaultPosition:"left"});var pX=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Is=t=>{const{orientation:r,labelFormatter:e,style:n}=t,i=pX(t,["orientation","labelFormatter","style"]);return({scales:[a],value:o,theme:s})=>{const{bbox:l}=o,{x:c,y:u,width:f,height:d}=l,{scrollbar:h={}}=s,{ratio:p,range:v}=a.getOptions(),g=r==="horizontal"?f:d,y=g/p,[m,b]=v,x=b>m?0:1;return new sB({className:`${Vr}scrollbar`,style:Object.assign({},h,Object.assign(Object.assign(Object.assign(Object.assign({},n),{x:c,y:u,trackLength:g,value:x}),i),{orientation:r,contentLength:y,viewportLength:g}))})}};Is.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const wE=t=>Is(Object.assign(Object.assign({},t),{orientation:"horizontal"}));wE.props=Object.assign(Object.assign({},Is.props),{defaultPosition:"bottom"});const _E=t=>Is(Object.assign(Object.assign({},t),{orientation:"vertical"}));_E.props=Object.assign(Object.assign({},Is.props),{defaultPosition:"left"});const SE=t=>()=>new Ve;SE.props={};const Cv=(t,r)=>{const{coordinate:n}=r;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=ue(n)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.01},{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f}];return s.animate(p,Object.assign(Object.assign({},o),t))}},vX=(t,r)=>{const{coordinate:n}=r;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=ue(n)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},kE=(t,r)=>{const{coordinate:n}=r;return Kh.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:rt.NUMBER}),(i,a,o)=>{const[s]=i,l=u=>{const{__data__:f,style:d}=u,{fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=d,{points:g,y,y1:m}=f,b=da(n,g,[y,m]),{innerRadius:x,outerRadius:O}=b,w=[{scaleInYRadius:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:x+1e-4,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.01},{scaleInYRadius:O,fillOpacity:h,strokeOpacity:p,opacity:v}];return u.animate(w,Object.assign(Object.assign({},o),t))},c=u=>{const{style:f}=u,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=f,[g,y]=ue(n)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],m=[{transform:`${d} ${y}`.trimStart(),transformOrigin:g,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${d} ${y}`.trimStart(),transformOrigin:g,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.01},{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:g,fillOpacity:h,strokeOpacity:p,opacity:v}];return u.animate(m,Object.assign(Object.assign({},o),t))};return Jt(n)?l(s):c(s)}},gX=(t,r)=>{const{coordinate:n}=r;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=ue(n)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},EE=t=>(r,e,n)=>{const[i]=r,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:a,strokeOpacity:o,opacity:s}];return i.animate(l,Object.assign(Object.assign({},n),t))};EE.props={};const AE=t=>(r,e,n)=>{const[i]=r,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:a,strokeOpacity:o,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(l,Object.assign(Object.assign({},n),t))};AE.props={};const yX={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},mX={[U.CIRCLE]:["cx","cy","r"],[U.ELLIPSE]:["cx","cy","rx","ry"],[U.RECT]:["x","y","width","height"],[U.IMAGE]:["x","y","width","height"],[U.LINE]:["x1","y1","x2","y2"],[U.POLYLINE]:["points"],[U.POLYGON]:["points"]};function Ja(t,r,e=!1){const n={};for(const i of r){const a=t.style[i];a?n[i]=a:e&&(n[i]=yX[i])}return n}const ls=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function Ud(t){const{min:r,max:e}=t.getLocalBounds(),[n,i]=r,[a,o]=e,s=o-i,l=a-n;return[n,i,l,s]}function bX(t){const[r,e,n,i]=t;return`
    M ${r} ${e}
    L ${r+n} ${e}
    L ${r+n} ${e+i}
    L ${r} ${e+i}
    Z
  `}function xX(t,r){const[e,n,i,a]=Ud(t),o=a/i,s=Math.ceil(Math.sqrt(r/o)),l=Math.ceil(r/s),c=[],u=a/l;let f=0,d=r;for(;d>0;){const h=Math.min(d,s),p=i/h;for(let v=0;v<h;v++){const g=e+v*p,y=n+f*u;c.push(bX([g,y,p,u]))}d-=h,f+=1}return c}function OX(t="pack"){return typeof t=="function"?t:xX}function wX(t,r,e){let{transform:n}=t.style;const{transform:i}=r.style;TE(r,t);let a=ls;if(t.nodeName===U.GROUP){const[l,c,u,f]=Ud(t),[d,h,p,v]=Ud(r),g=l-d,y=c-h,m=u/p,b=f/v;n=`translate(${g}, ${y}) scale(${m}, ${b})`}else a=a.concat(mX[t.nodeName]||[]);const o=[Object.assign({transform:n??"none"},Ja(t,a,!0)),Object.assign({transform:i??"none"},Ja(r,a,!0))];return r.animate(o,e)}function TE(t,r){t.__data__=r.__data__,t.className=r.className,t.markType=r.markType,r.parentNode.replaceChild(t,r)}function _X(t,r){const{nodeName:e}=t;if(e==="path")return t;const n=new He({style:Object.assign(Object.assign({},Ja(t,ls)),{d:r})});return TE(n,t),n}function H0(t,r){const e=t.indexOf(r),n=t.lastIndexOf(r);return e===n}function SX(t){return!H0(t,"m")||!H0(t,"M")}function Y0(t){const r=KR(t);if(r&&!SX(r))return r}function V0(t){const{nodeName:r}=t;if(r==="path"){const e=mt(t,"attributes");return e.markerEnd||e.markerStart}return!1}function Lv(t,r,e,n){const{nodeName:i}=r,{nodeName:a}=e,o=Y0(r),s=Y0(e),{opacity:l=1,strokeOpacity:c=1,fillOpacity:u=1}=r.style,{opacity:f=1,strokeOpacity:d=1,fillOpacity:h=1}=e.style,p=i===a&&i!=="path",v=o===void 0||s===void 0,g=V0(r)||V0(e);if(p||v||g)return wX(r,e,n);const y=_X(t,o),m=Object.assign(Object.assign({},Ja(r,ls)),{opacity:l,strokeOpacity:c,fillOpacity:u}),b=Object.assign(Object.assign({},Ja(e,ls)),{opacity:f,strokeOpacity:d,fillOpacity:h}),x=[m,b];if(o!==s){x[0].d=o,x[1].d=s;const O=y.animate(x,n);return O.onfinish=()=>{Zc(y,e),y.style.d=s,y.style.transform="none"},y.style.transform="none",O}return Go(m,b)?null:y.animate(x,n)}function kX(t,r,e,n){t.style.visibility="hidden";const i=n(t,r.length);return r.map((a,o)=>{const s=new He({style:Object.assign({d:i[o]},Ja(t,ls))});return Lv(a,s,a,e)})}function EX(t,r,e,n){const i=n(r,t.length),{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=r.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:a,strokeOpacity:o,opacity:s}],c=r.animate(l,e);return[...t.map((f,d)=>{const h=new He({style:{d:i[d],fill:r.style.fill}});return Lv(f,f,h,e)}),c]}const PE=t=>(r,e,n)=>{const i=OX(t.split),a=Object.assign(Object.assign({},n),t),{length:o}=r,{length:s}=e;if(o===1&&s===1||o>1&&s>1){const[l]=r,[c]=e;return Lv(l,l,c,a)}if(o===1&&s>1){const[l]=r;return kX(l,e,a,i)}if(o>1&&s===1){const[l]=e;return EX(r,l,a,i)}return null};PE.props={};const ME=(t,r)=>{Kh.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:rt.NUMBER});const{coordinate:n}=r;return(i,a,o)=>{const[s]=i;if(!Jt(n))return Cv(t,r)(i,a,o);const{__data__:l,style:c}=s,{radius:u=0,inset:f=0,fillOpacity:d=1,strokeOpacity:h=1,opacity:p=1}=c,{points:v,y:g,y1:y}=l,m=gh().cornerRadius(u).padAngle(f*Math.PI/180),b=da(n,v,[g,y]),{startAngle:x,endAngle:O}=b,w=[{waveInArcAngle:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:x+1e-4,fillOpacity:d,strokeOpacity:h,opacity:p,offset:.01},{waveInArcAngle:O,fillOpacity:d,strokeOpacity:h,opacity:p}],_=s.animate(w,Object.assign(Object.assign({},o),t));return _.onframe=function(){s.style.d=m(Object.assign(Object.assign({},b),{endAngle:Number(s.style.waveInArcAngle)}))},_.onfinish=function(){s.style.d=m(Object.assign(Object.assign({},b),{endAngle:O}))},_}};ME.props={};const AX=t=>(e,n,i)=>{const[a]=e,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=a.style,u="center center",f=[{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.01},{transform:`${o} scale(1)`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c}];return a.animate(f,Object.assign(Object.assign({},i),t))},TX=t=>(e,n,i)=>{const[a]=e,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=a.style,u="center center",f=[{transform:`${o} scale(1)`.trimStart(),transformOrigin:u},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.99},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(f,Object.assign(Object.assign({},i),t))},CE=t=>(r,e,n)=>{var i,a;const[o]=r,s=((a=(i=o).getTotalLength)===null||a===void 0?void 0:a.call(i))||0,l=[{lineDash:[0,s]},{lineDash:[s,0]}];return o.animate(l,Object.assign(Object.assign({},n),t))};CE.props={};const LE=(t,r)=>(e,n,i)=>{const[a]=e,{min:[o,s],halfExtents:l}=a.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new He({style:{d:`M${o},${s}L${o+c},${s}L${o+c},${s+u}L${o},${s+u}Z`}});return a.appendChild(f),a.style.clipPath=f,Cv(t,r)([f],n,i)};LE.props={};const NE=(t,r)=>(e,n,i)=>{const[a]=e,{min:[o,s],halfExtents:l}=a.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new He({style:{d:`M${o},${s}L${o+c},${s}L${o+c},${s+u}L${o},${s+u}Z`}});return a.appendChild(f),a.style.clipPath=f,kE(t,r)([f],n,i)};NE.props={};var PX=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function MX(t,{elements:r,datum:e,groupKey:n=p=>p,regionGroupKey:i=p=>p,link:a=!1,background:o=!1,delay:s=60,scale:l,coordinate:c,emitter:u,state:f={},region:d=!1,regionEleFilter:h=p=>Ev.includes(p.markType)}){var p,v;const g=(p=r(t))!==null&&p!==void 0?p:[],y=d?g.filter(h):g,m=new Set(y),b=d?i:n,x=ce(y,b),O=sE({elementsof:r,root:t,coordinate:c,scale:l}),w=oo(y,e),[_,S]=rE(Object.assign({elements:y,valueof:w,link:a,coordinate:c},it(f.active,"link"))),[k,E,A]=aE(Object.assign({document:t.ownerDocument,scale:l,coordinate:c,background:o,valueof:w},it(f.active,"background"))),T=X(f,{active:Object.assign({},((v=f.active)===null||v===void 0?void 0:v.offset)&&{transform:(...W)=>{const Y=f.active.offset(...W),[,V]=W;return iE(y[V],Y,c)}})}),P=kv(T,y),{updateState:N,removeState:I,hasState:R}=P(w);let C;const L=W=>{const{nativeEvent:Y=!0}=W;let V=W.target;if(d&&(V=O(W)),!m.has(V))return;C&&clearTimeout(C);const G=b(V),q=x.get(G),Q=new Set(q);for(const nt of y)Q.has(nt)?R(nt,"active")||N(nt,"active"):(N(nt,"inactive"),S(nt)),nt!==V&&E(nt);k(V),_(q),Y&&u.emit("element:highlight",{nativeEvent:Y,data:{data:e(V),group:q.map(e)}})},M=()=>{C&&clearTimeout(C),C=setTimeout(()=>{j(),C=null},s)},j=(W=!0)=>{for(const Y of y)I(Y,"active","inactive"),E(Y),S(Y);W&&u.emit("element:unhighlight",{nativeEvent:W})},F=W=>{let Y=W.target;if(d&&(Y=O(W)),!Y){s>0?M():j();return}o&&!A(Y)||!o&&!m.has(Y)||(s>0?M():j())},$=()=>{j()};t.addEventListener("pointerover",L),t.addEventListener("pointermove",L),t.addEventListener("pointerout",F),t.addEventListener("pointerleave",$);const B=W=>{const{nativeEvent:Y}=W;Y||j(!1)},z=W=>{const{nativeEvent:Y}=W;if(Y)return;const{data:V}=W.data,G=Iu(y,V,e);G&&L({target:G,nativeEvent:!1})};return u.on("element:highlight",z),u.on("element:unhighlight",B),()=>{t.removeEventListener("pointerover",L),t.removeEventListener("pointermove",L),t.removeEventListener("pointerout",F),t.removeEventListener("pointerleave",$),u.off("element:highlight",z),u.off("element:unhighlight",B);for(const W of y)E(W),S(W)}}function ju(t){var{delay:r,createGroup:e,createRegionGroup:n,background:i=!1,link:a=!1}=t,o=PX(t,["delay","createGroup","createRegionGroup","background","link"]);return(s,l,c)=>{const{container:u,view:f,options:d}=s,{scale:h,coordinate:p}=f,v=Bn(u);return MX(v,Object.assign({elements:Hr,datum:vi(f),groupKey:e?e(f):void 0,regionGroupKey:n?n(f):Ls(),coordinate:p,scale:h,state:ia(d,[["active",i?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:i,link:a,delay:r,emitter:c},o))}}ju.props={reapplyWhenUpdate:!0};function RE(t){return ju(Object.assign(Object.assign({},t),{createGroup:Ls}))}RE.props={reapplyWhenUpdate:!0};function IE(t){return ju(Object.assign(Object.assign({},t),{createGroup:eE}))}IE.props={reapplyWhenUpdate:!0};var CX=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function LX(t,{elements:r,datum:e,groupKey:n=v=>v,scaleFactor:i=1.04,scaleOrigin:a="center center",shadow:o=!0,shadowColor:s="rgba(0, 0, 0, 0.4)",shadowBlur:l=10,shadowOffsetX:c=0,shadowOffsetY:u=2,zIndex:f=10,delay:d=60,emitter:h,state:p={}}){const v=()=>{var M;return(M=r(t))!==null&&M!==void 0?M:[]},g=v(),y=oo(g,e),m=X(p,{active:{}}),b=kv(m,g),{updateState:x,removeState:O,hasState:w}=b(y),_=new Map,S=new Set;let k;const E=M=>{if(S.has(M))return;const j=M.style.transform||"",F=M.style.transformOrigin||"";_.set(M,{transform:j,transformOrigin:F,zIndex:M.style.zIndex||0,shadowColor:M.style.shadowColor||"",shadowBlur:M.style.shadowBlur||0,shadowOffsetX:M.style.shadowOffsetX||0,shadowOffsetY:M.style.shadowOffsetY||0});const $=j&&j!=="none"?j:"",B=`scale(${i})`;let z;$&&!$.includes("scale")?z=`${$} ${B}`.trimStart():$&&$.includes("scale")?z=$.replace(/scale\([^)]+\)/g,B).trimStart():z=B,M.style.transformOrigin=a,M.style.transform=z,M.style.zIndex=f,o&&(M.style.shadowColor=s,M.style.shadowBlur=l,M.style.shadowOffsetX=c,M.style.shadowOffsetY=u),S.add(M)},A=M=>{const j=_.get(M);j&&(M.style.transform=j.transform,M.style.transformOrigin=j.transformOrigin,M.style.zIndex=j.zIndex,M.style.shadowColor=j.shadowColor,M.style.shadowBlur=j.shadowBlur,M.style.shadowOffsetX=j.shadowOffsetX,M.style.shadowOffsetY=j.shadowOffsetY,S.delete(M),_.delete(M))},T=M=>{const{nativeEvent:j=!0}=M,F=M.target,$=v();if(!new Set($).has(F))return;k&&clearTimeout(k);const z=ce($,n),W=n(F),Y=z.get(W);if(!Y)return;const V=new Set(Y);for(const G of $)V.has(G)||(O(G,"active"),A(G));for(const G of Y)w(G,"active")||x(G,"active"),E(G);j&&h.emit("element:hoverscale",{nativeEvent:j,data:{data:e(F),group:Y.map(e)}})},P=()=>{k&&clearTimeout(k),k=setTimeout(()=>{N(),k=null},d)},N=(M=!0)=>{const j=v();for(const F of j)O(F,"active"),A(F);S.clear(),M&&h.emit("element:unhoverscale",{nativeEvent:M})},I=M=>{d>0?P():N()},R=()=>{N()};t.addEventListener("pointerover",T),t.addEventListener("pointermove",T),t.addEventListener("pointerout",I),t.addEventListener("pointerleave",R);const C=M=>{const{nativeEvent:j}=M;j||N(!1)},L=M=>{const{nativeEvent:j}=M;if(j)return;const{data:F}=M.data,$=v(),B=Iu($,F,e);B&&T({target:B,nativeEvent:!1})};return h.on("element:hoverscale",L),h.on("element:unhoverscale",C),()=>{t.removeEventListener("pointerover",T),t.removeEventListener("pointermove",T),t.removeEventListener("pointerout",I),t.removeEventListener("pointerleave",R),h.off("element:hoverscale",L),h.off("element:unhoverscale",C);const M=v();for(const j of M)A(j);_.clear(),S.clear()}}function jE(t){var{delay:r,createGroup:e,scale:n,scaleOrigin:i,shadow:a,shadowColor:o,shadowBlur:s,shadowOffsetX:l,shadowOffsetY:c,zIndex:u}=t,f=CX(t,["delay","createGroup","scale","scaleOrigin","shadow","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","zIndex"]);return(d,h,p)=>{const{container:v,view:g,options:y}=d,m=Bn(v),b=vi(g);return LX(m,Object.assign({elements:Hr,datum:b,groupKey:e?x=>e(g)(b(x)):void 0,state:ia(y,["active"]),scaleFactor:n,scaleOrigin:i,shadow:a,shadowColor:o,shadowBlur:s,shadowOffsetX:l,shadowOffsetY:c,zIndex:u,delay:r,emitter:p},f))}}jE.props={reapplyWhenUpdate:!0};var NX=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function RX(t,{elements:r,datum:e,groupKey:n=v=>v,regionGroupKey:i=v=>v,link:a=!1,single:o=!1,multipleSelectHotkey:s,coordinate:l,background:c=!1,scale:u,emitter:f,state:d={},region:h=!1,regionEleFilter:p=v=>Ev.includes(v.markType)}){var v;const g=r(t),y=new Set(g),m=sE({elementsof:r,root:t,coordinate:l,scale:u}),b=ce(g,n),x=ce(g,i),O=oo(g,e),[w,_]=rE(Object.assign({link:a,elements:g,valueof:O,coordinate:l},it(d.selected,"link"))),[S,k]=aE(Object.assign({document:t.ownerDocument,background:c,coordinate:l,scale:u,valueof:O},it(d.selected,"background"))),E=X(d,{selected:Object.assign({},((v=d.selected)===null||v===void 0?void 0:v.offset)&&{transform:(...G)=>{const q=d.selected.offset(...G),[,Q]=G;return iE(g[Q],q,l)}})}),A=kv(E,g),{updateState:T,removeState:P,hasState:N}=A(O);let I=!o,R=null;const C=(G=!0)=>{for(const q of g)P(q,"selected","unselected"),_(q),k(q);G&&f.emit("element:unselect",{nativeEvent:!0})},L=({event:G,element:q,nativeEvent:Q=!0,filter:nt=lt=>!0,groupBy:et=n,groupMap:at=b})=>{const lt=g.filter(nt);if(N(q,"selected"))C();else{const st=et(q),ft=at.get(st),ht=new Set(ft);for(const ut of lt)ht.has(ut)?T(ut,"selected"):(T(ut,"unselected"),_(ut)),ut!==q&&k(ut);if(w(ft),S(q),!Q)return;f.emit("element:select",Object.assign(Object.assign({},G),{nativeEvent:Q,data:{data:[e(q),...ft.map(e)]}}))}},M=({event:G,element:q,nativeEvent:Q=!0,filter:nt=lt=>!0,groupBy:et=n,groupMap:at=b})=>{const lt=et(q),st=at.get(lt),ft=new Set(st),ht=g.filter(nt);if(N(q,"selected")){if(!g.some(pt=>!ft.has(pt)&&N(pt,"selected")))return C();for(const pt of st)T(pt,"unselected"),_(pt),k(pt)}else{const ut=st.some(pt=>N(pt,"selected"));for(const pt of ht)ft.has(pt)?T(pt,"selected"):N(pt,"selected")||T(pt,"unselected");!ut&&a&&w(st),S(q)}Q&&f.emit("element:select",Object.assign(Object.assign({},G),{nativeEvent:Q,data:{data:g.filter(ut=>N(ut,"selected")).map(e)}}))},j=G=>{if(y.has(G))return!0;for(const q of y)if(os(q,nt=>nt===G))return!0;return!1},F=G=>{if(y.has(G))return G;for(const q of y){let Q=null;if(os(q,nt=>{nt===G&&(Q=q)}),Q)return Q}return G},$=G=>{const{target:q,nativeEvent:Q=!0}=G,nt=I?M:L;let et=q;const at=j(q);return!h||at?at?nt({event:G,element:F(et),nativeEvent:Q,groupBy:n}):C():(et=m(G),y.has(et)?nt({event:G,element:et,nativeEvent:Q,filter:p,groupBy:i,groupMap:x}):C())},B=Array.isArray(s)?s:[s],z=G=>{B.includes(G.code)&&!R&&(R=G.code,I=!0)},W=G=>{G.code===R&&(R=null,I=!1)};t.addEventListener("click",$),s&&(I=!1,document.addEventListener("keydown",z),document.addEventListener("keyup",W));const Y=G=>{const{nativeEvent:q,data:Q}=G;if(q)return;const nt=I?Q.data:Q.data.slice(0,1);for(const et of nt){const at=Iu(g,et,e);$({target:at,nativeEvent:!1})}},V=()=>{C(!1)};return f.on("element:select",Y),f.on("element:unselect",V),()=>{for(const G of g)_(G);t.removeEventListener("click",$),s&&(document.removeEventListener("keydown",z),document.removeEventListener("keyup",W)),f.off("element:select",Y),f.off("element:unselect",V)}}function Du(t){var{createGroup:r,createRegionGroup:e,background:n=!1,link:i=!1}=t,a=NX(t,["createGroup","createRegionGroup","background","link"]);return(o,s,l)=>{const{container:c,view:u,options:f}=o,{coordinate:d,scale:h}=u,p=Bn(c);return RX(p,Object.assign({elements:Hr,datum:vi(u),groupKey:r?r(u):void 0,regionGroupKey:e?e(u):Ls(),coordinate:d,scale:h,state:ia(f,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:i,emitter:l},a))}}Du.props={reapplyWhenUpdate:!0};function DE(t){return Du(Object.assign(Object.assign({},t),{createGroup:Ls}))}DE.props={reapplyWhenUpdate:!0};function $E(t){return Du(Object.assign(Object.assign({},t),{createGroup:eE}))}$E.props={reapplyWhenUpdate:!0};var IX=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},jX=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function DX(t){const{transform:r=[]}=t,e=r.find(i=>i.type==="normalizeY");if(e)return e;const n={type:"normalizeY"};return r.push(n),t.transform=r,n}function $X(t,r,e){const[n]=Array.from(t.entries()).filter(([i])=>i.type===r).map(([i])=>{const{encode:a}=i,o=s=>{const l=a[s];return[s,l?l.value:void 0]};return Object.fromEntries(e.map(o))});return n}function FE(t){var{wait:r=20,leading:e,trailing:n=!1,labelFormatter:i=o=>`${o}`}=t,a=jX(t,["wait","leading","trailing","labelFormatter"]);return o=>{const{view:s,container:l,update:c,setState:u}=o,{markState:f,scale:d,coordinate:h}=s,p=$X(f,"line",["x","y","series"]);if(!p)return;const{y:v,x:g,series:y=[]}=p,m=v.map((C,L)=>L),b=jr(m.map(C=>g[C])),x=Bn(l),O=l.getElementsByClassName(or),w=l.getElementsByClassName(Rd),S=ce(w,C=>C.__data__.key.split("-")[0]),k=new ua({style:Object.assign({x1:0,y1:0,x2:0,y2:x.getAttribute("height"),stroke:"black",lineWidth:1},it(a,"rule"))}),E=new jn({style:Object.assign({x:0,y:x.getAttribute("height"),text:"",fontSize:10},it(a,"label"))});k.append(E),x.appendChild(k);const A=(C,L,M)=>{const[j]=C.invert(M),F=L.invert(j);return b[n2(b,F)]},T=(C,L)=>{k.setAttribute("x1",C[0]),k.setAttribute("x2",C[0]),E.setAttribute("text",i(L))};let P;const N=C=>IX(this,void 0,void 0,function*(){const{x:L}=d,M=A(h,L,C);T(C,M),u("chartIndex",F=>{const $=X({},F),B=$.marks.find(G=>G.type==="line"),W=oe(Ub(m,G=>oe(G,q=>+v[q])/Zn(G,q=>+v[q]),G=>y[G]).values()),Y=[1/W,W];X(B,{scale:{y:{domain:Y}}});const V=DX(B);V.groupBy="color",V.basis=(G,q)=>{const Q=G[Ui(nt=>g[+nt]).center(G,M)];return q[Q]};for(const G of $.marks)G.animate=!1;return $}),P=(yield c("chartIndex")).view}),I=C=>{const{scale:L,coordinate:M}=P,{x:j,y:F}=L,$=A(M,j,C);T(C,$);for(const B of O){const{seriesIndex:z,key:W}=B.__data__,Y=z[Ui(at=>g[+at]).center(z,$)],V=[0,F.map(1)],G=[0,F.map(v[Y]/v[z[0]])],[,q]=M.map(V),[,Q]=M.map(G),nt=q-Q;B.setAttribute("transform",`translate(0, ${nt})`);const et=S.get(W)||[];for(const at of et)at.setAttribute("dy",nt)}},R=Zi(C=>{const L=ra(x,C);L&&I(L)},r,{leading:e,trailing:n});return N([0,0]),x.addEventListener("pointerenter",R),x.addEventListener("pointermove",R),x.addEventListener("pointerleave",R),()=>{k.remove(),x.removeEventListener("pointerenter",R),x.removeEventListener("pointermove",R),x.removeEventListener("pointerleave",R)}}}FE.props={reapplyWhenUpdate:!0};function FX(t){const{coordinate:r={}}=t,{transform:e=[]}=r,n=e.find(a=>a.type==="fisheye");if(n)return n;const i={type:"fisheye"};return e.push(i),r.transform=e,t.coordinate=r,i}function BX({wait:t=30,leading:r,trailing:e=!1}){return n=>{const{options:i,update:a,setState:o,container:s}=n,l=Bn(s),c=Zi(u=>{const f=ra(l,u);if(!f){o("fisheye"),a();return}o("fisheye",d=>{const h=X({},d,{interaction:{tooltip:{preserve:!0}}});for(const y of h.marks)y.animate=!1;const[p,v]=f,g=FX(h);return g.focusX=p,g.focusY=v,g.visual=!0,h}),a()},t,{leading:r,trailing:e});return l.addEventListener("pointerenter",c),l.addEventListener("pointermove",c),l.addEventListener("pointerleave",c),()=>{l.removeEventListener("pointerenter",c),l.removeEventListener("pointermove",c),l.removeEventListener("pointerleave",c)}}}var gi=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Ir="tooltipLocked";function Mc(t,r){var e;if(r)return typeof r=="string"?document.querySelector(r):r;const n=(e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return n?n.getContextService().getDomElement().parentElement:void 0}function zX(t){const r=t.getRenderBounds(),{min:[e,n],max:[i,a]}=r;return{x:e,y:n,width:i-e,height:a-n}}function WX(t,r){const e=t.getBoundingClientRect(),n=r.getBoundingClientRect();return{x:e.x-n.x,y:e.y-n.y}}function GX(t,r,e,n,i,a,o,s={},l=[10,10]){const c={[Wi("tooltip")]:{},[Wi("tooltip-title")]:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},u=new Vz({className:"tooltip",style:{x:r,y:e,container:o,data:[],bounding:a,position:n,enterable:i,title:"",offset:l,template:{prefixCls:Vr},style:X(c,s)}});return t.appendChild(u.HTMLTooltipElement),u}function BE({root:t,data:r,x:e,y:n,render:i,event:a,single:o,position:s="right-bottom",enterable:l=!1,css:c,mount:u,bounding:f,offset:d}){const h=Mc(t,u),p=Mc(t),v=o?p:t,g=f||zX(t),y=WX(p,h),{tooltipElement:m=GX(h,e,n,s,l,g,y,c,d)}=v,{items:b,title:x=""}=r;m.update(Object.assign({x:e,y:n,data:b.map(O=>Object.assign(Object.assign({},O),{value:!O.value&&O.value!==0?"":O.value})),title:x,position:s,enterable:l,container:y},i!==void 0&&{content:i(a,{items:b,title:x})})),v.tooltipElement=m}function ei({root:t,single:r,emitter:e,nativeEvent:n=!0,event:i=null}){n&&e.emit("tooltip:hide",{nativeEvent:n});const a=Mc(t),o=r?a:t,{tooltipElement:s}=o;s&&s.hide(i?.clientX,i?.clientY),WE(t),GE(t),HE(t)}function Xd({root:t,single:r}){const e=Mc(t),n=r?e:t;if(!n)return;const{tooltipElement:i}=n;i&&(i.destroy(),n.tooltipElement=void 0),WE(t),GE(t),HE(t)}function Nv(t){const{value:r}=t;return Object.assign(Object.assign({},t),{value:r===void 0?"undefined":r})}function HX(t){var r,e,n,i,a,o,s;const{__data__:l}=t,{title:c,items:u=[]}=l;if(u.some(w=>xv in w)){const w=u.filter(le).map(_=>{var{color:S=Rv(t)}=_,k=gi(_,["color"]);return Object.assign(Object.assign({},k),{color:S})}).map(Nv);return Object.assign(Object.assign({},c&&{title:c}),{items:w})}const d=(e=(r=l?.normalized)===null||r===void 0?void 0:r.x)!==null&&e!==void 0?e:0,h=(n=t.parentNode)===null||n===void 0?void 0:n.__data__,p=(i=h?.encode)!==null&&i!==void 0?i:{},{x:v={},y:g={},color:y={}}=p,{value:m=[]}=v,{value:b=[]}=g,{value:x=[]}=y,O=Math.min(Math.round(m.length*d),m.length-1);return{title:`${m[O]}, ${b[O]}`,items:[{name:(a=y.field)!==null&&a!==void 0?a:"value",value:x[O],color:((o=t.style)===null||o===void 0?void 0:o.fill)||((s=t.getAttribute)===null||s===void 0?void 0:s.call(t,"color"))||"#000"}]}}function YX(t){const{__data__:r}=t;if(Kc(t))return HX(t);const{title:e,items:n=[]}=r,i=n.filter(le).map(a=>{var{color:o=Rv(t)}=a,s=gi(a,["color"]);return Object.assign(Object.assign({},s),{color:o})}).map(Nv);return Object.assign(Object.assign({},e&&{title:e}),{items:i})}function Rv(t){const r=t.getAttribute("fill"),e=t.getAttribute("stroke"),{__data__:n}=t,{color:i=r&&r!=="transparent"?r:e}=n;return i}function U0(t,r=e=>e){const e=new Map(t.map(n=>[r(n),n]));return Array.from(e.values())}function zE(t,r,e,n=t.map(a=>a.__data__),i={}){const a=l=>l instanceof Date?+l:l,o=U0(n.map(l=>l.title),a).filter(le),s=n.flatMap((l,c)=>{const u=l.element||t[c],{items:f=[],title:d}=l,h=f.filter(le),p=e!==void 0?e:f.length<=1;return h.map(v=>{var{color:g=Rv(u)||i.color,name:y}=v,m=gi(v,["color","name"]);const b=fL(r,l),x=p&&!(xv in m)?b||y:y||b;return Object.assign(Object.assign({},m),{color:g,name:x||d})})}).map(Nv);return Object.assign(Object.assign({},o.length>0&&{title:o.join(",")}),{items:U0(s,l=>`(${a(l.name)}, ${a(l.value)}, ${a(l.color)})`)})}function VX(t,r,e,n){var{plotWidth:i,plotHeight:a,mainWidth:o,mainHeight:s,startX:l,startY:c,transposed:u,polar:f,insetLeft:d,insetTop:h}=n,p=gi(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const v=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},p),g=(w,_,S)=>{const k=new Or({style:Object.assign({cx:w,cy:_,r:S},v)});return t.appendChild(k),k},y=(w,_,S,k)=>{const E=new ua({style:Object.assign({x1:w,x2:_,y1:S,y2:k},v)});return t.appendChild(E),E},b=((w,_)=>{if(_.length===1)return _[0];const S=_.map(E=>Oe(E,w)),k=Gc(S,E=>E);return _[k]})(e,r),x=()=>u?[l+b[0],l+b[0],c,c+a]:[l,l+i,b[1]+c,b[1]+c],O=()=>{const w=l+d+o/2,_=c+h+s/2,S=Oe([w,_],b);return[w,_,S]};if(f){const[w,_,S]=O(),k=t.ruleX||g(w,_,S);k.style.cx=w,k.style.cy=_,k.style.r=S,t.ruleX=k}else{const[w,_,S,k]=x(),E=t.ruleX||y(w,_,S,k);E.style.x1=w,E.style.x2=_,E.style.y1=S,E.style.y2=k,t.ruleX=E}}function UX(t,r,e){var{plotWidth:n,plotHeight:i,mainWidth:a,mainHeight:o,startX:s,startY:l,transposed:c,polar:u,insetLeft:f,insetTop:d}=e,h=gi(e,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const p=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},h),v=r.map(k=>k[1]),g=r.map(k=>k[0]),y=Bo(v),m=Bo(g),b=()=>{if(u){const k=Math.min(a,o)/2,E=s+f+a/2,A=l+d+o/2,T=In(Ee([m,y],[E,A])),P=E+k*Math.cos(T),N=A+k*Math.sin(T);return[E,P,A,N]}return c?[s,s+n,y+l,y+l]:[m+s,m+s,l,l+i]},[x,O,w,_]=b(),S=()=>{const k=new ua({style:Object.assign({x1:x,x2:O,y1:w,y2:_},p)});return t.appendChild(k),k};if(g.length>0){const k=t.ruleY||S();k.style.x1=x,k.style.x2=O,k.style.y1=w,k.style.y2=_,t.ruleY=k}}function WE(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function GE(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function XX(t,{data:r,style:e,theme:n}){t.markers&&t.markers.forEach(o=>o.remove());const{type:i=""}=e,a=r.filter(o=>{const[{x:s,y:l}]=o;return le(s)&&le(l)}).map(o=>{const[{color:s,element:l},c]=o,u=s||l.style.fill||l.style.stroke||n.color,f=i==="hollow"?"transparent":u,d=i==="hollow"?u:"#fff";return new Or({className:`${Vr}tooltip-marker`,style:Object.assign({cx:c[0],cy:c[1],fill:f,r:4,stroke:d,lineWidth:2,pointerEvents:"none"},e)})});for(const o of a)t.appendChild(o);t.markers=a}function HE(t){t.markers&&(t.markers.forEach(r=>r.remove()),t.markers=[])}function X0(t,r){return Array.from(t.values()).some(e=>{var n;return(n=e.interaction)===null||n===void 0?void 0:n[r]})}function ar(t,r){return t===void 0?r:t}function YE(t){const{title:r,items:e}=t;return e.length===0&&r===void 0}function qX(t){return Array.from(t.values()).some(r=>{var e;return((e=r.interaction)===null||e===void 0?void 0:e.seriesTooltip)&&r.tooltip})}function KX(t,r){const{innerWidth:e,innerHeight:n,marginLeft:i,paddingLeft:a,insetLeft:o,marginTop:s,paddingTop:l,insetTop:c}=t.getOptions();return{x:(r.x-i-a-o)/e,y:(r.y-s-l-c)/n}}function ZX(t){const{x:r}=t;if(!r||!r.valueBandWidth)return!0;const{valueBandWidth:e}=r;return fe(e)?!0:new Set(e.values()).size===1}function QX(t,r){const{adjustedRange:e,valueBandWidth:n,valueStep:i}=t,a=Array.from(n.values()),o=Array.from(i.values()),l=e.map((c,u)=>{const f=(o[u]-a[u])/2;return[c-f,c+a[u]+f]}).findIndex(([c,u])=>c<=r&&r<=u);return l!==-1?l:r>.5?e.length-1:0}function VE({root:t,event:r,elements:e=[],coordinate:n,scale:i,shared:a}){var o,s;const l=y=>y.markType==="interval",c=e.every(l)&&!Jt(n),u=i.x,f=ZX(i),d=i.series,h=(s=(o=u?.getBandWidth)===null||o===void 0?void 0:o.call(u))!==null&&s!==void 0?s:0,p=d&&d.valueBandWidth?y=>{const m=Math.round(1/d.valueBandWidth);return y.__data__.x+y.__data__.series*h+h/(m*2)}:y=>y.__data__.x+h/2;c&&e.sort((y,m)=>p(y)-p(m));const v=y=>{const{target:m=xn(e)}=y;return Ns(m,b=>b.classList?(Kc(b)&&Vc(b,"__data__.normalized",KX(n,{x:y.offsetX,y:y.offsetY})),b.classList.includes("element")):!1)};return(c?y=>{const m=ra(t,y);if(!m)return;const[b]=n.invert(m),x=Ui(p).center,O=f?x(e,b):QX(u,b),w=e[O];if(!a){const _=e.find(S=>S!==w&&p(S)===p(w));if(_)return v(y)||_}return w}:v)(r)}function UE({root:t,event:r,elements:e,coordinate:n,scale:i,startX:a,startY:o}){const s=ue(n),l=[],c=[];for(const C of e){const{__data__:L}=C,{seriesX:M,title:j,items:F}=L;M?l.push(C):(j||F)&&c.push(C)}const u=C=>C.markType==="interval",f=c.length&&c.every(u)&&!Jt(n),d=C=>C.__data__.x,p=!!i.x.getBandWidth&&c.length>0;l.sort((C,L)=>{const M=s?0:1,j=F=>F.getBounds().min[M];return s?j(L)-j(C):j(C)-j(L)});const v=C=>{const L=s?1:0,{min:M,max:j}=C.getLocalBounds();return jr([M[L],j[L]])};f?e.sort((C,L)=>d(C)-d(L)):c.sort((C,L)=>{const[M,j]=v(C),[F,$]=v(L),B=(M+j)/2,z=(F+$)/2;return s?z-B:B-z});const g=new Map(l.map(C=>{const{__data__:L}=C,{seriesX:M}=L,j=M.map(($,B)=>B),F=jr(j,$=>M[+$]);return[C,[F,M]]})),{x:y}=i,m=y?.getBandWidth?y.getBandWidth()/2:0,b=C=>{const[L]=n.invert(C);return L-m},x=(C,L,M,j)=>{const{_x:F}=C,$=F!==void 0?y.map(F):b(L),B=j.filter(le),[z,W]=jr([B[0],B[B.length-1]]),Y=z===W;if(!p&&($<z||$>W)&&!Y)return null;const V=Ui(q=>j[+q]).center,G=V(M,$);return M[G]},O=f?(C,L)=>{const M=Ui(d).center,j=M(L,b(C)),F=L[j];return ce(L,d).get(d(F))}:(C,L)=>{const j=C[s?1:0],F=L.filter(z=>{const[W,Y]=v(z);return j>=W&&j<=Y});if(!p||F.length>0)return F;const $=Ui(z=>{const[W,Y]=v(z);return(W+Y)/2}).center,B=$(L,j);return[L[B]].filter(le)},w=(C,L)=>{const{__data__:M}=C;return Object.fromEntries(Object.entries(M).filter(([j])=>j.startsWith("series")&&j!=="series").map(([j,F])=>{const $=F[L];return[ux(j.replace("series","")),$]}))},_=ra(t,r);if(!_)return;const S=[_[0]-a,_[1]-o];if(!S)return;const k=O(S,c),E=[],A=[];for(const C of l){const[L,M]=g.get(C),j=x(r,S,L,M);if(j!==null){E.push(C);const F=w(C,j),{x:$,y:B}=F,z=n.map([($||0)+m,B||0]);A.push([Object.assign(Object.assign({},F),{element:C}),z])}}const T=Array.from(new Set(A.map(C=>C[0].x))),P=T[Gc(T,C=>Math.abs(C-b(S)))],N=A.filter(C=>C[0].x===P),I=[...N.map(C=>C[0]),...k.map(C=>C.__data__)];return{selectedElements:[...E,...k],selectedData:I,filteredSeriesData:N,abstractX:b}}function q0(t,r){var{elements:e,sort:n,filter:i,scale:a,coordinate:o,crosshairs:s,crosshairsX:l,crosshairsY:c,render:u,groupName:f,emitter:d,wait:h=50,leading:p=!0,trailing:v=!1,startX:g=0,startY:y=0,body:m=!0,single:b=!0,position:x,enterable:O,mount:w,bounding:_,theme:S,offset:k,disableNative:E=!1,marker:A=!0,preserve:T=!1,style:P={},css:N={},clickLock:I=!1,disableAutoHide:R=!1}=r,C=gi(r,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css","clickLock","disableAutoHide"]);const L=e(t),M=X(P,C),j=Jt(o),F=ue(o),{innerWidth:$,innerHeight:B,width:z,height:W,insetLeft:Y,insetTop:V}=o.getOptions(),G=Zi(pt=>{var Bt;if(I&&t.getAttribute(Ir))return;const Wt=ra(t,pt);if(!Wt)return;const Rt=ss(t),te=Rt.min[0],ee=Rt.min[1],{selectedElements:ne,selectedData:Dt,filteredSeriesData:Gt,abstractX:he}=UE({root:t,event:pt,elements:L,coordinate:o,scale:a,startX:g,startY:y}),Ct=zE(ne,a,f,Dt,S);if(n&&Ct.items.sort((ye,tn)=>n(ye)-n(tn)),i&&(Ct.items=Ct.items.filter(i)),ne.length===0||YE(Ct)){q(pt);return}if(m&&BE({root:t,data:Ct,x:Wt[0]+te,y:Wt[1]+ee,render:u,event:pt,single:b,position:x,enterable:O,mount:w,bounding:_,css:N,offset:k}),s||l||c){const ye=it(M,"crosshairs"),tn=Object.assign(Object.assign({},ye),it(M,"crosshairsX")),Sr=Object.assign(Object.assign({},ye),it(M,"crosshairsY")),kr=Gt.map(Ti=>Ti[1]);l&&VX(t,kr,Wt,Object.assign(Object.assign({},tn),{plotWidth:$,plotHeight:B,mainWidth:z,mainHeight:W,insetLeft:Y,insetTop:V,startX:g,startY:y,transposed:F,polar:j})),c&&UX(t,kr,Object.assign(Object.assign({},Sr),{plotWidth:$,plotHeight:B,mainWidth:z,mainHeight:W,insetLeft:Y,insetTop:V,startX:g,startY:y,transposed:F,polar:j}))}if(A){const ye=it(M,"marker");XX(t,{data:Gt,style:ye,theme:S})}const St=(Bt=Gt[0])===null||Bt===void 0?void 0:Bt[0].x,Ye=St??he(focus);d.emit("tooltip:show",Object.assign(Object.assign({},pt),{nativeEvent:!0,data:Object.assign(Object.assign({},Ct),{data:{x:Qa(a.x,Ye,!0)}})}))},h,{leading:p,trailing:v}),q=pt=>{I&&t.getAttribute(Ir)||R||ei({root:t,single:b,emitter:d,event:pt})},Q=()=>{Xd({root:t,single:b})},nt=pt=>{var Bt,{nativeEvent:Wt,data:Rt,offsetX:te,offsetY:ee}=pt,ne=gi(pt,["nativeEvent","data","offsetX","offsetY"]);if(Wt)return;const Dt=(Bt=Rt?.data)===null||Bt===void 0?void 0:Bt.x,he=a.x.map(Dt),[Ct,St]=o.map([he,.5]),Ye=ss(t),ye=Ye.min[0],tn=Ye.min[1];G(Object.assign(Object.assign({},ne),{offsetX:te!==void 0?te:ye+Ct,offsetY:ee!==void 0?ee:tn+St,_x:Dt}))},et=()=>{ei({root:t,single:b,emitter:d,nativeEvent:!1})},at=()=>{ut(),Q()},lt=pt=>{ra(t,pt)||q(pt)},st=()=>{ht()},ft=pt=>{I&&t.setAttribute(Ir,!t.getAttribute(Ir)),G(pt)},ht=()=>{E||(t.addEventListener("pointerdown",ft),t.addEventListener("pointerenter",G),t.addEventListener("pointermove",G),t.addEventListener("pointerleave",lt),t.addEventListener("pointerup",q))},ut=()=>{E||(t.removeEventListener("pointerdown",ft),t.removeEventListener("pointerenter",G),t.removeEventListener("pointermove",G),t.removeEventListener("pointerleave",lt),t.removeEventListener("pointerup",q))};return ht(),d.on("tooltip:show",nt),d.on("tooltip:hide",et),d.on("tooltip:disable",at),d.on("tooltip:enable",st),()=>{ut(),d.off("tooltip:show",nt),d.off("tooltip:hide",et),d.off("tooltip:disable",at),d.off("tooltip:enable",st),T?ei({root:t,single:b,emitter:d,nativeEvent:!1}):Q()}}function JX(t,{elements:r,coordinate:e,scale:n,render:i,groupName:a,sort:o,filter:s,emitter:l,wait:c=50,leading:u=!0,trailing:f=!1,groupKey:d=P=>P,single:h=!0,position:p,enterable:v,datum:g,view:y,mount:m,bounding:b,theme:x,offset:O,shared:w=!1,body:_=!0,disableNative:S=!1,preserve:k=!1,css:E={},clickLock:A=!1,disableAutoHide:T=!1}){const P=r(t),N=ce(P,d),I=Zi(z=>{if(A&&t.getAttribute(Ir))return;const W=VE({root:t,event:z,elements:P,coordinate:e,scale:n,shared:w});if(!W){T||ei({root:t,single:h,emitter:l,event:z});return}const Y=d(W),V=N.get(Y);if(!V)return;const G=V.length===1&&!w?YX(V[0]):zE(V,n,a,void 0,x);if(o&&G.items.sort((nt,et)=>o(nt)-o(et)),s&&(G.items=G.items.filter(s)),YE(G)){T||ei({root:t,single:h,emitter:l,event:z});return}const{offsetX:q,offsetY:Q}=z;_&&BE({root:t,data:G,x:q,y:Q,render:i,event:z,single:h,position:p,enterable:v,mount:m,bounding:b,css:E,offset:O}),l.emit("tooltip:show",Object.assign(Object.assign({},z),{nativeEvent:!0,data:Object.assign(Object.assign({},G),{data:Lh(W,y)})}))},c,{leading:u,trailing:f}),R=z=>{T||ei({root:t,single:h,emitter:l,event:z})},C=z=>{A&&t.setAttribute(Ir,!t.getAttribute(Ir)),I(z)},L=()=>{S||(t.addEventListener("pointerdown",C),t.addEventListener("pointermove",I),t.addEventListener("pointerleave",R),t.addEventListener("pointerup",R))},M=()=>{S||(t.removeEventListener("pointerdown",C),t.removeEventListener("pointermove",I),t.removeEventListener("pointerleave",R),t.removeEventListener("pointerup",R))},j=({nativeEvent:z,offsetX:W,offsetY:Y,data:V})=>{if(z)return;const{data:G}=V,q=Iu(P,G,g);if(!q)return;const Q=q.getBBox(),{x:nt,y:et,width:at,height:lt}=Q,st=t.getBBox();I({target:q,offsetX:W!==void 0?W+st.x:nt+at/2,offsetY:Y!==void 0?Y+st.y:et+lt/2})},F=({nativeEvent:z}={})=>{z||ei({root:t,single:h,emitter:l,nativeEvent:!1})},$=()=>{M(),Xd({root:t,single:h})},B=()=>{L()};return l.on("tooltip:show",j),l.on("tooltip:hide",F),l.on("tooltip:enable",B),l.on("tooltip:disable",$),L(),()=>{M(),l.off("tooltip:show",j),l.off("tooltip:hide",F),l.off("tooltip:enable",B),l.off("tooltip:disable",$),k?ei({root:t,single:h,emitter:l,nativeEvent:!1}):Xd({root:t,single:h})}}function XE(t){const{shared:r,crosshairs:e,crosshairsX:n,crosshairsY:i,series:a,name:o,item:s=()=>({}),facet:l=!1}=t,c=gi(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(u,f,d)=>{const{container:h,view:p}=u,{scale:v,markState:g,coordinate:y,theme:m}=p,b=X0(g,"seriesTooltip"),x=X0(g,"crosshairs"),O=Bn(h),w=ar(a,b),_=ar(e,x);if(c.clickLock&&!l&&O.setAttribute(Ir,!1),w&&qX(g)&&!l)return q0(O,Object.assign(Object.assign({},c),{theme:m,elements:Hr,scale:v,coordinate:y,crosshairs:_,crosshairsX:ar(ar(n,e),!1),crosshairsY:ar(i,_),item:s,emitter:d}));if(w&&l){const S=f.filter(I=>I!==u&&I.options.parentKey===u.options.key),k=tE(u,f),E=S[0].view.scale,A=O.getBounds(),T=A.min[0],P=A.min[1];Object.assign(E,{facet:!0});const N=O.parentNode.parentNode;return c.clickLock&&N.setAttribute(Ir,!1),q0(N,Object.assign(Object.assign({},c),{theme:m,elements:()=>k,scale:E,coordinate:y,crosshairs:ar(e,x),crosshairsX:ar(ar(n,e),!1),crosshairsY:ar(i,_),item:s,startX:T,startY:P,emitter:d}))}return JX(O,Object.assign(Object.assign({},c),{datum:vi(p),elements:Hr,scale:v,coordinate:y,groupKey:r?Ls():void 0,item:s,emitter:d,view:p,theme:m,shared:r}))}}XE.props={reapplyWhenUpdate:!0};function tq(){return(t,r,e)=>{const{container:n,view:i,options:a}=t,o=Tv(n),s=Hr(n),l=h=>Yd(h).scales[0].name,c=h=>{const{scale:{[h]:p}}=i;return p},u=ia(a,["active","inactive"]),f=oo(s,vi(i)),d=[];for(const h of o){const p=j=>{const{data:F}=h.attributes,{__data__:$}=j,{index:B}=$;return F[B].label},v=l(h),g=hE(h),y=c(v),m=ce(s,j=>y.invert(j.__data__[v])),{state:b={}}=h.attributes,{inactive:x={}}=b,{setState:O,removeState:w}=ui(u,f),_={inactive:it(x,"marker")},S={inactive:it(x,"label")},{setState:k,removeState:E}=ui(_),{setState:A,removeState:T}=ui(S),P=j=>{for(const F of g){const $=fE(F),B=dE(F);F===j||j===null?(E($,"inactive"),T(B,"inactive")):(k($,"inactive"),A(B,"inactive"))}},N=(j,F)=>{const $=p(F),B=new Set(m.get($));for(const W of s)B.has(W)?O(W,"active"):O(W,"inactive");P(F);const{nativeEvent:z=!0}=j;z&&e.emit("legend:highlight",Object.assign(Object.assign({},j),{nativeEvent:z,data:{channel:v,value:$}}))},I=new Map;for(const j of g){const F=$=>{N($,j)};j.addEventListener("pointerover",F),I.set(j,F)}const R=j=>{for(const $ of s)w($,"inactive","active");P(null);const{nativeEvent:F=!0}=j;F&&e.emit("legend:unhighlight",{nativeEvent:F})},C=j=>{const{nativeEvent:F,data:$}=j;if(F)return;const{channel:B,value:z}=$;if(B!==v)return;const W=g.find(Y=>p(Y)===z);W&&N({nativeEvent:!1},W)},L=j=>{const{nativeEvent:F}=j;F||R({nativeEvent:!1})};h.addEventListener("pointerleave",R),e.on("legend:highlight",C),e.on("legend:unhighlight",L);const M=()=>{h.removeEventListener(R),e.off("legend:highlight",C),e.off("legend:unhighlight",L);for(const[j,F]of I)j.removeEventListener(F)};d.push(M)}return()=>d.forEach(h=>h())}}var An=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function eq(t,r){const[e,n,i,a]=t,[o,s,l,c]=r;return!(o>i||l<e||s>a||c<n)}function nq(t,r,e,n,i){const[a,o,s,l]=i;return[Math.max(a,Math.min(t,e)),Math.max(o,Math.min(r,n)),Math.min(s,Math.max(t,e)),Math.min(l,Math.max(r,n))]}function rq(t){const{width:r,height:e}=t.getBBox();return[0,0,r,e]}function Tr(t,r){for(const[e,n]of Object.entries(r))t.style(e,n)}const K0=Xa(t=>{const r=t.attributes,{x:e,y:n,width:i,height:a,class:o,renders:s={},handleSize:l=10,document:c}=r,u=An(r,["x","y","width","height","class","renders","handleSize","document"]);if(!c||i===void 0||a===void 0||e===void 0||n===void 0)return;const f=l/2,d=(z,W,Y)=>{z.handle||(z.handle=Y.createElement("rect"),z.append(z.handle));const{handle:V}=z;return V.attr(W),V},h=it(Ml(u,"handleNW","handleNE"),"handleN"),{render:p=d}=h,v=An(h,["render"]),g=it(u,"handleE"),{render:y=d}=g,m=An(g,["render"]),b=it(Ml(u,"handleSE","handleSW"),"handleS"),{render:x=d}=b,O=An(b,["render"]),w=it(u,"handleW"),{render:_=d}=w,S=An(w,["render"]),k=it(u,"handleNW"),{render:E=d}=k,A=An(k,["render"]),T=it(u,"handleNE"),{render:P=d}=T,N=An(T,["render"]),I=it(u,"handleSE"),{render:R=d}=I,C=An(I,["render"]),L=it(u,"handleSW"),{render:M=d}=L,j=An(L,["render"]),F=(z,W)=>{const{id:Y}=z,V=W(z,z.attributes,c);V.id=Y,V.style.draggable=!0},$=z=>()=>{const W=Xa(Y=>F(Y,z));return new W({})},B=yt(t).attr("className",o).style("transform",`translate(${e}, ${n})`).style("draggable",!0);B.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(Tr,Object.assign(Object.assign({width:i,height:a},Ml(u,"handle")),{transform:void 0})),B.maybeAppend("handle-n",$(p)).style("x",f).style("y",-f).style("width",i-l).style("height",l).style("fill","transparent").call(Tr,v),B.maybeAppend("handle-e",$(y)).style("x",i-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call(Tr,m),B.maybeAppend("handle-s",$(x)).style("x",f).style("y",a-f).style("width",i-l).style("height",l).style("fill","transparent").call(Tr,O),B.maybeAppend("handle-w",$(_)).style("x",-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call(Tr,S),B.maybeAppend("handle-nw",$(E)).style("x",-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(Tr,A),B.maybeAppend("handle-ne",$(P)).style("x",i-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(Tr,N),B.maybeAppend("handle-se",$(R)).style("x",i-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call(Tr,C),B.maybeAppend("handle-sw",$(M)).style("x",-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call(Tr,j)});function Iv(t,r){var{brushed:e=()=>{},brushended:n=()=>{},brushcreated:i=()=>{},brushstarted:a=()=>{},brushupdated:o=()=>{},extent:s=rq(t),brushRegion:l=(V,G,q,Q,nt)=>[V,G,q,Q],reverse:c=!1,fill:u="#777",fillOpacity:f="0.3",stroke:d="#fff",selectedHandles:h=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=r,p=An(r,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let v=null,g=null,y=null,m=null,b=null,x=!1;const[O,w,_,S]=s;Kr(t,"crosshair"),t.style.draggable=!0;const k=(V,G,q)=>{if(a(q),m&&m.remove(),b&&b.remove(),v=[V,G],c)return E();A()},E=()=>{b=new He({style:Object.assign(Object.assign({},p),{fill:u,fillOpacity:f,stroke:d,pointerEvents:"none"})}),m=new K0({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(b),t.appendChild(m)},A=()=>{m=new K0({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},p),{fill:u,fillOpacity:f,stroke:d,draggable:!0}),className:"mask"}),t.appendChild(m)},T=(V=!0)=>{m&&m.remove(),b&&b.remove(),v=null,g=null,y=null,x=!1,m=null,b=null,n(V)},P=(V,G,q=!0)=>{const[Q,nt,et,at]=nq(V[0],V[1],G[0],G[1],s),[lt,st,ft,ht]=l(Q,nt,et,at,s);return c?I(lt,st,ft,ht):N(lt,st,ft,ht),e(lt,st,ft,ht,q),[lt,st,ft,ht]},N=(V,G,q,Q)=>{m.style.x=V,m.style.y=G,m.style.width=q-V,m.style.height=Q-G},I=(V,G,q,Q)=>{b.style.d=`
      M${O},${w}L${_},${w}L${_},${S}L${O},${S}Z
      M${V},${G}L${V},${Q}L${q},${Q}L${q},${G}Z
    `,m.style.x=V,m.style.y=G,m.style.width=q-V,m.style.height=Q-G},R=V=>{const G=(st,ft,ht,ut,pt)=>st+ft<ut?ut-ft:st+ht>pt?pt-ht:st,q=V[0]-y[0],Q=V[1]-y[1],nt=G(q,v[0],g[0],O,_),et=G(Q,v[1],g[1],w,S),at=[v[0]+nt,v[1]+et],lt=[g[0]+nt,g[1]+et];P(at,lt)},C={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},L=V=>j(V)||M(V),M=V=>{const{id:G}=V;return h.indexOf(G)===-1?!1:new Set(Object.keys(C)).has(G)},j=V=>V===m.getElementById("selection"),F=V=>{const{target:G}=V,[q,Q]=Lf(t,V);if(!m||!L(G)){k(q,Q,V),x=!0;return}L(G)&&(y=[q,Q])},$=V=>{const{target:G}=V,q=Lf(t,V);if(!v)return;if(!y)return P(v,q);if(j(G))return R(q);const[Q,nt]=[q[0]-y[0],q[1]-y[1]],{id:et}=G;if(C[et]){const[at,lt,st,ft]=C[et].vector;return P([v[0]+Q*at,v[1]+nt*lt],[g[0]+Q*st,g[1]+nt*ft])}},B=V=>{if(y){y=null;const{x:et,y:at,width:lt,height:st}=m.style;v=[et,at],g=[et+lt,at+st],o(et,at,et+lt,at+st,V);return}g=Lf(t,V);const[G,q,Q,nt]=P(v,g);x=!1,i(G,q,Q,nt,V)},z=V=>{const{target:G}=V;m&&!L(G)&&T()},W=V=>{const{target:G}=V;!m||!L(G)||x?Kr(t,"crosshair"):j(G)?Kr(t,"move"):M(G)&&Kr(t,C[G.id].cursor)},Y=()=>{Kr(t,"default")};return t.addEventListener("dragstart",F),t.addEventListener("drag",$),t.addEventListener("dragend",B),t.addEventListener("click",z),t.addEventListener("pointermove",W),t.addEventListener("pointerleave",Y),{mask:m,move(V,G,q,Q,nt=!0){m||k(V,G,{}),v=[V,G],g=[q,Q],P([V,G],[q,Q],nt)},remove(V=!0){m&&T(V)},destroy(){m&&T(!1),Kr(t,"default"),t.removeEventListener("dragstart",F),t.removeEventListener("drag",$),t.removeEventListener("dragend",B),t.removeEventListener("click",z),t.removeEventListener("pointermove",W),t.removeEventListener("pointerleave",Y)}}}function jv(t,r,e){return r.filter(n=>{if(n===t)return!1;const{interaction:i={}}=n.options;return Object.values(i).find(a=>a.brushKey===e)})}function iq(t,r,e){return jv(t,r,e).map(n=>Bn(n.container))}function aq(t,r,e){return jv(t,r,e).map(n=>n.options)}function Z0(t,r){var{elements:e,selectedHandles:n,siblings:i=$=>[],datum:a,brushRegion:o,extent:s,reverse:l,scale:c,coordinate:u,series:f=!1,key:d=$=>$,bboxOf:h=$=>{const{x:B,y:z,width:W,height:Y}=$.style;return{x:B,y:z,width:W,height:Y}},state:p={},emitter:v}=r,g=An(r,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const y=e(t),m=i(t),b=m.flatMap(e),x=oo(y,a),O=it(g,"mask"),{setState:w,removeState:_}=ui(p,x),S=new Map,{width:k,height:E,x:A=0,y:T=0}=h(t),P=s||[0,0,k,E],N=()=>{for(const $ of[...y,...b])_($,"active","inactive")},I=($,B,z,W)=>{var Y;for(const G of m)(Y=G.brush)===null||Y===void 0||Y.remove();const V=new Set;for(const G of y){const{min:q,max:Q}=G.getLocalBounds(),[nt,et]=q,[at,lt]=Q;eq([nt,et,at,lt],[$,B,z,W])?(w(G,"active"),V.add(d(G))):w(G,"inactive")}for(const G of b)V.has(d(G))?w(G,"active"):w(G,"inactive")},R=()=>{for(const $ of y)_($,"inactive");for(const $ of S.values())$.remove();S.clear()},C=($,B,z,W)=>{const Y=G=>{const q=G.cloneNode();return q.__data__=G.__data__,G.parentNode.appendChild(q),S.set(G,q),q},V=new wi({style:{x:$+A,y:B+T,width:z-$,height:W-B}});t.appendChild(V);for(const G of y){const q=S.get(G)||Y(G);q.style.clipPath=V,w(G,"inactive"),w(q,"active")}},L=Iv(t,Object.assign(Object.assign({},O),{extent:P,brushRegion:o,reverse:l,selectedHandles:n,brushended:$=>{const B=f?R:N;$&&v.emit("brush:remove",{nativeEvent:!0}),B()},brushed:($,B,z,W,Y)=>{const V=Dl($,B,z,W,c,u);Y&&v.emit("brush:highlight",{nativeEvent:!0,data:{selection:V}}),(f?C:I)($,B,z,W)},brushcreated:($,B,z,W,Y)=>{const V=Dl($,B,z,W,c,u);v.emit("brush:end",Object.assign(Object.assign({},Y),{nativeEvent:!0,data:{selection:V}}))},brushupdated:($,B,z,W,Y)=>{const V=Dl($,B,z,W,c,u);v.emit("brush:end",Object.assign(Object.assign({},Y),{nativeEvent:!0,data:{selection:V}}))},brushstarted:$=>{v.emit("brush:start",$)}})),M=({nativeEvent:$,data:B})=>{if($)return;const{selection:z}=B,[W,Y,V,G]=OU(z,c,u);L.move(W,Y,V,G,!1)};v.on("brush:highlight",M);const j=({nativeEvent:$}={})=>{$||L.remove(!1)};v.on("brush:remove",j);const F=L.destroy.bind(L);return L.destroy=()=>{v.off("brush:highlight",M),v.off("brush:remove",j),F()},L}function $u(t){var{facet:r,brushKey:e}=t,n=An(t,["facet","brushKey"]);return(i,a,o)=>{const{container:s,view:l,options:c}=i,u=Bn(s),f={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},d=["active",["inactive",{opacity:.5}]],{scale:h,coordinate:p}=l;if(r){const g=u.getBounds(),y=g.min[0],m=g.min[1],b=g.max[0],x=g.max[1];return Z0(u.parentNode.parentNode,Object.assign(Object.assign({elements:()=>tE(i,a),datum:vi(Hd(i,a).map(O=>O.view)),brushRegion:(O,w,_,S)=>[O,w,_,S],extent:[y,m,b,x],state:ia(Hd(i,a).map(O=>O.options),d),emitter:o,scale:h,coordinate:p,selectedHandles:void 0},f),n))}const v=Z0(u,Object.assign(Object.assign({elements:Hr,key:g=>g.__data__.key,siblings:()=>iq(i,a,e),datum:vi([l,...jv(i,a,e).map(g=>g.view)]),brushRegion:(g,y,m,b)=>[g,y,m,b],extent:void 0,state:ia([c,...aq(i,a,e)],d),emitter:o,scale:h,coordinate:p,selectedHandles:void 0},f),n));return u.brush=v,()=>v.destroy()}}$u.props={reapplyWhenUpdate:!0};function Dv(t,r,e,n,i){const[,a,,o]=i;return[t,a,e,o]}function oq(t){return $u(Object.assign(Object.assign({},t),{brushRegion:Dv,selectedHandles:["handle-e","handle-w"]}))}function $v(t,r,e,n,i){const[a,,o]=i;return[a,r,o,n]}function sq(t){return $u(Object.assign(Object.assign({},t),{brushRegion:$v,selectedHandles:["handle-n","handle-s"]}))}var Fv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const lq="axis",cq="axis-line",uq="axis-main-group",qE="axis-hot-area";function fq(t){return t.getElementsByClassName(lq)}function KE(t){return t.getElementsByClassName(cq)[0]}function dq(t){return t.getElementsByClassName(uq)[0]}function ZE(t){return dq(t).getLocalBounds()}function hq(t,r){var{cross:e,offsetX:n,offsetY:i}=r,a=Fv(r,["cross","offsetX","offsetY"]);const o=ZE(t),s=KE(t),[l]=s.getLocalBounds().min,[c,u]=o.min,[f,d]=o.max,h=(f-c)*2;return{brushRegion:$v,hotZone:new wi({className:qE,style:Object.assign({width:e?h/2:h,transform:`translate(${(e?c:l-h/2).toFixed(2)}, ${u})`,height:d-u},a)}),extent:e?(p,v,g,y)=>[-1/0,v,1/0,y]:(p,v,g,y)=>[Math.floor(c-n),v,Math.ceil(f-n),y]}}function pq(t,r){var{offsetY:e,offsetX:n,cross:i=!1}=r,a=Fv(r,["offsetY","offsetX","cross"]);const o=ZE(t),s=KE(t),[,l]=s.getLocalBounds().min,[c,u]=o.min,[f,d]=o.max,h=d-u;return{brushRegion:Dv,hotZone:new wi({className:qE,style:Object.assign({width:f-c,height:i?h:h*2,transform:`translate(${c}, ${i?u:l-h})`},a)}),extent:i?(p,v,g,y)=>[p,-1/0,g,1/0]:(p,v,g,y)=>[p,Math.floor(u-e),g,Math.ceil(d-e)]}}function vq(t,r){var{axes:e,elements:n,points:i,horizontal:a,datum:o,offsetY:s,offsetX:l,reverse:c=!1,state:u={},emitter:f,coordinate:d}=r,h=Fv(r,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const p=n(t),v=e(t),g=oo(p,o),{setState:y,removeState:m}=ui(u,g),b=new Map,x=it(h,"mask"),O=M=>Array.from(b.values()).every(([j,F,$,B])=>M.some(([z,W])=>z>=j&&z<=$&&W>=F&&W<=B)),w=v.map(M=>M.attributes.scale),_=M=>M.length>2?[M[0],M[M.length-1]]:M,S=new Map,k=()=>{S.clear();for(let M=0;M<v.length;M++){const j=w[M],{domain:F}=j.getOptions();S.set(M,_(F))}};k();const E=(M,j)=>{const F=[];for(const B of p){const z=i(B);O(z)?(y(B,"active"),F.push(B)):y(B,"inactive")}if(S.set(M,T(F,M)),!j)return;const $=()=>{if(!P)return Array.from(S.values());const B=[];for(const[z,W]of S){const Y=w[z],{name:V}=Y.getOptions();V==="x"?B[0]=W:B[1]=W}return B};f.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:$()}})},A=M=>{for(const j of p)m(j,"active","inactive");k(),M&&f.emit("brushAxis:remove",{nativeEvent:!0})},T=(M,j)=>{const F=w[j],{name:$}=F.getOptions(),B=M.map(z=>{const W=z.__data__;return F.invert(W[$])});return _(ii(F,B))},P=v.some(a)&&v.some(M=>!a(M)),N=[];for(let M=0;M<v.length;M++){const j=v[M],F=a(j)?pq:hq,{hotZone:$,brushRegion:B,extent:z}=F(j,{offsetY:s,offsetX:l,cross:P,zIndex:999,fill:"transparent"});j.parentNode.appendChild($);const W=Iv($,Object.assign(Object.assign({},x),{reverse:c,brushRegion:B,brushended(Y){b.delete(j),Array.from(b.entries()).length===0?A(Y):E(M,Y)},brushed(Y,V,G,q,Q){b.set(j,z(Y,V,G,q)),E(M,Q)}}));N.push(W)}const I=(M={})=>{const{nativeEvent:j}=M;j||N.forEach(F=>F.remove(!1))},R=(M,j,F)=>{const[$,B]=M,z=V=>V.getStep?V.getStep():0,W=C($,j,F),Y=C(B,j,F)+z(j);return a(F)?[W,-1/0,Y,1/0]:[-1/0,W,1/0,Y]},C=(M,j,F)=>{const{height:$,width:B}=d.getOptions(),z=j.clone();return a(F)?z.update({range:[0,B]}):z.update({range:[$,0]}),z.map(M)},L=M=>{const{nativeEvent:j}=M;if(j)return;const{selection:F}=M.data;for(let $=0;$<N.length;$++){const B=F[$],z=N[$],W=v[$];if(B){const Y=w[$];z.move(...R(B,Y,W),!1)}else z.remove(!1)}};return f.on("brushAxis:remove",I),f.on("brushAxis:highlight",L),()=>{N.forEach(M=>M.destroy()),f.off("brushAxis:remove",I),f.off("brushAxis:highlight",L)}}function gq(t){return(r,e,n)=>{const{container:i,view:a,options:o}=r,s=Bn(i),{x:l,y:c}=s.getBBox(),{coordinate:u}=a;return vq(i,Object.assign({elements:Hr,axes:fq,offsetY:c,offsetX:l,points:f=>f.__data__.points,horizontal:f=>{const{startPos:[d,h],endPos:[p,v]}=f.attributes;return d!==p&&h===v},datum:vi(a),state:ia(o,["active",["inactive",{opacity:.5}]]),coordinate:u,emitter:n},t))}}var yq=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},QE=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function mq(t=300){let r=null;return e=>{const{timeStamp:n}=e;return r!==null&&n-r<t?(r=n,!0):(r=n,!1)}}function bq(t,r){var{filter:e,reset:n,brushRegion:i,extent:a,reverse:o,emitter:s,scale:l,coordinate:c,selection:u,series:f=!1}=r,d=QE(r,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const h=it(d,"mask"),{width:p,height:v}=t.getBBox(),g=a||[0,0,p,v],y=mq(),m=Iv(t,Object.assign(Object.assign({},h),{extent:g,brushRegion:i,reverse:o,brushcreated:b}));t.addEventListener("click",x);function b(w,_,S,k,E){w===S&&_===k||(E.nativeEvent=!0,e(u(w,_,S,k),E),m.remove())}function x(w){y(w)&&(w.nativeEvent=!0,n(w))}const O=({nativeEvent:w,data:_})=>{if(w)return;const{selection:S}=_;e(S,{nativeEvent:!1})};return s.on("brush:filter",O),()=>{m.destroy(),s.off("brush:filter",O),t.removeEventListener("click",x)}}function Bv(t){var{hideX:r=!0,hideY:e=!0}=t,n=QE(t,["hideX","hideY"]);return(i,a,o)=>{const{container:s,view:l,options:c,update:u,setState:f}=i,d=Bn(s),h={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let p=!1,v=!1,g=l;const{scale:y,coordinate:m}=l;return bq(d,Object.assign(Object.assign({brushRegion:(b,x,O,w)=>[b,x,O,w],selection:(b,x,O,w)=>{const{scale:_,coordinate:S}=g;return Dl(b,x,O,w,_,S)},filter:(b,x)=>yq(this,void 0,void 0,function*(){if(v)return;v=!0;const[O,w]=b;f("brushFilter",S=>{const{marks:k}=S,E=k.map(A=>X({axis:Object.assign(Object.assign({},r&&{x:{transform:[{type:"hide"}]}}),e&&{y:{transform:[{type:"hide"}]}})},A,{scale:{x:{domain:O,nice:!1},y:{domain:w,nice:!1}}}));return Object.assign(Object.assign({},c),{marks:E,clip:!0})}),o.emit("brush:filter",Object.assign(Object.assign({},x),{data:{selection:[O,w]}})),g=(yield u()).view,v=!1,p=!0}),reset:b=>{if(v||!p)return;const{scale:x}=l,{x:O,y:w}=x,_=O.getOptions().domain,S=w.getOptions().domain;o.emit("brush:filter",Object.assign(Object.assign({},b),{data:{selection:[_,S]}})),p=!1,g=l,f("brushFilter"),u()},extent:void 0,emitter:o,scale:y,coordinate:m},h),n))}}function xq(t){return Bv(Object.assign(Object.assign({hideX:!0},t),{brushRegion:Dv}))}function Oq(t){return Bv(Object.assign(Object.assign({hideY:!0},t),{brushRegion:$v}))}function JE(t,r,e){const n=t?e:r,i=t?r:e,a=Fr(n),o=Fr(i),s=i.getOptions().domain,l=!o&&s&&s.length>=2&&s[0]===0;return{currentScale:n,targetScale:i,isSourceDiscrete:a,isTargetDiscrete:o,shouldPreserveZeroBaseline:l}}function wq(t,r,e,n,i){const a=t?n:e,o=h=>{const p={};return Object.keys(i).forEach(v=>{(v===h||v.match(new RegExp(`^${h}\\d+$`)))&&(p[v]=i[v])}),p},s=o(t?"x":"y"),l=Object.keys(s),c=l.map(h=>r[h]),u=Fr(a),f=c.map(h=>Fr(h)),d=c.map((h,p)=>{const v=h.getOptions().domain;return!f[p]&&v&&v.length>=2&&v[0]===0});return{currentScale:a,targetScales:c,isSourceDiscrete:u,isTargetDiscrete:f,shouldPreserveZeroBaseline:d,targetScaleKeys:l}}function _q(t){return Array.from(new Set(t)).sort((e,n)=>e-n)}function Sq({isTargetDiscrete:t,filteredValues:r,shouldPreserveZeroBaseline:e}){if(t)return _q(r);{const n=Math.min(...r),i=Math.max(...r);return e?[0,i]:[n,i]}}function bo(t){return t instanceof Date?t.getTime():typeof t=="string"?parseFloat(t):Number(t)}function zv(t,r,e,n,i,a="filter",o=!1){if(lE(a))return[];const s=o?"y":"x",l=o?"x":"y",c=[];for(const u of t){const{channelData:f}=u,d=f[s]||[],h=f[l]||[],p=Array.isArray(d[0])?d[0]:d,v=Array.isArray(h[0]);if(p.length===0)continue;const g=p.length;for(let y=0;y<g;y++){const m=p[y];let b=!1;if(e)b=r.includes(m);else if(r.length>=2){const x=bo(m),O=bo(r[0]),w=bo(r[r.length-1]);!isNaN(x)&&!isNaN(O)&&!isNaN(w)&&(b=x>=O&&x<=w)}if(a==="filter"&&b){if(v){const x=h.length;for(let O=0;O<x;O++){const w=h[O];if(Array.isArray(w)&&y<w.length){const _=w[y],S=bo(_);isNaN(S)||c.push(S)}}}else if(y<h.length){const x=h[y],O=bo(x);isNaN(O)||c.push(O)}}}}return c.length>0?Sq({isTargetDiscrete:n,filteredValues:c,shouldPreserveZeroBaseline:i}):[]}function kq({markDataPairs:t,domain:r,scaleInfo:e,adaptiveMode:n,shouldFilterXAxis:i=!1}){const{isSourceDiscrete:a,isTargetDiscrete:o,shouldPreserveZeroBaseline:s}=e;return zv(t,r,a,o,s,n,i)}function Eq({markDataPairs:t,domain:r,scaleInfo:e,markToScaleMap:n,adaptiveMode:i,shouldFilterXAxis:a=!1}){const o=new Map,{isSourceDiscrete:s,isTargetDiscrete:l,shouldPreserveZeroBaseline:c,targetScaleKeys:u}=e;return t.forEach(f=>{const d=n.get(f.markKey);if(!d)return;const h=u.indexOf(d);if(h===-1)return;const p=l[h],v=c[h],g=zv([f],r,s,p,v,i,a);o.set(d,g)}),o}function Aq(t,r,e,n,i,a,o=!1,s){const l=new Map;if(t.length===0||r.length===0)return l;const{isSourceDiscrete:c,isTargetDiscrete:u,shouldPreserveZeroBaseline:f}=e,d=s?t.filter(p=>s.get(p.markKey)===i):t.filter(p=>p.markKey===n);if(d.length===0)return l;const h=zv(d,r,c,u,f,a,o);return l.set(i,h),l}function tA(t,r,e,n){n&&r instanceof Map?r.forEach((i,a)=>{i&&Array.isArray(i)&&i.length>0&&(t[a]=i)}):!n&&Array.isArray(r)&&r.length>0&&(t[e?"x":"y"]=r)}var Tq=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};const eA="slider";function nA(t){var r,e,n,i;if(!t?.markState)return 0;let a=0;for(const[o,s]of t.markState.entries()){if(o.type!=="point"||!s?.channels)continue;const l=(r=s.channels)===null||r===void 0?void 0:r.find(c=>c.name==="size");if(l){if(((n=(e=l.scale)===null||e===void 0?void 0:e.range)===null||n===void 0?void 0:n.length)>0){const c=Math.max(...l.scale.range.filter(u=>typeof u=="number"));a=Math.max(a,c);continue}if(((i=l.values)===null||i===void 0?void 0:i.length)>0){const c=l.values.filter(u=>u.value!==void 0).flatMap(u=>Array.isArray(u.value)?u.value:[u.value]).filter(u=>typeof u=="number"&&!isNaN(u));c.length>0&&(a=Math.max(a,...c))}}}return a}function Q0(t,r,e,n,i,a,o){if(o){const s=a?n:i.x,l=a?i.y:n;t.emit(r,Object.assign(Object.assign({},e),{nativeEvent:o,data:{selection:[Cc(s),Cc(l)]}}))}}function J0(t,r,e,n){const{domain0:i,filteredDomain:a,channel0:o,channel1:s,prefix:l,hasState:c,isMultiAxis:u,markToScaleMap:f,enableAdaptiveFiltering:d}=n;u&&a instanceof Map?t(r,h=>Object.assign({},Mq(h,e,{[o]:{domain:i,nice:!1}},l,c,o,s,f||new Map,a))):t(r,h=>Object.assign({},Pq(h,e,Object.assign({[o]:{domain:i,nice:!1}},d&&Array.isArray(a)?{[s]:{domain:a,nice:!0}}:{}),l,c,o,s)))}function Pq(t,r,e,n,i=!1,a="x",o="y"){const{marks:s}=t,l=nA(r),c=s.map(u=>{var f,d;return X({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},u,{scale:e,[n]:Object.assign(Object.assign({},((f=u[n])===null||f===void 0?void 0:f[a])&&{[a]:Object.assign({preserve:!0},i&&{ratio:null})}),((d=u[n])===null||d===void 0?void 0:d[o])&&{[o]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:c,insetLeft:l,insetRight:l,insetTop:l,insetBottom:l,clip:!0,animate:!1})}function Mq(t,r,e,n,i=!1,a="x",o="y",s=new Map,l=new Map){const{marks:c}=t,u=nA(r),f=c.map(d=>{var h,p;const v=typeof d?.key=="string"?d.key:String(d?.key||""),g=s.get(v),y=l.get(g),m=y&&{y:Object.assign({domain:y,nice:!0},g!=="y"?{independent:!0}:void 0)};return X({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},d,{scale:Object.assign(Object.assign({},e),m),[n]:Object.assign(Object.assign({},((h=d[n])===null||h===void 0?void 0:h[a])&&{[a]:Object.assign({preserve:!0},i&&{ratio:null})}),((p=d[n])===null||p===void 0?void 0:p[o])&&{[o]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:f,insetLeft:u,insetRight:u,insetTop:u,insetBottom:u,clip:!0,animate:!1})}function Cq(t,r,e){const[n,i]=t,a=e?l=>1-l:l=>l,o=Qa(r,a(n),!0),s=Qa(r,a(i),!1);return ii(r,[o,s])}function Cc(t){return[t[0],t[t.length-1]]}function rA({initDomain:t={},className:r=eA,prefix:e="slider",setValue:n=(u,f)=>u.setValues(f),hasState:i=!1,wait:a=50,leading:o=!0,trailing:s=!1,adaptiveMode:l="filter",getInitValues:c=u=>{var f;const d=(f=u?.attributes)===null||f===void 0?void 0:f.values;if(d[0]!==0||d[1]!==1)return d}}){return(u,f,d)=>{const{container:h,view:p,update:v,setState:g}=u,y=h.getElementsByClassName(r);if(!y.length)return()=>{};const{scale:m,coordinate:b}=p,{x,y:O}=m,w=ue(b),_=C=>{const L=C==="vertical"?"y":"x",M=C==="vertical"?"x":"y";return w?[M,L]:[L,M]},S=new Map,k=new Set,E=cE(p),A=CU(p,t,x,O,E),T=Array.from(y),P=C=>T.some(L=>{const{orientation:M}=L.attributes,[j]=_(M);return j===C}),N=P("x")&&!P("y"),I=P("y")&&!P("x"),R=!lE(l)&&(N||I);for(const C of y){const{orientation:L}=C.attributes,[M,j]=_(L),F=`${e}${yi(M)}:filter`,$=M==="x",{ratio:B}=x.getOptions(),{ratio:z}=O.getOptions(),W=nt=>{if(nt.data){const{selection:ft}=nt.data,[ht=Cc(A.x),ut=Cc(A.y)]=ft;return $?[ii(x,ht,B),ii(O,ut,z)]:[ii(O,ut,z),ii(x,ht,B)]}const{value:et}=nt.detail,at=m[M],lt=Cq(et,at,w&&L==="horizontal"),st=A[j];return[lt,st]};let Y=!1;const G=Iq({getFiltering:()=>Y,setFiltering:nt=>{Y=nt},domainsOf:W,view:p,independentScaleInfo:E,enableAdaptiveFiltering:R,hasOnlyXSlider:N,hasOnlyYSlider:I,adaptiveMode:l,scaleX:x,scaleY:O,scale:m,channelDomain:A,channel0:M,channel1:j,isX:$,emitter:d,eventName:F,setState:g,slider:C,prefix:e,hasState:i,update:v,wait:a,leading:o,trailing:s}),q=nt=>{const{nativeEvent:et}=nt;if(et)return;const{data:at}=nt,{selection:lt}=at,[st,ft]=lt;C.dispatchEvent(new Qt("valuechange",{data:at,nativeEvent:!1}));const ht=$?F0(st,x):F0(ft,O);n(C,ht)};d.on(F,q),C.addEventListener("valuechange",G),S.set(C,G),k.add([F,q]);const Q=c(C);Q&&C.dispatchEvent(new Qt("valuechange",{detail:{value:Q},nativeEvent:!1,initValue:!0}))}return()=>{for(const[C,L]of S)C.removeEventListener("valuechange",L);for(const[C,L]of k)d.off(C,L)}}}function Lq({view:t,domain0:r,shouldFilterXAxis:e,enableAdaptiveFiltering:n,markDataPairs:i,adaptiveMode:a,scaleX:o,scaleY:s,scale:l,channelDomain:c,independentScaleInfo:u,channel0:f}){const d=new Map,h=new Map;if(!n||i.length===0||!r?.length)return{filteredDomain:d,markToScaleMap:h};const p=mt(t,"options.slider");if(Object.keys(p).length>0&&Object.prototype.hasOwnProperty.call(p,f)){const g=wq(e,l,o,s,c);(e?u.markToXScaleMap:u.markToYScaleMap).forEach((b,x)=>{h.set(x,b)});const m=Eq({markDataPairs:i,domain:r,scaleInfo:g,markToScaleMap:h,adaptiveMode:a,shouldFilterXAxis:e});return tA(c,m,e,!0),{filteredDomain:m,markToScaleMap:h}}else{const g=Nq(t,f);if(g){const y=JE(e,o,s),m=e?u.markToXScaleMap:u.markToYScaleMap,b=m.get(g)||"";if(b)return h.set(g,b),{filteredDomain:Aq(i,r,y,g,b,a,e,m),markToScaleMap:h}}}return{filteredDomain:d,markToScaleMap:h}}function Nq(t,r){for(const[e]of t.markState.entries()){const n=mt(e,"slider");if(Object.keys(n||{}).length>0&&Object.prototype.hasOwnProperty.call(n,r))return String(e.key||"")}return null}function Rq({domain0:t,domain1:r,shouldFilterXAxis:e,enableAdaptiveFiltering:n,markDataPairs:i,adaptiveMode:a,scaleX:o,scaleY:s,channelDomain:l,hasOnlyXSlider:c,hasOnlyYSlider:u,isX:f}){let d=r;if(n&&i.length>0&&(c&&f||u&&!f)&&t?.length>0){const h=JE(e,o,s);d=kq({markDataPairs:i,domain:t,scaleInfo:h,adaptiveMode:a,shouldFilterXAxis:e}),tA(l,d,e,!1)}return d}function Iq({getFiltering:t,setFiltering:r,domainsOf:e,view:n,independentScaleInfo:i,enableAdaptiveFiltering:a,hasOnlyXSlider:o,hasOnlyYSlider:s,adaptiveMode:l,scaleX:c,scaleY:u,scale:f,channelDomain:d,channel0:h,channel1:p,isX:v,emitter:g,eventName:y,setState:m,slider:b,prefix:x,hasState:O,update:w,wait:_,leading:S,trailing:k}){return Zi(E=>Tq(this,void 0,void 0,function*(){const{initValue:A=!1}=E;if(t()&&!A)return;r(!0);const{nativeEvent:T=!0}=E,{markDataPairs:P}=MU(n);if(i[`hasIndependent${p.toUpperCase()}`]){const[I]=e(E),R=s&&!v,{filteredDomain:C,markToScaleMap:L}=Lq({view:n,domain0:I,shouldFilterXAxis:R,enableAdaptiveFiltering:a&&(o&&v||s&&!v),markDataPairs:P,adaptiveMode:l,scaleX:c,scaleY:u,scale:f,channelDomain:d,independentScaleInfo:i,channel0:h});d[h]=I,Q0(g,y,E,I,d,v,T),J0(m,b,n,{domain0:I,filteredDomain:C,channel0:h,channel1:p,prefix:x,hasState:O,isMultiAxis:!0,markToScaleMap:L,enableAdaptiveFiltering:a})}else{const[I,R]=e(E),L=Rq({domain0:I,domain1:R,shouldFilterXAxis:s&&!v,enableAdaptiveFiltering:a,markDataPairs:P,adaptiveMode:l,scaleX:c,scaleY:u,channelDomain:d,hasOnlyXSlider:o,hasOnlyYSlider:s,isX:v});d[h]=I,Q0(g,y,E,I,d,v,T),J0(m,b,n,{domain0:I,filteredDomain:L,channel0:h,channel1:p,prefix:x,hasState:O,isMultiAxis:!1,markToScaleMap:void 0,enableAdaptiveFiltering:a})}yield w(),r(!1)}),_,{leading:S,trailing:k})}function jq(t){var r;try{const e=(r=t.ownerDocument)===null||r===void 0?void 0:r.defaultView;if(!e||typeof e.getContextService!="function")return null;const n=e.getContextService().getDomElement();return n instanceof HTMLElement?n:null}catch{return null}}function iA({className:t=eA,setValue:r=(o,s)=>o.setValues(s),minRange:e=.01,wheelSensitivity:n=.05,x:i=!0,y:a=!0}={}){return o=>{const{container:s,view:l}=o,{coordinate:c}=l,u=ue(c),f=jq(s),d=Math.max(1e-6,Math.min(1,e)),h=s.getElementsByClassName(t);if(!h.length)return()=>{};const p=(m,b)=>m===!0?!0:m===!1?!1:m==="shift"?b.shiftKey&&!b.ctrlKey&&!b.altKey:m==="ctrl"?b.ctrlKey&&!b.shiftKey&&!b.altKey:m==="alt"?b.altKey&&!b.shiftKey&&!b.ctrlKey:!1,v=(m,b)=>{r(m,b),m.dispatchEvent(new Qt("valuechange",{detail:{value:b},nativeEvent:!0}))},g=(m,b,x,O,w)=>{const S=(m-b)/x,k=Math.max(0,Math.min(1,S));return Math.max(O,Math.min(w,k))},y=m=>{if(!f)return;const b=m.target;if(!f.contains(b))return;const x=f.getBoundingClientRect(),O=m.clientX-x.left,w=m.clientY-x.top,_=[];for(const S of h){const{values:k,orientation:E}=S.attributes;if(!k)continue;const A=E==="horizontal";p((u?A?"y":"x":A?"x":"y")==="x"?i:a,m)&&_.push(S)}if(_.length!==0){m.preventDefault(),m.stopPropagation();for(const S of _){const{values:k,orientation:E,x:A,y:T,trackLength:P}=S.attributes,[N,I]=k,R=I-N,L=E==="horizontal"?g(O,A,P,N,I):g(w,T,P,N,I),M=n*PU(R),F=1+m.deltaY*M,$=Math.max(d,Math.min(1,R*F)),B=(L-N)/R,z=(I-L)/R;let W=L-$*B,Y=L+$*z;W<0?(W=0,Y=Math.min(1,$)):Y>1&&(Y=1,W=Math.max(0,1-$)),v(S,[W,Y])}}};return f&&f.addEventListener("wheel",y,{passive:!1,capture:!0}),()=>{f&&f.removeEventListener("wheel",y,{capture:!0})}}}iA.props={reapplyWhenUpdate:!0};const tb=`${Vr}scrollbar`;function Dq(t={}){return(r,e,n)=>{const{view:i,container:a}=r;if(!a.getElementsByClassName(tb).length)return()=>{};const{scale:s}=i,{x:l,y:c}=s,u={x:[...l.getOptions().domain],y:[...c.getOptions().domain]};return l.update({domain:l.getOptions().expectedDomain}),c.update({domain:c.getOptions().expectedDomain}),rA(Object.assign({initDomain:u,className:tb,prefix:"scrollbar",hasState:!0,setValue:(d,h)=>d.setValue(h[0]),getInitValues:d=>{const h=d.slider.attributes.values;if(h[0]!==0||h[1]!==1)return h}},t))(r,e,n)}}var $q=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Fq(t,r,e){return`<${t} style="${Object.entries(e).map(([n,i])=>`${k$(n)}:${i}`).join(";")}">${r}</${t}>`}const Bq={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function eb(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function aA(t){var{offsetX:r=8,offsetY:e=8}=t,n=$q(t,["offsetX","offsetY"]);return i=>{const{container:a}=i,[o,s]=a.getBounds().min,l=it(n,"tip"),c=new Set,u=d=>{const{target:h}=d;if(!eb(h)){d.stopPropagation();return}const{offsetX:p,offsetY:v}=d,g=p+r-o,y=v+e-s;if(h.tip){h.tip.style.x=g,h.tip.style.y=y;return}const{text:m}=h.style,b=new ca({className:"poptip",style:{innerHTML:Fq("div",m,Object.assign(Object.assign({},Bq),l)),x:g,y}});a.appendChild(b),h.tip=b,c.add(b)},f=d=>{const{target:h}=d;if(!eb(h)){d.stopPropagation();return}h.tip&&(h.tip.remove(),h.tip=null,c.delete(h.tip))};return a.addEventListener("pointerover",u),a.addEventListener("pointerout",f),()=>{a.removeEventListener("pointerover",u),a.removeEventListener("pointerout",f),c.forEach(d=>d.remove())}}}aA.props={reapplyWhenUpdate:!0};var zq=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},Wq=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Gq(t){return yt(t).select(`.${hi}`).node()}const Hq={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function Yq(t={}){const{originData:r=[],layout:e}=t,n=Wq(t,["originData","layout"]),i=X({},Hq,n),a=it(i,"breadCrumb"),o=it(i,"active");return s=>{const{update:l,setState:c,container:u,options:f}=s,d=Gq(u),h=f.marks[0],{state:p}=h,v=new Ve;d.appendChild(v);const g=(w,_)=>zq(this,void 0,void 0,function*(){if(v.removeChildren(),_){let S="",k=a.y,E=0;const A=[],T=d.getBBox().width,P=w.map((N,I)=>{S=`${S}${N}/`,A.push(N);const R=new jn({name:S.replace(/\/$/,""),style:Object.assign(Object.assign({text:N,x:E,path:[...A],depth:I},a),{y:k})});v.appendChild(R),E+=R.getBBox().width;const C=new jn({style:Object.assign(Object.assign({x:E,text:" / "},a),{y:k})});return v.appendChild(C),E+=C.getBBox().width,E>T&&(k=v.getBBox().height+a.y,E=0,R.attr({x:E,y:k}),E+=R.getBBox().width,C.attr({x:E,y:k}),E+=C.getBBox().width),I===Ho(w)-1&&C.remove(),R});P.forEach((N,I)=>{if(I===Ho(P)-1)return;const R=Object.assign({},N.attributes);N.attr("cursor","pointer"),N.addEventListener("mouseenter",()=>{N.attr(o)}),N.addEventListener("mouseleave",()=>{N.attr(R)}),N.addEventListener("click",()=>{g(mt(N,["style","path"]),mt(N,["style","depth"]))})})}$U(u,c),c("treemapDrillDown",S=>{const{marks:k}=S,E=w.join("/"),A=k.map(T=>{if(T.type!=="rect")return T;let P=r;if(_){const I=r.filter(j=>{const F=mt(j,["id"]);return F&&(F.match(`${E}/`)||E.match(F))}).map(j=>({value:j.height===0?mt(j,["value"]):void 0,name:mt(j,["id"])})),{paddingLeft:R,paddingBottom:C,paddingRight:L}=e,M=Object.assign(Object.assign({},e),{paddingTop:(e.paddingTop||v.getBBox().height+10)/(_+1),paddingLeft:R/(_+1),paddingBottom:C/(_+1),paddingRight:L/(_+1),path:j=>j.name,layer:j=>j.depth===_+1});P=rS(I,M,{value:"value"})[0]}else P=r.filter(I=>I.depth===1);const N=[];return P.forEach(({path:I})=>{N.push(xn(I))}),X({},T,{data:P,scale:{color:{domain:N}}})});return Object.assign(Object.assign({},S),{marks:A})}),yield l(void 0,["legendFilter"])}),y=w=>w.attributes.key.split("-")[0],m=w=>mt(w,["__data__","key"]),b=w=>{const _=w.target,{markType:S,nodeName:k,attributes:E}=_||{};if(S!=="rect"&&k!==U.TEXT)return;const A=k===U.TEXT&&mt(E,"isTreemapLabel")===!0?y(_):m(_),T=Ba(r,P=>P.id===A);mt(T,"height")&&g(mt(T,"path"),mt(T,"depth"))};d.addEventListener("click",b);const x=Yc(Object.assign(Object.assign({},p.active),p.inactive)),O=()=>{oE(d).forEach(_=>{const S=mt(_,["style","cursor"]),k=Ba(r,E=>E.id===mt(_,["__data__","key"]));if(S!=="pointer"&&k?.height){_.style.cursor="pointer";const E=ms(_.attributes,x);_.addEventListener("mouseenter",()=>{_.attr(p.active)}),_.addEventListener("mouseleave",()=>{_.attr(X(E,p.inactive))})}})};return O(),d.addEventListener("mousemove",O),()=>{v.remove(),d.removeEventListener("click",b),d.removeEventListener("mousemove",O)}}}var Vq=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};const Uq=t=>t.querySelectorAll(".element").filter(r=>(r.style||{})[rv]===Na);function Xq(t){return yt(t).select(`.${hi}`).node()}const qq={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.6)",fontSize:11},y:4,active:{fill:"rgba(0, 0, 0, 0.4)"}};function Kq(t={}){const{breadCrumb:r={}}=t,e=X({},qq,r);return n=>{const{update:i,setState:a,container:o,view:s,options:l}=n,c=o.ownerDocument,u=Xq(o),f=l.marks.find(({id:m})=>m===Na);if(!f)return;const{state:d}=f,h=c.createElement("g");h.style.transform=`translate(${e.x||0}px, ${e.y||0}px)`,h.setAttribute("x","drilldown-breadcrumb"),u.appendChild(h);const p=m=>Vq(this,void 0,void 0,function*(){if(h.removeChildren(),m&&m.length>0){const b=c.createElement("text",{style:Object.assign({text:e.rootText},e.style)});h.appendChild(b);let x="";const O=m;let w=e.style.y,_=b.getBBox().width;const S=u.getBBox().width,k=O.map((A,T)=>{const P=c.createElement("text",{style:Object.assign(Object.assign({x:_,text:" / "},e.style),{y:w})});h.appendChild(P),_+=P.getBBox().width,x=`${x}${A} / `;const N=c.createElement("text",{name:x.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:A,x:_},e.style),{y:w})});return h.appendChild(N),_+=N.getBBox().width,_>S&&(w=h.getBBox().height,_=0,P.attr({x:_,y:w}),_+=P.getBBox().width,N.attr({x:_,y:w}),_+=N.getBBox().width),N});[b,...k].forEach((A,T)=>{if(T===k.length)return;const P=Object.assign({},A.attributes);A.attr("cursor","pointer"),A.addEventListener("mouseenter",()=>{A.attr(e.active)}),A.addEventListener("mouseleave",()=>{A.attr(P)}),A.addEventListener("click",()=>{p(m.slice(0,T))})})}a("drillDown",b=>{const{marks:x}=b,O=x.map(w=>{if(w.id!==Na&&w.type!=="rect")return w;const{data:_}=w,S=_.filter(k=>{var E;const A=(E=k.path)!==null&&E!==void 0?E:[];if(m.length===0)return!0;if(!Array.isArray(A)||A.length<m.length)return!1;for(let T=0;T<m.length;T++)if(A[T]!==m[T])return!1;return!0});return X({},w,{data:S})});return Object.assign(Object.assign({},b),{marks:O})}),yield i()}),v=m=>{var b,x;const O=m.target,w=O.markType,_=O.style||{},S=_[rv],k=_[bc],E=O.__data__;if(w!=="rect"||S!==Na||!k)return;const A=(x=(b=E?.data)===null||b===void 0?void 0:b.path)!==null&&x!==void 0?x:[];p(A)};u.addEventListener("click",v);const g=Yc(Object.assign(Object.assign({},d.active),d.inactive)),y=()=>{Uq(u).forEach(b=>{const x=mt(b,["style",bc]);if(mt(b,["style","cursor"])!=="pointer"&&x){b.style.cursor="pointer";const w=ms(b.attributes,g);b.addEventListener("mouseenter",()=>{b.attr(d.active)}),b.addEventListener("mouseleave",()=>{b.attr(X(w,d.inactive))})}})};return u.addEventListener("mousemove",y),()=>{h.remove(),u.removeEventListener("click",v),u.removeEventListener("mousemove",y)}}}var Nf=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},Zq=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Qq={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},Rf="movePoint",nb=t=>{const r=t.target,{markType:e}=r;e==="line"&&(r.attr("_lineWidth",r.attr("lineWidth")||1),r.attr("lineWidth",r.attr("_lineWidth")+3)),e==="interval"&&(r.attr("_opacity",r.attr("opacity")||1),r.attr("opacity",.7*r.attr("_opacity")))},rb=t=>{const r=t.target,{markType:e}=r;e==="line"&&r.attr("lineWidth",r.attr("_lineWidth")),e==="interval"&&r.attr("opacity",r.attr("_opacity"))},Jq=(t,r,e)=>r.map(n=>["x","color"].reduce((a,o)=>{const s=e[o];return s&&n[s]!==t[s]?!1:a},!0)?Object.assign(Object.assign({},n),t):n),t6=t=>{const r=mt(t,["__data__","y"]),n=mt(t,["__data__","y1"])-r,{__data__:{data:i,encode:a,transform:o},childNodes:s}=t.parentNode,l=Ba(o,({type:f})=>f==="normalizeY"),c=mt(a,["y","field"]),u=i[s.indexOf(t)][c];return(f,d=!1)=>l||d?f/(1-f)/(n/(1-n))*u:f},e6=(t,r)=>{const e=mt(t,["__data__","seriesItems",r,"0","value"]),n=mt(t,["__data__","seriesIndex",r]),{__data__:{data:i,encode:a,transform:o}}=t.parentNode,s=Ba(o,({type:u})=>u==="normalizeY"),l=mt(a,["y","field"]),c=i[n][l];return u=>s?e===1?u:u/(1-u)/(e/(1-e))*c:u},ib=(t,r,e)=>{t.forEach((n,i)=>{n.attr("stroke",r[1]===i?e.activeStroke:e.stroke)})},ab=(t,r,e,n)=>{const i=new He({style:e}),a=new jn({style:n});return r.appendChild(a),t.appendChild(i),[i,a]},ob=(t,r)=>{if(!mt(t,["options","range","indexOf"]))return;const n=t.options.range.indexOf(r);return t.sortedDomain[n]},If=(t,r,e)=>{const n=Pc(t,r),a=Pc(t,e)/n,o=t[0]+(r[0]-t[0])*a,s=t[1]+(r[1]-t[1])*a;return[o,s]};function n6(t={}){const{selection:r=[],precision:e=2}=t,n=Zq(t,["selection","precision"]),i=Object.assign(Object.assign({},Qq),n||{}),a=it(i,"path"),o=it(i,"label"),s=it(i,"point");return(l,c,u)=>{const{update:f,setState:d,container:h,view:p,options:{marks:v,coordinate:g}}=l,y=Bn(h);let m=oE(y),b,x=r;const{transform:O=[],type:w}=g,_=!!Ba(O,({type:L})=>L==="transpose"),S=w==="polar",k=w==="theta",E=!!Ba(m,({markType:L})=>L==="area");E&&(m=m.filter(({markType:L})=>L==="area"));const A=new Ve({style:{zIndex:2}});y.appendChild(A);const T=()=>{u.emit("element-point:select",{nativeEvent:!0,data:{selection:x}})},P=(L,M)=>{u.emit("element-point:moved",{nativeEvent:!0,data:{changeData:L,data:M}})},N=L=>{const M=L.target;x=[M.parentNode.childNodes.indexOf(M)],T(),R(M)},I=L=>{const{data:{selection:M},nativeEvent:j}=L;if(j)return;x=M;const F=mt(m,[x?.[0]]);F&&R(F)},R=L=>{const{attributes:M,markType:j,__data__:F}=L,{stroke:$}=M,{points:B,seriesTitle:z,color:W,title:Y,seriesX:V,y1:G}=F;if(_&&j!=="interval")return;const{scale:q,coordinate:Q}=b?.view||p,{color:nt,y:et,x:at}=q,lt=Q.getCenter();A.removeChildren();let st;const ft=(ht,ut,pt,Bt)=>Nf(this,void 0,void 0,function*(){return d("elementPointMove",Wt=>{var Rt;const te=(((Rt=b?.options)===null||Rt===void 0?void 0:Rt.marks)||v).map(ee=>{if(!Bt.includes(ee.type))return ee;const{data:ne,encode:Dt}=ee,he=Object.keys(Dt).reduce((St,Ye)=>{const ye=Dt[Ye];return Ye==="x"&&(St[ye]=ht),Ye==="y"&&(St[ye]=ut),Ye==="color"&&(St[ye]=pt),St},{}),Ct=Jq(he,ne,Dt);return P(he,Ct),X({},ee,{data:Ct,animate:!1})});return Object.assign(Object.assign({},Wt),{marks:te})}),yield f("elementPointMove")});if(["line","area"].includes(j))B.forEach((ht,ut)=>{const pt=at.invert(V[ut]);if(!pt)return;const Bt=new Or({name:Rf,style:Object.assign({cx:ht[0],cy:ht[1],fill:$},s)}),Wt=e6(L,ut);Bt.addEventListener("mousedown",Rt=>{const te=Q.output([V[ut],0]),ee=z?.length;h.attr("cursor","move"),x[1]!==ut&&(x[1]=ut,T()),ib(A.childNodes,x,s);const[ne,Dt]=ab(A,Bt,a,o),Gt=Ct=>{const St=ht[1]+Ct.clientY-st[1];if(E)if(S){const Ye=ht[0]+Ct.clientX-st[0],[ye,tn]=If(lt,te,[Ye,St]),[,Sr]=Q.output([1,et.output(0)]),[,kr]=Q.invert([ye,Sr-(B[ut+ee][1]-tn)]),Ti=(ut+1)%ee,zu=(ut-1+ee)%ee,js=mo([B[zu],[ye,tn],z[Ti]&&B[Ti]]);Dt.attr("text",Wt(et.invert(kr)).toFixed(e)),ne.attr("d",js),Bt.attr("cx",ye),Bt.attr("cy",tn)}else{const[,Ye]=Q.output([1,et.output(0)]),[,ye]=Q.invert([ht[0],Ye-(B[ut+ee][1]-St)]),tn=mo([B[ut-1],[ht[0],St],z[ut+1]&&B[ut+1]]);Dt.attr("text",Wt(et.invert(ye)).toFixed(e)),ne.attr("d",tn),Bt.attr("cy",St)}else{const[,Ye]=Q.invert([ht[0],St]),ye=mo([B[ut-1],[ht[0],St],B[ut+1]]);Dt.attr("text",et.invert(Ye).toFixed(e)),ne.attr("d",ye),Bt.attr("cy",St)}};st=[Rt.clientX,Rt.clientY],window.addEventListener("mousemove",Gt);const he=()=>Nf(this,void 0,void 0,function*(){if(h.attr("cursor","default"),window.removeEventListener("mousemove",Gt),h.removeEventListener("mouseup",he),Kt(Dt.attr("text")))return;const Ct=Number(Dt.attr("text")),St=ob(nt,W);b=yield ft(pt,Ct,St,["line","area"]),Dt.remove(),ne.remove(),R(L)});h.addEventListener("mouseup",he)}),A.appendChild(Bt)}),ib(A.childNodes,x,s);else if(j==="interval"){let ht=[(B[0][0]+B[1][0])/2,B[0][1]];_?ht=[B[0][0],(B[0][1]+B[1][1])/2]:k&&(ht=B[0]);const ut=t6(L),pt=new Or({name:Rf,style:Object.assign(Object.assign({cx:ht[0],cy:ht[1],fill:$},s),{stroke:s.activeStroke})});pt.addEventListener("mousedown",Bt=>{h.attr("cursor","move");const Wt=ob(nt,W),[Rt,te]=ab(A,pt,a,o),ee=Dt=>{if(_){const Gt=ht[0]+Dt.clientX-st[0],[he]=Q.output([et.output(0),et.output(0)]),[,Ct]=Q.invert([he+(Gt-B[2][0]),ht[1]]),St=mo([[Gt,B[0][1]],[Gt,B[1][1]],B[2],B[3]],!0);te.attr("text",ut(et.invert(Ct)).toFixed(e)),Rt.attr("d",St),pt.attr("cx",Gt)}else if(k){const Gt=ht[1]+Dt.clientY-st[1],he=ht[0]+Dt.clientX-st[0],[Ct,St]=If(lt,[he,Gt],ht),[Ye,ye]=If(lt,[he,Gt],B[1]),tn=Q.invert([Ct,St])[1],Sr=G-tn;if(Sr<0)return;const kr=TU(lt,[[Ct,St],[Ye,ye],B[2],B[3]],Sr>.5?1:0);te.attr("text",ut(Sr,!0).toFixed(e)),Rt.attr("d",kr),pt.attr("cx",Ct),pt.attr("cy",St)}else{const Gt=ht[1]+Dt.clientY-st[1],[,he]=Q.output([1,et.output(0)]),[,Ct]=Q.invert([ht[0],he-(B[2][1]-Gt)]),St=mo([[B[0][0],Gt],[B[1][0],Gt],B[2],B[3]],!0);te.attr("text",ut(et.invert(Ct)).toFixed(e)),Rt.attr("d",St),pt.attr("cy",Gt)}};st=[Bt.clientX,Bt.clientY],window.addEventListener("mousemove",ee);const ne=()=>Nf(this,void 0,void 0,function*(){if(h.attr("cursor","default"),h.removeEventListener("mouseup",ne),window.removeEventListener("mousemove",ee),Kt(te.attr("text")))return;const Dt=Number(te.attr("text"));b=yield ft(Y,Dt,Wt,[j]),te.remove(),Rt.remove(),R(L)});h.addEventListener("mouseup",ne)}),A.appendChild(pt)}};m.forEach((L,M)=>{x[0]===M&&R(L),L.addEventListener("click",N),L.addEventListener("mouseenter",nb),L.addEventListener("mouseleave",rb)});const C=L=>{const M=L?.target;(!M||M.name!==Rf&&!m.includes(M))&&(x=[],T(),A.removeChildren())};return u.on("element-point:select",I),u.on("element-point:unselect",C),h.addEventListener("mousedown",C),()=>{A.remove(),u.off("element-point:select",I),u.off("element-point:unselect",C),h.removeEventListener("mousedown",C),m.forEach(L=>{L.removeEventListener("click",N),L.removeEventListener("mouseenter",nb),L.removeEventListener("mouseleave",rb)})}}}var r6=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};const oA=t=>{const{value:r,format:e=r.split(".").pop(),delimiter:n=",",autoType:i=!0}=t;return()=>r6(void 0,void 0,void 0,function*(){const a=yield fetch(r);if(e==="csv"){const o=yield a.text();return r2(n).parse(o,i?i2:Ji)}if(e==="json")return yield a.json();throw new Error(`Unknown format: ${e}.`)})};oA.props={};function i6(t){return!t||Object.keys(t).length===0}const sA=t=>{const{fields:r,key:e="key",value:n="value"}=t;return i=>i6(r)?i:i.flatMap(a=>r.map(o=>Object.assign(Object.assign({},a),{[e]:o,[n]:a[o]})))};sA.props={};function a6(t){return t!=null&&!Number.isNaN(t)}const lA=t=>{const{callback:r=a6}=t;return e=>e.filter(r)};lA.props={};const cA=t=>{const{callback:r}=t;return e=>Array.isArray(e)?[...e].sort(r):e};cA.props={};function o6(t,r=[]){return r.reduce((e,n)=>(n in t&&(e[n]=t[n]),e),{})}const uA=t=>{const{fields:r}=t;return e=>e.map(n=>o6(n,r))};uA.props={};function s6(t){return Object.keys(t).length===0}const fA=t=>r=>{if(!t||s6(t))return r;const e=n=>Object.entries(n).reduce((i,[a,o])=>(i[t[a]||a]=o,i),{});return r.map(e)};fA.props={};function l6(t,r){return t.map(e=>{if(Array.isArray(e)){const[n,i=r]=e;return[n,i]}return[e,r]})}const dA=t=>{const{fields:r=[]}=t,e=l6(r,!0);return n=>{const i=(a,o)=>e.reduce((s,[l,c=!0])=>s!==0?s:c?a[l]<o[l]?-1:+(a[l]!==o[l]):a[l]>o[l]?-1:+(a[l]!==o[l]),0);return[...n].sort(i)}};dA.props={};const hA=t=>{const{value:r}=t;return()=>r};hA.props={};const pA=t=>{const{callback:r=Ji}=t;return e=>r(e)};pA.props={};const vA=t=>{const{callback:r=Ji}=t;return e=>Array.isArray(e)?e.map(r):e};vA.props={};var c6=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};function u6(t,r){return{set(e,n,i){if(r[e]===void 0)return this;const a=n?n.call(null,r[e]):r[e];return i?i.call(null,a):typeof t[e]=="function"?t[e](a):t[e]=a,this},setAsync(e,n,i){return c6(this,void 0,void 0,function*(){if(r[e]===void 0)return this;const a=n?yield n.call(null,r[e]):r[e];return i?i.call(null,a):typeof t[e]=="function"?t[e](a):t[e]=a,this})}}}const jf=Math.PI/180,Eo=64,$l=2048;function f6(t){return t.text}function d6(){return"serif"}function sb(){return"normal"}function h6(t){return t.value}function p6(){return~~(Math.random()*2)*90}function v6(){return 1}function g6(){}function y6(t,r,e,n){if(r.sprite)return;const i=t.context,a=t.ratio;i.clearRect(0,0,(Eo<<5)/a,$l/a);let o=0,s=0,l=0;const c=e.length;for(--n;++n<c;){r=e[n],i.save(),i.font=r.style+" "+r.weight+" "+~~((r.size+1)/a)+"px "+r.font;let d=i.measureText(r.text+"m").width*a,h=r.size<<1;if(r.rotate){const p=Math.sin(r.rotate*jf),v=Math.cos(r.rotate*jf),g=d*v,y=d*p,m=h*v,b=h*p;d=Math.max(Math.abs(g+b),Math.abs(g-b))+31>>5<<5,h=~~Math.max(Math.abs(y+m),Math.abs(y-m))}else d=d+31>>5<<5;if(h>l&&(l=h),o+d>=Eo<<5&&(o=0,s+=l,l=0),s+h>=$l)break;i.translate((o+(d>>1))/a,(s+(h>>1))/a),r.rotate&&i.rotate(r.rotate*jf),i.fillText(r.text,0,0),r.padding&&(i.lineWidth=2*r.padding,i.strokeText(r.text,0,0)),i.restore(),r.width=d,r.height=h,r.xoff=o,r.yoff=s,r.x1=d>>1,r.y1=h>>1,r.x0=-r.x1,r.y0=-r.y1,r.hasText=!0,o+=d}const u=i.getImageData(0,0,(Eo<<5)/a,$l/a).data,f=[];for(;--n>=0;){if(r=e[n],!r.hasText)continue;const d=r.width,h=d>>5;let p=r.y1-r.y0;for(let y=0;y<p*h;y++)f[y]=0;if(o=r.xoff,o==null)return;s=r.yoff;let v=0,g=-1;for(let y=0;y<p;y++){for(let m=0;m<d;m++){const b=h*y+(m>>5),x=u[(s+y)*(Eo<<5)+(o+m)<<2]?1<<31-m%32:0;f[b]|=x,v|=x}v?g=y:(r.y0++,p--,y--,s++)}r.y1=r.y0+g,r.sprite=f.slice(0,(r.y1-r.y0)*h)}}function m6(t,r,e){e>>=5;const n=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,l=t.y1-t.y0;let c=(t.y+t.y0)*e+(a>>5),u;for(let f=0;f<l;f++){u=0;for(let d=0;d<=i;d++)if((u<<s|(d<i?(u=n[f*i+d])>>>o:0))&r[c+d])return!0;c+=e}return!1}function b6(t,r){const e=t[0],n=t[1];r.x+r.x0<e.x&&(e.x=r.x+r.x0),r.y+r.y0<e.y&&(e.y=r.y+r.y0),r.x+r.x1>n.x&&(n.x=r.x+r.x1),r.y+r.y1>n.y&&(n.y=r.y+r.y1)}function x6(t,r){return t.x+t.x1>r[0].x&&t.x+t.x0<r[1].x&&t.y+t.y1>r[0].y&&t.y+t.y0<r[1].y}function gA(t){const r=t[0]/t[1];return function(e){return[r*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function O6(t){const e=4*t[0]/t[1];let n=0,i=0;return function(a){const o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:n+=e;break;case 1:i+=4;break;case 2:n-=e;break;default:i-=4;break}return[n,i]}}function lb(t){const r=[];let e=-1;for(;++e<t;)r[e]=0;return r}function w6(){return document.createElement("canvas")}function Pr(t){return typeof t=="function"?t:function(){return t}}const _6={archimedean:gA,rectangular:O6};function S6(){let t=[256,256],r=f6,e=d6,n=h6,i=sb,a=p6,o=v6,s=gA,l=Math.random,c=g6,u=[],f=null,d=1/0,h=w6;const p=sb,v={};v.start=function(){const[m,b]=t,x=g(h()),O=v.board?v.board:lb((t[0]>>5)*t[1]),w=u.length,_=[],S=u.map(function(T,P,N){return T.text=r.call(this,T,P,N),T.font=e.call(this,T,P,N),T.style=p.call(this,T,P,N),T.weight=i.call(this,T,P,N),T.rotate=a.call(this,T,P,N),T.size=~~n.call(this,T,P,N),T.padding=o.call(this,T,P,N),T}).sort(function(T,P){return P.size-T.size});let k=-1,E=v.board?[{x:0,y:0},{x:m,y:b}]:void 0;f&&clearInterval(f),f=setInterval(A,0),A();function A(){const T=Date.now();for(;Date.now()-T<d&&++k<w;){const P=S[k];P.x=m*(l()+.5)>>1,P.y=b*(l()+.5)>>1,y6(x,P,S,k),P.hasText&&y(O,P,E)&&(c.call(null,"word",{cloud:v,word:P}),_.push(P),E?v.hasImage||b6(E,P):E=[{x:P.x+P.x0,y:P.y+P.y0},{x:P.x+P.x1,y:P.y+P.y1}],P.x-=t[0]>>1,P.y-=t[1]>>1)}v._tags=_,v._bounds=E,k>=w&&(v.stop(),c.call(null,"end",{cloud:v,words:_,bounds:E}))}return v},v.stop=function(){return f&&(clearInterval(f),f=null),v};function g(m){m.width=m.height=1;const b=Math.sqrt(m.getContext("2d").getImageData(0,0,1,1).data.length>>2);m.width=(Eo<<5)/b,m.height=$l/b;const x=m.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",x.textBaseline="middle",{context:x,ratio:b}}function y(m,b,x){const O=b.x,w=b.y,_=Math.sqrt(t[0]*t[0]+t[1]*t[1]),S=s(t),k=l()<.5?1:-1;let E,A=-k,T,P;for(;(E=S(A+=k))&&(T=~~E[0],P=~~E[1],!(Math.min(Math.abs(T),Math.abs(P))>=_));)if(b.x=O+T,b.y=w+P,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>t[0]||b.y+b.y1>t[1])&&(!x||!m6(b,m,t[0]))&&(!x||x6(b,x))){const N=b.sprite,I=b.width>>5,R=t[0]>>5,C=b.x-(I<<4),L=C&127,M=32-L,j=b.y1-b.y0;let F,$=(b.y+b.y0)*R+(C>>5);for(let B=0;B<j;B++){F=0;for(let z=0;z<=I;z++)m[$+z]|=F<<M|(z<I?(F=N[B*I+z])>>>L:0);$+=R}return delete b.sprite,!0}return!1}return v.createMask=m=>{const b=document.createElement("canvas"),[x,O]=t;if(!x||!O)return;const w=x>>5,_=lb((x>>5)*O);b.width=x,b.height=O;const S=b.getContext("2d");S.drawImage(m,0,0,m.width,m.height,0,0,x,O);const k=S.getImageData(0,0,x,O).data;for(let E=0;E<O;E++)for(let A=0;A<x;A++){const T=w*E+(A>>5),P=E*x+A<<2,I=k[P]>=250&&k[P+1]>=250&&k[P+2]>=250?1<<31-A%32:0;_[T]|=I}v.board=_,v.hasImage=!0},v.timeInterval=function(m){d=m??1/0},v.words=function(m){u=m},v.size=function(m=[]){t=[+m[0],+m[1]]},v.text=function(m){r=Pr(m)},v.font=function(m){e=Pr(m)},v.fontWeight=function(m){i=Pr(m)},v.rotate=function(m){a=Pr(m)},v.canvas=function(m){h=Pr(m)},v.spiral=function(m){s=_6[m]||m},v.fontSize=function(m){n=Pr(m)},v.padding=function(m){o=Pr(m)},v.random=function(m){l=Pr(m)},v.on=function(m){c=Pr(m)},v}var k6=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},E6=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const A6={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function T6(t){return new Promise((r,e)=>{if(t instanceof HTMLImageElement){r(t);return}if(typeof t=="string"){const n=new Image;n.crossOrigin="anonymous",n.src=t,n.onload=()=>r(n),n.onerror=()=>{console.error(`'image ${t} load failed !!!'`),e()};return}e()})}function P6(t,r){if(typeof t=="function")return t;if(Array.isArray(t)){const[e,n]=t;if(!r)return()=>(n+e)/2;const[i,a]=r;return a===i?()=>(n+e)/2:({value:o})=>(n-e)/(a-i)*(o-i)+e}return()=>t}const yA=(t,r)=>e=>k6(void 0,void 0,void 0,function*(){const n=Object.assign({},A6,t,{canvas:r.createCanvas}),i=S6();yield u6(i,n).set("fontSize",m=>{const b=e.map(x=>x.value);return P6(m,[Zn(b),oe(b)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",T6,i.createMask),i.words([...e]);const a=i.start(),[o,s]=n.size,l=[{x:0,y:0},{x:o,y:s}],{_bounds:c=l,_tags:u,hasImage:f}=a,d=u.map(m=>{var{x:b,y:x,font:O}=m,w=E6(m,["x","y","font"]);return Object.assign(Object.assign({},w),{x:b+o/2,y:x+s/2,fontFamily:O})}),[{x:h,y:p},{x:v,y:g}]=c,y={text:"",value:0,opacity:0,fontSize:0};return d.push(Object.assign(Object.assign({},y),{x:f?0:h,y:f?0:p}),Object.assign(Object.assign({},y),{x:f?o:v,y:f?s:g})),d});yA.props={};function cb(t){return typeof t=="string"?r=>r[t]:t}const mA=t=>{const{join:r,on:e,select:n=[],as:i=n,unknown:a=NaN}=t,[o,s]=e,l=cb(s),c=cb(o),u=Ub(r,([f])=>f,f=>l(f));return f=>f.map(d=>{const h=u.get(c(d));return Object.assign(Object.assign({},d),n.reduce((p,v,g)=>(p[i[g]]=h?h[v]:a,p),{}))})};mA.props={};const bA=t=>{const{start:r,end:e}=t;return n=>n.slice(r,e)};bA.props={};const xA=t=>{const{field:r,groupBy:e,as:n=["y","size"],min:i,max:a,size:o=10,width:s}=t,[l,c]=n;return u=>Array.from(ce(u,d=>e.map(h=>d[h]).join("-")).values()).map(d=>{const h=a2.create(d.map(g=>g[r]),{min:i,max:a,size:o,width:s}),p=h.map(g=>g.x),v=h.map(g=>g.y);return Object.assign(Object.assign({},d[0]),{[l]:p,[c]:v})})};xA.props={};function M6(t,r,e,n){n=n||{};const i=n.maxIterations||100,a=n.tolerance||1e-10,o=t(r),s=t(e);let l=e-r;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return r;if(s===0)return e;for(let c=0;c<i;++c){l/=2;const u=r+l,f=t(u);if(f*o>=0&&(r=u),Math.abs(l)<a||f===0)return u}return r+l}function qd(t){const r=new Array(t);for(let e=0;e<t;++e)r[e]=0;return r}function ub(t,r){return qd(t).map(()=>qd(r))}function ja(t,r){let e=0;for(let n=0;n<t.length;++n)e+=t[n]*r[n];return e}function Kd(t){return Math.sqrt(ja(t,t))}function Zd(t,r,e){for(let n=0;n<r.length;++n)t[n]=r[n]*e}function Lr(t,r,e,n,i){for(let a=0;a<t.length;++a)t[a]=r*e[a]+n*i[a]}function C6(t,r,e){e=e||{};const n=e.maxIterations||r.length*200,i=e.nonZeroDelta||1.05,a=e.zeroDelta||.001,o=e.minErrorDelta||1e-6,s=e.minErrorDelta||1e-5,l=e.rho!==void 0?e.rho:1,c=e.chi!==void 0?e.chi:2,u=e.psi!==void 0?e.psi:-.5,f=e.sigma!==void 0?e.sigma:.5;let d;const h=r.length,p=new Array(h+1);p[0]=r,p[0].fx=t(r),p[0].id=0;for(let O=0;O<h;++O){const w=r.slice();w[O]=w[O]?w[O]*i:a,p[O+1]=w,p[O+1].fx=t(w),p[O+1].id=O+1}function v(O){for(let w=0;w<O.length;w++)p[h][w]=O[w];p[h].fx=O.fx}const g=(O,w)=>O.fx-w.fx,y=r.slice(),m=r.slice(),b=r.slice(),x=r.slice();for(let O=0;O<n;++O){if(p.sort(g),e.history){const _=p.map(S=>{const k=S.slice();return k.fx=S.fx,k.id=S.id,k});_.sort((S,k)=>S.id-k.id),e.history.push({x:p[0].slice(),fx:p[0].fx,simplex:_})}d=0;for(let _=0;_<h;++_)d=Math.max(d,Math.abs(p[0][_]-p[1][_]));if(Math.abs(p[0].fx-p[h].fx)<o&&d<s)break;for(let _=0;_<h;++_){y[_]=0;for(let S=0;S<h;++S)y[_]+=p[S][_];y[_]/=h}const w=p[h];if(Lr(m,1+l,y,-l,w),m.fx=t(m),m.fx<p[0].fx)Lr(x,1+c,y,-c,w),x.fx=t(x),x.fx<m.fx?v(x):v(m);else if(m.fx>=p[h-1].fx){let _=!1;if(m.fx>w.fx?(Lr(b,1+u,y,-u,w),b.fx=t(b),b.fx<w.fx?v(b):_=!0):(Lr(b,1-u*l,y,u*l,w),b.fx=t(b),b.fx<m.fx?v(b):_=!0),_){if(f>=1)break;for(let S=1;S<p.length;++S)Lr(p[S],1-f,p[0],f,p[S]),p[S].fx=t(p[S])}}else v(m)}return p.sort(g),{fx:p[0].fx,x:p[0]}}function L6(t,r,e,n,i,a,o){const s=e.fx,l=ja(e.fxprime,r);let c=s,u=s,f=l,d=0;i=i||1,a=a||1e-6,o=o||.1;function h(p,v,g){for(let y=0;y<16;++y)if(i=(p+v)/2,Lr(n.x,1,e.x,i,r),c=n.fx=t(n.x,n.fxprime),f=ja(n.fxprime,r),c>s+a*i*l||c>=g)v=i;else{if(Math.abs(f)<=-o*l)return i;f*(v-p)>=0&&(v=p),p=i,g=c}return 0}for(let p=0;p<10;++p){if(Lr(n.x,1,e.x,i,r),c=n.fx=t(n.x,n.fxprime),f=ja(n.fxprime,r),c>s+a*i*l||p&&c>=u)return h(d,i,u);if(Math.abs(f)<=-o*l)return i;if(f>=0)return h(i,d,c);u=c,d=i,i*=2}return i}function N6(t,r,e){let n={x:r.slice(),fx:0,fxprime:r.slice()},i={x:r.slice(),fx:0,fxprime:r.slice()};const a=r.slice();let o,s=1;e=e||{};const l=e.maxIterations||r.length*20;n.fx=t(n.x,n.fxprime);const c=n.fxprime.slice();Zd(c,n.fxprime,-1);for(let u=0;u<l;++u){if(s=L6(t,c,n,i,s),e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:s}),!s)Zd(c,n.fxprime,-1);else{Lr(a,1,i.fxprime,-1,n.fxprime);const f=ja(n.fxprime,n.fxprime),d=Math.max(0,ja(a,i.fxprime)/f);Lr(c,d,c,-1,i.fxprime),o=n,n=i,i=o}if(Kd(n.fxprime)<=1e-5)break}return e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:s}),n}const OA=1e-10;function wA(t,r){const e=I6(t),n=e.filter(function(l){return R6(l,t)});let i=0,a=0,o;const s=[];if(n.length>1){const l=j6(n);for(o=0;o<n.length;++o){const u=n[o];u.angle=Math.atan2(u.x-l.x,u.y-l.y)}n.sort(function(u,f){return f.angle-u.angle});let c=n[n.length-1];for(o=0;o<n.length;++o){const u=n[o];a+=(c.x+u.x)*(u.y-c.y);const f={x:(u.x+c.x)/2,y:(u.y+c.y)/2};let d=null;for(let h=0;h<u.parentIndex.length;++h)if(c.parentIndex.indexOf(u.parentIndex[h])>-1){const p=t[u.parentIndex[h]],v=Math.atan2(u.x-p.x,u.y-p.y),g=Math.atan2(c.x-p.x,c.y-p.y);let y=g-v;y<0&&(y+=2*Math.PI);const m=g-y/2;let b=cs(f,{x:p.x+p.radius*Math.sin(m),y:p.y+p.radius*Math.cos(m)});b>p.radius*2&&(b=p.radius*2),(d===null||d.width>b)&&(d={circle:p,width:b,p1:u,p2:c})}d!==null&&(s.push(d),i+=Qd(d.circle.radius,d.width),c=u)}}else{let l=t[0];for(o=1;o<t.length;++o)t[o].radius<l.radius&&(l=t[o]);let c=!1;for(o=0;o<t.length;++o)if(cs(t[o],l)>Math.abs(l.radius-t[o].radius)){c=!0;break}c?i=a=0:(i=l.radius*l.radius*Math.PI,s.push({circle:l,p1:{x:l.x,y:l.y+l.radius},p2:{x:l.x-OA,y:l.y+l.radius},width:l.radius*2}))}return a/=2,r&&(r.area=i+a,r.arcArea=i,r.polygonArea=a,r.arcs=s,r.innerPoints=n,r.intersectionPoints=e),i+a}function R6(t,r){for(let e=0;e<r.length;++e)if(cs(t,r[e])>r[e].radius+OA)return!1;return!0}function I6(t){const r=[];for(let e=0;e<t.length;++e)for(let n=e+1;n<t.length;++n){const i=SA(t[e],t[n]);for(let a=0;a<i.length;++a){const o=i[a];o.parentIndex=[e,n],r.push(o)}}return r}function Qd(t,r){return t*t*Math.acos(1-r/t)-(t-r)*Math.sqrt(r*(2*t-r))}function cs(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}function _A(t,r,e){if(e>=t+r)return 0;if(e<=Math.abs(t-r))return Math.PI*Math.min(t,r)*Math.min(t,r);const n=t-(e*e-r*r+t*t)/(2*e),i=r-(e*e-t*t+r*r)/(2*e);return Qd(t,n)+Qd(r,i)}function SA(t,r){const e=cs(t,r),n=t.radius,i=r.radius;if(e>=n+i||e<=Math.abs(n-i))return[];const a=(n*n-i*i+e*e)/(2*e),o=Math.sqrt(n*n-a*a),s=t.x+a*(r.x-t.x)/e,l=t.y+a*(r.y-t.y)/e,c=-(r.y-t.y)*(o/e),u=-(r.x-t.x)*(o/e);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function j6(t){const r={x:0,y:0};for(let e=0;e<t.length;++e)r.x+=t[e].x,r.y+=t[e].y;return r.x/=t.length,r.y/=t.length,r}function D6(t,r){r=r||{},r.maxIterations=r.maxIterations||500;const e=r.initialLayout||z6,n=r.lossFunction||Wv;t=$6(t);const i=e(t,r),a=[],o=[];let s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));const c=C6(function(u){const f={};for(let d=0;d<o.length;++d){const h=o[d];f[h]={x:u[2*d],y:u[2*d+1],radius:i[h].radius}}return n(f,t)},a,r).x;for(let u=0;u<o.length;++u)s=o[u],i[s].x=c[2*u],i[s].y=c[2*u+1];return i}const kA=1e-10;function Jd(t,r,e){return Math.min(t,r)*Math.min(t,r)*Math.PI<=e+kA?Math.abs(t-r):M6(function(n){return _A(t,r,n)-e},0,t+r)}function $6(t){t=t.slice();const r=[],e={};let n,i,a,o;for(n=0;n<t.length;++n){const s=t[n];s.sets.length==1?r.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],e[[a,o]]=!0,e[[o,a]]=!0)}for(r.sort((s,l)=>s>l?1:-1),n=0;n<r.length;++n)for(a=r[n],i=n+1;i<r.length;++i)o=r[i],[a,o]in e||t.push({sets:[a,o],size:0});return t}function F6(t,r,e){const n=ub(r.length,r.length),i=ub(r.length,r.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){const o=e[a.sets[0]],s=e[a.sets[1]],l=Math.sqrt(r[o].size/Math.PI),c=Math.sqrt(r[s].size/Math.PI),u=Jd(l,c,a.size);n[o][s]=n[s][o]=u;let f=0;a.size+1e-10>=Math.min(r[o].size,r[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:n,constraints:i}}function B6(t,r,e,n){let i=0,a;for(a=0;a<r.length;++a)r[a]=0;for(a=0;a<e.length;++a){const o=t[2*a],s=t[2*a+1];for(let l=a+1;l<e.length;++l){const c=t[2*l],u=t[2*l+1],f=e[a][l],d=n[a][l],h=(c-o)*(c-o)+(u-s)*(u-s),p=Math.sqrt(h),v=h-f*f;d>0&&p<=f||d<0&&p>=f||(i+=2*v*v,r[2*a]+=4*v*(o-c),r[2*a+1]+=4*v*(s-u),r[2*l]+=4*v*(c-o),r[2*l+1]+=4*v*(u-s))}}return i}function z6(t,r){let e=G6(t,r);const n=r.lossFunction||Wv;if(t.length>=8){const i=W6(t,r),a=n(i,t),o=n(e,t);a+1e-8<o&&(e=i)}return e}function W6(t,r){r=r||{};const e=r.restarts||10,n=[],i={};let a;for(a=0;a<t.length;++a){const v=t[a];v.sets.length==1&&(i[v.sets[0]]=n.length,n.push(v))}const o=F6(t,n,i);let s=o.distances;const l=o.constraints,c=Kd(s.map(Kd))/s.length;s=s.map(function(v){return v.map(function(g){return g/c})});const u=function(v,g){return B6(v,g,s,l)};let f,d;for(a=0;a<e;++a){const v=qd(s.length*2).map(Math.random);d=N6(u,v,r),(!f||d.fx<f.fx)&&(f=d)}const h=f.x,p={};for(a=0;a<n.length;++a){const v=n[a];p[v.sets[0]]={x:h[2*a]*c,y:h[2*a+1]*c,radius:Math.sqrt(v.size/Math.PI)}}if(r.history)for(a=0;a<r.history.length;++a)Zd(r.history[a].x,c);return p}function G6(t,r){const e=r&&r.lossFunction?r.lossFunction:Wv,n={},i={};let a;for(let f=0;f<t.length;++f){const d=t[f];d.sets.length==1&&(a=d.sets[0],n[a]={x:1e10,y:1e10,rowid:Object.keys(n).length,size:d.size,radius:Math.sqrt(d.size/Math.PI)},i[a]=[])}t=t.filter(function(f){return f.sets.length==2});for(let f=0;f<t.length;++f){const d=t[f];let h=d.hasOwnProperty("weight")?d.weight:1;const p=d.sets[0],v=d.sets[1];d.size+kA>=Math.min(n[p].size,n[v].size)&&(h=0),i[p].push({set:v,size:d.size,weight:h}),i[v].push({set:p,size:d.size,weight:h})}const o=[];for(a in i)if(i.hasOwnProperty(a)){let f=0;for(let d=0;d<i[a].length;++d)f+=i[a][d].size*i[a][d].weight;o.push({set:a,size:f})}function s(f,d){return d.size-f.size}o.sort(s);const l={};function c(f){return f.set in l}function u(f,d){n[d].x=f.x,n[d].y=f.y,l[d]=!0}u({x:0,y:0},o[0].set);for(let f=1;f<o.length;++f){const d=o[f].set,h=i[d].filter(c);if(a=n[d],h.sort(s),h.length===0)throw"ERROR: missing pairwise overlap information";const p=[];for(let y=0;y<h.length;++y){const m=n[h[y].set],b=Jd(a.radius,m.radius,h[y].size);p.push({x:m.x+b,y:m.y}),p.push({x:m.x-b,y:m.y}),p.push({y:m.y+b,x:m.x}),p.push({y:m.y-b,x:m.x});for(let x=y+1;x<h.length;++x){const O=n[h[x].set],w=Jd(a.radius,O.radius,h[x].size),_=SA({x:m.x,y:m.y,radius:b},{x:O.x,y:O.y,radius:w});for(let S=0;S<_.length;++S)p.push(_[S])}}let v=1e50,g=p[0];for(let y=0;y<p.length;++y){n[d].x=p[y].x,n[d].y=p[y].y;const m=e(n,t);m<v&&(v=m,g=p[y])}u(g,d)}return n}function Wv(t,r){let e=0;function n(i){return i.map(function(a){return t[a]})}for(let i=0;i<r.length;++i){const a=r[i];let o;if(a.sets.length==1)continue;if(a.sets.length==2){const l=t[a.sets[0]],c=t[a.sets[1]];o=_A(l.radius,c.radius,cs(l,c))}else o=wA(n(a.sets));const s=a.hasOwnProperty("weight")?a.weight:1;e+=s*(o-a.size)*(o-a.size)}return e}function H6(t){const r=function(e){const n=Math.max.apply(null,t.map(function(a){return a[e]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[e]-a.radius}));return{max:n,min:i}};return{xRange:r("x"),yRange:r("y")}}function Y6(t,r,e,n){const i=[],a=[];for(const v in t)t.hasOwnProperty(v)&&(a.push(v),i.push(t[v]));r-=2*n,e-=2*n;const o=H6(i),s=o.xRange,l=o.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),t;const c=r/(s.max-s.min),u=e/(l.max-l.min),f=Math.min(u,c),d=(r-(s.max-s.min)*f)/2,h=(e-(l.max-l.min)*f)/2,p={};for(let v=0;v<i.length;++v){const g=i[v];p[a[v]]={radius:f*g.radius,x:n+d+(g.x-s.min)*f,y:n+h+(g.y-l.min)*f}}return p}function V6(t,r,e){const n=[],i=t-e,a=r;return n.push("M",i,a),n.push("A",e,e,0,1,0,i+2*e,a),n.push("A",e,e,0,1,0,i,a),n.join(" ")}function U6(t){const r={};wA(t,r);const e=r.arcs;if(e.length===0)return"M 0 0";if(e.length==1){const n=e[0].circle;return V6(n.x,n.y,n.radius)}else{const n=[`
M`,e[0].p2.x,e[0].p2.y];for(let i=0;i<e.length;++i){const a=e[i],o=a.circle.radius,s=a.width>o;n.push(`
A`,o,o,0,s?1:0,1,a.p1.x,a.p1.y)}return n.join(" ")}}const EA=t=>{const{sets:r="sets",size:e="size",as:n=["key","path"],padding:i=0}=t,[a,o]=n;return s=>{const l=s.map(f=>Object.assign(Object.assign({},f),{sets:f[r],size:f[e],[a]:f.sets.join("&")}));l.sort((f,d)=>f.sets.length-d.sets.length);const c=D6(l);let u;return l.map(f=>{const d=f[r],h=({width:p,height:v})=>{u=u||Y6(c,p,v,i);const g=d.map(m=>u[m]);let y=U6(g);return/[zZ]$/.test(y)||(y+=" Z"),y};return Object.assign(Object.assign({},f),{[o]:h})})}};EA.props={};const AA=()=>t=>(console.log("G2 data section:",t),t);AA.props={};function X6(t,r){if(r<0||r>1)throw new Error("alpha must be between 0 and 1.");if(t.length===0)return[];let e=t[0];const n=[];for(const i of t){if(i==null){n.push(i),console.warn("EMAThe value is null or undefined",t);continue}e==null&&(e=i);const a=e*r+(1-r)*i;n.push(a),e=a}return n}const TA=t=>{const{field:r="y",alpha:e=.6,as:n=r}=t;return i=>{const a=i.map(s=>s[r]),o=X6(a,e);return i.map((s,l)=>Object.assign(Object.assign({},s),{[n]:o[l]}))}};TA.props={};const PA=.01;function us(t){const{min:r,max:e}=t;return[[r[0],r[1]],[e[0],e[1]]]}function fb(t,r,e=PA){const[n,i]=t,[a,o]=r;return n>=a[0]-e&&n<=o[0]+e&&i>=a[1]-e&&i<=o[1]+e}function MA(t,r,e=PA){const[n,i]=t;return!(fb(n,r,e)&&fb(i,r,e))}function q6(t,r){const[e,n]=t,[i,a]=r;return e[0]<a[0]&&n[0]>i[0]&&e[1]<a[1]&&n[1]>i[1]}const K6=t=>{const{priority:r}=t;return e=>{const n=[];return r&&e.sort(r),e.forEach(i=>{Ru(i);const a=i.getLocalBounds();n.some(s=>q6(us(a),us(s.getLocalBounds())))?Sv(i):n.push(i)}),e}};function Z6([t,r],[e,n]){return n>t&&r>e}function El(){const t=new Map;return[n=>t.get(n),(n,i)=>t.set(n,i)]}function Q6(t){const r=t.cloneNode(!0),e=r.getElementById("connector");e&&r.removeChild(e);const{min:n,max:i}=r.getRenderBounds();return r.destroy(),{min:n,max:i}}const J6=t=>{const{maxIterations:r=10,maxError:e=.1,padding:n=1}=t;return i=>{const a=i.length;if(a<=1)return i;const[o,s]=El(),[l,c]=El(),[u,f]=El(),[d,h]=El();for(const p of i){const{min:v,max:g}=Q6(p),[y,m]=v,[b,x]=g;s(p,m),c(p,m),f(p,x-m),h(p,[y,b])}for(let p=0;p<r;p++){i.sort((g,y)=>Hn(l(g),l(y)));let v=0;for(let g=0;g<a-1;g++){const y=i[g];let m=g+1,b;for(;(b=i[m])&&!Z6(d(y),d(b));)m+=1;if(b){const x=l(y),O=u(y),w=l(b),_=w-(x+O);if(_<n){const S=(n-_)/2;v=Math.max(v,S),c(y,x-S),c(b,w+S)}}}if(v<e)break}for(const p of i)p.style.y+=l(p)-o(p);return i}};function CA(t){return typeof t=="object"?t:ci(t)}function Df(t){let r=t/255;return r=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),r}function db(t,r,e){return .2126*Df(t)+.7152*Df(r)+.0722*Df(e)}function LA(t,r){if(!t||!r||t===r)return 1;const{r:e,g:n,b:i}=t,{r:a,g:o,b:s}=r,l=db(e,n,i),c=db(a,o,s);return(Math.max(l,c)+.05)/(Math.min(l,c)+.05)}function NA(t,r){const e=ds(r,n=>LA(t,CA(n)));return r[e]}const t8=t=>{const{threshold:r=4.5,palette:e=["#000","#fff"]}=t;return n=>(n.forEach(i=>{const a=i.attr("dependentElement").parsedStyle.fill,o=i.parsedStyle.fill;LA(o,a)<r&&i.attr("fill",NA(a,e))}),n)},e8=()=>t=>(t.forEach(r=>{Ru(r);const e=r.attr("bounds"),n=r.getLocalBounds();MA(us(n),e)&&Sv(r)}),t),n8=(t,r)=>{const[[e,n],[i,a]]=r,[[o,s],[l,c]]=t;let u=0,f=0;return o<e?u=e-o:l>i&&(u=i-l),s<n?f=n-s:c>a&&(f=a-c),[u,f]},r8=(t,r)=>!t||!t.min||!t.max?!r||!r.min||!r.max?{min:[0,0],max:[0,0]}:r:!r||!r.min||!r.max?t:{min:[Math.min(t.min[0],r.min[0]),Math.min(t.min[1],r.min[1])],max:[Math.max(t.max[0],r.max[0]),Math.max(t.max[1],r.max[1])]},i8=(t={})=>(r,{canvas:e,layout:n})=>{const{bounds:i="view",offsetX:a=0,offsetY:o=0}=t,l=(()=>{if(i==="main"){const{x:c=0,y:u=0,width:f=0,height:d=0,marginLeft:h=0,marginRight:p=0,marginTop:v=0,marginBottom:g=0,paddingLeft:y=0,paddingRight:m=0,paddingTop:b=0,paddingBottom:x=0}=n;return[[c+h+y+a,u+v+b+o],[c+f-p-m-a,u+d-g-x-o]]}else{const{x:c=0,y:u=0,width:f=0,height:d=0}=n;return[[c+a,u+o],[c+f-a,u+d-o]]}})();return r.forEach(c=>{Ru(c);const{max:u,min:f}=r8(c.getRenderBounds(),c.getBounds());if(!u||!f||u[0]===0&&u[1]===0&&f[0]===0&&f[1]===0)return;const[d,h]=u,[p,v]=f,g=n8([[p,v],[d,h]],l);c.style.connector&&c.style.connectorPoints&&(c.style.connectorPoints[0][0]-=g[0],c.style.connectorPoints[0][1]-=g[1]),c.style.x+=g[0],c.style.y+=g[1]}),r};function hb(t){var r;const e=t.getAnimations();if(!e||e.length===0)return ss(t);const n=t.cloneNode(!0);n.style.visibility="hidden",e.forEach(a=>{const o=a.effect.getKeyframes();o&&o.length>0&&n.attr(o[o.length-1])}),(r=t.parentNode)===null||r===void 0||r.appendChild(n);const i=ss(n);return n.destroy(),i}const a8=t=>{const{palette:r=["#000","#fff"],threshold:e=2}=t;return n=>(n.forEach(i=>{var a,o;const s=i.attr("dependentElement"),l=(o=(a=i.attributes.fill)!==null&&a!==void 0?a:i.parsedStyle.fill)!==null&&o!==void 0?o:"#fff",c=us(hb(i)),u=us(hb(s));if(MA(c,u,e)){const f=NA(CA(l),r);i.attr("stroke",f)}else i.removeAttribute("stroke")}),n)};function o8(){return{"data.fetch":oA,"data.inline":hA,"data.sortBy":dA,"data.sort":cA,"data.filter":lA,"data.pick":uA,"data.rename":fA,"data.fold":sA,"data.slice":bA,"data.custom":pA,"data.map":vA,"data.join":mA,"data.kde":xA,"data.log":AA,"data.wordCloud":yA,"data.ema":TA,"transform.stackY":r1,"transform.binX":N1,"transform.bin":Bh,"transform.dodgeX":h1,"transform.jitter":g1,"transform.jitterX":y1,"transform.jitterY":m1,"transform.symmetryY":b1,"transform.diffY":x1,"transform.stackEnter":p1,"transform.normalizeY":v1,"transform.select":nu,"transform.selectX":O1,"transform.selectY":w1,"transform.groupX":_1,"transform.groupY":S1,"transform.groupColor":k1,"transform.group":ks,"transform.sortX":E1,"transform.sortY":T1,"transform.sortColor":A1,"transform.flexX":P1,"transform.pack":L1,"transform.sample":R1,"transform.filter":I1,"coordinate.cartesian":Xb,"coordinate.polar":gs,"coordinate.transpose":xh,"coordinate.theta":Zb,"coordinate.parallel":wh,"coordinate.fisheye":Jb,"coordinate.radial":Oh,"coordinate.radar":tx,"coordinate.helix":Kb,"encode.constant":ex,"encode.field":rx,"encode.transform":nx,"encode.column":ix,"mark.interval":N_,"mark.rect":R_,"mark.line":I_,"mark.point":j_,"mark.text":D_,"mark.cell":$_,"mark.area":F_,"mark.link":Zp,"mark.image":B_,"mark.polygon":z_,"mark.box":W_,"mark.vector":G_,"mark.lineX":Y_,"mark.lineY":H_,"mark.connector":V_,"mark.range":U_,"mark.rangeX":X_,"mark.rangeY":q_,"mark.path":tS,"mark.shape":cS,"mark.density":gS,"mark.heatmap":yS,"mark.wordCloud":nv,"mark.beeswarm":bS,"palette.category10":wS,"palette.category20":_S,"scale.linear":kS,"scale.ordinal":ES,"scale.band":SS,"scale.identity":AS,"scale.point":TS,"scale.time":PS,"scale.log":MS,"scale.pow":CS,"scale.sqrt":IS,"scale.threshold":LS,"scale.quantile":NS,"scale.quantize":RS,"scale.sequential":jS,"scale.constant":DS,"theme.classic":$S,"theme.classicDark":BS,"theme.academy":zS,"theme.light":ov,"theme.dark":FS,"component.axisX":ZS,"component.axisY":QS,"component.legendCategory":Pv,"component.legendContinuous":Ai,"component.legends":SE,"component.title":bE,"component.sliderX":xE,"component.sliderY":OE,"component.scrollbarX":wE,"component.scrollbarY":_E,"animation.scaleInX":Cv,"animation.scaleOutX":vX,"animation.scaleInY":kE,"animation.scaleOutY":gX,"animation.waveIn":ME,"animation.fadeIn":EE,"animation.fadeOut":AE,"animation.zoomIn":AX,"animation.zoomOut":TX,"animation.pathIn":CE,"animation.morphing":PE,"animation.growInX":LE,"animation.growInY":NE,"interaction.elementHighlight":ju,"interaction.elementHighlightByX":RE,"interaction.elementHighlightByColor":IE,"interaction.elementHoverScale":jE,"interaction.elementSelect":Du,"interaction.elementSelectByX":DE,"interaction.elementSelectByColor":$E,"interaction.fisheye":BX,"interaction.chartIndex":FE,"interaction.tooltip":XE,"interaction.legendFilter":HU,"interaction.legendHighlight":tq,"interaction.brushHighlight":$u,"interaction.brushXHighlight":oq,"interaction.brushYHighlight":sq,"interaction.brushAxisHighlight":gq,"interaction.brushFilter":Bv,"interaction.brushXFilter":xq,"interaction.brushYFilter":Oq,"interaction.sliderFilter":rA,"interaction.sliderWheel":iA,"interaction.scrollbarFilter":Dq,"interaction.poptip":aA,"interaction.treemapDrillDown":Yq,"interaction.drillDown":Kq,"interaction.elementPointMove":n6,"composition.spaceLayer":Ok,"composition.spaceFlex":wk,"composition.facetRect":Ak,"composition.repeatMatrix":AY,"composition.facetCircle":NY,"composition.timingKeyframe":Tk,"labelTransform.overlapHide":K6,"labelTransform.overlapDodgeY":J6,"labelTransform.overflowHide":e8,"labelTransform.contrastReverse":t8,"labelTransform.overflowStroke":a8,"labelTransform.exceedAdjust":i8}}function s8(){return{"composition.geoView":Ck,"composition.geoPath":Pk}}function l8(){return{"data.arc":Jp,"data.cluster":dS,"mark.forceGraph":uS,"mark.tree":pS,"mark.pack":aS,"mark.sankey":Q_,"mark.chord":J_,"mark.treemap":iS,"mark.partition":OS}}function c8(){return{"data.venn":EA,"mark.boxplot":lS,"mark.gauge":vS,"mark.wordCloud":nv,"mark.liquid":mS}}function RA(){return Object.assign(Object.assign(Object.assign(Object.assign({},s8()),l8()),c8()),o8())}function u8(t,r){class e extends t{constructor(i){super(Object.assign(Object.assign({},i),{lib:r}))}}return e}const IA={};function jA(t,r){t.startsWith("symbol.")?S$(t.split(".").pop(),r):Object.assign(IA,{[t]:r})}const _a=t=>t?parseInt(t):0;function f8(t){const r=getComputedStyle(t),e=t.clientWidth||_a(r.width),n=t.clientHeight||_a(r.height),i=_a(r.paddingLeft)+_a(r.paddingRight),a=_a(r.paddingTop)+_a(r.paddingBottom);return{width:e-i,height:n-a}}function $f(t,r){const e=[t];for(;e.length;){const n=e.shift();r&&r(n);const i=n.children||[];for(const a of i)e.push(a)}}class Gv{constructor(r={},e){this.parentNode=null,this.children=[],this.index=0,this.type=e,this.value=r}map(r=e=>e){const e=r(this.value);return this.value=e,this}attr(r,e){return arguments.length===1?this.value[r]:this.map(n=>(n[r]=e,n))}append(r){const e=new r({});return e.children=[],this.push(e),e}push(r){return r.parentNode=this,r.index=this.children.length,this.children.push(r),this}remove(){const r=this.parentNode;if(r){const{children:e}=r,n=e.findIndex(i=>i===this);e.splice(n,1)}return this}getNodeByKey(r){let e=null;return $f(this,i=>{r===i.attr("key")&&(e=i)}),e}getNodesByType(r){const e=[];return $f(this,i=>{r===i.type&&e.push(i)}),e}getNodeByType(r){let e=null;return $f(this,n=>{e||r===n.type&&(e=n)}),e}call(r,...e){return r(this.map(),...e),this}getRoot(){let r=this;for(;r&&r.parentNode;)r=r.parentNode;return r}}var DA=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const th=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],$A="__remove__",FA="__callback__",pb=1,vb=1;function d8(t){if(t===void 0){const r=document.createElement("div");return r[$A]=!0,r}return typeof t=="string"?document.getElementById(t):t}function h8(t){const r=t.parentNode;r&&r.removeChild(t)}function p8(t){if(t.type!==null)return t;const r=t.children[t.children.length-1];for(const e of th)r.attr(e,t.attr(e));return r}function gb(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function Ff(t,r){const{width:e,height:n,autoFit:i,depth:a=0}=t;let o=640,s=480;if(i){const{width:l,height:c}=f8(r);o=l||o,s=c||s}return o=e||o,s=n||s,{width:Math.max(fe(o)?o:pb,pb),height:Math.max(fe(s)?s:vb,vb),depth:a}}function v8(t){const r=p8(t),e=[r],n=new Map;for(n.set(r,gb(r));e.length;){const i=e.pop(),a=n.get(i),{children:o=[]}=i;for(const s of o)if(s.type===FA)a.children=s.value;else{const l=gb(s),{children:c=[]}=a;c.push(l),e.push(s),n.set(s,l),a.children=c}}return n.get(r)}function g8(t,r){return typeof t=="function"?!0:new Set(Object.keys(r)).has(t)}function y8(t,r){return typeof t!="function"&&new Set(Object.keys(r)).has(t)}function m8(t,r,e,n,i){const{type:a}=t,{type:o=e||a}=r;if(y8(o,i)){for(const s of th)t.attr(s)!==void 0&&r[s]===void 0&&(r[s]=t.attr(s));return r}if(g8(o,n)){const s={type:"view"},l=Object.assign({},r);for(const c of th)l[c]!==void 0&&(s[c]=l[c],delete l[c]);return Object.assign(Object.assign({},s),{children:[l]})}return r}function b8(t,r,e){if(typeof t=="function")return r.mark;const i=Object.assign(Object.assign({},r),e)[t];if(!i)throw new Error(`Unknown mark: ${t}.`);return i}function x8(t,r,e){if(typeof t=="function"){const l=new Gv;return l.value=t,l.type=FA,l}const{type:n,children:i}=t,a=DA(t,["type","children"]),o=b8(n,r,e),s=new o;return s.value=a,s.type=n,s}function O8(t,r){const{type:e,children:n}=r,i=DA(r,["type","children"]);t.type===e||e===void 0?Kx(t.value,i):typeof e=="string"&&(t.type=e,t.value=i)}function w8(t,r,e,n){if(!t)return;const i=[[t,r]];for(;i.length;){const[a,o]=i.shift(),s=x8(o,e,n);Array.isArray(a.children)&&a.push(s);const{children:l}=o;if(Array.isArray(l))for(const c of l)i.push([s,c]);else typeof l=="function"&&i.push([s,l])}}function _8(t,r,e,n,i){const a=m8(t,r,e,n,i),o=[[null,t,a]];for(;o.length;){const[s,l,c]=o.shift();if(!l)w8(s,c,n,i);else if(!c)l.remove();else{O8(l,c);const{children:u}=c,{children:f}=l;if(Array.isArray(u)&&Array.isArray(f)){const d=Math.max(u.length,f.length);for(let h=0;h<d;h++){const p=u[h],v=f[h];o.push([l,v,p])}}else typeof u=="function"&&o.push([l,null,u])}}}function S8(){let t,r;return[new Promise((n,i)=>{r=n,t=i}),r,t]}function k8(t,r,{key:e=r}){t.prototype[r]=function(n){return arguments.length===0?this.attr(e):this.attr(e,n)}}function E8(t,r,{key:e=r}){t.prototype[r]=function(n){if(arguments.length===0)return this.attr(e);if(Array.isArray(n))return this.attr(e,n);const i=[...this.attr(e)||[],n];return this.attr(e,i)}}function A8(t,r,{key:e=r}){t.prototype[r]=function(n,i){if(arguments.length===0)return this.attr(e);if(arguments.length===1&&typeof n!="string")return this.attr(e,n);const a=this.attr(e)||{};return a[n]=arguments.length===1?!0:i,this.attr(e,a)}}function T8(t,r,e){t.prototype[r]=function(n){if(arguments.length===0)return this.attr(r);if(Array.isArray(n))return this.attr(r,{items:n});if(Ha(n)&&(n.title!==void 0||n.items!==void 0))return this.attr(r,n);if(n===null||n===!1)return this.attr(r,n);const i=this.attr(r)||{},{items:a=[]}=i;return a.push(n),i.items=a,this.attr(r,i)}}function P8(t,r,{ctor:e}){t.prototype[r]=function(n){const i=this.append(e);return r==="mark"&&(i.type=n),i}}function M8(t,r,{ctor:e}){t.prototype[r]=function(){return this.type=null,this.append(e)}}function Lc(t){return r=>{for(const[e,n]of Object.entries(t)){const{type:i}=n;i==="value"?k8(r,e,n):i==="array"?E8(r,e,n):i==="object"?A8(r,e,n):i==="node"?P8(r,e,n):i==="container"?M8(r,e,n):i==="mix"&&T8(r,e)}return r}}function yb(t){return Object.fromEntries(Object.entries(t).map(([r,e])=>[r,{type:"node",ctor:e}]))}const BA={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},C8=Object.assign(Object.assign({},BA),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),L8=Object.assign(Object.assign({},BA),{labelTransform:{type:"array"}});var N8=function(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a};let Nc=class extends Gv{changeData(r){var e;const n=this.getRoot();if(n)return this.attr("data",r),!((e=this.children)===null||e===void 0)&&e.length&&this.children.forEach(i=>{i.attr("data",r)}),n?.render()}getView(){const r=this.getRoot(),{views:e}=r.getContext();if(e?.length)return e.find(n=>n.key===this._key)}getScale(){var r;return(r=this.getView())===null||r===void 0?void 0:r.scale}getScaleByChannel(r){const e=this.getScale();if(e)return e[r]}getCoordinate(){var r;return(r=this.getView())===null||r===void 0?void 0:r.coordinate}getTheme(){var r;return(r=this.getView())===null||r===void 0?void 0:r.theme}getGroup(){const r=this._key;return r?this.getRoot().getContext().canvas.getRoot().getElementById(r):void 0}show(){const r=this.getGroup();r&&!r.isVisible()&&Ru(r)}hide(){const r=this.getGroup();r&&r.isVisible()&&Sv(r)}};Nc=N8([Lc(L8)],Nc);var R8=function(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a};let eh=class extends Gv{changeData(r){const e=this.getRoot();if(e)return this.attr("data",r),e?.render()}getMark(){var r;const e=(r=this.getRoot())===null||r===void 0?void 0:r.getView();if(!e)return;const{markState:n}=e,i=Array.from(n.keys()).find(a=>a.key===this.attr("key"));return n.get(i)}getScale(){var r;const e=(r=this.getRoot())===null||r===void 0?void 0:r.getView();if(e)return e?.scale}getScaleByChannel(r){var e,n;const i=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(i)return(n=i?.scale)===null||n===void 0?void 0:n[r]}getGroup(){const r=this.attr("key");return r?this.getRoot().getContext().canvas.getRoot().getElementById(r):void 0}};eh=R8([Lc(C8)],eh);var I8=function(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a},j8=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const D8="G2_CHART_KEY";class $8 extends Nc{constructor(r){const{container:e,canvas:n,renderer:i,plugins:a,lib:o,createCanvas:s}=r,l=j8(r,["container","canvas","renderer","plugins","lib","createCanvas"]);super(l,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailingClear=null,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=hx(()=>{this.forceFit()},300),this._renderer=i||new ak,this._plugins=a||[],this._container=d8(e),this._emitter=new lv,this._context={library:Object.assign(Object.assign({},o),IA),emitter:this._emitter,canvas:n,createCanvas:s},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;const r=new Promise((a,o)=>yU(this._computedOptions(),this._context,this._createResolve(a),this._createReject(o))),[e,n,i]=S8();return r.then(n).then(()=>{if(this._trailingClear){const a=this.options();this._trailingClear(),this._trailing&&this.options(a)}}).catch(i).then(()=>{this._trailingClear=null,this._renderTrailing()}),e}options(r){if(arguments.length===0)return v8(this);const{type:e}=r;return e&&(this._previousDefinedType=e),_8(this,r,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(r,e,n){return this._emitter.on(r,e,n),this}once(r,e){return this._emitter.once(r,e),this}emit(r,...e){return this._emitter.emit(r,...e),this}off(r,e){return this._emitter.off(r,e),this}clear(r=!0){if(this._rendering){this._trailingClear=()=>{this.clear(r)},this._reset();return}const e=this.options();this.emit(Vt.BEFORE_CLEAR),this._reset(),D0(e,this._context,!1,r),this.emit(Vt.AFTER_CLEAR)}destroy(){const r=this.options();this.emit(Vt.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),D0(r,this._context,!0),this._container[$A]&&h8(this._container),this.emit(Vt.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:r,height:e}=Ff(this.options(),this._container);if(r===this._width&&e===this._height)return Promise.resolve(this);this.emit(Vt.BEFORE_CHANGE_SIZE);const n=this.render();return n.then(()=>{this.emit(Vt.AFTER_CHANGE_SIZE)}),n}changeSize(r,e){if(r===this._width&&e===this._height)return Promise.resolve(this);this.emit(Vt.BEFORE_CHANGE_SIZE),this.attr("width",r),this.attr("height",e);const n=this.render();return n.then(()=>{this.emit(Vt.AFTER_CHANGE_SIZE)}),n}getDataByXY(r,e={}){const{shared:n=!1,series:i,facet:a=!1,startX:o=0,startY:s=0}=e,{canvas:l,views:c}=this._context,{document:u}=l,{x:f,y:d}=r,{coordinate:h,scale:p,markState:v,data:g,key:y}=c[0],m=u.getElementsByClassName(or),b=n?A=>A.__data__.x:A=>A,x=ce(m,b),O=u.getElementsByClassName(vc)[0],w=Bn(O),_=A=>Array.from(A.values()).some(T=>{var P,N;return((P=T.interaction)===null||P===void 0?void 0:P.seriesTooltip)||((N=T.channels)===null||N===void 0?void 0:N.some(I=>I.name==="series"&&I.values!==void 0))}),S=ar(i,_(v)),k=A=>mt(A,"__data__.data",null),E=A=>A.map(k);try{if(S&&_(v)&&!a){const{selectedData:N}=UE({root:w,event:{offsetX:f,offsetY:d},elements:m,coordinate:h,scale:p,startX:o,startY:s}),I=g.get(`${y}-0`);return N.map(({index:R})=>I[R])}const A=VE({root:w,event:{offsetX:f,offsetY:d},elements:m,coordinate:h,scale:p,shared:n});if(Kc(A))return Lh(A,g.get(y));const T=b(A),P=x.get(T);return P?E(P):[]}catch{const T=l.document.elementFromPointSync(f,d);return T?k(T):[]}}_create(){const{library:r}=this._context,e=a=>a.startsWith("mark.")||a==="component.axisX"||a==="component.axisY"||a==="component.legends",n=["mark.mark",...Object.keys(r).filter(e)];this._marks={};for(const a of n){const o=a.split(".").pop();class s extends eh{constructor(){super({},o)}}this._marks[o]=s,this[o]=function(l){const c=this.append(s);return o==="mark"&&(c.type=l),c}}const i=["composition.view",...Object.keys(r).filter(a=>a.startsWith("composition.")&&a!=="composition.mark")];this._compositions=Object.fromEntries(i.map(a=>{const o=a.split(".").pop();let s=class extends Nc{constructor(){super({},o)}};return s=I8([Lc(yb(this._marks))],s),[o,s]}));for(const a of Object.values(this._compositions))Lc(yb(this._compositions))(a);for(const a of i){const o=a.split(".").pop();this[o]=function(){const s=this._compositions[o];return this.type=null,this.append(s)}}}_reset(){const r=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([e])=>e.startsWith("margin")||e.startsWith("padding")||e.startsWith("inset")||r.includes(e))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const r=this._trailingResolve.bind(this);this._trailingResolve=null,r(this)}).catch(r=>{const e=this._trailingReject.bind(this);this._trailingReject=null,e(r)}))}_createResolve(r){return()=>{this._rendering=!1,r(this)}}_createReject(r){return e=>{this._rendering=!1,r(e)}}_computedOptions(){const r=this.options(),{key:e=D8}=r,{width:n,height:i,depth:a}=Ff(r,this._container);return this._width=n,this._height=i,this._key=e,Object.assign(Object.assign({key:this._key},r),{width:n,height:i,depth:a})}_createCanvas(){var r,e;const{width:n,height:i}=Ff(this.options(),this._container);this._plugins.push(new sk),this._plugins.forEach(o=>this._renderer.registerPlugin(o)),this._context.canvas=new OO({container:this._container,width:n,height:i,renderer:this._renderer});const a=(e=(r=this._context.canvas)===null||r===void 0?void 0:r.getContextService())===null||e===void 0?void 0:e.getDomElement();a&&(a.style.display="block")}_addToTrailing(){var r;return(r=this._trailingResolve)===null||r===void 0||r.call(this,this),this._trailing=!0,new Promise((n,i)=>{this._trailingResolve=n,this._trailingReject=i})}_bindAutoFit(){const r=this.options(),{autoFit:e}=r;if(this._hasBindAutoFit){e||this._unbindAutoFit();return}e&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}Object.assign({},RA());var zA=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},WA=function(t,r){var e={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(e=0)),e;)try{if(n=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++,i=c[1],c=[0];continue;case 7:c=e.ops.pop(),e.trys.pop();continue;default:if(a=e.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){e=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){e.label=c[1];break}if(c[0]===6&&e.label<a[1]){e.label=a[1],a=c;break}if(a&&e.label<a[2]){e.label=a[2],e.ops.push(c);break}a[2]&&e.ops.pop(),e.trys.pop();continue}c=r.call(t,e)}catch(u){c=[6,u],i=0}finally{n=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Bf="__rc_react_root__",Hv,nh,mb=!1;function F8(){return zA(this,void 0,void 0,function(){var t,r,e,n,i;return WA(this,function(a){switch(a.label){case 0:if(mb)return[2];mb=!0,a.label=1;case 1:return a.trys.push([1,6,,7]),t=Cn.version||"",r=parseInt(t.split(".")[0],10),r>=18?[4,tg(()=>import("./vendor-core-BL9Phd6R.js").then(o=>o.c),[])]:[3,3];case 2:return e=a.sent(),Hv=e.createRoot,[3,5];case 3:return[4,tg(()=>import("./vendor-core-BL9Phd6R.js").then(o=>o.R),[])];case 4:n=a.sent(),nh=n.render,n.unmountComponentAtNode,a.label=5;case 5:return[3,7];case 6:return i=a.sent(),console.warn("[react-render] Failed to load ReactDOM API:",i),[3,7];case 7:return[2]}})})}function B8(t,r){r[Bf]||(r[Bf]=Hv(r)),r[Bf].render(t)}function z8(t,r){if(!nh)throw new Error("ReactDOM.render not available");nh(t,r)}function W8(t,r){return zA(this,void 0,void 0,function(){return WA(this,function(e){switch(e.label){case 0:return[4,F8()];case 1:return e.sent(),Hv?B8(t,r):z8(t,r),[2]}})})}var Fl=new Map;typeof document<"u"&&Fl.set("tooltip",document.createElement("div"));var G8=function(t,r){r===void 0&&(r=!1);var e=null;if(r)e=Fl.get("tooltip");else if(e=document.createElement("div"),t?.key){var n=Fl.get(t.key);n?e=n:Fl.set(t.key,e)}return W8(t,e),e},rh=function(){return rh=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},rh.apply(this,arguments)},H8=function(t,r){if(r===void 0&&(r={}),typeof document>"u")return"loading";var e="";r&&Object.keys(r).forEach(function(o){e+="".concat(o,": ").concat(r[o],`;
`)});var n=t.attachShadow({mode:"open"}),i=document.createElement("div"),a=document.createElement("style");a.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
    `.concat(e,`
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `),i.classList.add("loading"),i.innerHTML="<div></div><div></div><div></div><div></div>",n.appendChild(a),n.appendChild(i)},Y8=function(t){var r=t.loadingTemplate,e=t.theme,n=e===void 0?"light":e,i=t.loading,a=Un.useRef(null),o=typeof i=="object"?i:{},s=o.container,l=s===void 0?{}:s,c=o.icon,u=c===void 0?{}:c;Un.useEffect(function(){!r&&a.current&&H8(a.current,u)},[]);var f=function(){return r||Un.createElement("div",{ref:a})};return Un.createElement("div",{className:"charts-loading-container",style:rh({position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,background:n==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"},l)},f())},V8=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),U8=function(t){V8(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.state={hasError:!1},e.renderError=function(n){var i=e.props.errorTemplate;switch(n){default:return typeof i=="function"?i(n):i||Un.createElement("h5",null," ",n.message)}},e}return r.getDerivedStateFromError=function(e){return{hasError:!0,error:e}},r.getDerivedStateFromProps=function(e,n){return n.children!==e.children?{children:e.children,hasError:!1,error:void 0}:null},r.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):Un.createElement(Cn.Fragment,null,this.props.children)},r}(Un.Component),zf,X8=function(){return zf||(zf=document.createElement("canvas").getContext("2d")),zf},q8=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))};H.memoize(function(t,r){r===void 0&&(r={});var e=r.fontSize,n=r.fontFamily,i=n===void 0?"sans-serif":n,a=r.fontWeight,o=r.fontStyle,s=r.fontVariant,l=X8();return l.font=[o,a,s,"".concat(e,"px"),i].join(" "),l.measureText(H.isString(t)?t:"")},function(t,r){return r===void 0&&(r={}),q8([t],H.values(r),!0).join("")});var K8=function(t){var r=[/\breact\b/i,/\.jsx/,/children:\s*\[/,/\*\s*[#@]__PURE__\s*\*/],e=/(\w+)?\.createElement\(\s*(['"`])([^'"`]+)\2/g,n=new Set(["g","circle","ellipse","image","rect","line","polyline","polygon","text","path","html","mesh"]);if(r.some(function(a){return a.test(t)}))return!0;var i=t.match(e);return i?i.some(function(a){var o=a.match(/\.createElement\(\s*(['"`])([^'"`]+)\1/);return o&&!n.has(o[2].toLowerCase())}):!1},ih=function(){return ih=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ih.apply(this,arguments)};function Z8(t,r){var e=Cn.useRef(null),n=Cn.useRef(null),i=Cn.useRef(null),a=r.onReady,o=r.onEvent,s=function(u,f){var d;u===void 0&&(u="image/png");var h=(d=i.current)===null||d===void 0?void 0:d.getElementsByTagName("canvas")[0];return h?.toDataURL(u,f)},l=function(u,f,d){u===void 0&&(u="download"),f===void 0&&(f="image/png");var h=u;u.indexOf(".")===-1&&(h="".concat(u,".").concat(f.split("/")[1]));var p=s(f,d),v=document.createElement("a");return v.href=p,v.download=h,document.body.appendChild(v),v.click(),document.body.removeChild(v),v=null,h},c=function(u,f){if(f===void 0&&(f=!1),!!H.isObject(u)){var d=Object.keys(u),h=f;d.forEach(function(p){var v=u[p];p==="tooltip"&&(h=!0),H.isFunction(v)&&K8("".concat(v))?u[p]=function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];return G8(v.apply(void 0,g),h)}:H.isArray(v)?v.forEach(function(g){c(g,h)}):H.isObject(v)?c(v,h):h=f})}};return Cn.useEffect(function(){e.current&&!H.isEqual(n.current,r)&&(n.current=H.cloneDeep(r),c(r),e.current.update(r),e.current.render())},[r]),Cn.useEffect(function(){if(!i.current)return function(){return null};n.current||(n.current=H.cloneDeep(r)),c(r);var u=new t(i.current,ih({},r));u.toDataURL=s,u.downloadImage=l,u.render(),e.current=u,a&&a(u);var f=function(d){o&&o(u,d)};return u.on("*",f),function(){e.current&&(e.current.destroy(),e.current.off("*",f),e.current=void 0)}},[]),{chart:e,container:i}}const Q8={field:"value",size:[1,1],round:!1,padding:0,sort:(t,r)=>r.value-t.value,as:["x","y"],ignoreParentValue:!0},J8="nodeIndex",fs="childNodeCount",t9="nodeAncestor",Wf="Invalid field: it must be a string!";function e9(t,r){const{field:e,fields:n}=t;if(pe(e))return e;if(Le(e))return console.warn(Wf),e[0];if(console.warn(`${Wf} will try to get fields instead.`),pe(n))return n;if(Le(n)&&n.length)return n[0];throw new TypeError(Wf)}function n9(t){const r=[];if(t&&t.each){let e,n;t.each(i=>{var a,o;i.parent!==e?(e=i.parent,n=0):n+=1;const s=ax((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(l=>r.find(c=>c.name===l.name)||l),({depth:l})=>l>0&&l<i.depth);i[t9]=s,i[fs]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[J8]=n,r.push(i)})}else t&&t.eachNode&&t.eachNode(e=>{r.push(e)});return r}function r9(t,r){r=dx({},Q8,r);const e=r.as;if(!Le(e)||e.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let n;try{n=e9(r)}catch(l){console.warn(l)}const a=(l=>o2().size(r.size).round(r.round).padding(r.padding)(Hc(l).sum(c=>Ho(c.children)?r.ignoreParentValue?0:c[n]-sx(c.children,(u,f)=>u+f[n],0):c[n]).sort(r.sort)))(t),o=e[0],s=e[1];return a.each(l=>{var c,u;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((c=l.data)===null||c===void 0?void 0:c.name)||((u=l.data)===null||u===void 0?void 0:u.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(f=>{e.indexOf(f)===-1&&delete l[f]})}),n9(a)}var i9=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Da="sunburst",Yv="markType",GA="path",Rc="ancestor-node";function a9(t){const{data:r,encode:e}=t,{color:n,value:i}=e,o=r9(r,{field:i,type:"hierarchy.partition",as:["x","y"]}),s=[];return o.forEach(l=>{var c,u,f,d;if(l.depth===0)return null;let h=l.data.name;const p=[h];let v=Object.assign({},l);for(;v.depth>1;)h=`${(c=v.parent.data)===null||c===void 0?void 0:c.name} / ${h}`,p.unshift((u=v.parent.data)===null||u===void 0?void 0:u.name),v=v.parent;const g=Object.assign(Object.assign(Object.assign({},ms(l.data,[i])),{[GA]:h,[Rc]:v.data.name}),l);n&&n!==Rc&&(g[n]=l.data[n]||((d=(f=l.parent)===null||f===void 0?void 0:f.data)===null||d===void 0?void 0:d[n])),s.push(g)}),s.map(l=>{const c=l.x.slice(0,2),u=[l.y[2],l.y[0]];return c[0]===c[1]&&(u[0]=u[1]=(l.y[2]+l.y[0])/2),Object.assign(Object.assign({},l),{x:c,y:u,fillOpacity:Math.pow(.85,l.depth)})})}const bb={id:Da,encode:{x:"x",y:"y",key:GA,color:Rc,value:"value"},axis:{x:!1,y:!1},style:{[Yv]:Da,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[fs]:fs,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},HA=t=>{const{encode:r,data:e=[]}=t,n=i9(t,["encode","data"]),i=Object.assign(Object.assign({},n.coordinate),{innerRadius:Math.max(mt(n,["coordinate","innerRadius"],.2),1e-5)}),a=Object.assign(Object.assign({},bb.encode),r),{value:o}=a,s=a9({encode:a,data:e});return[X({},bb,Object.assign(Object.assign({type:"rect",data:s,encode:a,tooltip:{title:"path",items:[l=>({name:o,value:l[o]})]}},n),{coordinate:i}))]};HA.props={};var o9=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};const s9=t=>t.querySelectorAll(".element").filter(r=>mt(r,["style",Yv])===Da);function l9(t){return yt(t).select(`.${hi}`).node()}const c9={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function u9(t={}){const{breadCrumb:r={},isFixedColor:e=!1}=t,n=X({},c9,r);return i=>{const{update:a,setState:o,container:s,view:l,options:c}=i,u=s.ownerDocument,f=l9(s),d=c.marks.find(({id:b})=>b===Da),{state:h}=d,p=u.createElement("g");f.appendChild(p);const v=(b,x)=>o9(this,void 0,void 0,function*(){if(p.removeChildren(),b){const O=u.createElement("text",{style:Object.assign({x:0,text:n.rootText,depth:0},n.style)});p.appendChild(O);let w="";const _=b?.split(" / ");let S=n.style.y,k=p.getBBox().width;const E=f.getBBox().width,A=_.map((T,P)=>{const N=u.createElement("text",{style:Object.assign(Object.assign({x:k,text:" / "},n.style),{y:S})});p.appendChild(N),k+=N.getBBox().width,w=`${w}${T} / `;const I=u.createElement("text",{name:w.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:T,x:k,depth:P+1},n.style),{y:S})});return p.appendChild(I),k+=I.getBBox().width,k>E&&(S=p.getBBox().height,k=0,N.attr({x:k,y:S}),k+=N.getBBox().width,I.attr({x:k,y:S}),k+=I.getBBox().width),I});[O,...A].forEach((T,P)=>{if(P===A.length)return;const N=Object.assign({},T.attributes);T.attr("cursor","pointer"),T.addEventListener("mouseenter",()=>{T.attr(n.active)}),T.addEventListener("mouseleave",()=>{T.attr(N)}),T.addEventListener("click",()=>{v(T.name,mt(T,["style","depth"]))})})}o("drillDown",O=>{const{marks:w}=O,_=w.map(S=>{if(S.id!==Da&&S.type!=="rect")return S;const{data:k}=S,E=Object.fromEntries(["color"].map(T=>[T,{domain:l.scale[T].getOptions().domain}])),A=k.filter(T=>{const P=T.path;return e||(T[Rc]=P.split(" / ")[x]),b?new RegExp(`^${b}.+`).test(P):!0});return X({},S,e?{data:A,scale:E}:{data:A})});return Object.assign(Object.assign({},O),{marks:_})}),yield a()}),g=b=>{const x=b.target;if(mt(x,["style",Yv])!==Da||mt(x,["markType"])!=="rect"||!mt(x,["style",fs]))return;const O=mt(x,["__data__","key"]),w=mt(x,["style","depth"]);x.style.cursor="pointer",v(O,w)};f.addEventListener("click",g);const y=Yc(Object.assign(Object.assign({},h.active),h.inactive)),m=()=>{s9(f).forEach(x=>{const O=mt(x,["style",fs]);if(mt(x,["style","cursor"])!=="pointer"&&O){x.style.cursor="pointer";const _=ms(x.attributes,y);x.addEventListener("mouseenter",()=>{x.attr(h.active)}),x.addEventListener("mouseleave",()=>{x.attr(X(_,h.inactive))})}})};return f.addEventListener("mousemove",m),()=>{p.remove(),f.removeEventListener("click",g),f.removeEventListener("mousemove",m)}}}function f9(){return{"interaction.drillDown":u9,"mark.sunburst":HA}}var Ic=function(){return Ic=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ic.apply(this,arguments)},d9=u8($8,Ic(Ic({},RA()),f9())),Io=function(){return Io=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Io.apply(this,arguments)},qt=function(t){var r=p9(t),e=r.children,n=e===void 0?[]:e,i=H.omit(r,[].concat(YA,Dc.map(function(c){return c.key}))),a=function(c){var u;return(u=b9.find(function(f){return f.key===c}))===null||u===void 0?void 0:u.callback},o=function(c,u,f){var d=a(u);d?d(c,u,f):c[u]=ai({},c[u],f)},s=function(c){Object.keys(c).forEach(function(u){if(c[u]){var f=Dc.find(function(m){return m.key===u});if(f){var d=f.type,h=f.extendedProperties,p=f.defaultShapeConfig,v=p===void 0?{}:p;if(d){var g=c[u].tooltip;n.push(l(ai({},H.pick(c,h),v,{type:d},c[u],{tooltip:g||!1})))}else if(H.isArray(c[u])){var y=c[u].some(function(m){return m.type==="text"});c[u].forEach(function(m){n.push(l(Io(Io(Io({},y?{data:[]}:{}),{tooltip:!1}),m)))})}}}})},l=function(c){return s(c),Object.keys(ah).forEach(function(u){var f=ah[u];if(!H.isUndefined(c[u]))if(H.isObject(f)){var d=f.value,h=f.target,p=d(c[u]);o(c,h,p)}else H.set(c,f,c[u])}),c};return n.forEach(function(c){var u=ai({},i,c);l(ai(c,u))}),s(r),h9(r),t},xb=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},h9=function(t){var r=t.children,e=r===void 0?[]:r,n=Object.keys(ah).concat(Dc.map(function(i){return i.key}));return n.forEach(function(i){delete t[i]}),e.forEach(function(i){Object.keys(i).forEach(function(a){n.includes(a)&&delete i[a]})}),Object.keys(t).forEach(function(i){xb(xb([],YA,!0),oh.map(function(a){return a.key}),!0).includes(i)||delete t[i]}),t},p9=function(t){var r=t.options,e=r.children,n=e===void 0?[]:e;return n.forEach(function(i){Object.keys(i).forEach(function(a){H.isArray(i[a])&&a!=="data"&&(i[a]=i[a].filter(function(o){return!o[Bl]}))})}),r},Ob=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},v9=function(t,r){if(H.isArray(r))return r},ai=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return H.mergeWith.apply(void 0,Ob(Ob([],t,!1),[v9],!1))};function jc(t){switch(typeof t){case"function":return t;case"string":return function(r){return H.get(r,[t])};default:return function(){return t}}}var Fu=function(t){var r=t.options,e=r.data;return H.get(e,"value")||H.get(e,"type")!=="fetch"&&H.isPlainObject(e)&&H.set(r,"data.value",e),t},$a=function(){return $a=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},$a.apply(this,arguments)},g9=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e},y9=["renderer","plugins"],YA=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction","plugins"],Bl="__transform__",m9="__skipDelCustomKeys__",Ur=function(t,r){return H.isBoolean(r)?{type:t,available:r}:$a({type:t},r)},ah={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",y1Field:"encode.y1",sizeField:"encode.size",setsField:"encode.sets",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",coordinateType:"coordinate.type",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(t){return Ur("stackY",t)}},normalize:{target:"transform",value:function(t){return Ur("normalizeY",t)}},percent:{target:"transform",value:function(t){return Ur("normalizeY",t)}},group:{target:"transform",value:function(t){return Ur("dodgeX",t)}},sort:{target:"transform",value:function(t){return Ur("sortX",t)}},symmetry:{target:"transform",value:function(t){return Ur("symmetryY",t)}},diff:{target:"transform",value:function(t){return Ur("diffY",t)}},meta:{target:"scale",value:function(t){return t}},label:{target:"labels",value:function(t){return t}},shape:"style.shape",connectNulls:{target:"style",value:function(t){return H.isBoolean(t)?{connect:t}:t}},transpose:{target:"transpose",value:function(t){return Ur("transpose",t)}}},Gf=["xField","yField","seriesField","colorField","shapeField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],Dc=[{key:"annotations",extendedProperties:[]},{key:"line",type:"line",extendedProperties:Gf},{key:"connector",type:"connector",extendedProperties:[]},{key:"point",type:"point",extendedProperties:Gf,defaultShapeConfig:{shapeField:"circle"}},{key:"area",type:"area",extendedProperties:Gf}],b9=[{key:"transform",callback:function(t,r,e){var n;t[r]=t[r]||[];var i=e.available,a=i===void 0?!0:i,o=g9(e,["available"]);if(a)t[r].push($a((n={},n[Bl]=!0,n),o));else{var s=t[r].indexOf(function(l){return l.type===e.type});s!==-1&&t[r].splice(s,1)}}},{key:"labels",callback:function(t,r,e){var n;if(!e||H.isArray(e)){t[r]=e||[];return}e.text||(e.text=t.yField),t[r]=t[r]||[],t[r].push($a((n={},n[Bl]=!0,n),e))}},{key:"transpose",callback:function(t,r,e){var n;e.available?t.coordinate={transform:[$a((n={},n[Bl]=!0,n),e)]}:t.coordinate={}}}],oh=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],x9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),$c=function(){return $c=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},$c.apply(this,arguments)},O9=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e},VA=function(t){x9(r,t);function r(e){e===void 0&&(e={});var n=e.style,i=O9(e,["style"]);return t.call(this,$c({style:$c({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},n)},i))||this}return r}(jn),w9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Fc=function(){return Fc=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Fc.apply(this,arguments)},_9=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e},S9=function(t){w9(r,t);function r(e){e===void 0&&(e={});var n=e.style,i=_9(e,["style"]);return t.call(this,Fc({style:Fc({fill:"#eee"},n)},i))||this}return r}(fa),k9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),UA=function(t){k9(r,t);function r(e,n,i){var a=t.call(this,{style:ai(i,n)})||this;return a.chart=e,a}return r.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},r.prototype.disconnectedCallback=function(){},r.prototype.attributeChangedCallback=function(e){},r.prototype.update=function(e,n){var i;return this.attr(ai({},this.attributes,e||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,n)},r.prototype.clear=function(){this.removeChildren()},r.prototype.getElementsLayout=function(){var e=this.chart.getContext().canvas,n=e.document.getElementsByClassName("element"),i=[];return n.forEach(function(a){var o=a.getBBox(),s=o.x,l=o.y,c=o.width,u=o.height,f=a.__data__;i.push({bbox:o,x:s,y:l,width:c,height:u,key:f.key,data:f})}),i},r.prototype.bindEvents=function(e,n){},r}(la),E9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Bc=function(){return Bc=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Bc.apply(this,arguments)},A9=function(t){E9(r,t);function r(e,n){return t.call(this,e,n,{type:r.tag})||this}return r.prototype.getConversionTagLayout=function(){var e=this.direction==="vertical",n=Array.from(this.getElementsLayout()).sort(function(O,w){return e?O.y-w.y:O.x-w.x}),i=n[0],a=i.x,o=i.y,s=i.height,l=i.width,c=i.data,u=["items",0,"value"],f=H.get(c,u),d=e?n[1].y-o-s:n[1].x-a-l,h=[],p=this.attributes,v=p.size,g=v===void 0?40:v,y=p.arrowSize,m=y===void 0?20:y,b=p.spacing,x=b===void 0?4:b;return n.forEach(function(O,w){if(w>0){var _=O.x,S=O.y,k=O.height,E=O.width,A=O.data,T=O.key,P=H.get(A,u),N=g/2;if(e){var I=_+E/2,R=S;h.push({points:[[I+N,R-d+x],[I+N,R-m-x],[I,R-x],[I-N,R-m-x],[I-N,R-d+x]],center:[I,R-d/2],width:d,value:[f,P],key:T})}else{var I=_,R=S+k/2;h.push({points:[[_-d+x,R-N],[_-m-x,R-N],[I-x,R],[_-m-x,R+N],[_-d+x,R+N]],center:[I-d/2,R],width:d,value:[f,P],key:T})}f=P}}),h},r.prototype.render=function(){this.setDirection(),this.drawConversionTag()},r.prototype.setDirection=function(){var e=this.chart.getCoordinate(),n=H.get(e,"options.transformations"),i="horizontal";n.forEach(function(a){a.includes("transpose")&&(i="vertical")}),this.direction=i},r.prototype.drawConversionTag=function(){var e=this,n=this.getConversionTagLayout(),i=this.attributes,a=i.style,o=i.text,s=o.style,l=o.formatter;n.forEach(function(c){var u=c.points,f=c.center,d=c.value,h=c.key,p=d[0],v=d[1],g=f[0],y=f[1],m=new S9({style:Bc({points:u,fill:"#eee"},a),id:"polygon-".concat(h)}),b=new VA({style:Bc({x:g,y,text:H.isFunction(l)?l(p,v):(v/p*100).toFixed(2)+"%"},s),id:"text-".concat(h)});e.appendChild(m),e.appendChild(b)})},r.prototype.update=function(){this.clear(),this.drawConversionTag()},r.prototype.destroy=function(){this.clear()},r.tag="ConversionTag",r}(UA),sh=32,wb=16,_b=48,T9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jo=function(){return jo=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},jo.apply(this,arguments)},P9=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e},M9=function(t){T9(r,t);function r(e,n){return t.call(this,e,n,{type:r.tag})||this}return r.prototype.render=function(){this.drawText()},r.prototype.getBidirectionalBarAxisTextLayout=function(){var e=this.attributes.layout,n=e==="vertical",i=this.getElementsLayout(),a=n?H.uniqBy(i,"x"):H.uniqBy(i,"y"),o=["title"],s=[],l=this.chart.getContext().views,c=H.get(l,[0,"layout"]),u=c.width,f=c.height;return a.forEach(function(d){var h=d.x,p=d.y,v=d.height,g=d.width,y=d.data,m=d.key,b=H.get(y,o);n?s.push({x:h+g/2,y:f,text:b,key:m}):s.push({x:u,y:p+v/2,text:b,key:m})}),H.uniqBy(s,"text").length!==s.length&&(s=Object.values(H.groupBy(s,"text")).map(function(d){var h,p=d.reduce(function(v,g){return v+(n?g.x:g.y)},0);return jo(jo({},d[0]),(h={},h[n?"x":"y"]=p/d.length,h))})),s},r.prototype.transformLabelStyle=function(e){var n={},i=/^label[A-Z]/;return Object.keys(e).forEach(function(a){i.test(a)&&(n[a.replace("label","").replace(/^[A-Z]/,function(o){return o.toLowerCase()})]=e[a])}),n},r.prototype.drawText=function(){var e=this,n=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,a=i.layout,o=i.labelFormatter,s=P9(i,["layout","labelFormatter"]);n.forEach(function(l){var c=l.x,u=l.y,f=l.text,d=l.key,h=new VA({style:jo({x:c,y:u,text:H.isFunction(o)?o(f):f,wordWrap:!0,wordWrapWidth:a==="horizontal"?sh*2:120,maxLines:2,textOverflow:"ellipsis"},e.transformLabelStyle(s)),id:"text-".concat(d)});e.appendChild(h)})},r.prototype.destroy=function(){this.clear()},r.prototype.update=function(){this.destroy(),this.drawText()},r.tag="BidirectionalBarAxisText",r}(UA),C9={ConversionTag:A9,BidirectionalBarAxisText:M9},L9=function(){function t(r,e){this.container=new Map,this.chart=r,this.config=e,this.init()}return t.prototype.init=function(){var r=this;oh.forEach(function(e){var n,i=e.key,a=e.shape,o=r.config[i];if(o){var s=new C9[a](r.chart,o),l=r.chart.getContext().canvas;l.appendChild(s),r.container.set(i,s)}else(n=r.container.get(i))===null||n===void 0||n.clear()})},t.prototype.update=function(){var r=this;this.container.size&&oh.forEach(function(e){var n=e.key,i=r.container.get(n);i?.update()})},t.prototype.destroy=function(){this.container.forEach(function(r){r.destroy()}),this.container.clear()},t}(),N9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),ka=function(){return ka=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ka.apply(this,arguments)},Sb="data-chart-source-type",Yt=function(t){N9(r,t);function r(e,n){var i=t.call(this)||this;return i.eventListeners=[],i.bindedEvents=!1,i.container=typeof e=="string"?document.getElementById(e):e,i.options=i.mergeOption(n),i.createG2(),i.bindEvents(),i}return r.prototype.getChartOptions=function(){return ka(ka({},H.pick(this.options,y9)),{container:this.container})},r.prototype.getSpecOptions=function(){return this.type==="base"||this[m9]?ka(ka({},this.options),this.getChartOptions()):this.options},r.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new d9(this.getChartOptions()),this.container.setAttribute(Sb,"Ant Design Charts")},r.prototype.bindEvents=function(){var e=this;if(this.chart){var n=function(i){i?.type&&e.emit(i.type,i)};this.chart.on("*",n),this.eventListeners.push(function(){var i;(i=e.chart)===null||i===void 0||i.off("*",n)})}},r.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},r.prototype.getDefaultOptions=function(){},r.prototype.render=function(){var e=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){e.annotation?e.annotation.update():e.annotation=new L9(e.chart,e.options),e.bindSizeSensor()})},r.prototype.update=function(e){this.options=this.mergeOption(e)},r.prototype.mergeOption=function(e){return ai({},this.getBaseOptions(),this.getDefaultOptions(),e)},r.prototype.changeData=function(e){this.chart.changeData(e)},r.prototype.changeSize=function(e,n){this.chart.changeSize(e,n)},r.prototype.destroy=function(){this.eventListeners.forEach(function(e){return e()}),this.eventListeners=[],this.annotation&&typeof this.annotation.destroy=="function"&&this.annotation.destroy(),this.annotation=null,this.chart.destroy(),this.off(),this.bindedEvents=!1,this.container.removeAttribute(Sb)},r.prototype.execAdaptor=function(){var e=this.getSchemaAdaptor();e({chart:this.chart,options:this.options})},r.prototype.triggerResize=function(){this.chart.forceFit()},r.prototype.bindSizeSensor=function(){var e=this;if(!this.bindedEvents){var n=this.options.autoFit,i=n===void 0?!0:n;if(i){var a=function(){e.annotation&&e.annotation.update()};this.chart.on(Vt.AFTER_CHANGE_SIZE,a),this.eventListeners.push(function(){var o;(o=e.chart)===null||o===void 0||o.off(Vt.AFTER_CHANGE_SIZE,a)}),this.bindedEvents=!0}}},r}(lv),R9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),I9=function(t){R9(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="base",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return function(e){return e}},r}(Yt),lh=function(){return lh=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},lh.apply(this,arguments)};function j9(t){var r=t.options,e=r.stack,n=r.tooltip,i=r.xField;if(!e)return t;var a=Dc.map(function(s){return s.type}).filter(function(s){return!!s}),o=!1;return a.forEach(function(s){r[s]&&(o=!0,H.set(r,[s,"stack"],lh({y1:"y"},typeof e=="object"?e:{})))}),o&&!H.isBoolean(n)&&!n&&H.set(r,"tooltip",{title:i,items:[{channel:"y"}]}),t}function Ce(t){return H.flow(j9)(t)}function D9(t){var r=t.options.layout,e=r===void 0?"horizontal":r;return t.options.coordinate.transform=e!=="horizontal"?void 0:[{type:"transpose"}],t}function $9(t){D9(t);var r=t.options.layout,e=r===void 0?"horizontal":r;return t.options.children.forEach(function(n){var i;!((i=n?.coordinate)===null||i===void 0)&&i.transform&&(n.coordinate.transform=e!=="horizontal"?void 0:[{type:"transpose"}])}),t}function F9(t){return H.flow(Ce,qt)(t)}var B9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),z9=function(t){B9(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="area",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return F9},r}(Yt),Ea=function(){return Ea=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ea.apply(this,arguments)};function XA(t){var r=function(e){var n=e.options;H.get(n,"children.length")>1&&H.set(n,"children",[{type:"interval"}]);var i=n.scale,a=n.markBackground,o=n.data,s=n.children,l=n.yField,c=H.get(i,"y.domain",[]);if(a&&c.length&&H.isArray(o)){var u="domainMax",f=o.map(function(d){var h;return Ea(Ea({originData:Ea({},d)},H.omit(d,l)),(h={},h[u]=c[c.length-1],h))});s.unshift(Ea({type:"interval",data:f,yField:u,tooltip:!1,style:{fill:"#eee"},label:!1},a))}return e};return H.flow(r,Ce,qt)(t)}var W9=function(){var t=function(r,e){return function(n){var i=r.fill,a=i===void 0?"#2888FF":i,o=r.stroke,s=r.fillOpacity,l=s===void 0?1:s,c=r.strokeOpacity,u=c===void 0?.2:c,f=r.pitch,d=f===void 0?8:f,h=n[0],p=n[1],v=n[2],g=n[3],y=(p[1]-h[1])/2,m=e.document,b=m.createElement("g",{}),x=m.createElement("polygon",{style:{points:[h,[h[0]-d,h[1]+y],[v[0]-d,h[1]+y],g],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u,inset:30}}),O=m.createElement("polygon",{style:{points:[[h[0]-d,h[1]+y],p,v,[v[0]-d,h[1]+y]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u}}),w=m.createElement("polygon",{style:{points:[h,[h[0]-d,h[1]+y],p,[h[0]+d,h[1]+y]],fill:a,fillOpacity:l-.2}});return b.appendChild(x),b.appendChild(O),b.appendChild(w),b}};jA("shape.interval.bar25D",t)},G9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();W9();var H9=function(t){G9(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Bar",e}return r.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return XA},r}(Yt),Y9=function(){var t=function(r,e){return function(n){var i=r.fill,a=i===void 0?"#2888FF":i,o=r.stroke,s=r.fillOpacity,l=s===void 0?1:s,c=r.strokeOpacity,u=c===void 0?.2:c,f=r.pitch,d=f===void 0?8:f,h=n[1][0]-n[0][0],p=h/2+n[0][0],v=e.document,g=v.createElement("g",{}),y=v.createElement("polygon",{style:{points:[[n[0][0],n[0][1]],[p,n[1][1]+d],[p,n[3][1]+d],[n[3][0],n[3][1]]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u,inset:30}}),m=v.createElement("polygon",{style:{points:[[p,n[1][1]+d],[n[1][0],n[1][1]],[n[2][0],n[2][1]],[p,n[2][1]+d]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u}}),b=v.createElement("polygon",{style:{points:[[n[0][0],n[0][1]],[p,n[1][1]-d],[n[1][0],n[1][1]],[p,n[1][1]+d]],fill:a,fillOpacity:l-.2}});return g.appendChild(m),g.appendChild(y),g.appendChild(b),g}};jA("shape.interval.column25D",t)},V9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Y9();var U9=function(t){V9(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="column",e}return r.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return XA},r}(Yt);function X9(t){var r=function(n){var i=n.options,a=i.children,o=a===void 0?[]:a,s=i.legend;return s&&o.forEach(function(l){if(!H.get(l,"colorField")){var c=H.get(l,"yField");H.set(l,"colorField",function(){return c})}}),n},e=function(n){var i=n.options,a=i.annotations,o=a===void 0?[]:a,s=i.children,l=s===void 0?[]:s,c=i.scale,u=!1;return H.get(c,"y.key")||l.forEach(function(f,d){if(!H.get(f,"scale.y.key")){var h="child".concat(d,"Scale");H.set(f,"scale.y.key",h);var p=f.annotations,v=p===void 0?[]:p;v.length>0&&(H.set(f,"scale.y.independent",!1),v.forEach(function(g){H.set(g,"scale.y.key",h)})),!u&&o.length>0&&H.get(f,"scale.y.independent")===void 0&&(u=!0,H.set(f,"scale.y.independent",!1),o.forEach(function(g){H.set(g,"scale.y.key",h)}))}}),n};return H.flow(r,e,Ce,qt)(t)}var q9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),kb=function(t){q9(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="DualAxes",e}return r.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return X9},r}(Yt);function K9(t){var r=function(a){var o=a.options,s=o.xField,l=o.colorField;return l||H.set(o,"colorField",s),a},e=function(a){var o=a.options,s=o.compareField,l=o.transform,c=o.isTransposed,u=c===void 0?!0:c,f=o.coordinate;return l||(s?H.set(o,"transform",[]):H.set(o,"transform",[{type:"symmetryY"}])),!f&&u&&H.set(o,"coordinate",{transform:[{type:"transpose"}]}),a},n=function(a){var o=a.options,s=o.compareField,l=o.seriesField,c=o.data,u=o.children,f=o.yField,d=o.isTransposed,h=d===void 0?!0:d;if(s||l){var p=Object.values(H.groupBy(c,function(v){return v[s||l]}));u[0].data=p[0],u.push({type:"interval",data:p[1],yField:function(v){return-v[f]}}),delete o.compareField,delete o.data}return l&&(H.set(o,"type","spaceFlex"),H.set(o,"ratio",[1,1]),H.set(o,"direction",h?"row":"col"),delete o.seriesField),a},i=function(a){var o=a.options,s=o.tooltip,l=o.xField,c=o.yField;return s||H.set(o,"tooltip",{title:!1,items:[function(u){return{name:u[l],value:u[c]}}]}),a};return H.flow(r,e,n,i,Ce,qt)(t)}var Z9=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Q9=function(t){Z9(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="column",e}return r.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return K9},r}(Yt);function J9(t){return H.flow(Ce,qt)(t)}var tK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),eK=function(t){tK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="line",e}return r.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return J9},r}(Yt),En=function(){return En=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},En.apply(this,arguments)};function nK(t){var r=function(e){var n=e.options,i=n.angleField,a=n.data,o=n.label,s=n.tooltip,l=n.colorField,c=jc(l);if(H.isArray(a)&&a.length>0){var u=a.reduce(function(h,p){return h+p[i]},0);if(u===0){var f=a.map(function(h){var p;return En(En({},h),(p={},p[i]=1,p))});if(H.set(n,"data",f),o){var d=l===H.get(o,"text");H.set(n,"label",En(En({},o),d?{}:{formatter:function(){return 0}}))}s!==!1&&(H.isFunction(s)?H.set(n,"tooltip",function(h,p,v){var g;return s(En(En({},h),(g={},g[i]=0,g)),p,v.map(function(y){var m;return En(En({},y),(m={},m[i]=0,m))}))}):H.set(n,"tooltip",En(En({},s),{items:[function(h,p,v){return{name:c(h,p,v),value:0}}]})))}else H.set(n,"tooltip",s),H.set(n,"label",o)}return e};return H.flow(r,qt)(t)}var rK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),iK=function(t){rK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="pie",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return nK},r}(Yt);function aK(t){return H.flow(Ce,qt)(t)}var oK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),sK=function(t){oK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="scatter",e}return r.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return aK},r}(Yt);function lK(t){var r=function(e){return H.set(e,"options.coordinate",{type:H.get(e,"options.coordinateType","polar")}),e};return H.flow(r,qt)(t)}var cK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),uK=function(t){cK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="radar",e}return r.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return lK},r}(Yt);function fK(t){var r=function(e){var n=e.options,i=n.yField,a=n.children,o=n.style,s=o===void 0?{}:o,l=n.lineStyle,c=l===void 0?{}:l,u=i[0],f=i[1],d=i[2],h=i[3];return H.set(a,[0,"yField"],[d,h]),H.set(a,[0,"style"],c),H.set(a,[1,"yField"],[u,f]),H.set(a,[1,"style"],s),delete n.yField,delete n.lineStyle,delete n.style,e};return H.flow(r,qt)(t)}var dK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),hK=["#26a69a","#999999","#ef5350"],pK=function(t){dK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="stock",e}return r.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:hK},y:{nice:!0}},children:[{type:"link"},{type:"interval"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return fK},r}(Yt);function vK(t){return H.flow(Ce,qt)(t)}var gK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),yK=function(t){gK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyLine",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],padding:0,margin:0,tooltip:!1}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return vK},r}(Yt);function mK(t){return H.flow(Ce,qt)(t)}var bK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xK=function(t){bK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyArea",e}return r.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return mK},r}(Yt);function OK(t){return H.flow(Ce,qt)(t)}var wK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_K=function(t){wK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyColumn",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return OK},r}(Yt),ch=function(){return ch=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ch.apply(this,arguments)};function SK(t){var r=function(e){var n=e.options,i=n.percent,a=n.color,o=a===void 0?[]:a;if(!i)return e;var s={scale:{color:{range:o.length?o:[]}},data:[1,i]};return Object.assign(n,ch({},s)),e};return H.flow(r,Ce,qt)(t)}var kK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),EK=function(t){kK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyProgress",e}return r.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(e){return e},color:function(e,n){return n}}}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return SK},r}(Yt),uh=function(){return uh=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},uh.apply(this,arguments)};function AK(t){var r=function(n){var i=n.options,a=i.radius,o=a===void 0?.8:a;return H.set(n,"options.coordinate.innerRadius",o),n},e=function(n){var i=n.options,a=i.percent,o=i.color,s=o===void 0?[]:o;if(!a)return n;var l={scale:{color:{range:s.length?s:[]}},data:[1,a]};return Object.assign(i,uh({},l)),n};return H.flow(r,e,Ce,qt)(t)}var TK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),PK=function(t){TK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="TinyRing",e}return r.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(e){return e},color:function(e,n){return n}}}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return AK},r}(Yt);function MK(t){return H.flow(qt)(t)}var CK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),LK=function(t){CK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="rose",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return MK},r}(Yt),Hf="__start__",Xr="__end__",fh="__waterfall_value__",zc=function(){return zc=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},zc.apply(this,arguments)},NK=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))};function RK(t){var r=function(i){var a=i.options,o=a.data,s=o===void 0?[]:o,l=a.yField;return s.length&&(s.reduce(function(c,u,f){var d,h=jc(l),p=h(u,f,s);if(f===0||u.isTotal)u[Hf]=0,u[Xr]=p,u[fh]=p;else{var v=(d=c[Xr])!==null&&d!==void 0?d:h(c,f,s);u[Hf]=v,u[Xr]=v+p,u[fh]=c[Xr]}return u},[]),Object.assign(a,{yField:[Hf,Xr]})),i},e=function(i){var a=i.options,o=a.data,s=o===void 0?[]:o,l=a.xField,c=a.children,u=a.linkStyle,f=NK([],s,!0);return f.reduce(function(d,h,p){return p>0&&(h.x1=d[l],h.x2=h[l],h.y1=d[Xr]),h},[]),f.shift(),c.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:f,style:zc({stroke:"#697474"},u),label:!1,tooltip:!1}),i},n=function(i){var a=i.options,o=a.data,s=o===void 0?[]:o,l=a.connector;return l&&H.set(a,"connector",zc({xField:l.reverse?["x2","x1"]:["x1","x2"],yField:l.reverse?["y2","y1"]:["y1","y2"],data:[{x1:s[0].x,y1:s[0][Xr],x2:s[s.length-1].x,y2:s[s.length-1][Xr]}]},H.isObject(l)?l:{})),i};return H.flow(r,e,Ce,n,qt)(t)}var IK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),jK=function(t){IK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="waterfall",e}return r.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:fh,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return RK},r}(Yt);function DK(t){var r=function(e){var n=e.options,i=n.data,a=n.binNumber,o=n.binWidth,s=n.children,l=n.channel,c=l===void 0?"count":l,u=H.get(s,"[0].transform[0]",{});return H.isNumber(o)?(H.assign(u,{thresholds:H.ceil(H.divide(i.length,o)),y:c}),e):(H.isNumber(a)&&H.assign(u,{thresholds:a,y:c}),e)};return H.flow(r,Ce,qt)(t)}var $K=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),FK=function(t){$K(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Histogram",e}return r.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return DK},r}(Yt);function BK(t){var r=function(n){var i=n.options,a=i.tooltip,o=a===void 0?{}:a,s=i.colorField,l=i.sizeField;return o&&!o.field&&(o.field=s||l),n},e=function(n){var i=n.options,a=i.mark,o=i.children;return a&&(o[0].type=a),n};return H.flow(r,e,Ce,qt)(t)}var zK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),WK=function(t){zK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="heatmap",e}return r.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return BK},r}(Yt);function GK(t){var r=function(e){var n=e.options.boxType,i=n===void 0?"box":n;return e.options.children[0].type=i,e};return H.flow(r,Ce,qt)(t)}var HK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),YK=function(t){HK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="box",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return GK},r}(Yt),VK=function(t){var r=t.options,e=r.data,n=[{type:"custom",callback:function(a){return{links:a}}}];if(H.isArray(e))e.length>0?H.set(r,"data",{value:e,transform:n}):delete r.children;else if(H.get(e,"type")==="fetch"&&H.get(e,"value")){var i=H.get(e,"transform");H.isArray(i)||H.set(e,"transform",n)}return t};function UK(t){return H.flow(Fu,VK,Ce,qt)(t)}var XK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),qK=function(t){XK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="sankey",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return UK},r}(Yt),Yi=function(){return Yi=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Yi.apply(this,arguments)},zl=["#f0efff","#5B8FF9","#3D76DD"];function Yf(t,r,e,n){n===void 0&&(n=!0);var i=0,a=!1,o=H.map(t,function(s){var l,c,u=H.get(s,[r]);if(H.isNil(u))return[];if(H.isString(u)){var f=Number(u);return isNaN(f)?[]:(l={},l[e]=s[e],l[r]=f,l)}return H.isArray(u)?(a=!0,i=Math.max(i,u.length),H.map(n?u.sort(function(d,h){return h-d}):u,function(d,h){var p;return p={},p[e]=s[e],p[r]=d,p.index=h,p})):(i=Math.max(1,i),c={},c[e]=s[e],c[r]=u,c)}).flat();return a?[o.map(function(s){return Yi({index:0},s)}),i]:[o,i]}function Vf(t,r){return new Array(t).fill("").map(function(e,n){return H.isArray(r)?r[n%r.length]:r})}function KK(t){var r=function(i){var a=i.options,o=a.color,s=a.rangeField,l=s===void 0?"ranges":s,c=a.measureField,u=c===void 0?"measures":c,f=a.targetField,d=f===void 0?"targets":f,h=a.xField,p=h===void 0?"title":h,v=a.mapField,g=a.data,y=Yf(g,l,p),m=y[0],b=y[1],x=Yf(g,u,p,!1),O=x[0],w=x[1],_=Yf(g,d,p,!1),S=_[0],k=_[1],E=H.get(o,[l],zl[0]),A=H.get(o,[u],zl[1]),T=H.get(o,[d],zl[2]),P=[Vf(b,E),Vf(w,A),Vf(k,T)].flat();return a.children=H.map(a.children,function(N,I){var R=[m,O,S][I],C=[l,u,d][I];return Yi(Yi({},N),{data:R,encode:Yi(Yi({},N.encode||{}),{x:p,y:C,color:function(L){var M=L.index,j=H.isNumber(M)?"".concat(C,"_").concat(M):C;return v?H.get(v,[C,M],j):j}})})}),H.set(a,"scale.color.range",P),H.get(a,"legend.color")&&H.isNil(H.get(a,"legend.color.itemMarker"))&&(a.legend.color.itemMarker=function(N){return v&&H.includes(v?.[d],N)||N?.replace(/\_\d$/,"")===d?"line":"square"}),i},e=function(i){var a=i.options.transpose,o=a===void 0?!0:a;return o||H.set(i,"options.children[2].shapeField","hyphen"),i},n=function(i){var a=i.options,o=a.range,s=o===void 0?{}:o,l=a.measure,c=l===void 0?{}:l,u=a.target,f=u===void 0?{}:u,d=a.children;return a.children=[s,c,f].map(function(h,p){return ai(d[p],h)}),i};return H.flow(r,e,n,$9,qt)(t)}var ZK=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),QK=function(t){ZK(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="bullet",e}return r.getDefaultOptions=function(){return{type:"view",scale:{color:{range:zl}},legend:{color:{itemMarker:function(e){return e==="targets"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30,zIndex:-2},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20,zIndex:-1},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return KK},r}(Yt);function JK(t){var r=function(e){var n=e.options.data;return e.options.data={value:n},e};return H.flow(r,Ce,qt)(t)}var t7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),e7=function(t){t7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Gauge",e}return r.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return JK},r}(Yt);function n7(t){var r=function(e){var n=e.options.percent;return H.isNumber(n)&&(H.set(e,"options.data",n),delete e.options.percent),e};return H.flow(r,Ce,qt)(t)}var r7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),i7=function(t){r7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Liquid",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return n7},r}(Yt);function a7(t){return H.flow(Ce,qt)(t)}var o7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),s7=function(t){o7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="WordCloud",e}return r.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return a7},r}(Yt);function l7(t){return H.flow(Fu,Ce,qt)(t)}var c7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),u7=function(t){c7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="treemap",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return l7},r}(Yt),Zr=function(){return Zr=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Zr.apply(this,arguments)},f7=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function d7(t){var r=function(i){var a=i.options,o=a.startAngle,s=a.maxAngle,l=a.coordinate,c=H.isNumber(o)?o/(2*Math.PI)*360:-90,u=H.isNumber(s)?(Number(s)+c)/180*Math.PI:Math.PI;return H.set(i,["options","coordinate"],Zr(Zr({},l),{endAngle:u,startAngle:o??-Math.PI/2})),i},e=function(i){var a=i.options,o=a.tooltip,s=a.xField,l=a.yField,c=jc(s),u=jc(l);return o||H.set(a,"tooltip",{title:!1,items:[function(f,d,h){return{name:c(f,d,h),value:u(f,d,h)}}]}),i},n=function(i){var a=i.options,o=a.markBackground,s=a.children,l=a.scale,c=a.coordinate,u=a.xField,f=H.get(l,"y.domain",[]);if(o){var d=o.style,h=f7(o,["style"]);s.unshift(Zr({type:"interval",xField:u,yField:f[f.length-1],style:Zr({fillOpacity:.4,fill:"#e0e4ee"},d),coordinate:Zr(Zr({},c),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},h))}return i};return H.flow(r,e,n,Ce,qt)(t)}var h7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),p7=function(t){h7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="radial",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return d7},r}(Yt);function v7(t){return H.flow(Fu,qt)(t)}var g7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),y7=function(t){g7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="CirclePacking",e}return r.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack",encode:{color:"depth"}}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return v7},r}(Yt),Wc=function(){return Wc=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Wc.apply(this,arguments)};function Uf(t,r){return t||r}function m7(t){var r=function(e){var n=e.options,i=n.xField,a=n.yField,o=n.colorField,s=n.seriesField,l=n.children,c=l?.map(function(u){return Wc(Wc({},u),{xField:i,yField:a,seriesField:Uf(s,o),colorField:Uf(o,s),data:u.type==="density"?{transform:[{type:"kde",field:a,groupBy:[i,Uf(s,o)]}]}:u.data})}).filter(function(u){return n.box||u.type==="density"});return H.set(n,"children",c),delete n.box,e};return H.flow(r,Ce,qt)(t)}var b7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),x7=function(t){b7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="violin",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return m7},r}(Yt),Do=function(){return Do=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Do.apply(this,arguments)},O7=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))};function w7(t){var r=function(a){var o=a.options,s=o.yField,l=o.children;return l.forEach(function(c,u){H.set(c,"yField",s[u])}),a},e=function(a){var o=a.options,s=o.yField,l=o.children,c=o.data;if(H.isPlainObject(c))return a;var u=H.isArray(H.get(c,[0]))?c:[c,c];return l.forEach(function(f,d){H.set(f,"data",O7([],u[d].map(function(h){return Do({groupKey:s[d]},h)}),!0))}),a},n=function(a){var o=a.options,s=o.yField,l=s[0],c=s[1],u=o.tooltip;return u||H.set(o,"tooltip",{items:[{field:l,value:l},{field:c,value:c}]}),a},i=function(a){var o=a.options,s=o.children,l=o.layout,c=o.coordinate.transform,u=o.paddingBottom,f=u===void 0?_b:u,d=o.paddingLeft,h=d===void 0?_b:d,p=o.axis;H.set(o,"axisText",Do(Do({},p?.x||{}),{layout:l}));var v=s[0],g=s[1];if(l==="vertical")H.set(o,"direction","col"),H.set(o,"paddingLeft",h),H.set(o,"coordinate.transform",c.filter(function(O){return O.type!=="transpose"})),H.set(v,"paddingBottom",wb),H.set(g,"paddingTop",wb),H.set(g,"axis.x.position","top"),H.set(g,"scale.y.range",[0,1]);else{H.set(o,"paddingBottom",f),H.set(v,"scale.y.range",[0,1]);var y=v.paddingRight,m=y===void 0?sh:y,b=g.paddingLeft,x=b===void 0?sh:b;H.set(v,"paddingRight",m),H.set(v,"axis.x.position","right"),H.set(g,"paddingLeft",x)}return a};return H.flow(r,e,n,i,Ce,qt)(t)}var _7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),S7=function(t){_7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="BidirectionalBar",e}return r.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return w7},r}(Yt),oi;(function(t){t.color="key",t.d="path"})(oi||(oi={}));function k7(t){var r=function(e){var n=e.options,i=n.data,a=n.setsField,o=n.sizeField;return H.isArray(i)&&(H.set(n,"data",{type:"inline",value:i,transform:[{type:"venn",sets:a,size:o,as:[oi.color,oi.d]}]}),H.set(n,"colorField",oi.color),H.set(n,["children","0","encode","d"],oi.d)),e};return H.flow(r,qt)(t)}var E7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),A7=function(t){E7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="venn",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:oi.color,d:oi.d}}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return k7},r}(Yt);function T7(t){return H.flow(Fu,qt)(t)}var P7=function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),M7=function(t){P7(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.type="Sunburst",e}return r.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},r.prototype.getDefaultOptions=function(){return r.getDefaultOptions()},r.prototype.getSchemaAdaptor=function(){return T7},r}(Yt),C7={Base:I9,Line:eK,Column:U9,Pie:iK,Area:z9,Bar:H9,DualAxes:kb,Funnel:Q9,Scatter:sK,Radar:uK,Rose:LK,Stock:pK,TinyLine:yK,TinyArea:xK,TinyColumn:_K,TinyProgress:EK,TinyRing:PK,Waterfall:jK,Histogram:FK,Heatmap:WK,Box:YK,Sankey:qK,Bullet:QK,Gauge:e7,Liquid:i7,WordCloud:s7,Treemap:u7,RadialBar:p7,CirclePacking:y7,Violin:x7,BidirectionalBar:S7,Venn:A7,Mix:kb,Sunburst:M7},$o=function(){return $o=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},$o.apply(this,arguments)},Eb=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e},L7=Cn.forwardRef(function(t,r){var e=t.chartType,n=e===void 0?"Base":e,i=Eb(t,["chartType"]),a=i.containerStyle,o=a===void 0?{height:"inherit",flex:1}:a,s=i.containerAttributes,l=s===void 0?{}:s,c=i.className,u=i.loading,f=i.loadingTemplate,d=i.errorTemplate,h=i.onReady,p=Eb(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate","onReady"]),v=Z8(C7[n],$o($o({},p),{onReady:function(y){r&&(typeof r=="function"?r(y):r.current=y),h?.(y)}})),g=v.container;return Un.createElement(U8,{errorTemplate:d},u&&Un.createElement(Y8,{loadingTemplate:f,theme:i.theme,loading:u}),Un.createElement("div",$o({className:c,style:o,ref:g},l)))}),N7=Cn.createContext({});function R7(){return Cn.useContext(N7)}var dh=function(){return dh=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},dh.apply(this,arguments)};function I7(t){var r=t.yField,e=t.data,n=H.isArray(e)&&e.length>0&&H.isString(r)&&!H.get(t,"scale.y.domainMax"),i=Object.isFrozen(t)?dh({},t):t;return n&&e.reduce(function(a,o){return a+o[r]},0)===0?H.set(i,"scale.y.domainMax",1):n&&e.reduce(function(a,o){return a+o[r]},0)!==0&&H.set(i,"scale.y.domainMax",void 0),i}var Fo=function(){return Fo=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Fo.apply(this,arguments)};function Bu(t){return t.charAt(0).toLowerCase()+t.slice(1),Cn.forwardRef(function(r,e){var n,i,a=R7(),o=Cn.useMemo(function(){return t.charAt(0).toLowerCase()+t.slice(1)},[t]),s=H.flow([I7])(r),l=Fo(Fo({},(n=a?.common)!==null&&n!==void 0?n:{}),(i=a?.[o])!==null&&i!==void 0?i:{});return Un.createElement(L7,Fo({},l,s,{chartType:t,ref:e}))})}var q7=Bu("Bar"),K7=Bu("Column"),Z7=Bu("Line"),Q7=Bu("Pie");export{q7 as B,K7 as C,Z7 as L,Q7 as P};
