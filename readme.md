# 工装车管理系统

## 目录结构

```
项目根目录/
├── server/                # 后端服务代码
│   ├── main.go            # 后端主入口
│   ├── license/           # 授权校验逻辑
│   │   └── license.go     # 授权校验代码（机器码+试用期）
│   └── tools/             # 工具目录
│       └── gen_license.go # 授权文件生成工具
├── web/                   # 前端代码
├── static/                # 静态资源
├── docker-compose.yml     # Docker 编排
├── Dockerfile             # Docker 构建
├── .gitignore             # Git 忽略文件
└── readme.md              # 项目说明
```

## 授权机制说明

本系统采用**机器码绑定+试用期**的授权机制，防止代码被非法复制和长期使用。

### 1. 授权文件生成（仅开发者操作）

1. 让甲方提供目标电脑的 MAC 地址。
2. 进入 `server/tools/` 目录，运行：
   ```bash
   go run gen_license.go --mac=甲方MAC地址 --days=30 --secret=your_secret_key
   ```
   - `--mac`：甲方电脑的 MAC 地址
   - `--days`：试用天数（如 30）
   - `--secret`：签名密钥（需与主程序一致）
3. 生成 `license.json` 文件，将其与后端可执行文件一起交付甲方。

### 2. 甲方部署与运行

1. 将 `license.json` 和后端可执行文件放在同一目录。
2. 启动后端服务，程序会自动校验授权文件：
   - 仅允许指定电脑（MAC 地址）运行
   - 超过试用期自动失效
   - 授权文件被篡改会拒绝运行

### 3. 续期或更换电脑

- 需重新生成新的 `license.json`，流程同上。

## 常见问题

- **Q: 授权文件丢失/损坏怎么办？**
  A: 重新生成并下发新的 `license.json`。
- **Q: 甲方更换电脑怎么办？**
  A: 需提供新电脑的 MAC 地址，重新生成授权文件。
- **Q: 试用期到期后怎么办？**
  A: 需联系乙方续期，生成新授权文件。
- **Q: 授权文件可以随便改吗？**
  A: 不可以，文件被改动后签名校验不通过，程序无法运行。

## 其他说明

- `.gitignore` 已配置常见依赖、构建产物、敏感文件忽略。
- 前端只需打包后交付静态资源，无需授权保护。
- 如需批量授权、自动化脚本等可联系开发者。

---

如有疑问请联系乙方技术支持。
